# ğŸ¦€ï¸Rust ç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ

ä½¿ç”¨ Rust å†™äº†ä¸€ä¸ªç§»åŠ¨ç«¯çš„è·¨å¹³å°æ—¥å¿—åº“ï¼š[s1rius/ezlog: A cross-platform file logging library (github.com)](https://github.com/s1rius/ezlog)

#### å¤§å‹å…¬å¸åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨ Rust

- Google åœ¨ 2021 å¹´å°† Rust å¼•å…¥ Android [Rust in the Android platform](https://security.googleblog.com/2021/04/rust-in-android-platform.html)
- Mozilla ä½¿ç”¨ Rust ç¼–å†™è·¨å¹³å°åº”ç”¨æœåŠ¡ç»„ä»¶[Firefox Application Services](https://github.com/mozilla/application-services)
- [é£ä¹¦å®¢æˆ·ç«¯é UI éƒ¨åˆ†ä½¿ç”¨ Rust è·¨å¹³å°å®ç°](https://www.infoq.cn/article/oh79weak7z3s2xavo*bv)

#### ä¸ªäººå¼€å‘è€…åœ¨ç§»åŠ¨ç«¯çš„å°è¯• Rust çš„æ¡ˆä¾‹

- [Rust & cross-platform mobile development](https://medium.com/swlh/rust-cross-platform-mobile-development-9117a67ac9b7)
- [RustDesk è¿œç¨‹æ¡Œé¢åº”ç”¨](https://github.com/rustdesk/rustdesk)
- [æ·±åº¦æ¢ç´¢ï¼šå‰ç«¯ä¸­çš„åç«¯](https://zhuanlan.zhihu.com/p/347842418)
- [Publish game on Android with Macroquad](https://macroquad.rs/tutorials/android/)
- [Rust on iOS and Mac Catalyst: A Simple, Updated Guide](https://nadim.computer/posts/2022-02-11-maccatalyst.html)

æ›´å¤šçš„æ¡ˆä¾‹æ”¶å½•ï¼Œå¯ä»¥å‚çœ‹è¿™ç¯‡[Rust ç§»åŠ¨å¼€å‘ä¸è·¨å¹³å°æ¨¡å¼æ¢ç©¶](https://zhuanlan.zhihu.com/p/484269271)ã€‚ ä»ä»¥ä¸Šçš„ä¾‹å­æ¥çœ‹ï¼Œå¤§æ¦‚ç‡æ˜¯å¯è¡Œçš„ï¼Œè¿˜è¦å¯¹å…·ä½“çš„éœ€æ±‚è¿›è¡ŒéªŒè¯ã€‚

### UI

[Rust å¼€å‘ æ¢ç´¢ Slint UI 1.5 å®‰å“ (qq.com)](https://mp.weixin.qq.com/s?__biz=Mzg2NTgxNzg3OQ==&mid=2247484143&idx=1&sn=903c65961459daee860bffd5c99602e5&chksm=cfce0c61f8c94b764529048bb02ccd66bcf26c9fdc74c7b63599f380c5a52412d641bf5918c4&scene=132&exptype=timeline_recommend_article_extendread_samebiz&show_related_article=1&subscene=0&scene=132#wechat_redirect)

### é¡¹ç›®ç®€è¿°

#### ä¸»è¦åŠŸèƒ½

- ä½¿ç”¨ mmap åšæ–‡ä»¶æ˜ å°„
- è®¤è¯åŠ å¯†
- zlib å‹ç¼©
- æ—¥å¿—å›æ
- æ—¥å¿—æ¸…ç†
- å‘½ä»¤è¡Œè§£æå·¥å…·

#### å¯è¡Œæ€§éªŒè¯

å…ˆæŸ¥æ‰¾ä¸»è¦åŠŸèƒ½æ˜¯å¦æœ‰å¯¹åº”çš„ Rust å¼€æºå®ç°ã€‚

- [memmap2](https://github.com/RazrFalcon/memmap2-rs)
- [aead](https://github.com/RustCrypto/AEADs)
- [flate2](https://github.com/rust-lang/flate2-rs)

å¼€æºç¤¾åŒºæ—©å·²å®ç°å¥½äº†ï¼šï¼‰
å¤åˆ¶å¼€æºåº“ä¸­çš„ç¤ºä¾‹ï¼Œå€ŸåŠ©[android-ndk-rs](https://github.com/rust-windowing/android-ndk-rs)ã€‚åœ¨ android çœŸæœºè¿è¡Œï¼ŒæŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼Œç¬¦åˆé¢„æœŸã€‚
é¡¹ç›®ä¸­ä½¿ç”¨`android ndk rs`çš„ä¾‹å­ï¼Œå¯ä»¥æŸ¥çœ‹`examples/android_preview`

**ç¼–è¯‘æˆ APK å¹¶å®‰è£…è¿è¡Œä¸åˆ° 5 ç§’**

```bash
cargo apk run -p ezlog_android_preview
   Compiling ezlog v0.1.2 (ezlog/ezlog-core)
   Compiling ezlog_android_preview v0.1.0 (ezlog/examples/android_preview)
    Finished dev [unoptimized + debuginfo] target(s) in 2.39s
 'lib/arm64-v8a/libezlog_android_preview.so'...
Verifying alignment of ezlog/target/debug/apk/ezlog_android_preview.apk (4)...
      49 AndroidManifest.xml (OK - compressed)
    1020 lib/arm64-v8a/libezlog_android_preview.so (OK)
Verification succesful
Performing Incremental Install
Serving...
All files should be loaded. Notifying the device.
Success
Install command complete in 949 ms
Starting: Intent { act=android.intent.action.MAIN cmp=rust.ezlog_android_preview/android.app.NativeActivity }
```

#### é¡¹ç›®ç»“æ„

```bash
â”œâ”€â”€ android
â”‚   â”œâ”€â”€ app # android ç¤ºä¾‹å·¥ç¨‹
â”‚   â””â”€â”€ lib-ezlog # EZLog android åº“
â”œâ”€â”€ examples # rust ç¤ºä¾‹
â”œâ”€â”€ ezlog-cli # å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ ezlog-core # æ ¸å¿ƒåº“
â”œâ”€â”€ ios
â”‚   â”œâ”€â”€ EZLog # EZLog iOS åº“
â”‚   â”œâ”€â”€ demo # iOS ç¤ºä¾‹å·¥ç¨‹
â”‚   â””â”€â”€ framework # EZLog XCFramework
```

### å¼€å‘ä¸­ç¢°åˆ°çš„é—®é¢˜åŠè§£å†³

#### iOS

iOS ç«¯çš„å¼€å‘æµç¨‹ä¸º

1. Rust ç¼–ç 
2. é€šè¿‡ [cbindgen](https://github.com/eqrion/cbindgen) ç”Ÿæˆå¤´æ–‡ä»¶
3. ç¼–è¯‘å¤šå¹³å°é™æ€åº“
4. æŠŠé™æ€åº“å’Œå¤´æ–‡ä»¶æ‰“åŒ…æˆ XCFrameworkï¼Œå¹¶ä¾èµ–
5. å®ç° Swift ç»‘å®š
6. æµ‹è¯•ï¼Œå‘å¸ƒ

åœ¨å¯¹æ¯”äº†å¤šç§ä¾èµ–é™æ€åº“çš„æ–¹å¼ä¹‹åï¼Œå‘ç°[XCFramework](https://help.apple.com/xcode/mac/11.4/%23/dev6f6ac218b)å¯¹å¤šå¹³å°çš„æ”¯æŒï¼Œæ›´é€‚åˆè¿™ä¸ªé¡¹ç›®ã€‚æ›´å¤š XCFramework çš„ç›¸å…³èµ„æ–™å¯ä»¥çœ‹è¿™å‡ ç¯‡æ–‡ç« [distributing universal ios frameworks as xcframeworks using cocoapods](https://anuragajwani.medium.com/distributing-universal-ios-frameworks-as-xcframeworks-using-cocoapods-699c70a5c961), [Static libraries into XCFramework](https://developer.apple.com/forums/thread/678075%3FanswerId%3D671170022%23671170022),[From Rust To Swift](https://betterprogramming.pub/from-rust-to-swift-df9bde59b7cd)ã€‚åœ¨é¡¹ç›®ä¸­çš„æ„å»ºä½¿ç”¨ï¼Œå¯ä»¥å‚çœ‹`ios/b_ios.sh`è„šæœ¬ã€‚

Swift ä¸ C çš„äº’ç›¸è°ƒç”¨ï¼Œå¾ˆå¤šæ¦‚å¿µéœ€è¦äº†è§£ã€‚åœ¨è¢«`Unmanaged`, `@escaping`,`@convention`,`UnsafePointer`,`UnsafeBufferPointer`, `UnsafeMutableRawPointer` æŠ˜ç£¨è®¸ä¹…ä¹‹åï¼Œç»ˆäºå¯ä»¥åœ¨ Swift ä¸­æ‹¿åˆ° Rust çš„å›è°ƒäº†ã€‚

Cocoapods æ”¯æŒ XCFrameworkï¼Œå°è¯•äº† SPMï¼Œæ‰¾ä¸åˆ°ç¬¦å·çš„é—®é¢˜æ²¡æœ‰è§£å†³ã€‚æš‚æ—¶æ”¾ä¸€æ”¾ã€‚åœ¨èŠ±è´¹äº†ä»¥å¤©è®¡çš„æ—¶é—´æˆæœ¬ä¹‹åï¼Œç»ˆäºåœ¨ Cocoapods æˆåŠŸå‘å¸ƒã€‚

å¯¹æ¯”ä¸€ä¸‹ä¸‰ä¸ªåŒ…ç®¡ç†å·¥å…·çš„ä»æ³¨å†Œåˆ°å‘å¸ƒçš„æ—¶é—´æˆæœ¬ï¼Œä»ç®€å•åˆ°ç¹ççš„æ’åºæ˜¯ Cargo < Cocoapods < Mavenã€‚

éšç€è‹¹æœåœ¨ XCode14 ä¸­åºŸå¼ƒäº† bitcodeï¼ŒRust åœ¨ iOS/MacOS ä¸­æœ€å¤§çš„[ç—›ç‚¹](https://github.com/rust-lang/rust/issues/35968)ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚

#### android FFI

android ä¸Š Rust ä¸ JNI çš„äº’è°ƒå’Œ C/C++çš„åŒºåˆ«ä¸å¤§ã€‚åŒæ ·è¦è€ƒè™‘å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…¨å±€çš„ JavaVM å¼•ç”¨ï¼Œç±»åŠ è½½åˆ° JVMï¼Œnative çº¿ç¨‹åœ¨ JVM çš„ attach å’Œ detachï¼Œè¯¦ç»†çš„ç¤ºä¾‹ä»£ç å¯ä»¥æŸ¥çœ‹[jni-rs](https://github.com/jni-rs/jni-rs/blob/master/example/mylib/src/lib.rs)ã€‚

å¾—ç›Šäº Rust çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä¸€äº›å†…å­˜æ¸…ç†æ“ä½œ Rust å·²ç»å¤„ç†äº†ï¼Œä¸éœ€è¦æˆ‘ä»¬å†æ‰‹åŠ¨çš„å¤„ç†ã€‚

```rust
impl<'a: 'b, 'b> Drop for JavaStr<'a, 'b> {
    fn drop(&mut self) {
        match self.env.release_string_utf_chars(self.obj, self.internal) {
            Ok(()) => {}
            Err(e) => warn!("error dropping java str: {}", e),
        }
    }
}
```

#### android åŠ¨æ€åº“å¤§å°

å› ä¸ºç”¨æˆ·å¯¹ RAMï¼Œæµé‡çš„å…³å¿ƒå’Œ Android ç‰ˆæœ¬å‘å‰å…¼å®¹åŸå› ï¼Œandroid å¼€å‘ä¸­å¯¹åŒ…ä½“ç§¯å¤§å°æ˜¯æ•æ„Ÿçš„ã€‚ å¯¹äº Rust ç¼–è¯‘äº§ç‰©ä½“ç§¯è¾ƒå¤§çš„é—®é¢˜ï¼Œåœ¨æŸ¥é˜…äº†[Minimizing Rust Binary Size](https://github.com/johnthagen/min-sized-rust)æ–‡ç« åï¼Œåœ¨ release æ¨¡å¼å¼€å¯ä¼˜åŒ–ã€‚

æˆ‘ä»¬å°† XLogï¼ŒLogan éƒ½åŠ å…¥åˆ° Demo çš„ä¾èµ–ä¸­ï¼Œå¯¹æ¯” release apk ä¸­çš„ 64 ä½åŠ¨æ€åº“å¤§å°ï¼Œå¦‚å›¾æ‰€ç¤º

![android_so_size.png](./Rustç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ.assets/mark1512000.webp)

|         | EZLog(0.1.2) | EZLog(with backtrace) | XLog(1.2.5) | XLog(with libc++) | Logan(1.2.4) |
| ------- | ------------ | --------------------- | ----------- | ----------------- | ------------ |
| so å¤§å° | 370.6KB      | 451.6KB               | 277.1KB     | 537KB             | 27.5KB       |

Rust ç¼–è¯‘çš„åŠ¨æ€åº“å¤§å°æ˜¯æœ€å¤§çš„ï¼Œä¸è¿‡ä¹Ÿæ²¡æœ‰å¤ªè¿‡äºå¤¸å¼ ï¼Œéšç€æ‰‹æœºç¡¬ä»¶çš„è¿›ä¸€æ­¥æå‡ï¼Œåº”è¯¥ä¸ä¼šæ˜¯åˆ¶çº¦ Rust åœ¨ android ä¸­åº”ç”¨çš„åŸå› ã€‚

#### å´©æºƒï¼Ÿ

ä¸åŒçš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä¸åŒçš„æ–¹å¼

- åœ¨å¼€å‘ï¼Œæµ‹è¯•é˜¶æ®µï¼Œç”±äºç¼–å†™é”™è¯¯æˆ–è€…ä»£ç æ··æ·†ç­‰é—®é¢˜ï¼Œå¯¼è‡´ç±»ï¼Œæ–¹æ³•æ— æ³•æ‰¾åˆ°çš„æƒ…å†µï¼Œæˆ‘ä»¬å¸Œæœ›ç¨‹åºèƒ½ç›´æ¥å´©æºƒï¼Œå°½æ—©çš„æš´éœ²é—®é¢˜ã€‚
- äº§å“ä¸Šçº¿åï¼Œå› ä¸ºé€‚é…é—®é¢˜æˆ–è€…ç”¨æˆ·æ“ä½œå¯¼è‡´ bug å‡ºç°ï¼Œå¯¼è‡´æŸä¸ªæ¨¡å—çš„ä¸å¯ç”¨ã€‚æˆ‘ä»¬å¸Œæœ›é”™è¯¯åªé™å®šåœ¨è¿™ä¸ªæ¨¡å—ï¼Œä¸å½±å“å…¶ä»–çš„åŠŸèƒ½ï¼Œå¹¶ä¸ŠæŠ¥è¿™ä¸ªé”™è¯¯

Rust çš„é”™è¯¯åˆ†ä¸ºå¯æ¢å¤å’Œä¸å¯æ¢å¤çš„é”™è¯¯ã€‚Rust åˆå§‹åŒ–çº¿ç¨‹çš„ panic ä¼šå¯¼è‡´è¿›ç¨‹çš„é€€å‡ºã€‚ä¸€äº›è§£å†³æ–¹æ³•:

1. åªåœ¨éœ€è¦å´©æºƒæ—¶ä½¿ç”¨ panic å®
2. åœ¨ Clippy ä¸­åŠ å…¥ä½¿ç”¨ unwrap å’Œ except çš„è­¦å‘Š
3. æ›¿æ¢ [start..end] ä¸º get(start..end)
4. FFI ä¸­ catch_unwind

å³ä½¿è‡ªå·±çš„ä»£ç ä¸­æ²¡æœ‰ panic è°ƒç”¨ï¼Œä¾èµ–åº“ä¸­ä¹Ÿå¯èƒ½ä¼šè°ƒç”¨ã€‚æ‰€ä»¥éœ€è¦æä¾›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å´©æºƒæ’æŸ¥çš„èƒ½åŠ›ã€‚

#### å´©æºƒæ’æŸ¥

åˆå§‹åŒ–æ—¶è®¾ç½® panic hookã€‚

```rust
#[cfg(not(feature = "backtrace"))]
fn hook_panic() {
    std::panic::set_hook(Box::new(|p| {
        event!(panic & format!("ezlog: \n {p:?}"));
    }));
}
```

åœ¨å´©æºƒæ—¶ä¼šå›è°ƒæ‹¿åˆ° PanicInfo

```yaml
PanicInfo { payload: Any { .. }, message: Some(asdf), location: Location { file: "ezlog-core/src/lib.rs", line: 119, col: 5 },
```

PanicInfo ä¸­æœ‰é”™è¯¯ä¿¡æ¯ï¼Œpanic çš„æ–‡ä»¶è·¯å¾„å’Œä»£ç ä½ç½®ã€‚è¿™æ ·èƒ½ç²—ç•¥çš„æ’æŸ¥ bugã€‚ å¦‚æœæƒ³æ‹¿åˆ°å…·ä½“çš„å †æ ˆä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¾èµ– backtraceï¼Œè¿™æ ·æœ€ååŠ¨æ€åº“çš„å¤§å°ä¼šå¢åŠ  80KB å·¦å³

```rust
#[cfg(feature = "backtrace")]
fn hook_panic() {
    std::panic::set_hook(Box::new(|p| {
        let bt = Backtrace::new();
        event!(panic & format!("ezlog: \n {p:?} \n{bt:?} \n"));
    }));
}
```

**æ·»åŠ  backtrace ä¾èµ–åï¼ŒiOS çš„å´©æºƒå †æ ˆæ‰“å°å¦‚ä¸‹**

```xml
<div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">plaintext</span><div class="code-block-extension-copyCodeBtn"></div></div></div><code class="hljs language-plaintext code-block-extension-codeShowNum" lang="plaintext"><span class="code-block-extension-codeLine" data-line-num="1"> PanicInfo { payload: Any { .. }, message: Some(asdf), location: Location { file: "ezlog-core/src/lib.rs", line: 119, col: 5 }, can_unwind: true }</span>
<span class="code-block-extension-codeLine" data-line-num="2">   0: backtrace::backtrace::trace_unsynchronized</span>
<span class="code-block-extension-codeLine" data-line-num="3">   1: backtrace::backtrace::trace</span>
<span class="code-block-extension-codeLine" data-line-num="4">   2: backtrace::capture::Backtrace::create</span>
<span class="code-block-extension-codeLine" data-line-num="5">   3: backtrace::capture::Backtrace::new</span>
<span class="code-block-extension-codeLine" data-line-num="6">   4: ezlog::init::{{closure}}</span>
<span class="code-block-extension-codeLine" data-line-num="7">   5: std::panicking::rust_panic_with_hook</span>
<span class="code-block-extension-codeLine" data-line-num="8">   6: std::panicking::begin_panic_handler::{{closure}}</span>
<span class="code-block-extension-codeLine" data-line-num="9">   7: std::sys_common::backtrace::__rust_end_short_backtrace</span>
<span class="code-block-extension-codeLine" data-line-num="10">   8: _rust_begin_unwind</span>
<span class="code-block-extension-codeLine" data-line-num="11">   9: core::panicking::panic_fmt</span>
<span class="code-block-extension-codeLine" data-line-num="12">  10: ezlog::init</span>
<span class="code-block-extension-codeLine" data-line-num="13">  11: _ezlog_init</span>
<span class="code-block-extension-codeLine" data-line-num="14">  12: _$s5EZLog18ezlogInitWithTraceyyF</span>
<span class="code-block-extension-codeLine" data-line-num="15">  13: _$s4demo7DemoAppVACycfC</span>
<span class="code-block-extension-codeLine" data-line-num="16">  14: _$s4demo7DemoAppV7SwiftUI0C0AadEPxycfCTW</span>
<span class="code-block-extension-codeLine" data-line-num="17">  15: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">  16: _$s4demo7DemoAppV5$mainyyFZ</span>
<span class="code-block-extension-codeLine" data-line-num="19">  17: _main</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
```

**android logcat è¾“å‡ºçš„å †æ ˆä¿¡æ¯**

```xml
<div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">plaintext</span><div class="code-block-extension-copyCodeBtn"></div></div></div><code class="hljs language-plaintext code-block-extension-codeShowNum" lang="plaintext"><span class="code-block-extension-codeLine" data-line-num="1">PanicInfo { payload: Any { .. }, message: Some(asdf), location: Location { file: "ezlog-core/src/lib.rs", line: 119, col: 5 }, can_unwind: true }</span>
<span class="code-block-extension-codeLine" data-line-num="2">  0: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  1: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  2: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  3: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  4: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  5: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">  6: &lt;unknown&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  7: Java_wtf_s1_ezlog_EZLog_init</span>
<span class="code-block-extension-codeLine" data-line-num="10">  8: art_quick_generic_jni_trampoline</span>
<span class="code-block-extension-codeLine" data-line-num="11">  9: art_quick_invoke_static_stub</span>
<span class="code-block-extension-codeLine" data-line-num="12">10: _ZN3art11interpreter34ArtInterpreterToCompiledCodeBridgeEPNS_6ThreadEPNS_9ArtMethodEPNS_11ShadowFrameEtPNS_6JValueE</span>
<span class="code-block-extension-codeLine" data-line-num="13">11: _ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE</span>
<span class="code-block-extension-codeLine" data-line-num="14">12: MterpInvokeStatic</span>
<span class="code-block-extension-codeLine" data-line-num="15">13: mterp_op_invoke_static</span>
<span class="code-block-extension-codeLine" data-line-num="16">14: _ZN3art11interpreterL7ExecuteEPNS_6ThreadERKNS_20CodeItemDataAccessorERNS_11ShadowFrameENS_6JValueEbb.llvm.3351068054637636664</span>
<span class="code-block-extension-codeLine" data-line-num="17">15: _ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadERKNS_20CodeItemDataAccessorEPNS_11ShadowFrameEPNS_6JValueE</span>
<span class="code-block-extension-codeLine" data-line-num="18">16: _ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE</span>
<span class="code-block-extension-codeLine" data-line-num="19">17: MterpInvokeStatic</span>
<span class="code-block-extension-codeLine" data-line-num="20">18: mterp_op_invoke_static</span>
<span class="code-block-extension-codeLine" data-line-num="21">19: _ZN3art11interpreterL7ExecuteEPNS_6ThreadERKNS_20CodeItemDataAccessorERNS_11ShadowFrameENS_6JValueEbb.llvm.3351068054637636664</span>
<span class="code-block-extension-codeLine" data-line-num="22">20: _ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadERKNS_20CodeItemDataAccessorEPNS_11ShadowFrameEPNS_6JValueE</span>
```

**systemserver è¾“å‡ºçš„å´©æºƒæ—¥å¿—å¦‚ä¸‹**

```xml
<div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">less</span><div class="code-block-extension-copyCodeBtn"></div></div></div><code class="hljs language-less code-block-extension-codeShowNum" lang="less"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">Build</span> <span class="hljs-selector-tag">fingerprint</span>: '<span class="hljs-selector-tag">google</span>/<span class="hljs-selector-tag">flame</span>/<span class="hljs-selector-tag">flame</span>:<span class="hljs-number">12</span>/<span class="hljs-selector-tag">SP2A</span><span class="hljs-selector-class">.220305</span><span class="hljs-selector-class">.012</span>/<span class="hljs-number">8177914</span>:<span class="hljs-selector-tag">user</span>/<span class="hljs-selector-tag">release-keys</span>'</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">Revision</span>: '<span class="hljs-selector-tag">MP1</span><span class="hljs-selector-class">.0</span>'</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">ABI</span>: '<span class="hljs-selector-tag">arm64</span>'</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">Timestamp</span>: <span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.559643355</span>+<span class="hljs-number">0800</span></span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">Process</span> <span class="hljs-selector-tag">uptime</span>: <span class="hljs-number">0s</span></span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">Cmdline</span>: <span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo</span></span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">pid</span>: <span class="hljs-number">14112</span>, <span class="hljs-selector-tag">tid</span>: <span class="hljs-number">14112</span>, <span class="hljs-selector-tag">name</span>: <span class="hljs-selector-tag">f</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo</span>  &gt;&gt;&gt; <span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo</span> &lt;&lt;&lt;</span>
<span class="code-block-extension-codeLine" data-line-num="9"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">uid</span>: <span class="hljs-number">10287</span></span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">signal</span> <span class="hljs-number">6</span> (SIGABRT), <span class="hljs-selector-tag">code</span> <span class="hljs-selector-tag">-1</span> (SI_QUEUE), <span class="hljs-selector-tag">fault</span> <span class="hljs-selector-tag">addr</span> <span class="hljs-selector-tag">--------</span></span>
<span class="code-block-extension-codeLine" data-line-num="11"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x0</span>  <span class="hljs-number">0000000000000000</span>  <span class="hljs-selector-tag">x1</span>  <span class="hljs-number">0000000000003720</span>  <span class="hljs-selector-tag">x2</span>  <span class="hljs-number">0000000000000006</span>  <span class="hljs-selector-tag">x3</span>  <span class="hljs-number">0000007</span><span class="hljs-selector-tag">fc9d51120</span></span>
<span class="code-block-extension-codeLine" data-line-num="12"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x4</span>  <span class="hljs-number">00000000</span><span class="hljs-selector-tag">ebad808a</span>  <span class="hljs-selector-tag">x5</span>  <span class="hljs-number">00000000</span><span class="hljs-selector-tag">ebad808a</span>  <span class="hljs-selector-tag">x6</span>  <span class="hljs-number">00000000</span><span class="hljs-selector-tag">ebad808a</span>  <span class="hljs-selector-tag">x7</span>  <span class="hljs-number">00000000</span><span class="hljs-selector-tag">ebad808b</span></span>
<span class="code-block-extension-codeLine" data-line-num="13"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x8</span>  <span class="hljs-number">00000000000000</span><span class="hljs-selector-tag">f0</span>  <span class="hljs-selector-tag">x9</span>  <span class="hljs-selector-tag">f7d7529acf61ddf5</span>  <span class="hljs-selector-tag">x10</span> <span class="hljs-number">0000000000000000</span>  <span class="hljs-selector-tag">x11</span> <span class="hljs-selector-tag">ffffff80fffffbdf</span></span>
<span class="code-block-extension-codeLine" data-line-num="14"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x12</span> <span class="hljs-number">0000000000000001</span>  <span class="hljs-selector-tag">x13</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">fc9d50fe8</span>  <span class="hljs-selector-tag">x14</span> <span class="hljs-number">0000000000000000</span>  <span class="hljs-selector-tag">x15</span> <span class="hljs-number">0000000000000008</span></span>
<span class="code-block-extension-codeLine" data-line-num="15"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x16</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b425b6050</span>  <span class="hljs-selector-tag">x17</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b42592db0</span>  <span class="hljs-selector-tag">x18</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b523fa000</span>  <span class="hljs-selector-tag">x19</span> <span class="hljs-number">0000000000003720</span></span>
<span class="code-block-extension-codeLine" data-line-num="16"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x20</span> <span class="hljs-number">0000000000003720</span>  <span class="hljs-selector-tag">x21</span> <span class="hljs-number">00000000</span><span class="hljs-selector-tag">ffffffff</span>  <span class="hljs-selector-tag">x22</span> <span class="hljs-number">0000000000000001</span>  <span class="hljs-selector-tag">x23</span> <span class="hljs-number">0000000000000001</span></span>
<span class="code-block-extension-codeLine" data-line-num="17"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x24</span> <span class="hljs-number">000000782576</span><span class="hljs-selector-tag">bad8</span>  <span class="hljs-selector-tag">x25</span> <span class="hljs-number">00000078256</span><span class="hljs-selector-tag">bb708</span>  <span class="hljs-selector-tag">x26</span> <span class="hljs-number">000000000000000</span><span class="hljs-selector-tag">b</span>  <span class="hljs-selector-tag">x27</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b51553000</span></span>
<span class="code-block-extension-codeLine" data-line-num="18"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">x28</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">fc9d514a0</span>  <span class="hljs-selector-tag">x29</span> <span class="hljs-number">0000007</span><span class="hljs-selector-tag">fc9d511a0</span></span>
<span class="code-block-extension-codeLine" data-line-num="19"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:     <span class="hljs-selector-tag">lr</span>  <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b42545aa0</span>  <span class="hljs-selector-tag">sp</span>  <span class="hljs-number">0000007</span><span class="hljs-selector-tag">fc9d51100</span>  <span class="hljs-selector-tag">pc</span>  <span class="hljs-number">0000007</span><span class="hljs-selector-tag">b42545acc</span>  <span class="hljs-selector-tag">pst</span> <span class="hljs-number">0000000000000000</span></span>
<span class="code-block-extension-codeLine" data-line-num="20"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>: <span class="hljs-selector-tag">backtrace</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="21"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#00</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000004</span><span class="hljs-selector-tag">facc</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.runtime</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">bionic</span>/<span class="hljs-selector-tag">libc</span><span class="hljs-selector-class">.so</span> (abort+<span class="hljs-number">164</span>) (<span class="hljs-attribute">BuildId</span>: cd7952cb40d1a2deca6420c2da7910be)</span>
<span class="code-block-extension-codeLine" data-line-num="22"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#01</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b3f1c</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="23"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#02</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b22a8</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="24"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#03</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b2164</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="25"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#04</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b203c</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="26"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#05</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b142c</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="27"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#06</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">b1e6c</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="28"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#07</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000</span><span class="hljs-selector-tag">c5ad0</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="29"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#08</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000007550</span><span class="hljs-selector-tag">c</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span></span>
<span class="code-block-extension-codeLine" data-line-num="30"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#09</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000741</span><span class="hljs-selector-tag">ec</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">app</span>/~~<span class="hljs-selector-tag">eRgxj9PHRfJEC-cex2WWJw</span>==/<span class="hljs-selector-tag">wtf</span><span class="hljs-selector-class">.s1</span><span class="hljs-selector-class">.ezlog</span><span class="hljs-selector-class">.demo-ngUhJZd2NWtJpUNIWy5f_g</span>==/<span class="hljs-selector-tag">lib</span>/<span class="hljs-selector-tag">arm64</span>/<span class="hljs-selector-tag">libezlog</span><span class="hljs-selector-class">.so</span> (Java_wtf_s1_ezlog_EZLog_init+<span class="hljs-number">28</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="31"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#10</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000002</span><span class="hljs-selector-tag">d4044</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (art_quick_generic_jni_trampoline+<span class="hljs-number">148</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="32"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#11</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000002</span><span class="hljs-selector-tag">ca9e8</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (art_quick_invoke_static_stub+<span class="hljs-number">568</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="33"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#12</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000002</span><span class="hljs-selector-tag">ee6b8</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (<span class="hljs-attribute">art</span>::<span class="hljs-attribute">interpreter</span>::<span class="hljs-built_in">ArtInterpreterToCompiledCodeBridge</span>(<span class="hljs-attribute">art</span>::Thread*, <span class="hljs-attribute">art</span>::ArtMethod*, <span class="hljs-attribute">art</span>::ShadowFrame*, unsigned short, <span class="hljs-attribute">art</span>::JValue*)+<span class="hljs-number">320</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="34"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#13</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000040</span><span class="hljs-selector-tag">ade4</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (bool <span class="hljs-attribute">art</span>::<span class="hljs-attribute">interpreter</span>::DoCall&lt;false, false&gt;(<span class="hljs-attribute">art</span>::ArtMethod*, <span class="hljs-attribute">art</span>::Thread*, <span class="hljs-attribute">art</span>::ShadowFrame&amp;, <span class="hljs-attribute">art</span>::Instruction const*, unsigned short, <span class="hljs-attribute">art</span>::JValue*)+<span class="hljs-number">820</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="35"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#14</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000076</span><span class="hljs-selector-tag">d4b8</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (MterpInvokeStatic+<span class="hljs-number">3812</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="36"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#15</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000002</span><span class="hljs-selector-tag">c5014</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (mterp_op_invoke_static+<span class="hljs-number">20</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="37"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#16</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">00000000000790</span><span class="hljs-selector-tag">a2</span>  <span class="hljs-selector-attr">[anon:dalvik-classes.dex extracted in memory from /data/app/~~eRgxj9PHRfJEC-cex2WWJw==/wtf.s1.ezlog.demo-ngUhJZd2NWtJpUNIWy5f_g==/base.apk]</span> (wtf.s1.ezlog.EZLog.initWith+<span class="hljs-number">10</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="38"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#17</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000027</span><span class="hljs-selector-tag">d840</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (<span class="hljs-attribute">art</span>::<span class="hljs-attribute">interpreter</span>::<span class="hljs-built_in">Execute</span>(<span class="hljs-attribute">art</span>::Thread*, <span class="hljs-attribute">art</span>::CodeItemDataAccessor const&amp;, <span class="hljs-attribute">art</span>::ShadowFrame&amp;, <span class="hljs-attribute">art</span>::JValue, bool, bool) (.llvm.<span class="hljs-number">3351068054637636664</span>)+<span class="hljs-number">644</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="39"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#18</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000035</span><span class="hljs-selector-tag">a9e4</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (<span class="hljs-attribute">art</span>::<span class="hljs-attribute">interpreter</span>::<span class="hljs-built_in">ArtInterpreterToInterpreterBridge</span>(<span class="hljs-attribute">art</span>::Thread*, <span class="hljs-attribute">art</span>::CodeItemDataAccessor const&amp;, <span class="hljs-attribute">art</span>::ShadowFrame*, <span class="hljs-attribute">art</span>::JValue*)+<span class="hljs-number">148</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="40"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#19</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000040</span><span class="hljs-selector-tag">b05c</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (bool <span class="hljs-attribute">art</span>::<span class="hljs-attribute">interpreter</span>::DoCall&lt;false, false&gt;(<span class="hljs-attribute">art</span>::ArtMethod*, <span class="hljs-attribute">art</span>::Thread*, <span class="hljs-attribute">art</span>::ShadowFrame&amp;, <span class="hljs-attribute">art</span>::Instruction const*, unsigned short, <span class="hljs-attribute">art</span>::JValue*)+<span class="hljs-number">1452</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
<span class="code-block-extension-codeLine" data-line-num="41"><span class="hljs-number">2022</span><span class="hljs-selector-tag">-07-07</span> <span class="hljs-number">15</span>:<span class="hljs-number">25</span>:<span class="hljs-number">50.712</span> <span class="hljs-number">14141</span><span class="hljs-selector-tag">-14141</span>/? <span class="hljs-selector-tag">A</span>/<span class="hljs-selector-tag">DEBUG</span>:       <span class="hljs-selector-id">#20</span> <span class="hljs-selector-tag">pc</span> <span class="hljs-number">000000000076</span><span class="hljs-selector-tag">d4b8</span>  /<span class="hljs-selector-tag">apex</span>/<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.art</span>/<span class="hljs-selector-tag">lib64</span>/<span class="hljs-selector-tag">libart</span><span class="hljs-selector-class">.so</span> (MterpInvokeStatic+<span class="hljs-number">3812</span>) (<span class="hljs-attribute">BuildId</span>: <span class="hljs-number">46</span>df93bc978921840e5b428398c66a57)</span>
```

å¯ä»¥å‘ç°ï¼Œandroid çš„å †æ ˆè¾“å‡ºé‡Œå¹¶æ²¡æœ‰å®Œæ•´çš„ Rust è°ƒç”¨å †æ ˆï¼Œæˆ‘å°è¯•é€šè¿‡[add2line](https://github.com/rust-windowing/android-ndk-rs/issues/101)çš„æ–¹æ³•ï¼Œä½†æ²¡æœ‰æˆåŠŸã€‚
