# Lua å¼€å‘å®‰å“åº”ç”¨

åœ¨å°† Lua è„šæœ¬æ‰“åŒ…æˆ APK æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦å°† Lua è„šæœ¬ç¼–è¯‘æˆ Android å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ Lua ç¼–è¯‘å™¨æˆ– Lua è§£é‡Šå™¨å®ç°ã€‚

ä¸€ç§å¸¸ç”¨çš„ Lua ç¼–è¯‘å™¨æ˜¯ LuaJITï¼Œå®ƒèƒ½å¤Ÿå°† Lua ä»£ç ç¼–è¯‘æˆ C ä»£ç ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå¯åœ¨ Android ä¸Šè¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

å¦å¤–ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ Lua è§£é‡Šå™¨ï¼Œä¾‹å¦‚ LuaPlayerï¼Œå®ƒèƒ½å¤Ÿåœ¨ Android ä¸Šè¿è¡Œ Lua è„šæœ¬ã€‚

å½“ä½ æœ‰äº†å¯æ‰§è¡Œæ–‡ä»¶ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ Android Studio æˆ–å…¶ä»– Android å¼€å‘å·¥å…·å°†å…¶æ‰“åŒ…æˆ APK æ–‡ä»¶ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨ LuaPlayer å°±éœ€è¦æ·»åŠ  LuaPlayer çš„åº“æ–‡ä»¶åˆ°ä½ çš„å·¥ç¨‹ä¸­ã€‚

åœ¨æ‰“åŒ… APK ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿ä½ çš„è„šæœ¬ç¬¦åˆå®‰å“çš„ç­–ç•¥ï¼Œå¦‚ä¸èƒ½åŒ…å«ä¸åˆæ³•çš„å†…å®¹ï¼Œç¬¦åˆå®‰å“çš„æƒé™è¦æ±‚ç­‰ã€‚

## ANDLUA+ã€ANDROLUAJã€ALUAJã€åŠ©æ‰‹ã€æ‰‹å†Œ V1.5

[AndLua Android - èåœ L - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/RobertL/p/14527191.html)

### åˆ†æ”¯ã€ç‰ˆæœ¬

- **AndroLua**ï¼šé€‚ç”¨äº Android çš„ Lua ç¯å¢ƒï¼Œå›½å¤–[å¼€æºé¡¹ç›®](https://github.com/mkottman/AndroLua)ï¼Œæœ€åæ›´æ–°æ—¥æœŸ 201301ã€‚
- AndroLua+ï¼šåŸºäº[AndroLua](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLua)çš„åˆ†æ”¯ï¼Œæ›¿ä»£[AndroLua](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLua)ã€‚åˆå«**AndroLua_pro**ã€aluaã€‚  
  [å¼€æºé¡¹ç›®](https://github.com/nirenr/AndroLua_pro)ï¼Œå›½å†…ä½œè€…[nirenr](https://github.com/nirenr)ï¼ŒQQ ç¾¤ 236938279ï¼Œ[ç™¾åº¦è´´å§](http://tieba.baidu.com/mo/m?kw=androlua)ã€‚[linkle/AndroLua (gitee.com)](https://gitee.com/linkle/AndroLua)
- [nirenr (github.com)](https://github.com/nirenr)
- [nirenr/AndroLua_pro: Lua5.3.3 for android pro (github.com)](https://github.com/nirenr/AndroLua_pro)
- **Aide Lua**ï¼š[Aide Lua: ä¾èµ– Aide ï¼Œä½¿ç”¨ Lua å¿«é€Ÿã€é«˜æ•ˆå¼€å‘çš„å·¥å…· (gitee.com)](https://gitee.com/Jesse205/AideLua)
- reOpenLua+æºä»£ç ï¼š[daisukiKaffuChino/reOpenLua-Open-Source (github.com)](https://github.com/daisukiKaffuChino/reOpenLua-Open-Source)
- MyLuaAppï¼š[dingyi222666/MyLuaApp: MyLuaApp is a light and faster software run in Android Arm Devices to develop Android software with Lua or Java. (github.com)](https://github.com/dingyi222666/MyLuaApp)
- æ˜¯[jillcode](http://code.google.com/p/jillcode/)ï¼Œ[luaj](http://sourceforge.net/projects/luaj/)ï¼Œçš„ä¸€äº›çš„æ··åˆä½“ å…¶ä»–ç‰¹å®šäº Android çš„ç±»å’Œä¸€äº›è‡ªå®šä¹‰[Lua](http://www.lua.org/)åº“ã€‚å…è®¸ åœ¨ Android æœ¬èº«ä¸­æ„å»º Android åº”ç”¨ç¨‹åºçš„åŸå‹ï¼Œ[AndLua (sourceforge.net)](https://andlua.sourceforge.net/)
- ALua æ‰‹å†Œï¼šé¢å‘[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)ï¼Œåˆå«**ALuaGuide**ã€**ALua æ‰‹å†Œ**ï¼Œ"å…³äº"ä¸­å«"ALua åŠ©æ‰‹-é‡ç”Ÿç‰ˆ"ï¼Œ[å¼€æºé¡¹ç›®](https://github.com/HK-SHAO/ALuaGuide)ï¼Œæœ€åæ›´æ–°æ—¥æœŸ 201709ï¼ŒAPP åŒ…å"com.sf.ALuaGuide"ã€ï¼ˆè€ç‰ˆæœ¬?ï¼‰"com.shaofeng.aluazhushou"ï¼Œç‰ˆæœ¬ 0.8ï¼Œä½œè€…"çƒ§é£"ï¼ˆshaofengã€[HK-SHAO](https://github.com/HK-SHAO)ï¼‰ï¼ŒQQï¼š2063597709ã€‚å†…å®¹æ¥è‡ª"nirenr"ã€"å¯’æ­Œ"ç­‰ã€‚
- AndLua+ï¼šåŸºäº[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)ï¼Œåˆå«**AndLuaPlus**ã€**ALua+**ï¼Œ[å¼€æºé¡¹ç›®](https://github.com/xc912/AndLuaPlus)ï¼Œæœ€åæ›´æ–°æ—¥æœŸ 202108ï¼Œç‰ˆæœ¬ 6.7ï¼ˆ20200925ï¼‰ï¼Œå›½å†…ä½œè€… Aloneï¼ˆliyangï¼‰ï¼Œ~~[ä¸ªäººç½‘ç«™](https://ly250.cn/andlua)~~ï¼ˆå¤±æ•ˆï¼‰ï¼ŒAPP åŒ…å"com.AndLua.LY"ï¼ŒQQ ç¾¤ 574867511ã€‚
- AndLua++ï¼šåœ¨[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)ä¸­æåŠï¼ˆé“¾æ¥å¤±æ•ˆï¼‰ï¼Œè²Œä¼¼ä¸º[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)çš„åˆ†æ”¯â€”â€”6.8 ç‰ˆæœ¬ï¼ŒAPP åŒ…åä¸åŒï¼Œå®‰è£…æ—¶è‡³å°‘ä¸ 6.7 ç‰ˆä¸å†²çªã€‚
- AndLua++Proï¼šåœ¨[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)ä¸­æåŠï¼ˆé“¾æ¥å¤±æ•ˆï¼‰ã€‚
- AndLua+æ‰‹å†Œï¼šåœ¨[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)ä¸­æåŠï¼ˆé“¾æ¥å¤±æ•ˆï¼‰ï¼Œä½œè€…"é™µé˜³"ï¼ŒAPP åŒ…å"com.andlua.help"ï¼ŒQQ ç¾¤ 450874686ã€‚
- AndroLuaJï¼šåŸºäº[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)ï¼Œæœ€åç‰ˆæœ¬ 1.2.8ï¼Œä½œè€…[mythoi](http://www.github.com/mythoi)ï¼Œ[é¡¹ç›®ç½‘ç«™](http://androluaj.mythoi.cn/)ã€~~[å®˜ç½‘](http://www.occhao.cc/AndroLuaJ/)~~ï¼ˆå¤±æ•ˆï¼‰ï¼ŒAPP åŒ…å"com.mythoi.developerApp"ï¼ŒQQ ç¾¤[551480248](https://jq.qq.com/?_wv=1027&k=5RgCS9W)ã€‚
- ALuaJï¼šåŸºäº[AndroLuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaJ)ï¼Œè¾ƒ AndroLuaJ è½»é‡ï¼Œ[å¼€æºé¡¹ç›®](https://github.com/mythoi/ALuaJ)ï¼Œæœ€åæ›´æ–°æ—¥æœŸ 201909ï¼ŒåŸºäº[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)4.1.0ï¼Œä½œè€…[mythoi](http://www.github.com/mythoi)ï¼Œ~~[å®˜ç½‘](https://www.aluaj.tk/)~~ï¼ˆå¤±æ•ˆï¼‰ã€‚
- ALuaJ åŠ©æ‰‹ï¼šä½œè€…"å¯’æ­¦çºª"ï¼ŒAPP åŒ…å"com.ALuaJ.zhushou"ã€‚

ä»¥ä¸Š[AndroLuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaJ)ã€[ALuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#ALuaJ)ç½‘ç«™æåŠå½¼æ­¤çš„å·®å¼‚â€”â€”Javaã€Luaã€C/C++ç¯å¢ƒï¼ŒåŠå¯¹ NDK çš„æ”¯æŒä¸åŒã€‚

### å­¦ä¹ èµ„æº

- ä¸Šæ–‡æåŠçš„[ALua æ‰‹å†Œ](https://www.cnblogs.com/RobertL/p/16722997.html#ALua%E6%89%8B%E5%86%8C)ã€[AndLua+æ‰‹å†Œ](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaP%E6%89%8B%E5%86%8C)ã€[ALuaJ åŠ©æ‰‹](https://www.cnblogs.com/RobertL/p/16722997.html#ALuaJ%E5%8A%A9%E6%89%8B)ã€‚  
  æœªè§[AndroLua](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLua)æ‰‹å†Œã€‚
- [Android æ‰‹å†Œ](https://www.android-doc.com/reference/packages.html)ã€‚
- [Androlua+è®ºå›](http://www.androlua.cn/)
- ä¸Šæ–‡æåŠçš„[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)çš„[å¼€æºé¡¹ç›®](https://github.com/nirenr/AndroLua_pro)æ–‡æ¡£ã€‚  
  è²Œä¼¼å·²åŒ…å«äº[ALua æ‰‹å†Œ](https://www.cnblogs.com/RobertL/p/16722997.html#ALua%E6%89%8B%E5%86%8C)ã€‚
- [AndLua+ English â€“ Telegram](https://t.me/s/AndLuaEN)ï¼Œå°šæ›´æ–°ã€‚
- AndLua+æœ‰å¾®ä¿¡å°ç¨‹åº**AndLua+æºç ä¸­å¿ƒ**ï¼ˆå¤±æ•ˆï¼‰ã€‚
- ä¸Šæ–‡æåŠçš„å®˜ç½‘ã€QQ ç¾¤ã€‚

---

æ„Ÿè§‰æŠŠ[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)çœ‹ä½œå†…æ ¸ï¼Œ[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)ã€[AndroLuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaJ)ã€[ALuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#ALuaJ)çœ‹ä½œå°è£…å®ç°ã€‚  
å¼€å‘å¯ä½¿ç”¨[AndroLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndroLuaP)æˆ–[AndLua+](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaPlus)æˆ–[ALuaJ](https://www.cnblogs.com/RobertL/p/16722997.html#ALuaJ)ï¼Œå‚è€ƒ[Android æ‰‹å†Œ](https://www.android-doc.com/reference/packages.html)ï¼Œè¾…åŠ©ç”¨[ALua æ‰‹å†Œ](https://www.cnblogs.com/RobertL/p/16722997.html#ALua%E6%89%8B%E5%86%8C)æˆ–[AndLua+æ‰‹å†Œ](https://www.cnblogs.com/RobertL/p/16722997.html#AndLuaP%E6%89%8B%E5%86%8C)æˆ–[ALuaJ åŠ©æ‰‹](https://www.cnblogs.com/RobertL/p/16722997.html#ALuaJ%E5%8A%A9%E6%89%8B)ã€[AndLua+ English â€“ Telegram](https://t.me/s/AndLuaEN)ã€‚

## Android Lua ç›¸äº’è°ƒç”¨

[GitHub: Android-Lua](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fliangchenhe55%2FAndroid-Lua)

# å‰è¨€

æœ¬æ–‡åŸºäº **Lua 5.3**.

Lua æ˜¯ä¸€ä¸ªè½»é‡çº§è„šæœ¬è¯­è¨€ï¼Œå¸¸ç”¨äºåµŒå…¥å…¶ä»–è¯­è¨€ä½œä¸ºè¡¥å……ã€‚å…³äºæ›´å¤š Lua æœ¬èº«çš„é—®é¢˜ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚  
åœ¨ Android ä¸­åµŒå…¥ Lua ä¼˜ç‚¹å¾ˆå¤šï¼Œå€ŸåŠ© Lua è„šæœ¬è¯­è¨€çš„ä¼˜åŠ¿ï¼Œå¯ä»¥è½»æ¾å®ç°åŠ¨æ€é€»è¾‘æ§åˆ¶ï¼Œåº”ç”¨å¯ä»¥éšæ—¶ä»æœåŠ¡å™¨è¯»å–æœ€æ–° Lua è„šæœ¬æ–‡ä»¶ï¼Œåœ¨ä¸æ›´æ–°åº”ç”¨çš„æƒ…å†µä¸‹ä¿®æ”¹ç¨‹åºé€»è¾‘ã€‚  
å¯æƒœ Lua å®˜æ–¹åªæä¾›äº† C API ï¼Œè€Œ Android ä¸»è¦ä½¿ç”¨ JAVA ä½œä¸ºå¼€å‘è¯­è¨€ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ© JNI æ¥é—´æ¥å®ç°åœ¨ Android ä¸­åµŒå…¥ Lua ã€‚

# å‡†å¤‡

è‡ªå·±å®ç° JNI æ˜¯ä¸€ä»¶å¾ˆè´¹åŠ›çš„äº‹æƒ…ï¼Œè¿˜å¥½æœ‰äººå·²ç»é€ å¥½äº†è½®å­å«åš Luajava ï¼Œå¹¶ä¸”åˆæœ‰äººåŸºäº Luajava åšäº† Android ä¸“ç”¨åº“ã€‚ç½‘ä¸Šæµä¼ æœ€å¹¿çš„æ˜¯ [Androlua](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fmkottman%2FAndroLua) ï¼Œä¸è¿‡ä½œè€…å·²ç»å¤šå¹´ä¸ç»´æŠ¤äº†ï¼Œå¯¹ Lua çš„æ”¯æŒä¾ç„¶åœç•™åœ¨ 5.1 å¹¶ä¸”æœ‰ä¸€äº› bugï¼Œæœ‰äºº Fork äº†è¿™ä¸ªé¡¹ç›®ï¼Œå¹¶å°†å…¶æ›´æ–°è‡³ Lua 5.3 ï¼š[New Androlua](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Flendylongli%2FAndroLua) ï¼Œä¸è¿‡è¿™ä¸ªé¡¹ç›®ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä¿®å¤äº†ä¸€ä¸‹ä½†æ˜¯ä½œè€…å¹¶æ²¡æœ‰å¤„ç†æˆ‘çš„ pull request ï¼Œå„ä½å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä¿®å¤ä¼˜åŒ–åçš„ï¼š[Android-Lua](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fliangchenhe55%2FAndroid-Lua).

åœ¨ä¿®å¤ bug çš„åŒæ—¶ï¼Œæˆ‘ä¹Ÿæ·»åŠ äº†ä¸€äº›ä¸­æ–‡æ³¨é‡Šï¼Œå‡å°‘ç¬¬ä¸€æ¬¡æ¥è§¦ Lua C API æœ‹å‹ä»¬çš„å­¦ä¹ è®°å¿†æˆæœ¬ã€‚

ç”±äºæœ€ç»ˆéœ€è¦è°ƒç”¨ Lua C APIï¼Œæ‰€ä»¥è¯·å…ˆé…ç½® NDK å¼€å‘ç¯å¢ƒã€‚åœ¨ Android Studio ä¸­æ‰“å¼€ SDK Managerï¼Œåˆ‡æ¢åˆ° SDK Tools æ ‡ç­¾é¡µï¼Œå‹¾é€‰`CMake`ã€`LLDB`ã€`NDK`ä¸‹è½½å®‰è£…ä¹‹ã€‚

![](https://upload-images.jianshu.io/upload_images/5418298-3176d9f6c133457c.png?imageMogr2/auto-orient/strip|imageView2/2/w/799/format/webp)

NDK ç¯å¢ƒ

# å¯¼å…¥å·¥ç¨‹

ä»…ä»…æƒ³å®ç° Android Lua äº’ç›¸è°ƒç”¨ï¼Œä¸å…³å¿ƒå…·ä½“è¿‡ç¨‹çš„ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ä¾èµ–ï¼š  
`implementation 'cc.chenhe:android-lua:1.0.2'` ç„¶ååè¾¹çš„å¯¼å…¥éƒ¨åˆ†å¯ä»¥è·³è¿‡äº†ã€‚

Clone github é¡¹ç›®åˆ°æœ¬åœ°å¹¶ç”¨ Android Studio æ‰“å¼€ã€‚å¤§è‡´å¯ä»¥çœ‹åˆ°ä¸‹å›¾ç›®å½•ç»“æ„ã€‚ï¼ˆç”±äºåæœŸæ›´æ–°ï¼Œç»“æ„ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼‰

![](https://upload-images.jianshu.io/upload_images/5418298-4e7b810f825fbe6f.png?imageMogr2/auto-orient/strip|imageView2/2/w/495/format/webp)

ç›®å½•ç»“æ„

å…¶ä¸­ `androidlua`æ˜¯åº“ï¼Œ`app`æ˜¯ demo å·¥ç¨‹ã€‚åº“ä¸­ï¼Œ`lua`ä¸‹æ˜¯ Lua è§£é‡Šå¼•æ“ï¼Œ`luajava`æ˜¯ JNI çš„æœ‰å…³ä»£ç ã€‚`*.mk` æ–‡ä»¶æ˜¯ NDK é…ç½®æ–‡ä»¶ï¼Œè¯¦æƒ…è¯·å‚è€ƒ[Google NDK æ–‡æ¡£](https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.android.com%2Fndk%2Fguides%2Fandroid_mk.html)ã€‚

ä½ å¯ä»¥å°† `androidlua`Module å¯¼å…¥è‡ªå·±å·¥ç¨‹ä½œä¸ºä¾èµ–åº“ä½¿ç”¨ã€‚

# Lua API çŸ¥è¯†æ™®åŠ

æ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨ Android ä¸ Lua ç›´æ¥äº’ç›¸è°ƒç”¨äº†ã€‚ä½†æ˜¯åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¿˜è¦å­¦ä¹ ä¸‹ Lua C API çš„æœ‰å…³ä¸œè¥¿ï¼Œå› ä¸ºè¿™æ˜¯ä¸ Lua äº¤äº’çš„åŸºç¡€ã€‚

Lua ä¸ C ä¾é ä¸€ä¸ªè™šæ‹Ÿçš„æ ˆæ¥å®Œæˆæ•°æ®äº¤æ¢ã€‚åŒ…æ‹¬å˜é‡ã€å‡½æ•°ã€å‚æ•°ã€è¿”å›å€¼ç­‰åœ¨å†…çš„ä¸€åˆ‡æ•°æ®ï¼Œéƒ½è¦æ”¾å…¥æ ˆä¸­æ¥å…±äº«ã€‚ä¸ºäº†è°ƒç”¨æ–¹ä¾¿ï¼Œè¿™ä¸ªæ ˆå¹¶ä¸æ˜¯ä¸¥æ ¼éµå¾ªæ ˆçš„è§„åˆ™ã€‚ä»ç´¢å¼•æ¥çœ‹ï¼Œæ ˆåº•ç´¢å¼•ä¸º 1ï¼Œå¾€ä¸Šä¾æ¬¡é€’å¢ã€‚è€Œæ ˆé¡¶ç´¢å¼•æ˜¯-1ï¼Œå¾€ä¸‹ä¾æ¬¡é€’å‡ã€‚å› æ­¤ï¼Œæ­£è´Ÿç´¢å¼•éƒ½æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ 0 ä¸å¯ä»¥ã€‚ä¸‹é¢æ˜¯æ ˆçš„ç¤ºæ„å›¾ï¼š

![](https://upload-images.jianshu.io/upload_images/5418298-154887f22148c908.png?imageMogr2/auto-orient/strip|imageView2/2/w/350/format/webp)

Lua æ ˆ

Lua æä¾›äº†å¤§é‡çš„ C APIï¼Œä¸å…¶ä»–è¯­è¨€çš„äº¤äº’å®Œå…¨ä¾èµ–è¿™äº› APIï¼Œä¸‹é¢çš„åŸºç¡€æ•™ç¨‹ä¸­æœ¬æ–‡ä¼šä»‹ç»å‡ ä¸ªåŸºç¡€çš„ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹[Lua å®˜æ–¹æ‰‹å†Œ](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2F)

è¿™äº›å‡½æ•°å‡ç”± Lua æä¾›ï¼Œåœ¨ Luajava ä¸­è¢«å°è£…åœ¨ `LuaState` ç±»ä¸‹ã€‚

### [luaL_openlibs](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23luaL_openlibs)

åŠ è½½ Lua æ ‡å‡†åº“ï¼Œä¸€èˆ¬éœ€è¦è°ƒç”¨ä¸€ä¸‹ã€‚

### [luaL_dostring](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23luaL_dostring)

æ‰§è¡Œä¸€æ®µ Lua è„šæœ¬ã€‚

### [luaL_dofile](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23luaL_dofile)

æ‰§è¡Œç»™å®šæ–‡ä»¶ä¸­çš„ Lua è„šæœ¬ã€‚

### [lua_dump](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_dump)

è·å–å½“å‰æ ˆçš„å†…å®¹ã€‚  
java ä¸­å¯¹åº”å‡½æ•°æ˜¯`dumpStack()`ï¼Œè¿”å› Stringï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•ã€‚

### [lua_pushXXX](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_pushstring)

å°†å„ç§ç±»å‹çš„æ•°æ®å‹å…¥æ ˆï¼Œä»¥ä¾¿æœªæ¥ä½¿ç”¨ã€‚

### [lua_toXXX](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_tostring)

å°†æ ˆä¸­æŒ‡å®šç´¢å¼•å¤„çš„å€¼ä»¥ xxx ç±»å‹å–å‡ºã€‚

### [lua_getglobal](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_getglobal)

è·å– Lua ä¸­çš„å…¨å±€å˜é‡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼Œå¹¶å‹å…¥æ ˆé¡¶ï¼Œä»¥ä¾¿æœªæ¥ä½¿ç”¨ã€‚  
å‚æ•°å°±æ˜¯è¦è·å–çš„å˜é‡çš„åå­—ã€‚

### [lua_getfield](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_getfield)

è·å– Lua ä¸­ æŸä¸€ table çš„å…ƒç´ ï¼Œå¹¶å‹å…¥æ ˆé¡¶ã€‚  
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ table åœ¨æ ˆä¸­çš„ç´¢å¼•ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦è·å–å…ƒç´ çš„ key.

### [lua_pcall](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.lua.org%2Fmanual%2F5.3%2Fmanual.html%23lua_pcall)

æ‰§è¡Œ Lua å‡½æ•°ã€‚  
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­¤å‡½æ•°çš„å‚æ•°ä¸ªæ•°ï¼Œç¬¬äºŒä¸ªæ˜¯è¿”å›å€¼ä¸ªæ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯é”™è¯¯å¤„ç†å‡½æ•°åœ¨æ ˆä¸­çš„ç´¢å¼•ã€‚

**ä¸‹é¢çš„å†…å®¹å·²è¿‡æ—¶ï¼Œå…·ä½“æ•™ç¨‹ä¸ Demo è¯·å‚é˜… [GitHub: Android-Lua](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fliangchenhe55%2FAndroid-Lua)**ã€‚

### ~~Enjoy coding~~

ç»ˆäºè¦å¼€å§‹è°ƒç”¨äº†ï¼Œæƒ³æƒ³è¿˜æœ‰ç‚¹å°æ¿€åŠ¨å‘¢~

```java
public static String readAssetsTxt( Context context, String fileName ){
    try {
        InputStream is  = context.getAssets().open( fileName );
        int     size    = is.available();
        /* Read the entire asset into a local byte buffer. */
        byte[] buffer = new byte[size];
        is.read( buffer );
        is.close();
        /* Convert the buffer into a string. */
        String text = new String( buffer, "utf-8" );
        /* Finally stick the string into the text view. */
        return(text);
    } catch ( IOException e ) {
        e.printStackTrace();
    }
    return("err");
}
```

### åˆ›å»º Lua æ ˆ

ä¹‹å‰è¯´äº†ï¼Œä¾é ä¸€ä¸ªè™šæ‹Ÿçš„æ ˆæ¥å®Œæˆæ•°æ®äº¤æ¢ã€‚é‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬å½“ç„¶è¦åˆ›å»ºè¿™ä¸ªæ ˆã€‚

```java
LuaState lua = LuaStateFactory.newLuaState(); //åˆ›å»ºæ ˆ
lua.openLibs(); //åŠ è½½æ ‡å‡†åº“

lua.close(); //å…»æˆè‰¯å¥½ä¹ æƒ¯ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•åé”€æ¯Luaæ ˆã€‚
```

### æ‰§è¡Œ Lua è„šæœ¬

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`LdoString()`æ¥æ‰§è¡Œä¸€æ®µç®€å•çš„è„šæœ¬ã€‚

```java
String l = "local a = 1";
lua.LdoString(l);
```

è¿™æ ·å°±æ‰§è¡Œäº†ä¸€ä¸ªå¾ˆç®€å•çš„è„šæœ¬ï¼Œä»–å£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡`l`ï¼Œå€¼ä¸º 1.

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`LdoFile()`æ¥åŠ è½½è„šæœ¬æ–‡ä»¶ï¼Œä¸è¿‡è¿™éœ€è¦ä½ å…ˆæŠŠè„šæœ¬å¤åˆ¶åˆ° SD å¡æ‰è¡Œã€‚å› ä¸ºåœ¨ APK ä¸­æ˜¯æ²¡æœ‰â€œè·¯å¾„â€å¯è¨€çš„ã€‚

### è¯»å– Lua å˜é‡ä¸ table

é¦–é¡µè¦è¯´æ˜çš„æ˜¯ï¼Œåªæœ‰å…¨å±€å˜é‡ï¼ˆé localï¼‰æ‰å¯ä»¥è¯»å–ã€‚  
test.lua:

```lua
a = 111;
t = {
    ["name"] = "Chenhe",
    [2] = 2222,
}
```

android:

```java
lua.getGlobal("a"); //è·å–å˜é‡aå¹¶å°†å€¼å‹å…¥æ ˆ
Log.i("a", lua.toInteger(-1) + ""); //ä»¥intç±»å‹å–å‡ºæ ˆé¡¶çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯aï¼‰

lua.getGlobal("t"); //è·å–å˜é‡tå¹¶å‹å…¥æ ˆé¡¶ï¼Œæ­¤æ—¶tableä½äºæ ˆé¡¶ã€‚
lua.getField(-1, "name"); //å–å‡ºæ ˆé¡¶çš„tableçš„nameå…ƒç´ ï¼Œå‹å…¥æ ˆé¡¶ã€‚
Log.i("t.name", lua.toString(-1)); //ä»¥stringç±»å‹å–å‡ºæ ˆé¡¶çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯t.nameï¼‰

Log.i("dump",lua.dumpStack()); //è¾“å‡ºå½“å‰æ ˆ
```

è¿è¡Œåå¯ä»¥çœ‹åˆ° log:

```tsx
I/a: 111
I/t.name: Chenhe

I/dump: 1: number = 111.0
        2: table
        3: string = 'Chenhe'
```

æˆ‘ä»¬å·²ç»æˆåŠŸè¯»å–äº† Lua ä¸­çš„å˜é‡ã€‚

### æ‰§è¡Œ Lua å‡½æ•°

è°ƒç”¨ Lua å‡½æ•°çš„ä¸€èˆ¬æµç¨‹ä¸ºï¼š

1. è·å–å‡½æ•°å¹¶å…¥æ ˆã€‚
2. å‹å…¥å„ä¸ªå‚æ•°ï¼ˆå¦‚æœæœ‰ï¼‰
3. è°ƒç”¨å‡½æ•°ï¼ŒæŒ‡æ˜å‚æ•°ä¸ªæ•°ã€è¿”å›å€¼ä¸ªæ•°ã€é”™è¯¯å¤„ç†å‡½æ•°ã€‚
4. è·å–è¿”å›å€¼ï¼ˆå¦‚æœæœ‰ï¼‰

test.lua:

```lua
function test(a, b)
    return a + b, a - b;
end
```

android:

```java
lua.getGlobal( "test" ); //è·å–å‡½æ•°å¹¶å…¥æ ˆ
lua.pushInteger( 5 ); //å‹å…¥ç¬¬ä¸€ä¸ªå‚æ•°a
lua.pushInteger( 3 ); //å‹å…¥ç¬¬äºŒä¸ªå‚æ•°b
lua.pcall( 2, 2, 0 ); //æ‰§è¡Œå‡½æ•°ï¼Œæœ‰2ä¸ªå‚æ•°ï¼Œ2ä¸ªè¿”å›å€¼ï¼Œä¸æ‰§è¡Œé”™è¯¯å¤„ç†ã€‚
Log.i( "r1", lua.toInteger( -2 ) + "" ); //è¾“å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼
Log.i( "r2", lua.toInteger( -1 ) + "" ); //è¾“å‡ºç¬¬äºŒä¸ªè¿”å›å€¼
Log.i( "dump", lua.dumpStack() );
```

è¿è¡Œåå¯ä»¥çœ‹åˆ° log:

```tsx
I/r1: 8
I/r2: 2
I/dump: 1: number = 8.0
        2: number = 2.0
```

è¿™å°±æˆåŠŸåœ°æ‰§è¡Œäº† Lua å‡½æ•°ï¼Œå¹¶å–å¾— 2 ä¸ªè¿”å›å€¼ã€‚è€Œä¹‹å‰å…¥æ ˆçš„å‡½æ•°ä»¥åŠå‚æ•°ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™ Lua å·²ç»å¼¹å‡ºäº†ï¼Œæ‰€ä»¥æœ€åæ ˆé‡Œåªå‰©ä¸‹ 2 ä¸ªè¿”å›å€¼ã€‚

### ä¼ å…¥ Java å¯¹è±¡

å¾—ç›Šäº Luajava ä»¥åŠ Androlua çš„å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå¹¶åœ¨ Lua ä¸­ç›´æ¥æ‰§è¡Œå¯¹è±¡çš„æˆå‘˜å‡½æ•°ã€‚

test.lua:

```lua
function setText(tv,s)
    tv:setText("set by Lua."..s);
    tv:setTextSize(50);
end
```

android:

```java
lua.getGlobal("setText"); //è·å–å‡½æ•°
lua.pushJavaObject(textView); //æŠŠTextViewä¼ å…¥
lua.pushString("Demo"); //ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²
lua.pcall(2,0,0); //æ‰§è¡Œå‡½æ•°ï¼Œæœ‰2ä¸ªå‚æ•°ã€‚
```

![](https://upload-images.jianshu.io/upload_images/5418298-0ffc26d85bb61314.png?imageMogr2/auto-orient/strip|imageView2/2/w/404/format/webp)

æ‰§è¡Œç»“æœ

### æ³¨å…¥ Lua å˜é‡

æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨ android ä¸­åˆ›å»º Lua å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ Lua ä¸­ç›´æ¥ä½¿ç”¨äº†ã€‚æ³¨æ„ï¼Œè¿™é‡Œåˆ›å»ºçš„å˜é‡éƒ½æ˜¯å…¨å±€çš„ï¼ˆé localï¼‰ã€‚

test.lua:

```lua
function setText(tv)
    tv:setText("set by Lua."..s); --è¿™é‡Œçš„så˜é‡ç”±javaæ³¨å…¥
    tv:setTextSize(50);
end
```

android:

```java
lua.pushString( "from java" ); //å‹å…¥æ¬²æ³¨å…¥å˜é‡çš„å€¼
lua.setGlobal( "s" ); //å‹å…¥å˜é‡å
lua.getGlobal( "setText" ); //è·å–Luaå‡½æ•°
lua.pushJavaObject( textView ); //å‹å…¥å‚æ•°
lua.pcall( 1, 0, 0 ); //æ‰§è¡Œå‡½æ•°
```

![](https://upload-images.jianshu.io/upload_images/5418298-67b9b5b456a0f6fe.png?imageMogr2/auto-orient/strip|imageView2/2/w/400/format/webp)

æ‰§è¡Œç»“æœ

å¯ä»¥çœ‹åˆ° Lua æˆåŠŸè°ƒç”¨äº† Java æ³¨å…¥çš„å˜é‡`s`.

### Lua è°ƒç”¨ java

Lua è°ƒç”¨ java å‡½æ•°ç›¸å¯¹å¤æ‚ï¼Œæ¯•ç«Ÿ java ä¸æ˜¯è„šæœ¬è¯­è¨€ã€‚æˆ‘ä»¬éœ€è¦å°† java å‡½æ•°åŒ…è£…æˆä¸€ä¸ª `JavaFunction` ç±»ï¼Œå®ä¾‹åŒ–ä¹‹åæ³¨å†Œåˆ° luaï¼Œè¿™æ ·æ‰å¯ä»¥ä» lua è°ƒç”¨ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```java
public class MyJavaFunction extends JavaFunction {
    public MyJavaFunction(LuaState luaState) {
        super(luaState);
    }
    @Override
    public int execute() {
        // è·å–Luaä¼ å…¥çš„å‚æ•°ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸ºä¸Šä¸‹æ–‡ç¯å¢ƒã€‚
        String str = L.toString(2);

        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date(System.currentTimeMillis());
        L.pushString(simpleDateFormat.format(date) + str);
        return 1; // è¿”å›å€¼çš„ä¸ªæ•°
    }

    public void register() {
        try {
            // æ³¨å†Œä¸º Lua å…¨å±€å‡½æ•°
            register("testJava");
        } catch (LuaException e) {
            e.printStackTrace();
        }
    }
}
```

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿ `JavaFunction` å¹¶å®ç° `execute` æ–¹æ³•ï¼Œå®ƒå°†åœ¨è¢« lua è°ƒç”¨æ—¶æ‰§è¡Œã€‚å‰é¢è¯´è¿‡ï¼Œlua ä¸ c é æ ˆæ¥äº¤æ¢æ•°æ®ï¼Œæ•…è°ƒç”¨å‡½æ•°æ‰€ä¼ çš„å‚æ•°ä¹Ÿä¼šå…¥æ ˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ’ä¸º lua çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå®é™…ä¼ å…¥çš„å‚æ•°æ˜¯ä» 2 å¼€å§‹ã€‚åœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å–å¾—äº† lua ä¼ é€’çš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶æ‹¼æ¥åœ¨ç”± java è·å–çš„æ—¶é—´å­—ç¬¦ä¸²åè¾¹ä¸€èµ·è¿”å›ç»™ luaã€‚

ä¸ä¼ å‚ç±»ä¼¼ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ç›´æ¥å…¥æ ˆå³å¯ã€‚æœ€åæˆ‘ä»¬éœ€è¦è¿”å›è¿”å›å€¼çš„ä¸ªæ•°ï¼Œè¿™æ · lua å°±çŸ¥é“ä»æ ˆé‡Œå–å‡ºå‡ ä¸ªå…ƒç´ ä½œä¸ºè¿”å›å€¼äº†ã€‚è¿™äº›å…ƒç´ ä¼šè¢«è‡ªåŠ¨å‡ºæ ˆã€‚è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ `L.pushString()` å°†æ‹¼æ¥åçš„å­—ç¬¦ä¸²è¿”å›ç»™ luaï¼Œå¹¶è¿”å› `1` è¡¨ç¤ºæœ‰ 1 ä¸ªè¿”å›å€¼ã€‚

æœ€åï¼Œè°ƒç”¨ `register` æ–¹æ³•æ³¨å†Œåˆ° luaï¼Œä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°å°±æ˜¯åœ¨ lua ä¸­çš„å‡½æ•°åã€‚

```java
new MyJavaFunction(lua).register();
```

åƒè¿™æ ·å®ä¾‹åŒ–åˆšæ‰åŒ…è£…çš„ç±»å°±å¯ä»¥æˆåŠŸæ³¨å†Œäº†ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ lua ä¸­è°ƒç”¨ `testJava(String)`ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå†…å®¹æ˜¯å½“å‰çš„æ—¶é—´åŠ ä¸Šæˆ‘ä»¬ä¼ å…¥çš„å­—ç¬¦ä¸²ã€‚

### ç›¸å…³é“¾æ¥

- [Windows ä¸‹ç¼–è¯‘ LuaJIT](https://www.jianshu.com/p/fc4bee82c3ef)
- [Android åµŒå…¥ LuaJIT çš„æ›²æŠ˜é“è·¯](https://www.jianshu.com/p/3aee06f8039f)

## android Studio é…ç½® LUA å¼€å‘ç¯å¢ƒ

### å…³äº Android LUA èµ„æ–™

> **android å¦‚ä½•è°ƒç”¨ luaï¼Ÿ**  
> [Android lua æ•™ç¨‹](http://blog.csdn.net/ZZ7ZZ7ZZ/article/category/1730609)  
> [Lua å®˜ç½‘](http://www.lua.org/start.html)  
> [lua è¯­è¨€è§£é‡Š](https://zh.wikipedia.org/wiki/Lua)  
> [Lua 5.1 å‚è€ƒæ‰‹å†Œ](http://www.codingnow.com/2000/download/lua_manual.html)  
> [Android Lua çƒ­ä¿®å¤](http://blog.csdn.net/elsdnwn/article/details/48651585)

1. å¼•è¯‰å¤§ç‰›çš„åŸè¯ï¼š

Android è°ƒç”¨ Lua /Lua è°ƒç”¨ Android ä»£ç 

åœ¨ Android é¡¹ç›®ä¸­ä½¿ç”¨ Luaï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š

1ã€åŠ è½½ Lua è„šæœ¬è§£æå¼•æ“ã€‚  
2ã€ä»¥ Native API æ–¹å¼è°ƒç”¨å¼•æ“æ¥å£

ç›´æ¥ä»¥ JNI æ–¹å¼è°ƒç”¨ Lua è§£æå¼•æ“çš„æ¥å£ååˆ†éº»çƒ¦ï¼Œå¼€æºé¡¹ç›®  
[LuaJava](https://github.com/mkottman/AndroLua)ï¼‰å¯¹è¿™äº› JNI æ¥å£è¿›è¡Œäº†å¾ˆå¥½çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«äº† LuaJava çš„ Android å¹³å°çš„ Lua è§£æå™¨ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—æ˜ å°„åˆ° Lua C å®ç°å‡½æ•°çš„ Java æ¥å£ã€‚

1.è·å– LuaJava å·¥ç¨‹ï¼Œå¼•å…¥åˆ°ä½ çš„ Android Studio ä¸­ï¼Œå¹¶å°†å…¶è®¾ä¸º Library å·¥ç¨‹

2.å°† Lua è§£æå™¨ç›¸å…³çš„ C ä»£ç å’Œ LuaJava çš„ C ä»£ç æ‰“åŒ…æˆ so æ–‡ä»¶

ä¸€. å°† androLua ä»¥ moudle æ–¹å¼å¼•å…¥åˆ° Android studio çš„ Project å·¥ä½œåŒºä¸­

æ­¤æ—¶éœ€è¦ä¿è¯ä½ çš„ Android studio çš„ NDK å¼€å‘ç¯å¢ƒå·²ç»é…ç½®å®Œæˆï¼Œå…³äºå¦‚ä½•é…ç½® NDK,æ•™ç¨‹è¯·ç§»æ­¥[MAC NDK ç¯å¢ƒé…ç½®](http://blog.csdn.net/u010350809/article/details/46840893)

äºŒ. ä¿®æ”¹è‡ªåŠ¨ç”Ÿæˆçš„ androLua çš„ build.gradle æ–‡ä»¶é…ç½®å¦‚ä¸‹ ä¸»è¦å°† Â apply plugin: â€˜com.android.applicationâ€™Â  æ›¿æ¢ä¸º Â apply plugin: â€˜com.android.libraryâ€™  
å±å¹•å¿«ç…§ 2015-12-25 ä¸Šåˆ 12.15.20![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20151226171047532)

å¦‚æœç¼–è¯‘ æŠ¥é”™ï¼šè¯·ä¿®æ”¹ jni/luajava/luajava.c æ–‡ä»¶ ï¼šå°†å¯¼å…¥å¤´æ–‡ä»¶çš„è·¯å¾„ä¿®æ”¹å¦‚ä¸‹

```cpp
    #include <jni.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include "../lua/lua.h"
    #include "../lua/lualib.h"
    #include "../lua/lauxlib.h"
    #include "../lua/lstate.h"
    #include "../lua/lauxlib.h"
    #include "../lua/lualib.h"
```

ä¸ºäº†ç…§é¡¾å…¨å¹³å°çš„å…¼å®¹æ€§å»ºè®®åœ¨ jni ç›®å½•ä¸‹æ–°å»º Application.mk æ–‡ä»¶ å†™å…¥å†…å®¹ä¸ºï¼š

```makefile
APP_ABI := all
```

ä¸‰.æˆ‘çš„ç‰ˆæœ¬ä¸‹æˆ‘éœ€è¦å°† androLua çš„ AndroidMainfest æ–‡ä»¶çš„

```xml
    <?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="1" android:versionName="1.0" package="sk.kottman.androlua" xmlns:android="http://schemas.android.com/apk/res/android">
  <uses-sdk android:minSdkVersion="4" />
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
  <uses-permission android:name="android.permission.BLUETOOTH"/>
  <uses-permission android:name="android.permission.CAMERA"/>
  <uses-permission android:name="android.permission.VIBRATE"/>
  <uses-permission android:name="android.permission.READ_SMS"/>
  //å±è”½æ‰å…¥å£ï¼Œåªä½œä¸ºlibå¼•å…¥
  <!--<application android:icon="@drawable/icon" android:label="@string/app_name">-->
    <!--<activity android:label="@string/app_name" android:name=".Main">-->
      <!--<intent-filter>-->
        <!--<action android:name="android.intent.action.MAIN"/>-->
        <!--<category android:name="android.intent.category.LAUNCHER"/>-->
      <!--</intent-filter>-->
    <!--</activity>-->
  <!--</application>-->
</manifest>
```

å››. åœ¨ä½ çš„ App çš„æ¨¡å—çš„å¼•å…¥å¤„ä¿®æ”¹ä½ çš„ build.gradle æ–‡ä»¶  
ä¸»è¦æ˜¯å¢åŠ  ï¼šÂ **compile project(â€˜:androLuaâ€™)**

```rust
    dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile project(':androLua')
}
```

ä¸è¦æ€¥ç€ç¼–è¯‘ ,æ£€æŸ¥ä¸€ä¸‹ä½ çš„å·¥ç¨‹çš„ build.gradle  
äº”ï¼šä½¿ç”¨**com.android.tools.build:gradle:1.3.1**

æˆ‘æœ¬æ¥æ˜¯ç”¨ 2.0.3 æ”¯æŒ Android studio çš„ Fast RUN åŠŸèƒ½ ï¼Œå½“æ—¶ç¼–è¯‘è¿™ä¸ª Lua ä¸€ç›´æ— æ³•é€šè¿‡ ï¼Œå¦‚æœä½ ä¹Ÿé‡åˆ°è¿™ç§é—®é¢˜ï¼Œè¯·å°†æ’ä»¶ç‰ˆæœ¬æ¢ä¸º 1.3.1

å…­. åŸºæœ¬ä¸Šé…ç½®å·²ç»å®Œæˆäº†ï¼š  
è¯•ç€åœ¨ä½ çš„é¡¹ç›®ä¸­å¼•å…¥**LuaState**å§ã€‚  
ä¸ƒï¼šAndroid studio çš„ NDK ç¼–è¯‘ç”Ÿæˆçš„.so æ–‡ä»¶ç›®å½•è·¯å¾„ä¸ºï¼šapp/build/intermediates/ndk

## androlua_pro

androlua_pro è™½ç„¶æ²¡æœ‰è§£å†³ ndk å¼€å‘ so åº“æ¥è°ƒç”¨ï¼Œä½†æ˜¯å°† so åº“åœ¨ android studio é›†æˆä¸ºä¸€ä¸ª so ä¾› alua è°ƒç”¨(activity.loadLib()æ–¹æ³•å°±å¯ä»¥)ï¼Œandroid æœ¬èº«å°±å¯ä»¥æ‰§è¡Œ shell(åŸºäº linux)ï¼Œæ‰€ä»¥ linux ä¸Šé¢å¾ˆå¤šé«˜çº§åŠŸèƒ½éƒ½é˜”ä»¥å®ç°

ä¸‹è½½åœ°å€ï¼š[nirenr/AndroLua_pro: Lua5.3.3 for android pro (github.com)](https://github.com/nirenr/AndroLua_pro)

å®˜æ–¹ç¾¤ä¸‹è½½ï¼š621400904ï¼Œ236938279ã€‚

### ä¸ºå•¥è¦ç”¨ androlua_proï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ

1. ä¼˜ç‚¹ä¹‹ä¸€ï¼šæ— éœ€ç¼–è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œå¼€å‘é€Ÿåº¦ä½•æ­¢åŸç”Ÿ app çš„ç™¾åå€ï¼

2. ä¼˜ç‚¹ä¹‹äºŒï¼šåç¼–è¯‘ç ´è§£éš¾åº¦è´¼é«˜ï¼Œæˆ‘ä»¬çŸ¥é“ java æˆ–è€… kotlin ç¼–è¯‘çš„å­—èŠ‚ç åæ±‡ç¼–çš„ smali è¯­è¨€æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œjdgui å°±å¯ä»¥æŸ¥çœ‹åŸ javaï¼Œmt ç®¡ç†å™¨åŸºæœ¬ä¸Šå°±å¯ä»¥ç ´è§£æ²¡åŠ å›º app çš„æ‰€æœ‰åŠŸèƒ½ã€‚

3. ä¼˜ç‚¹ä¹‹ä¸‰ï¼šlua è¯­è¨€æ— éšœç¢è°ƒç”¨å®‰å“ apiï¼Œå¤§é‡ lua æ–¹æ³•æ¯” java æ›´åŠ é«˜æ•ˆå¿«æ·ã€‚

4. ä¼˜ç‚¹ä¹‹å››ï¼šåŸºç¡€ä¾èµ–åº“éå¸¸å…¨é¢ï¼Œå…¨ä¸º lua æ–‡ä»¶åº“ï¼Œå› æ­¤ alua ç¼–è¯‘å‡ºæ¥çš„è½¯ä»¶ä½“ç§¯æ¯”åŸç”Ÿå®‰å“è½¯ä»¶å°å¤ªå¤šï¼

5. ä¼˜ç‚¹ä¹‹äº”ï¼šæ— éšœç¢è°ƒç”¨å…¶ä»–è½¯ä»¶çš„ dex å’Œ so(jar ç­‰è½¬æˆ dex ä¹Ÿèƒ½ç”¨)

## è½»æ¾å®ç° Lua ç¼–ç¨‹è¯­è¨€åœ¨å®‰å“ç«¯è¿è¡Œ

Lua æ˜¯ä¸€ç§è½»é‡å°å·§çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æ ‡å‡† C è¯­è¨€ç¼–å†™å¹¶ä»¥æºä»£ç å½¢å¼å¼€æ”¾ï¼Œ å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚

![](https://pics2.baidu.com/feed/a1ec08fa513d2697e7b3cd03b86925fd4216d8a2.jpeg@f_auto?token=df54142e062c32c232eda00a90fb3100)

æ¥è§¦è¿‡|Lua è¯­è¨€çš„éƒ½çŸ¥é“ Lua æ˜¯ä¸€é—¨èƒ¶æ°´è¯­è¨€ï¼Œé€šè¿‡ä»£ç ä¹‹é—´çš„è°ƒç”¨ï¼Œèƒ½å¤Ÿè·¨å¹³å°è¿è¡Œï¼Œåœ¨è®¸å¤šæ¸¸æˆçš„å¼€å‘ä¸­éƒ½æœ‰ Lua çš„èº«å½±ï¼ŒLua å¯ä»¥é€šè¿‡ä»£ç è§£é‡Šå™¨ç›´æ¥è¿è¡Œï¼Œæ— éœ€ç¼–è¯‘

å®ç°çš„å‰æéœ€è¦ Lua çš„ä»£ç è§£é‡Šå™¨ï¼Œ

å¦‚å›¾ï¼Œå¯¼å…¥æ‰€éœ€ Java api ä»¥åï¼Œå†å¯¼å…¥å®‰å“å¸ƒå±€ï¼Œ

å®ç°åœ¨ Java ä¸Šé¢ç›¸äº’è°ƒç”¨ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§å®‰å“æ··åˆå¼€å‘ï¼šJava+xml+Lua

![](https://pics3.baidu.com/feed/c75c10385343fbf2a36a512049ec5d8664388f8c.jpeg@f_auto?token=b7da2711854c277038272e75ea44e69f)main.lua æ˜¯ä¸»è¦ä»£ç æ–‡ä»¶

ç”¨ import è°ƒç”¨ Dex é‡Œé¢çš„ç±»åº“

Lua çš„å®‰å“è¿è¡Œå·¥å…·å¯ä»¥åœ¨ç½‘ç»œä¸Šé¢ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨ GitHub ä¸Šé¢æŸ¥æ‰¾ä¸‹è½½ä½¿ç”¨

å¦‚ä½•æŠŠ Lua åšæˆè½¯ä»¶ï¼Œåˆ°è¾¾è¿è¡Œç›®çš„

![](https://pics2.baidu.com/feed/b3fb43166d224f4ac24f8eb8f16507549a22d1e5.jpeg@f_auto?token=30ff1652b4e356f7eed4a50174670cd2)é—²è¨€ App çš„ xml æ¸…å•

1.åŸç”Ÿå®‰å“çš„å¼€å‘å·¥å…·ä¸€èˆ¬æ˜¯ Android studio æ‰€éœ€çš„æ ¸å¿ƒæ–‡ä»¶

Javaã€xmlã€dexã€gradleã€classã€jar ç­‰å„ç§å¤æ‚çš„æ–‡ä»¶ï¼Œ

ä¼—å¤šçš„æ–‡ä»¶ä¼šå¯¼è‡´å®‰è£…åŒ…çš„ rom å¾ˆå¤§ï¼Œå¯¹æ‰‹æœºä¸åˆ©ï¼Œå‡å°‘è¿å­˜ã€‚

![](https://pics6.baidu.com/feed/e4dde71190ef76c63171a9066a846afcae516791.jpeg@f_auto?token=df01cf7cc95ba605570ca826ca0676a8)è½¯ä»¶å†…çš„ Java æ–‡ä»¶

åœ¨ä½¿ç”¨ Lua è¯­è¨€è¿™ç§è½»é‡ç¼–ç¨‹ç¯å¢ƒä¸‹ï¼Œèƒ½å‡å°‘å¾ˆå¤šæ–‡ä»¶ï¼Œ

æ¯”å¦‚åªéœ€è¦ dexã€Javaã€xmlã€Lua è¿™å››ç§æ ¸å¿ƒæ–‡ä»¶å³å¯ï¼Œè¿™äº›ä¸éœ€è¦æ‰“åŒ…å¯ä»¥ç›´æ¥è¿è¡Œï¼Œ

2.ç”±äº Java çš„ç‰¹æ®Šæ€§ï¼Œè¿è¡Œæ—¶ä»…ä¼šåŠ è½½ Lua å‡½æ•°å’Œä»£ç ï¼ŒJava ä»£ç éœ€è¦æ‰“åŒ…åæ‰èƒ½å®ç°

![](https://pics1.baidu.com/feed/c83d70cf3bc79f3d203c8a104d335a17738b294e.jpeg@f_auto?token=86798eb32b221a68cb4c0eb548c90788)é—²è¨€ App å†…éƒ¨åˆ† Lua ä»£ç 

åœ¨ gen æ–‡ä»¶ä¸‹ç¼–å†™ Java ä»£ç ï¼Œåœ¨ xml æ¸…å•è°ƒç”¨ Java ä»£ç ï¼Œ

è¿™ä¸ªè½¯ä»¶å…¨å±€é‡‡ç”¨ Lua ä»£ç ï¼Œåœ¨ Lua æ–‡ä»¶ä¹‹å‰äº’ç›¸è°ƒç”¨ï¼Œå½¢æˆå®Œæ•´çš„ä»£ç æ”¯æŒ

ä»£ç æ–‡ä»¶æˆ‘è§‰å¾—æœ‰å¿…è¦è¿™é‡Œä¸€ä¸‹ï¼ŒæŠŠæºç å·¥ç¨‹å½“ä½œè‡ªå·±çš„å®¶

æœªç¼–è¯‘çš„ Lua å·¥ç¨‹æºç è¿è¡Œåªä¼šåŠ è½½ Lua å’Œ table æ–‡ä»¶ä»£ç ï¼Œè¿è¡Œæ—¶éœ€è¦ init.lua æ–‡ä»¶çš„æ”¯æŒ

![](https://pics2.baidu.com/feed/9f510fb30f2442a751ff07a92bd13a4dd0130266.jpeg@f_auto?token=05e6b91f4fcccf60133f3e5ad2dc1f7a)xml è°ƒç”¨ Java å‡½æ•°

æ€»ç»“ï¼šLua å¼€å‘å®‰å“è½¯ä»¶å¾ˆç½•è§ï¼Œæ‰“åŒ…åçš„å®‰è£…åŒ… rom å¾ˆå°ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œè¿™ä¸å±äºåŸç”Ÿå¼€å‘å§ï¼Œæ›´å¤š Lua å¼€å‘å®‰å“è½¯ä»¶çš„å®åˆ—åœ¨ç½‘ç»œä¸Šé¢å¯ä»¥æŸ¥åˆ°çš„ï¼Œå…¸å‹çš„å®ä¾‹å¦‚é—²è¨€ Appï¼Œå®ç°ä¼—å¤šåŠŸèƒ½ä»¥åè¿˜èƒ½æŠŠ rom å¤§å°å…‹åˆ¶åœ¨ 5M ä»¥å†…ã€‚

æç¤ºï¼šLua æ–‡ä»¶å®¹æ˜“è¢«ç ´è§£ï¼Œå»ºè®®åœ¨æ‰“åŒ…æ—¶æŠŠ Lua å’Œ dex ä¸€å¹¶åŠ å¯†ï¼Œå¯å‡å°‘ç ´è§£çš„å¯èƒ½æ€§ã€‚

## Lua å¼€å‘æ‰“åŒ… APK çš„æºç 

[mkottman/AndroLuaï¼šLua å’Œ LuaJava ç§»æ¤åˆ° Android (github.com)](https://github.com/mkottman/AndroLua)

[ichenhe/Android-Luaï¼šåŸºäº Androluaï¼Œåšä¸€äº›å®é™…çš„æ”¹å˜ã€‚ (github.com)](https://github.com/ichenhe/Android-Lua)

[Aide Lua: ä¾èµ– Aide ï¼Œä½¿ç”¨ Lua å¿«é€Ÿã€é«˜æ•ˆå¼€å‘çš„å·¥å…· (gitee.com)](https://gitee.com/AideLua/AideLua)

[AndLua: Alone å¤§ä½¬æ‰€å†™çš„ä¸€ä¸ª lua ç¼–è¾‘å™¨ å®˜ç½‘:https://andlua.top/ (gitee.com)](https://gitee.com/three-to-three/and-lua-a)

[TheMostBlack/AndLuaX: AndLuaX+ (github.com)](https://github.com/TheMostBlack/AndLuaX)

[mythoi/ALuaJ: ç§»åŠ¨ç«¯ IDEï¼Œæ”¯æŒ lua å’Œ java ç¼–è¯‘è¿è¡Œï¼Œæ”¯æŒæ‰“åŒ… apk (github.com)](https://github.com/mythoi/ALuaJ)

[xiao00kang/AndroLua_Project_Template: ä½¿ç”¨æ­¤æ¨¡æ¿åœ¨ Android Studio ä¸Šå¼€å‘ AndroLua åº”ç”¨ï¼ (github.com)](https://github.com/xiao00kang/AndroLua_Project_Template)

[nirenr/AndroLua_pro: Lua5.3.3 for android pro (github.com)](https://github.com/nirenr/AndroLua_pro)

[AideLua/AndroLuaX: é€‚é…äº† AndroidX çš„ AndroLua+ (github.com)](https://github.com/AideLua/AndroLuaX)

[dingyi222666/AndroLua-Standalone: åœ¨ android ä¸Šè¿è¡Œ lua (github.com)](https://github.com/dingyi222666/AndroLua-Standalone)

[xiao00kang/AndroLua_Project_Template: ä½¿ç”¨æ­¤æ¨¡æ¿åœ¨ Android Studio ä¸Šå¼€å‘ AndroLua åº”ç”¨ï¼ (github.com)](https://github.com/xiao00kang/AndroLua_Project_Template)

[JealousCat/AndroLua_Pro_Plus: å°† AndroLua çš„ Lua ç‰ˆæœ¬ä» 5.3.x å‡çº§åˆ°äº† Lua5.4.4ï¼ˆLua 5.4.4 for Android developmentï¼‰ (github.com)](https://github.com/JealousCat/AndroLua_Pro_Plus)

[haodynasty/AndroidLuaExampleï¼šLua 5.3.3 å’Œ LuaJava ç§»æ¤åˆ° Android ç¤ºä¾‹ (github.com)](https://github.com/haodynasty/AndroidLuaExample)

[haodynasty/AndroidLuaExampleï¼šLua 5.3.3 å’Œ LuaJava ç§»æ¤åˆ° Android ç¤ºä¾‹ (github.com)](https://github.com/haodynasty/AndroidLuaExample)

## Androlua

å¼€æºåœ°å€ï¼š[mkottman/AndroLuaï¼šLua å’Œ LuaJava ç§»æ¤åˆ° Android (github.com)](https://github.com/mkottman/AndroLua)

[Lua åˆè§ | AndroluaDocs (dianas.cyou)](https://lua.dianas.cyou/pages/9f7e48/#å¿«é€Ÿè®¤è¯†ä¸€ä¸‹æ™®éå†™æ³•)

## AndroluaDocs

[é¡¹ç›®èµ„æºä¸‹è½½ | AndroluaDocs (dianas.cyou)](https://lua.dianas.cyou/pages/ffda64/#æ¸ é“02-å¼€æºä»“åº“)

## å¼€æº

[sudoskys/Moonnote: A note-taking application developed using the Androlua framework |ä½¿ç”¨ Androlua æ¡†æ¶å¼€å‘çš„ä¸€æ¬¾ç¬”è®°åº”ç”¨ (github.com)](https://github.com/sudoskys/Moonnote)

[huajiqaq/Hydrogen: ä¸€ä¸ªåŸºäº androlua+å¼€å‘çš„ç¬¬ä¸‰æ–¹çŸ¥ä¹å®‰å“å®¢æˆ·ç«¯ (github.com)](https://github.com/huajiqaq/Hydrogen)

## ä½¿ç”¨ lua è¯­è¨€å¼€å‘ Android åº”ç”¨

åšç§»åŠ¨ç«¯å¼€å‘ï¼Œåšè›‹ç–¼çš„å°±æ˜¯ä¸èƒ½**åŠ¨æ€å‘ç‰ˆ**ï¼Œä¸èƒ½åƒ web é‚£æ ·å‘ç‰ˆç«‹å³å…¨éƒ¨ç”¨æˆ·ç”Ÿæ•ˆï¼Œç„¶è€Œ Â [lua](http://www.runoob.com/manual/lua53doc/)è¯­è¨€ ä¸ºå…¶æä¾›äº†å¯èƒ½æ€§ã€‚

ä½¿ç”¨ lua æ¥æ„å»ºè·¨å¹³å°åŸç”Ÿåº”ç”¨æœ‰è®¸å¤šå¥½å¤„ï¼Œæ¯”å¦‚ lua è¯­è¨€ç®€æ´é«˜æ•ˆï¼Œå¯ç§»æ¤æ€§å¥½ï¼Œ Lua è™šæ‹Ÿæœºæä¸ºè½»é‡ï¼Œä»…å ç”¨ 200 åˆ° 300k çš„å†…å­˜ç©ºé—´ï¼Œä¸”é€Ÿåº¦æå¿«ã€‚

luaDevAndroidï¼š[hanks-zyh/luaDevAndroid: dev android use lua language (github.com)](https://github.com/hanks-zyh/luaDevAndroid)

## Android ä¸ Luaï¼š[Android ä¸ Lua - æ˜é‡‘](https://juejin.cn/post/6844903715435085838)

[Lua](https://link.juejin.cn?target=https%3A%2F%2Fwww.lua.org%2F "https://www.lua.org/"): ä¸€ç§è½»é‡è¯­è¨€ï¼Œç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œä½“ç§¯å°ï¼Œå¯åŠ¨é€Ÿåº¦å¿«ã€‚Lua æœ‰ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„ JIT é¡¹ç›®ï¼Œæä¾›åœ¨ç‰¹å®šå¹³å°ä¸Šçš„å³æ—¶ç¼–è¯‘åŠŸèƒ½ã€‚

[LuaJ](https://link.juejin.cn?target=https%3A%2F%2Fwww.luaj.org%2Fluaj%2F3.0%2FREADME.html "https://www.luaj.org/luaj/3.0/README.html")ï¼š
Luaj æ˜¯ä¸€ä¸ª Java çš„ Lua è§£é‡Šå™¨ï¼ŒåŸºäº Lua 5.2.x ç‰ˆæœ¬ï¼Œç›®çš„æ˜¯ï¼š

- åŸºäº Java çš„å®ç°ï¼Œå¯ä»¥åœ¨ Java åº”ç”¨ä¸­é›†æˆ Lua è™šæ‹Ÿæœº
- è½»é‡çº§ã€é«˜æ€§èƒ½çš„æ‰§è¡Œ Lua
- å¤šå¹³å°æ”¯æŒ
- å®Œæ•´çš„åº“å’Œå·¥å…·æ”¯æŒ
- å¯åœ¨ Java MEã€SE å’Œ EE ç¯å¢ƒä¸­æ‰§è¡Œ
- luajava api æ”¯æŒ
- æ··åˆè°ƒè¯•

[AndroLua](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmkottman%2FAndroLua "https://github.com/mkottman/AndroLua") : `Androlua` æ˜¯å®‰å“å¹³å°ä¸Šçš„ç”¨ Lua å¼€å‘å®‰å“ç¨‹åºçš„å·¥å…·ï¼Œä¸ä»…æ”¯æŒè°ƒç”¨ Java APIï¼Œè€Œä¸”æ”¯æŒç¼–å†™å®‰å“ç•Œé¢ç¨‹åºï¼Œè¿˜å¯ä»¥å°†è‡ªå·±å†™çš„ Lua ç¨‹åºæ‰“åŒ…æˆ apk å®‰è£…æ–‡ä»¶å®‰è£…ã€‚Lua è¯­è¨€çš„ç®€å•ä½¿æ²¡æœ‰ä»»ä½•ç¼–ç¨‹ç»éªŒçš„ç”¨æˆ·ä¹Ÿèƒ½åœ¨çŸ­æ—¶é—´å†…å¼€å‘å‡ºå®‰å“ç¨‹åºã€‚(æ¥è‡ªç™¾åº¦[ç™¾ç§‘](https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Flink%3Furl%3DuKUBS37YCr-ASuAsGJH4RaS2dTbm0AUq_1la8TGBJUHrdjkeFhTwqbxJy4OZkagOI146bPK0csWnijBr-zQ2uLOzN4f_pJGkWOcd5jWf-Hm "https://baike.baidu.com/link?url=uKUBS37YCr-ASuAsGJH4RaS2dTbm0AUq_1la8TGBJUHrdjkeFhTwqbxJy4OZkagOI146bPK0csWnijBr-zQ2uLOzN4f_pJGkWOcd5jWf-Hm"))

[LuaViewSDK - Android ç‰ˆ](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FLuaViewSDK "https://github.com/alibaba/LuaViewSDK") `LuaViewSDK` ç”±é˜¿é‡Œèšåˆ’ç®—æ— çº¿å¼€å‘å›¢é˜Ÿå¼€å‘å¹¶ç»´æŠ¤ï¼Œ LuaView æ˜¯ä¸€ç§è¿è¡Œåœ¨ä¸€ä¸ª ViewController/Activity ä¸­ï¼Œå¯ä»¥**çµæ´»åŠ è½½** Lua è„šæœ¬ï¼Œå¹¶èƒ½å¤ŸæŒ‰ç…§ **Native** çš„æ–¹å¼è¿è¡Œçš„ä¸€ç§é¢å‘ä¸šåŠ¡çš„å¼€å‘æŠ€æœ¯æ–¹æ¡ˆã€‚å¯ä»¥å¿«é€Ÿå¼€å‘ç”µå•†åº”ç”¨ä¸­æ—¢è¦æ±‚ä½“éªŒåˆè¦æ±‚çµæ´»æ€§çš„é¡µé¢åŠŸèƒ½ï¼Œä¾‹å¦‚é¦–é¡µï¼Œç±»ç›®é¦–é¡µï¼Œå‚ç›´é¢‘é“ï¼Œå¤§ä¿ƒæ´»åŠ¨ä¼šåœºç­‰ã€‚LuaViewSDK è¿˜æœ‰ iOS ç‰ˆã€‚

### LuaViewSDK ä½“éªŒ

å®˜æ–¹æ–‡æ¡£æ”¾äº†ä¸€ä¸ªå¾ˆè¯¦ç»†çš„å…¥é—¨æ–‡æ¡£ ğŸ‘‰[æ–°æ‰‹å…¥é—¨ - android](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FLuaViewSDK%2Fblob%2Fmaster%2FAndroid%2FDocumentation%2F%25E6%2596%25B0%25E6%2589%258B%25E5%2585%25A5%25E9%2597%25A8-android%2F%25E6%2596%25B0%25E6%2589%258B%25E5%2585%25A5%25E9%2597%25A8%2520-%2520android.md "https://github.com/alibaba/LuaViewSDK/blob/master/Android/Documentation/%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8-android/%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%20-%20android.md")

ä¸‹é¢çš„æ˜¯æˆ‘è‡ªå·±åˆ›å»ºçš„é¡¹ç›®ï¼ŒåŠ è½½ assets ç›®å½•ä¸‹çš„ `haha.lua` æ–‡ä»¶

<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/11/17/1671d4842a48b7c9~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" title="" alt="å›¾ç‰‡" width="275">

ä¸‹é¢å°è¯•åŠ è½½å¤–éƒ¨çš„è„šæœ¬æ–‡ä»¶ï¼Œ æˆ‘åœ¨ sd å¡ä¸Šæ–°å»ºäº†ä¸€ä¸ª `local.lua` è„šæœ¬æ–‡ä»¶
å†…å®¹å¦‚ä¸‹

```ini
w,h = System.screenSize();
window.frame(0, 0, w, h);
window.backgroundColor(0x220000);

label = Label();
label.frame(16,16,w, 60);
label.text("Local Hello World LuaView to Android");
```

<img title="" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/11/17/1671d483bade267e~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt="" width="411">

æˆ‘ä»¬é¡µå¯åŠ è½½æœåŠ¡å™¨ä¸Šçš„ lua è„šæœ¬ï¼Œæ³¨æ„æ ¡éªŒæœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œé˜²æ­¢ lua è„šæœ¬æ¶æ„æ”»å‡»ã€‚

### ç›¸å…³æ–‡ç« 

- [Lua åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„åº”ç”¨](https://link.juejin.cn?target=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fopensource%2Fos-cn-LUAScript%2F "https://www.ibm.com/developerworks/cn/opensource/os-cn-LUAScript/")
