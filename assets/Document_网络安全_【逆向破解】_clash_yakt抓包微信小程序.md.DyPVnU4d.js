import{_ as s,c as n,o as a,a3 as l}from"./chunks/framework.zGi9i9Bf.js";const p="/ProgramLearnNotes/assets/640-1714155839744-515.dTvh5F7q.webp",e="/ProgramLearnNotes/assets/640-1714155839744-516.DINDz_tO.webp",o="/ProgramLearnNotes/assets/640-1714155839744-517.Dn5Co3TQ.webp",r="/ProgramLearnNotes/assets/640-1714155839744-518.Ckf7m6XM.webp",c="/ProgramLearnNotes/assets/640-1714155839744-519.BV4iblR0.webp",t="/ProgramLearnNotes/assets/640-1714155839744-520.wZOalep6.webp",d=JSON.parse('{"title":"clash+yakt抓包微信小程序","description":"","frontmatter":{},"headers":[],"relativePath":"Document/网络安全/【逆向破解】/clash+yakt抓包微信小程序.md","filePath":"Document/网络安全/【逆向破解】/clash+yakt抓包微信小程序.md","lastUpdated":1714158724000}'),i={name:"Document/网络安全/【逆向破解】/clash+yakt抓包微信小程序.md"},y=l('<h1 id="clash-yakt抓包微信小程序" tabindex="-1">clash+yakt抓包微信小程序 <a class="header-anchor" href="#clash-yakt抓包微信小程序" aria-label="Permalink to &quot;clash+yakt抓包微信小程序&quot;">​</a></h1><h2 id="_0x00-免责声明" tabindex="-1"><strong>0x00</strong> 免责声明 <a class="header-anchor" href="#_0x00-免责声明" aria-label="Permalink to &quot;**0x00** 免责声明&quot;">​</a></h2><p>本文仅用于技术讨论与学习，利用此文所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，文章作者及本公众号团队不为此承担任何责任。</p><h2 id="_0x01-前言" tabindex="-1">0x01 前言 <a class="header-anchor" href="#_0x01-前言" aria-label="Permalink to &quot;0x01 前言&quot;">​</a></h2><p>在抓app和微信小程序时，通常使用Proxifier进行代理，但是总是莫名其妙的没有反应，这时就只能重启电脑。这时我们就可以使用clash进行抓包，亲测可用。</p><h2 id="_0x02-代理模式设置" tabindex="-1">0x02 代理模式设置 <a class="header-anchor" href="#_0x02-代理模式设置" aria-label="Permalink to &quot;0x02 代理模式设置&quot;">​</a></h2><p>开启服务模式，系统代理</p><p><img src="'+p+'" alt="图片"></p><p>确保wintun.dll存在</p><p><img src="'+e+'" alt="图片"></p><h2 id="_0x03-配置代理文件" tabindex="-1">0x03 配置代理文件 <a class="header-anchor" href="#_0x03-配置代理文件" aria-label="Permalink to &quot;0x03 配置代理文件&quot;">​</a></h2><p>在配置选项中导入配置文件</p><p><img src="'+o+'" alt="图片"></p><p><img src="'+r+`" alt="图片"></p><p>该配置文件提供了只抓微信小程序和全局代理两个节点</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 代理设置</span></span>
<span class="line"><span style="color:#E06C75;">proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">http</span></span>
<span class="line"><span style="color:#E06C75;">    server</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">127.0.0.1</span></span>
<span class="line"><span style="color:#E06C75;">    port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#7F848E;font-style:italic;">  # 根据抓包工具配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 代理组设置</span></span>
<span class="line"><span style="color:#E06C75;">proxy-groups</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Proxy</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">select</span></span>
<span class="line"><span style="color:#E06C75;">    proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">DIRECT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">GlobalProxy</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">select</span></span>
<span class="line"><span style="color:#E06C75;">    proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Proxy</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">DIRECT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 规则设置</span></span>
<span class="line"><span style="color:#E06C75;">rules</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,wxapp.qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">   # 微信小程序的域名匹配规则，流量通过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,wechat.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 可能与微信小程序相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,tencent.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 腾讯相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,weixin.qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 微信相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # QQ 相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">MATCH,GlobalProxy</span><span style="color:#7F848E;font-style:italic;">   # 默认规则，可在 GlobalProxy 中切换全局代理和直连</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># DNS 配置</span></span>
<span class="line"><span style="color:#E06C75;">dns</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">  enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  ipv6</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#E06C75;">  enhanced-mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">fake-ip</span><span style="color:#7F848E;font-style:italic;"> # 或使用 redir-host，取决于设备和需求</span></span>
<span class="line"><span style="color:#E06C75;">  nameserver</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#D19A66;">8.8.8.8</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#D19A66;">1.1.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 其他设置</span></span>
<span class="line"><span style="color:#E06C75;">tun</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">  enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  stack</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">system</span><span style="color:#7F848E;font-style:italic;"> # 或 gvisor，取决于设备支持</span></span>
<span class="line"><span style="color:#E06C75;">  dns-hijack</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#98C379;">198.18.0.2:53</span></span>
<span class="line"><span style="color:#E06C75;">  auto-route</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  auto-detect-interface</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#7F848E;font-style:italic;"> # Clash 会自动检测出口网卡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 日志级别，可选 &quot;info&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;debug&quot;, &quot;silent&quot;</span></span>
<span class="line"><span style="color:#E06C75;">log-level</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">info</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="_0x04-抓包效果" tabindex="-1">0x04 抓包效果 <a class="header-anchor" href="#_0x04-抓包效果" aria-label="Permalink to &quot;0x04 抓包效果&quot;">​</a></h2><p>配置与yakt联动(如使用burp微信必须在3.7.6版本以下)，ip填写本机ip或127.0.0.1（本地记得导入yakt证书）</p><p><img src="`+c+'" alt="图片"></p><p>抓包效果，可以看到抓取成功</p><p><img src="'+t+`" alt="图片"></p><h2 id="_0x05-总结" tabindex="-1">0x05 总结 <a class="header-anchor" href="#_0x05-总结" aria-label="Permalink to &quot;0x05 总结&quot;">​</a></h2><p>该方法不仅适用pc端，还可适用于抓取手机app但是clash本身不会无视客户端的证书校验，所以需要一些其它方式去解决证书问题，鸽鸽们可以自行研究一下，配置文件Android和pc基本可以通用。</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 代理设置</span></span>
<span class="line"><span style="color:#E06C75;">proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">http</span></span>
<span class="line"><span style="color:#E06C75;">    server</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">127.0.0.1</span></span>
<span class="line"><span style="color:#E06C75;">    port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#7F848E;font-style:italic;">  # 根据抓包工具配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 代理组设置</span></span>
<span class="line"><span style="color:#E06C75;">proxy-groups</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Proxy</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">select</span></span>
<span class="line"><span style="color:#E06C75;">    proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">DIRECT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">GlobalProxy</span></span>
<span class="line"><span style="color:#E06C75;">    type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">select</span></span>
<span class="line"><span style="color:#E06C75;">    proxies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Charles</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">Proxy</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">DIRECT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 规则设置</span></span>
<span class="line"><span style="color:#E06C75;">rules</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,wxapp.qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">   # 微信小程序的域名匹配规则，流量通过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,wechat.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 可能与微信小程序相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,tencent.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 腾讯相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,weixin.qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # 微信相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">DOMAIN-SUFFIX,qq.com,Proxy</span><span style="color:#7F848E;font-style:italic;">    # QQ 相关的域名，也经过 Charles 代理</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">MATCH,GlobalProxy</span><span style="color:#7F848E;font-style:italic;">   # 默认规则，可在 GlobalProxy 中切换全局代理和直连</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># DNS 配置</span></span>
<span class="line"><span style="color:#E06C75;">dns</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">  enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  ipv6</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#E06C75;">  enhanced-mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">fake-ip</span><span style="color:#7F848E;font-style:italic;"> # 或使用 redir-host，取决于设备和需求</span></span>
<span class="line"><span style="color:#E06C75;">  nameserver</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#D19A66;">8.8.8.8</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#D19A66;">1.1.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 其他设置</span></span>
<span class="line"><span style="color:#E06C75;">tun</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">  enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  stack</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">system</span><span style="color:#7F848E;font-style:italic;"> # 或 gvisor，取决于设备支持</span></span>
<span class="line"><span style="color:#E06C75;">  dns-hijack</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#98C379;">198.18.0.2:53</span></span>
<span class="line"><span style="color:#E06C75;">  auto-route</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#E06C75;">  auto-detect-interface</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#7F848E;font-style:italic;"> # Clash 会自动检测出口网卡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 日志级别，可选 &quot;info&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;debug&quot;, &quot;silent&quot;</span></span>
<span class="line"><span style="color:#E06C75;">log-level</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">info</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div>`,24),B=[y];function b(u,m,F,C,A,E){return a(),n("div",null,B)}const x=s(i,[["render",b]]);export{d as __pageData,x as default};
