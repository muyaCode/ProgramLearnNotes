import{_ as s,c as a,o as e,a3 as n}from"./chunks/framework.zGi9i9Bf.js";const l="/ProgramLearnNotes/assets/640.ElVyI2WX.webp",o="/ProgramLearnNotes/assets/640-1715166746148-36.BiVTUMzG.webp",r="/ProgramLearnNotes/assets/640-1715166777151-39.BuYavvjY.webp",p="/ProgramLearnNotes/assets/640-1715166777151-40.B-9yampx.webp",t="/ProgramLearnNotes/assets/640-1715166777151-41.CSM-NPfr.webp",c="/ProgramLearnNotes/assets/640-1715166777151-42.DT6peltt.webp",i="/ProgramLearnNotes/assets/640-1715166777151-43.B6ubv1cW.webp",d="/ProgramLearnNotes/assets/640-1715166777151-44.DIZK0GEs.webp",u="/ProgramLearnNotes/assets/640-1715166777151-45.Dw4jTnFj.webp",b="/ProgramLearnNotes/assets/640-1715166978780-60.q2T_pIIg.webp",h="/ProgramLearnNotes/assets/640-1715166978780-61.D6k84see.webp",m="/ProgramLearnNotes/assets/image-20240508191845661.BHTDEePh.png",y="/ProgramLearnNotes/assets/640-1715166978780-65.C17hPHZY.webp",k="/ProgramLearnNotes/assets/640-1715166978780-66.MYZooiRi.webp",C="/ProgramLearnNotes/assets/640-1715166978780-67.BlFCuqrS.webp",g="/ProgramLearnNotes/assets/640-1715166978780-68.Dymxjpvt.webp",v="/ProgramLearnNotes/assets/640-1715166978780-69.Cn4VHPfJ.webp",D="/ProgramLearnNotes/assets/640-1715166978780-70.tdbe771W.webp",A="/ProgramLearnNotes/assets/640-1715166978780-71.DmZgQWkg.webp",f="/ProgramLearnNotes/assets/640-1715166978780-72.B_M7HSAe.gif",L=JSON.parse('{"title":"Docker å…¥é—¨","description":"","frontmatter":{},"headers":[],"relativePath":"Document/Docker/Dockerå…¥é—¨.md","filePath":"Document/Docker/Dockerå…¥é—¨.md","lastUpdated":1717759497000}'),F={name:"Document/Docker/Dockerå…¥é—¨.md"},q=n('<h1 id="docker-å…¥é—¨" tabindex="-1">Docker å…¥é—¨ <a class="header-anchor" href="#docker-å…¥é—¨" aria-label="Permalink to &quot;Docker å…¥é—¨&quot;">â€‹</a></h1><h2 id="ç›¸å…³ç½‘å€" tabindex="-1">ç›¸å…³ç½‘å€ <a class="header-anchor" href="#ç›¸å…³ç½‘å€" aria-label="Permalink to &quot;ç›¸å…³ç½‘å€&quot;">â€‹</a></h2><p>Docker å®˜ç½‘ï¼š<a href="https://www.docker.com" target="_blank" rel="noreferrer">https://www.docker.com</a></p><p>docker åº“ï¼š<a href="https://hub.docker" target="_blank" rel="noreferrer">https://hub.docker</a>,com</p><h2 id="docker-ç®€ä»‹" tabindex="-1">Docker ç®€ä»‹ <a class="header-anchor" href="#docker-ç®€ä»‹" aria-label="Permalink to &quot;Docker ç®€ä»‹&quot;">â€‹</a></h2><p>Docker æ˜¯ä¸€ç§å®¹å™¨åŒ–å¹³å°ï¼Œå…è®¸å¼€å‘äººå‘˜å°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªç§°ä¸º Docker é•œåƒçš„å¯ç§»æ¤å®¹å™¨ä¸­ã€‚è¿™ä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œï¼Œè€Œæ— éœ€æ‹…å¿ƒç¯å¢ƒå·®å¼‚æˆ–ä¾èµ–é—®é¢˜ã€‚</p><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚å¼€å‘è€…åœ¨ç¬”è®°æœ¬ä¸Šç¼–è¯‘æµ‹è¯•é€šè¿‡çš„å®¹å™¨å¯ä»¥æ‰¹é‡åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼ŒåŒ…æ‹¬ VMs (è™šæ‹Ÿæœº) ã€bare metalã€OpenStack é›†ç¾¤å’Œå…¶ä»–çš„åŸºç¡€åº”ç”¨å¹³å°ã€‚</p><p>Docker é€šå¸¸ç”¨äºå¦‚ä¸‹åœºæ™¯ï¼š</p><ul><li>web åº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒ ;</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒï¼›</li><li>åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ï¼›</li><li>ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„ OpenShift æˆ– Cloud Foundry å¹³å°æ¥æ­å»ºè‡ªå·±çš„ PaaS ç¯å¢ƒã€‚</li></ul><h2 id="å¾®æœåŠ¡çš„æ ¸å¿ƒæ€æƒ³" tabindex="-1">å¾®æœåŠ¡çš„æ ¸å¿ƒæ€æƒ³ <a class="header-anchor" href="#å¾®æœåŠ¡çš„æ ¸å¿ƒæ€æƒ³" aria-label="Permalink to &quot;å¾®æœåŠ¡çš„æ ¸å¿ƒæ€æƒ³&quot;">â€‹</a></h2><h2 id="docker-vs-vm" tabindex="-1">Docker vs VM <a class="header-anchor" href="#docker-vs-vm" aria-label="Permalink to &quot;Docker vs VM&quot;">â€‹</a></h2><p>VMï¼š</p><ul><li>è¿è¡Œåœ¨å®¿ä¸»æœºä¹‹ä¸Šçš„å®Œæ•´çš„æ“ä½œç³»ç»Ÿ</li><li>è¿è¡Œè‡ªèº«æ“ä½œç³»ç»Ÿä¼šå ç”¨è¾ƒå¤šçš„èµ„æº</li></ul><p>Docker :</p><ul><li>Docker æ›´åŠ è½»é‡é«˜æ•ˆ</li><li>å¯¹ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å¾ˆé«˜</li><li>æ¯”è™šæ‹ŸæœºæŠ€æœ¯æ›´ä¸ºè½»ä¾¿ã€å¿«æ·</li><li>éš”ç¦»æ•ˆæœä¸å¦‚ VM</li></ul><h2 id="docker-çš„ç›¸å…³æ¦‚å¿µ" tabindex="-1">Docker çš„ç›¸å…³æ¦‚å¿µ <a class="header-anchor" href="#docker-çš„ç›¸å…³æ¦‚å¿µ" aria-label="Permalink to &quot;Docker çš„ç›¸å…³æ¦‚å¿µ&quot;">â€‹</a></h2><p>Docker æ˜¯ CS æ¶æ„ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ¦‚å¿µ</p><p>Docker daemon:</p><ul><li>è¿è¡Œåœ¨å®¿ä¸»æœºä¸Š</li><li>Docker å®ˆæŠ¤è¿›ç¨‹</li><li>ç”¨æˆ·é€šè¿‡ Docker client(Docker å‘½ä»¤)ä¸ Docker daemon äº¤äº’</li></ul><p>Docker client:</p><ul><li>Docker å‘½ä»¤è¡Œå·¥å…·ï¼Œæ˜¯ç”¨æˆ·ä½¿ç”¨ Docker çš„ä¸»è¦æ–¹å¼</li><li>Docker client ä¸ Docker daemon é€šä¿¡å¹¶å°†ç»“æœè¿”å›ç»™ç”¨æˆ·</li><li>Docker client ä¹Ÿå¯ä»¥é€šè¿‡ socket æˆ–è€… RESTful api è®¿é—®è¿œç¨‹çš„ Docker daemon</li></ul><h2 id="å®‰è£…ä¸-hello-world" tabindex="-1">å®‰è£…ä¸ Hello world <a class="header-anchor" href="#å®‰è£…ä¸-hello-world" aria-label="Permalink to &quot;å®‰è£…ä¸ Hello world&quot;">â€‹</a></h2><h2 id="å¸¸ç”¨å‘½ä»¤ä¸-dockerfile" tabindex="-1">å¸¸ç”¨å‘½ä»¤ä¸ Dockerfile <a class="header-anchor" href="#å¸¸ç”¨å‘½ä»¤ä¸-dockerfile" aria-label="Permalink to &quot;å¸¸ç”¨å‘½ä»¤ä¸ Dockerfile&quot;">â€‹</a></h2><p>Dockerfile æ¦‚å¿µ</p><p>Dockerfile æ–‡ä»¶æ ¼å¼</p><p>æ„å»ºé•œåƒ</p><p>é•œåƒæ ‡ç­¾</p><p>ä¿®æ”¹å®¹å™¨å†…å®¹</p><h2 id="docker-hub" tabindex="-1">Docker Hub <a class="header-anchor" href="#docker-hub" aria-label="Permalink to &quot;Docker Hub&quot;">â€‹</a></h2><p>docker åº“ï¼š<a href="https://hub.docker" target="_blank" rel="noreferrer">https://hub.docker</a>,com</p><h2 id="å®æˆ˜-æ‰“åŒ…ä¸€ä¸ª-web-æœåŠ¡å™¨" tabindex="-1">å®æˆ˜ :æ‰“åŒ…ä¸€ä¸ª WEB æœåŠ¡å™¨ <a class="header-anchor" href="#å®æˆ˜-æ‰“åŒ…ä¸€ä¸ª-web-æœåŠ¡å™¨" aria-label="Permalink to &quot;å®æˆ˜ :æ‰“åŒ…ä¸€ä¸ª WEB æœåŠ¡å™¨&quot;">â€‹</a></h2><h2 id="å¾®æœåŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆ" tabindex="-1">å¾®æœåŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#å¾®æœåŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;å¾®æœåŠ¡åˆ°åº•æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h2><p>å¾®æœåŠ¡å±äºæ¶æ„å±‚é¢çš„è®¾è®¡æ¨¡å¼</p><p>å¾®æœåŠ¡çš„è®¾è®¡æ¦‚å¿µä»¥ä¸šåŠ¡åŠŸèƒ½ä¸ºä¸»</p><p>å¾®æœåŠ¡ç‹¬ç«‹æä¾›å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½</p><p>å¾®æœåŠ¡ä¸æ‹˜æ³¥äºå…·ä½“çš„å®ç°è¯­è¨€</p><p>å¾®æœåŠ¡æ¶æ„ ~ æ¨¡å—åŒ–å¼€å‘ + åˆ†å¸ƒå¼è®¡ç®—</p><p>å¾®æœåŠ¡ä¸€ä¸€é›†æˆä¸éƒ¨ç½²</p><ul><li>æŒç»­é›†æˆä¸€ jekins</li><li>è™šæ‹ŸåŒ–ä¸€ä¸€è™šæ‹Ÿæœº</li><li>å®¹å™¨-Docker</li></ul><h2 id="k8s-kubernetes-å…¥é—¨" tabindex="-1">K8S(Kubernetes)å…¥é—¨ <a class="header-anchor" href="#k8s-kubernetes-å…¥é—¨" aria-label="Permalink to &quot;K8S(Kubernetes)å…¥é—¨&quot;">â€‹</a></h2><p>å®˜ç½‘ï¼š<a href="https://www.kubernetes.org.cn/k8s" target="_blank" rel="noreferrer">https://www.kubernetes.org.cn/k8s</a></p><h3 id="ä»€ä¹ˆæ˜¯-k8s" tabindex="-1">ä»€ä¹ˆæ˜¯ K8s <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-k8s" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ K8s&quot;">â€‹</a></h3><ul><li>Kubernetesï¼Œå› ä¸ºé¦–å°¾å­—æ¯ä¸­é—´æœ‰ 8 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥è¢«ç®€å†™æˆ K8sã€‚</li><li>k8s æ˜¯åº•å±‚èµ„æºä¸å®¹å™¨é—´çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå¦‚æœå’Œå•æœºæ¶æ„ç±»æ¯”ï¼Œå¯ä»¥ç®—ä½œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ—¶ä»£çš„ Linuxã€‚</li><li>K8s æ˜¯ Google å¼€æºçš„å®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚åœ¨ Docker æŠ€æœ¯çš„åŸºç¡€ä¸Šï¼Œä¸ºå®¹å™¨åŒ–çš„åº”ç”¨æä¾›éƒ¨ç½²è¿è¡Œã€èµ„æºè°ƒåº¦ã€æœåŠ¡å‘ç°å’ŒåŠ¨æ€ä¼¸ç¼©ç­‰ä¸€ç³»åˆ—å®Œæ•´åŠŸèƒ½ï¼Œæé«˜äº†å¤§è§„æ¨¡å®¹å™¨é›†ç¾¤ç®¡ç†çš„ä¾¿æ·æ€§ã€‚</li></ul><h3 id="k8s-çš„ç‰¹ç‚¹" tabindex="-1">K8S çš„ç‰¹ç‚¹ <a class="header-anchor" href="#k8s-çš„ç‰¹ç‚¹" aria-label="Permalink to &quot;K8S çš„ç‰¹ç‚¹&quot;">â€‹</a></h3><p>k8s æ˜¯ä¸€ä¸ªç®¡ç†å®¹å™¨çš„å·¥å…·ï¼Œä¹Ÿæ˜¯ç®¡ç†åº”ç”¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªå·¥å…·åº”ç”¨æ›´æ–°ä»åˆ›å»ºåº”ç”¨ï¼Œåº”ç”¨çš„éƒ¨ç½²ï¼Œåº”ç”¨æä¾›æœåŠ¡ï¼Œæ‰©å®¹ç¼©å®¹åº”ç”¨ï¼Œè€Œä¸”å¯ä»¥åšåˆ°æ•…éšœè‡ªæ„ˆã€‚</p><ul><li>å¯ç§»æ¤ï¼šæ”¯æŒå…¬æœ‰äº‘ï¼Œç§æœ‰äº‘ï¼Œæ··åˆäº‘</li><li>å¯æ‰©å±•ï¼šæ¨¡å—åŒ–ï¼Œçƒ­æ’æ‹¨ï¼Œå¯ç»„åˆ</li><li>è‡ªæ„ˆï¼šè‡ªåŠ¨æ›¿æ¢ï¼Œè‡ªåŠ¨é‡å¯ï¼Œè‡ªåŠ¨å¤åˆ¶ï¼Œè‡ªåŠ¨æ‰©å±•</li></ul><h3 id="k8s-çš„ç®¡ç†æ­¥éª¤" tabindex="-1">K8S çš„ç®¡ç†æ­¥éª¤ <a class="header-anchor" href="#k8s-çš„ç®¡ç†æ­¥éª¤" aria-label="Permalink to &quot;K8S çš„ç®¡ç†æ­¥éª¤&quot;">â€‹</a></h3><p>åœ¨ k8s è¿›è¡Œç®¡ç†åº”ç”¨çš„æ—¶å€™ï¼ŒåŸºæœ¬æ­¥éª¤æ˜¯ï¼š</p><ol><li>åˆ›å»ºé›†ç¾¤</li><li>éƒ¨ç½²åº”ç”¨</li><li>å‘å¸ƒåº”ç”¨</li><li>æ‰©å±•åº”ç”¨</li><li>æ›´æ–°åº”ç”¨</li></ol><h3 id="k8s-çš„æ¶æ„ç»“æ„" tabindex="-1">K8S çš„æ¶æ„ç»“æ„ <a class="header-anchor" href="#k8s-çš„æ¶æ„ç»“æ„" aria-label="Permalink to &quot;K8S çš„æ¶æ„ç»“æ„&quot;">â€‹</a></h3><ul><li>ç”Ÿæ€ç³»ç»Ÿ</li><li>æ¥å£å±‚</li><li>ç®¡ç†å±‚</li><li>åº”ç”¨å±‚</li><li>æ ¸å¿ƒå±‚</li></ul><h3 id="å®‰è£…-k8s" tabindex="-1">å®‰è£… K8S <a class="header-anchor" href="#å®‰è£…-k8s" aria-label="Permalink to &quot;å®‰è£… K8S&quot;">â€‹</a></h3><p>åœ¨ Linux ä¸‹å®‰è£…å•æœºç‰ˆçš„é›†ç¾¤ç¯å¢ƒ</p><p>ä»¥ root èº«ä»½æ‰§è¡Œä»¥ä¸‹æ“ä½œ :</p><p>1ã€å…³é—­ Linux é˜²ç«å¢™</p><ul><li>systemctI stop firewalld</li><li>systemctl disable firewalld</li></ul><p>2ã€å®‰è£… Kubernetes å’Œä¾èµ–ç»„ä»¶ etcd</p><ul><li>yum install -y etcd kubernetes</li></ul><p>3ã€ä¿®æ”¹é…ç½®</p><ul><li>Docker é…ç½®æ–‡ä»¶ï¼š<code>/etc/sysconfig/docker</code>ï¼Œ<code>OPTIONS=&#39;&#39;--selinux-enabled=false --insecure-registry gcr.io&#39;</code></li><li>Kubernetes apiservce é…ç½®æ–‡ä»¶ï¼š<code>/etc/kubernetes/apiserver</code>ï¼ŒæŠŠ --admission-control å‚æ•°ä¸­çš„ ServiceAccount åˆ é™¤</li></ul><p>4ã€æŒ‰é¡ºåºå¯åŠ¨æ‰€æœ‰çš„æœåŠ¡</p><ul><li>systemctl start etcd</li><li>systemctl start docker</li><li>systemctl start kube-apiserver</li><li>systemctl start kube-controller-manager</li><li>systemctl start kube-scheduler</li><li>systemctl start kubelet</li><li>systemctl start kube-proxy</li></ul><h1 id="portainer-å°†-dockerã€docker-composeã€kubernetes-ä¸‰è€…ç»Ÿä¸€ç®¡ç†çš„å¹³å°" tabindex="-1">portainerï¼šå°† Dockerã€Docker-composeã€Kubernetes ä¸‰è€…ç»Ÿä¸€ç®¡ç†çš„å¹³å° <a class="header-anchor" href="#portainer-å°†-dockerã€docker-composeã€kubernetes-ä¸‰è€…ç»Ÿä¸€ç®¡ç†çš„å¹³å°" aria-label="Permalink to &quot;portainerï¼šå°† Dockerã€Docker-composeã€Kubernetes ä¸‰è€…ç»Ÿä¸€ç®¡ç†çš„å¹³å°&quot;">â€‹</a></h1><p>è‡ª 2013 å¹´å‘å¸ƒä»¥æ¥ï¼ŒDocker è·å¾—äº†å¹¿æ³›çš„å…³æ³¨å’Œåº”ç”¨ã€‚åœ¨è¿‡å»çš„è¿‘åå¹´ä¸­ï¼ŒDocker ä¹Ÿé€æ¸æ”¹å˜äº†è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²çš„æ–¹å¼ï¼Œè‡³ä»Šé‡‡ç”¨å®¹å™¨å·²ç»æˆä¸ºå¾ˆå¤šä¼ä¸šè½¯ä»¶æ ‡å‡†çš„è§„èŒƒä¹‹ä¸€ã€‚ä»å•æœºçš„ Dockerï¼Œåˆ°å•æœºç¼–æ’çš„ Docker-composeï¼Œå†åˆ°é›†ç¾¤ç¼–æ’è°ƒåº¦çš„ Docker-Swarm å’Œ Kubernetesï¼Œåœ¨è¿™åå¹´ä¸­å®¹å™¨çš„æŠ€æœ¯ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤šçš„å˜åŒ–ï¼Œéšç€ Docker-Swarm çš„è½è´¥ï¼ŒKubernetes æˆä¸ºå®¹å™¨ç¼–æ’æ ‡å‡†ã€‚ç»“åˆä¼ä¸šè‡ªèº«ä¸šåŠ¡ï¼Œå¾ˆå¤šä¼ä¸šç›®å‰é¢å‘ä¸åŒçš„åœºæ™¯å¯¹å®¹å™¨çš„ä½¿ç”¨å¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§åœºæ™¯ï¼š</p><ul><li>**Docker ç‹¬ç«‹ä½¿ç”¨:**ä¸»è¦ç”¨äºåˆ›å»ºå’Œç®¡ç†å•ä¸ªå®¹å™¨ã€‚å¯¹äºå•ä¸ªåº”ç”¨å’Œæµ‹è¯•åº”ç”¨éƒ¨ç½²éå¸¸ä¾¿æ·é«˜æ•ˆã€‚</li><li>**Docker-compose æœåŠ¡æ¨¡å¼ï¼š**ä¸»è¦ç”¨äºåˆ›å»ºå’Œç®¡ç†å¤šå®¹å™¨åº”ç”¨ï¼Œå¯ä»¥è½»æ¾åœ°å¯åŠ¨ã€åœæ­¢ã€é‡æ–°éƒ¨ç½²æ•´ä¸ªæœåŠ¡ã€‚</li><li>**Kubernetes é›†ç¾¤è°ƒåº¦ï¼š**ç”¨äºç®¡ç†å’Œè°ƒåº¦ç¼–æ’å®¹å™¨ï¼Œæ›´é€‚åˆéœ€è¦é«˜åº¦è‡ªåŠ¨åŒ–å’Œå¤§è§„æ¨¡å®¹å™¨ç®¡ç†å’Œå¤æ‚åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†ã€‚</li></ul><p><img src="'+l+`" alt="å›¾ç‰‡"></p><p>ç”±æ­¤å¯è§ï¼Œæ— è®ºå•æœº Docker è¿˜æ˜¯æœåŠ¡ç¼–æ’ Docker-composeï¼Œè¿˜æ˜¯é›†ç¾¤è°ƒåº¦ç¼–æ’çš„ Kubernetesï¼Œåœ¨ä¼ä¸šé‡Œé¢æœ‰ç€ç›¸åº”çš„åº”ç”¨åœºæ™¯ï¼Œå‡ ç§éƒ¨ç½²æ¨¡å¼å¹¶å­˜ã€‚é‚£ä¹ˆéšä¹‹è€Œæ¥çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œä¼ä¸šå¦‚ä½•ç»Ÿä¸€ç®¡ç†é›¶æ•£è¿™äº›ç¯å¢ƒã€‚æ‰€ä»¥ï¼Œä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªèƒ½å¤Ÿç»Ÿä¸€ç®¡ç†è¿™äº›çš„å¹³å°-Portainerã€‚</p><h2 id="_01-portainer-ä»‹ç»" tabindex="-1"><strong>01</strong> portainer ä»‹ç» <a class="header-anchor" href="#_01-portainer-ä»‹ç»" aria-label="Permalink to &quot;**01** portainer ä»‹ç»&quot;">â€‹</a></h2><p>ä¸€å¥è¯ä»‹ç» Portainerï¼šèƒ½å¤Ÿå°† Dockerï¼ŒDocker-composeï¼ŒKubernetes ç»Ÿä¸€ç®¡ç†çš„å¹³å°ï¼Œé€šè¿‡ç®€å•æ˜“ç”¨çš„ UI ç•Œé¢ï¼Œæ¶ˆé™¤ä½¿ç”¨ CLIã€ç¼–å†™ YAML çš„å¤æ‚æ€§ã€‚</p><h3 id="ğŸ -é¡¹ç›®ä¿¡æ¯" tabindex="-1">ğŸ  é¡¹ç›®ä¿¡æ¯ <a class="header-anchor" href="#ğŸ -é¡¹ç›®ä¿¡æ¯" aria-label="Permalink to &quot;ğŸ  é¡¹ç›®ä¿¡æ¯&quot;">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># Githubåœ°å€</span></span>
<span class="line"><span style="color:#61AFEF;">https://github.com/portainer/portainer</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># å®˜ç½‘åœ°å€</span></span>
<span class="line"><span style="color:#61AFEF;">https://www.portainer.io/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ğŸš€-åŠŸèƒ½ç‰¹æ€§" tabindex="-1">ğŸš€ åŠŸèƒ½ç‰¹æ€§ <a class="header-anchor" href="#ğŸš€-åŠŸèƒ½ç‰¹æ€§" aria-label="Permalink to &quot;ğŸš€ åŠŸèƒ½ç‰¹æ€§&quot;">â€‹</a></h3><ul><li>æä¾›ç›´è§‚ç•Œé¢ä½¿ç”¨ Docker çš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¯ä»¥æ„å»ºã€å‘å¸ƒå’Œéƒ¨ç½²å®¹å™¨æ˜ åƒã€ç®¡ç†ç½‘ç»œå’Œå·ï¼Œä»¥åŠé…ç½®è·¨é›†ç¾¤çš„æ‰©å±•ã€‚æ”¯æŒé€šè¿‡ RBACã€æ³¨å†Œè¡¨ç®¡ç†å’Œå¤–éƒ¨èº«ä»½éªŒè¯æ”¯æŒç­‰åŠŸèƒ½ã€‚</li><li>ç›´è§‚çš„ Kubernetes ç®¡ç†å¹³å°ç•Œé¢ï¼Œå…è®¸ç®¡ç†å‘˜å¿«é€Ÿç®¡ç†å’Œç»´æŠ¤é›†ç¾¤ï¼Œæ”¯æŒç®¡ç†é›†ç¾¤çš„æœåŠ¡å¸æˆ·ã€è§’è‰²å’Œè§’è‰²ç»‘å®šï¼Œä»¥åŠé›†ç¾¤è§’è‰²å’Œé›†ç¾¤è§’è‰²ç»‘å®šï¼Œè€Œæ— éœ€é€€å‡ºå‘½ä»¤è¡Œã€‚</li></ul><h3 id="ğŸ› -ç³»ç»Ÿæ¶æ„" tabindex="-1">ğŸ›  ç³»ç»Ÿæ¶æ„ <a class="header-anchor" href="#ğŸ› -ç³»ç»Ÿæ¶æ„" aria-label="Permalink to &quot;ğŸ›  ç³»ç»Ÿæ¶æ„&quot;">â€‹</a></h3><p>Portainer ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šPortainer Server å’Œ Portainer Agentã€‚Portainer Agent éƒ¨ç½²åˆ°é›†éœ€è¦ç®¡ç†çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¹¶åœ¨ Portainer Server ä¸­é…ç½®éœ€è¦çº³ç®¡ç¯å¢ƒçš„ Agent è¿æ¥ä¿¡æ¯ã€‚</p><p><strong><img src="`+o+`" alt="å›¾ç‰‡"></strong></p><h2 id="_02-portainer-å®‰è£…" tabindex="-1">02 portainer å®‰è£… <a class="header-anchor" href="#_02-portainer-å®‰è£…" aria-label="Permalink to &quot;02 portainer å®‰è£…&quot;">â€‹</a></h2><h3 id="server-ç«¯å®‰è£…" tabindex="-1">Server ç«¯å®‰è£… <a class="header-anchor" href="#server-ç«¯å®‰è£…" aria-label="Permalink to &quot;Server ç«¯å®‰è£…&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œåˆ›å»º Portainer Server å­˜å‚¨æ•°æ®å·ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">docker</span><span style="color:#98C379;"> volume</span><span style="color:#98C379;"> create</span><span style="color:#98C379;"> portainer_data</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åï¼Œä¸‹è½½å¹¶è¿è¡Œ Portainer Server å®¹å™¨ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">docker</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> -d</span><span style="color:#D19A66;"> -p</span><span style="color:#98C379;"> 8000:8000</span><span style="color:#D19A66;"> -p</span><span style="color:#98C379;"> 9443:9443</span><span style="color:#D19A66;"> --name</span><span style="color:#98C379;"> portainer</span><span style="color:#D19A66;"> --restart=always</span><span style="color:#D19A66;"> -v</span><span style="color:#98C379;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="color:#D19A66;"> -v</span><span style="color:#98C379;"> portainer_data:/data</span><span style="color:#98C379;"> portainer/portainer-ce:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æœ€åï¼Œé€šè¿‡è¿è¡Œ docker ps å‘½ä»¤æ¥æ£€æŸ¥ Portainer Server å®¹å™¨æ˜¯å¦å·²å¯åŠ¨ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">root@server:~#</span><span style="color:#98C379;"> docker</span><span style="color:#98C379;"> ps</span></span>
<span class="line"><span style="color:#61AFEF;">CONTAINER</span><span style="color:#98C379;"> ID</span><span style="color:#98C379;">   IMAGE</span><span style="color:#98C379;">                          COMMAND</span><span style="color:#98C379;">                  CREATED</span><span style="color:#98C379;">       STATUS</span><span style="color:#98C379;">      PORTS</span><span style="color:#98C379;">                                                                                  NAMES</span></span>
<span class="line"><span style="color:#61AFEF;">de5b28eb2fa9</span><span style="color:#98C379;">   portainer/portainer-ce:latest</span><span style="color:#98C379;">  &quot;/portainer&quot;</span><span style="color:#D19A66;">             2</span><span style="color:#98C379;"> weeks</span><span style="color:#98C379;"> ago</span><span style="color:#98C379;">   Up</span><span style="color:#D19A66;"> 9</span><span style="color:#98C379;"> days</span><span style="color:#98C379;">   0.0.0.0:8000</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#98C379;">8000/tcp,</span><span style="color:#98C379;"> :::8000</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#98C379;">8000/tcp,</span><span style="color:#98C379;"> 0.0.0.0:9443</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#98C379;">9443/tcp,</span><span style="color:#98C379;"> :::9443</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#98C379;">9443/tcp</span><span style="color:#98C379;">   portainer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯åŠ¨å®Œæˆåï¼Œé€šè¿‡æ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="https://localhost:9443" target="_blank" rel="noreferrer">https://localhost:9443</a> ç™»å½•ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–åˆ›å»ºè´¦å·ï¼š</p><p><img src="`+r+'" alt="å›¾ç‰‡"></p><h3 id="agent-ç«¯å®‰è£…" tabindex="-1">Agent ç«¯å®‰è£… <a class="header-anchor" href="#agent-ç«¯å®‰è£…" aria-label="Permalink to &quot;Agent ç«¯å®‰è£…&quot;">â€‹</a></h3><p>Portainer Agent å®‰è£…åˆ°éœ€è¦çº³ç®¡çš„ Docker ä¸»æœºæˆ–è€… Kubernetes é›†ç¾¤ä¸­ã€‚åœ¨ç•Œé¢é€‰æ‹©åˆ›å»ºç¯å¢ƒï¼š</p><p><img src="'+p+'" alt="å›¾ç‰‡"></p><p>é€‰æ‹©éœ€è¦æ·»åŠ çš„å¹³å°ç±»å‹ï¼ˆç°è‰²æ— æ³•é€‰æ‹©çš„ä¸ºä¼ä¸šç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡ï¼‰ï¼š</p><p><img src="'+t+`" alt="å›¾ç‰‡"></p><h2 id="ä¸€ã€docker-ä¸»æœºæ¥å…¥ç®¡ç†" tabindex="-1">ä¸€ã€Docker ä¸»æœºæ¥å…¥ç®¡ç†ï¼š <a class="header-anchor" href="#ä¸€ã€docker-ä¸»æœºæ¥å…¥ç®¡ç†" aria-label="Permalink to &quot;ä¸€ã€Docker ä¸»æœºæ¥å…¥ç®¡ç†ï¼š&quot;">â€‹</a></h2><p>åœ¨éœ€è¦çº³ç®¡çš„ä¸»æœºä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">docker</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> -d</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#D19A66;">  -p</span><span style="color:#98C379;"> 9001:9001</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#D19A66;">  --name</span><span style="color:#98C379;"> portainer_agent</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#D19A66;">  --restart=always</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#D19A66;">  -v</span><span style="color:#98C379;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#D19A66;">  -v</span><span style="color:#98C379;"> /var/lib/docker/volumes:/var/lib/docker/volumes</span><span style="color:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#98C379;">  portainer/agent:2.19.4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>éƒ¨ç½²åï¼Œå°†ä¸»æœºä¿¡æ¯å¡«å…¥ä¸‹å›¾ä¸­ï¼š</p><p><img src="`+c+'" alt="å›¾ç‰‡"></p><p>å¡«å…¥åï¼Œå³å¯å¯¹è¿™å° Docker ä¸»æœºè¿›è¡Œç®¡ç†ï¼š</p><p><img src="'+i+`" alt="å›¾ç‰‡"></p><h2 id="äºŒã€kubernetes-é›†ç¾¤æ¥å…¥ç®¡ç†" tabindex="-1">äºŒã€Kubernetes é›†ç¾¤æ¥å…¥ç®¡ç† <a class="header-anchor" href="#äºŒã€kubernetes-é›†ç¾¤æ¥å…¥ç®¡ç†" aria-label="Permalink to &quot;äºŒã€Kubernetes é›†ç¾¤æ¥å…¥ç®¡ç†&quot;">â€‹</a></h2><p>åœ¨éœ€è¦çº³ç®¡çš„ K8S é›†ç¾¤ä¸­ï¼Œé€‰æ‹© NodePort æˆ–è€… load balancer æ–¹å¼æš´éœ²ç«¯å£ï¼Œé€šè¿‡ Kubectl ä¸Šè¿è¡Œä»¥ä¸‹çš„å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># é‡‡ç”¨NodePortæ–¹å¼</span></span>
<span class="line"><span style="color:#61AFEF;">kubectl</span><span style="color:#98C379;"> apply</span><span style="color:#D19A66;"> -f</span><span style="color:#98C379;"> https://downloads.portainer.io/ce2-19/portainer-agent-k8s-nodeport.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>éƒ¨ç½²åï¼Œå°†é›†ç¾¤ä¿¡æ¯å¡«å…¥ä¸‹å›¾ä¸­ï¼š</p><p><img src="`+d+'" alt="å›¾ç‰‡"></p><p>å¡«å…¥åï¼Œå³å¯å¯¹æ¥å…¥çš„ K8S é›†ç¾¤è¿›è¡Œç®¡ç†ï¼š</p><p><img src="'+u+'" alt="å›¾ç‰‡"></p><h2 id="_03-æœ€å" tabindex="-1">03 æœ€å <a class="header-anchor" href="#_03-æœ€å" aria-label="Permalink to &quot;03 æœ€å&quot;">â€‹</a></h2><p>Portainer ä½œä¸ºæ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„ Docker å’Œ K8S æ“ä½œç•Œé¢ï¼ŒåŠŸèƒ½éå¸¸å…¨é¢ï¼Œæ¯”å¦‚æ”¯æŒé€šè¿‡æ¨¡æ¿å¿«é€Ÿéƒ¨ç½²åº”ç”¨ã€å®¹å™¨é•œåƒç½‘ç»œæ•°æ®å·çš„åŸºæœ¬æ“ä½œã€äº‹ä»¶æ—¥å¿—æ”¶é›†ã€é›†ç¾¤å’Œ SVC ç­‰é›†ä¸­ç®¡ç†å’Œæ“ä½œã€ç»Ÿä¸€ä»“åº“ç®¡ç†ã€ç™»å½•ç”¨æˆ·ç®¡ç†å’Œæƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚è¿™è¾¹å°±ä¸è¿›è¡Œä¸€ä¸€è¯´æ˜å’Œå±•ç¤ºäº†ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³ä¸­å°å‹ä¼ä¸šå¯¹å®¹å™¨å’Œ k8s ç®¡ç†çš„å…¨éƒ¨éœ€æ±‚ã€‚</p><p>å”¯ä¸€é—æ†¾çš„æ˜¯å®˜æ–¹æ²¡æœ‰æä¾›ä¸­æ–‡ç•Œé¢ï¼Œä½†æ˜¯æœ‰å¤§ç¥æä¾›äº†ä¸­æ–‡éƒ¨ç½²ç‰ˆæœ¬çš„é•œåƒ</p><h1 id="kubernetes-å®‰å…¨åˆè§„åˆ†æçš„å‘½ä»¤è¡Œå·¥å…·" tabindex="-1">Kubernetes å®‰å…¨åˆè§„åˆ†æçš„å‘½ä»¤è¡Œå·¥å…· <a class="header-anchor" href="#kubernetes-å®‰å…¨åˆè§„åˆ†æçš„å‘½ä»¤è¡Œå·¥å…·" aria-label="Permalink to &quot;Kubernetes å®‰å…¨åˆè§„åˆ†æçš„å‘½ä»¤è¡Œå·¥å…·&quot;">â€‹</a></h1><p>Kubernetes æˆä¸ºäº†å®¹å™¨ç¼–æ’çš„æ ‡å‡†ã€‚å¾ˆå¤šä¼ä¸šéƒ½é€šè¿‡è‡ªå»ºï¼Œæˆ–è€…äº‘æ‰˜ç®¡çš„æ–¹å¼å»ºè®¾äº† Kubernetes å¹³å°ï¼Œä½†æ˜¯ç”±äº Kubernetes çš„å¤æ‚æ€§ï¼Œå¾ˆå¤šä¼ä¸šåœ¨åŸºäº Kubernetes éƒ¨ç½²ä¸šåŠ¡åº”ç”¨æ—¶ï¼Œä¸ºäº†ä¾¿åˆ©å¹¶æ²¡æœ‰é…ç½®æˆ–è€…å¼€å¯é›†ç¾¤çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚ç½‘ç»œç­–ç•¥å’Œ Pod å®‰å…¨æ ‡å‡†ç­‰ã€‚å¯¼è‡´ç»å¸¸å‡ºç°ä»¥ä¸‹å¸¸è§çš„å®‰å…¨é—®é¢˜ï¼š</p><ul><li>**æœªæˆæƒè®¿é—®ï¼š**æœªæˆæƒçš„è®¿é—®æ˜¯æœ€å¸¸è§çš„å®‰å…¨é—®é¢˜ä¹‹ä¸€ã€‚åœ¨ Kubernetes ä¸­ï¼Œæœªæˆæƒçš„è®¿é—®å¯èƒ½ä¼šå¯¼è‡´æœªç»æˆæƒçš„ç”¨æˆ·æˆ–ç³»ç»Ÿå¯¹é›†ç¾¤ã€podsã€æœåŠ¡ç­‰èµ„æºè¿›è¡Œæœªæˆæƒçš„æ“ä½œï¼Œå¦‚è®¿é—®ã€ä¿®æ”¹æˆ–åˆ é™¤ç­‰ã€‚</li><li>**æ•æ„Ÿæ•°æ®æš´éœ²ï¼š**æ•æ„Ÿæ•°æ®æš´éœ²æ˜¯æŒ‡ Kubernetes é›†ç¾¤ä¸­çš„æ•æ„Ÿä¿¡æ¯å¦‚å¯†ç ã€API å¯†é’¥ã€è¯ä¹¦ç­‰æœªæ­£ç¡®ä¿æŠ¤ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½ä¼šè¢«æœªæˆæƒçš„ç”¨æˆ·æˆ–ç³»ç»Ÿè·å–ã€‚</li><li>**å®¹å™¨é€ƒé€¸ï¼š**å®¹å™¨é€ƒé€¸æ˜¯æŒ‡ä¸€ä¸ªå®¹å™¨è¯•å›¾è®¿é—®å¹¶ä¸å±äºå®ƒçš„èµ„æºã€‚åœ¨ Kubernetes ä¸­ï¼Œå®¹å™¨é€ƒé€¸å¯èƒ½ä¼šå¯¼è‡´å®¹å™¨è®¿é—®å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨çš„èµ„æºã€‚</li><li>**ç³»ç»Ÿæƒé™è¿‡é«˜ï¼š**åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒæŸäº›æœåŠ¡æˆ–å®¹å™¨å¯èƒ½ä¼šä»¥ root ç”¨æˆ·æƒé™è¿è¡Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æœªæˆæƒçš„ç”¨æˆ·è·å–åˆ°è¿‡é«˜çš„æƒé™ï¼Œä»è€Œå¯èƒ½ä¼šå¯¹å®¿ä¸»æœºé€ æˆå¨èƒã€‚</li></ul><p>åŸºäºå¯¹ 2023 CVE ä¸­å…³äº Kubernetes å®‰å…¨é—®é¢˜çš„ç»Ÿè®¡ï¼Œä¸Šè¿°å®‰å…¨é—®é¢˜ä¹Ÿ&quot;é«˜å±…æ¦œé¦–&quot;ã€‚</p><p><img src="'+b+'" alt="å›¾ç‰‡"></p><p><em>2023 å¹´ *Kubernetes* å¸¸è§æ¼æ´ç±»å‹ï¼ˆæ•°æ®æ¥æºï¼š<strong>cve.mitre.org</strong>ï¼‰</em></p><p>*å¤‡æ³¨ï¼š</p><ul><li><p><em>CWE-20ï¼šè¾“å…¥éªŒè¯ä¸å½“</em></p><p><em>CWE-200ï¼šå°†æ•æ„Ÿä¿¡æ¯æš´éœ²ç»™æœªç»æˆæƒçš„å‚ä¸è€…</em></p><p><em>CWE-269ï¼šæƒé™ç®¡ç†ä¸å½“</em></p><p><em>CWE-863ï¼šæˆæƒä¸æ­£ç¡®</em></p><p><em>CWE-862ï¼šç¼ºå°‘æˆæƒ</em></p></li></ul><p>æ® ARMO åˆ†æï¼Œ2018 å¹´è‡³ 2023 å¹´é—´ï¼ŒKubernetes ä¸­çš„æ¼æ´æ•°é‡å¢åŠ äº† 440% ã€‚</p><p>_æŠ¥å‘Šåœ°å€ï¼š<a href="https://www.armosec.io/blog/kubernetes-vulnerabilities-2023/_" target="_blank" rel="noreferrer">https://www.armosec.io/blog/kubernetes-vulnerabilities-2023/_</a></p><p><img src="'+h+`" alt="å›¾ç‰‡"></p><p><em>Kubernetes æ¼æ´è¶‹åŠ¿ ï¼ˆæ•°æ®æ¥æºï¼šcve.mitre.orgï¼‰</em></p><p>Kubernetes çš„å®‰å…¨ç®¡ç†æˆä¸ºäº†ä¼ä¸šè¿«åœ¨çœ‰ç«çš„äº‹æƒ…ã€‚å¾ˆå¤šä¼ä¸šä¹Ÿå¼€å§‹é€æ­¥å¼•å…¥ Kubernetes å®‰å…¨æ‰«æå·¥å…·ä»¥æ­¤æ¥æå‡ Kubernetes çš„å®‰å…¨æ€§ã€‚æ‰€ä»¥ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªèƒ½å¤Ÿé’ˆå¯¹ Kubernetes è¿›è¡Œå…¨é¢å®‰å…¨æ‰«æçš„å·¥å…·-Kubescape</p><h2 id="_01-kubescape-ä»‹ç»" tabindex="-1">01 Kubescape ä»‹ç» <a class="header-anchor" href="#_01-kubescape-ä»‹ç»" aria-label="Permalink to &quot;01 Kubescape ä»‹ç»&quot;">â€‹</a></h2><p>ä¸€å¥è¯ä»‹ç» Kubescapeï¼šä¸€ä¸ªå¼€æº Kubernetes å®‰å…¨æ‰«æå·¥å…·ï¼Œæ”¯æŒ CI/CD ç®¡æµæ°´çº¿ å’Œ IDE é›†æˆï¼Œæ”¯æŒå®‰å…¨é…ç½®åˆ†æã€æ¼æ´æ‰«æã€é£é™©åˆ†æã€å®‰å…¨åˆè§„æ€§åˆ†æç­‰ï¼Œç®€å•æ˜“ç”¨çš„ CLI ç•Œé¢ã€çµæ´»çš„è¾“å‡ºæ ¼å¼ã€‚</p><h3 id="ğŸ -é¡¹ç›®ä¿¡æ¯-1" tabindex="-1">ğŸ  é¡¹ç›®ä¿¡æ¯ <a class="header-anchor" href="#ğŸ -é¡¹ç›®ä¿¡æ¯-1" aria-label="Permalink to &quot;ğŸ  é¡¹ç›®ä¿¡æ¯&quot;">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># Githubåœ°å€</span></span>
<span class="line"><span style="color:#61AFEF;">https://github.com/kubescape/kubescape</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># é¡¹ç›®åœ°å€</span></span>
<span class="line"><span style="color:#61AFEF;">https://kubescape.io/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ğŸš€-åŠŸèƒ½ç‰¹æ€§-1" tabindex="-1">ğŸš€ åŠŸèƒ½ç‰¹æ€§ <a class="header-anchor" href="#ğŸš€-åŠŸèƒ½ç‰¹æ€§-1" aria-label="Permalink to &quot;ğŸš€ åŠŸèƒ½ç‰¹æ€§&quot;">â€‹</a></h3><ul><li>æ”¯æŒå®‰å…¨æ‰«æç»“æœå­˜å‚¨åœ¨é›†ç¾¤å†…</li><li>ä» CLI æ‰«æå®¹å™¨é•œåƒä¸­çš„æ¼æ´</li><li>æ”¯æŒæ‰«æé›†ç¾¤ä¸­æ‰€æœ‰é•œåƒçš„æ¼æ´</li><li>æ”¯æŒè®¾ç½®é›†ç¾¤å®‰å…¨æ‰«æåŸºçº¿</li><li>å‘ç°é«˜é£é™©å·¥ä½œè´Ÿè½½ï¼ˆå¦‚æœå—åˆ°å¨èƒï¼Œå¯èƒ½é€ æˆå±å®³çš„å·¥ä½œè´Ÿè½½ï¼‰</li><li>æ”¯æŒ Helm chart éƒ¨ç½²ï¼Œæä¾›è¿ç»­æ‰«æ</li><li>æ”¯æŒç‹¬ç«‹æ˜¾ç¤ºæ¯ä¸ªå·¥ä½œè´Ÿè½½ã€æ¯ä¸ªå‘½åç©ºé—´å’Œæ¯ä¸ªé›†ç¾¤æŒ‡æ ‡</li><li>æ”¯æŒè¾“å‡º Prometheus æ ¼å¼æŒ‡æ ‡</li><li>æ”¯æŒé€šè¿‡ Prometheus Alertmanager å‘å‡ºå‘Šè­¦</li></ul><h3 id="ğŸ”¥-ä½¿ç”¨åœºæ™¯" tabindex="-1">ğŸ”¥ ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#ğŸ”¥-ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;ğŸ”¥ ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h3><p>æ”¯æŒåœ¨ç¼–ç é˜¶æ®µã€CI é˜¶æ®µã€CD é˜¶æ®µã€éƒ¨ç½²é˜¶æ®µè¿›è¡Œæ‰«æã€‚Kubescape Operator è¿˜å¯ä»¥é€šè¿‡ Helm å®‰è£…ã€‚æ”¯æŒè¿ç»­æ‰«æã€é•œåƒæ¼æ´æ‰«æã€è¿è¡Œæ—¶åˆ†æã€ç½‘ç»œç­–ç•¥ç”Ÿæˆç­‰ã€‚Kubescape æ”¯æŒ GitHub Actionã€‚å¾ˆå®¹æ˜“å°† Kubescape é›†æˆåˆ° CI/CD æµæ°´çº¿ä¸­ã€‚</p><p><img src="`+m+'" alt="image-20240508191845661"></p><h3 id="ğŸ› -ç³»ç»Ÿæ¶æ„-1" tabindex="-1">ğŸ›  ç³»ç»Ÿæ¶æ„ <a class="header-anchor" href="#ğŸ› -ç³»ç»Ÿæ¶æ„-1" aria-label="Permalink to &quot;ğŸ›  ç³»ç»Ÿæ¶æ„&quot;">â€‹</a></h3><h4 id="ç»„ä»¶æ¶æ„" tabindex="-1">ç»„ä»¶æ¶æ„ <a class="header-anchor" href="#ç»„ä»¶æ¶æ„" aria-label="Permalink to &quot;ç»„ä»¶æ¶æ„&quot;">â€‹</a></h4><p><img src="'+y+'" alt="å›¾ç‰‡"></p><h4 id="å‘½ä»¤è¡Œç•Œé¢" tabindex="-1">å‘½ä»¤è¡Œç•Œé¢ <a class="header-anchor" href="#å‘½ä»¤è¡Œç•Œé¢" aria-label="Permalink to &quot;å‘½ä»¤è¡Œç•Œé¢&quot;">â€‹</a></h4><p><img src="'+k+'" alt="å›¾ç‰‡"></p><h4 id="operator-é€»è¾‘" tabindex="-1">Operator é€»è¾‘ <a class="header-anchor" href="#operator-é€»è¾‘" aria-label="Permalink to &quot;Operator é€»è¾‘&quot;">â€‹</a></h4><p><img src="'+C+`" alt="å›¾ç‰‡"></p><h2 id="_02-kubescape-å®‰è£…" tabindex="-1">02 Kubescape å®‰è£… <a class="header-anchor" href="#_02-kubescape-å®‰è£…" aria-label="Permalink to &quot;02 Kubescape å®‰è£…&quot;">â€‹</a></h2><h3 id="ä¸€ã€å¼€å§‹å®‰è£…" tabindex="-1">ä¸€ã€å¼€å§‹å®‰è£… <a class="header-anchor" href="#ä¸€ã€å¼€å§‹å®‰è£…" aria-label="Permalink to &quot;ä¸€ã€å¼€å§‹å®‰è£…&quot;">â€‹</a></h3><p>Kubescape çš„æœ€ä½³æ–¹æ³•æ˜¯å°†å…¶ä¸‹è½½åˆ°ç”¨äºç®¡ç† Kubernetes é›†ç¾¤çš„æœºå™¨ä¸Šï¼Œä¸å»ºè®®ç›´æ¥å®‰è£…åˆ° kube-master ä¸Šã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>curl -s https://raw.githubusercontent.com/kubescape/kubescape/master/install.sh | /bin/bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å› ä¸ºä¼šä» Github ä¸‹è½½äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœç½‘ç»œä¸é€šçš„åŒå­¦ï¼Œéœ€è¦è‡ªè¡Œè§£å†³ Github è®¿é—®é—®é¢˜ï¼Œæˆ–è€…ç›´æ¥åœ¨ Github ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶åæ”¾å…¥ /usr/bin ç›®å½•ã€‚</p><h3 id="äºŒã€ç¦»çº¿ç¯å¢ƒé…ç½®-å¯é€‰" tabindex="-1">äºŒã€ç¦»çº¿ç¯å¢ƒé…ç½®ï¼ˆå¯é€‰ï¼‰ <a class="header-anchor" href="#äºŒã€ç¦»çº¿ç¯å¢ƒé…ç½®-å¯é€‰" aria-label="Permalink to &quot;äºŒã€ç¦»çº¿ç¯å¢ƒé…ç½®ï¼ˆå¯é€‰ï¼‰&quot;">â€‹</a></h3><p><em>å¦‚æœå®‰è£… kubescape çš„æœºå™¨å¯ä»¥è®¿é—® Githubï¼Œåˆ™ä¸éœ€è¦è¿™æ­¥</em></p><ul><li><p>ä¸‹è½½æ‰€æœ‰æ‰«ææ ‡å‡†ä¾èµ–</p><p>1.ä¸‹è½½æ‰€æœ‰æ¡†æ¶å¹¶å°†å…¶ä¿å­˜åœ¨æœ¬åœ°ç›®å½•ä¸­ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œå°†ä¿å­˜åœ¨<code>~/.kubescape</code>.</p></li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>kubescape download artifacts --output path/to/local/dir</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>2.ä½¿ç”¨ä¸‹è½½ç¦»çº¿æ¡†æ¶è¿›è¡Œæ‰«æï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --use-artifacts-from</span><span style="color:#98C379;"> path/to/local/dir</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>ä¸‹è½½å•ä¸ªæ‰«ææ ‡å‡†æ¡†æ¶</strong></li></ul><ol><li>ä¸‹è½½å¹¶ä¿å­˜åœ¨æ–‡ä»¶ã€‚å¦‚æœªæŒ‡å®šæ–‡ä»¶ï¼Œå¦å­˜ä¸º <code>~/.kubescape/&lt;framework name&gt;.json</code></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> download</span><span style="color:#98C379;"> framework</span><span style="color:#98C379;"> nsa</span><span style="color:#D19A66;"> --output</span><span style="color:#98C379;"> /path/nsa.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>ä½¿ç”¨ä¸‹è½½çš„æ¡†æ¶è¿›è¡Œæ‰«æï¼š</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> framework</span><span style="color:#98C379;"> nsa</span><span style="color:#D19A66;"> --use-from</span><span style="color:#98C379;"> /path/nsa.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ä¸‰ã€æŒç»­æ‰«æç›‘æ§" tabindex="-1">ä¸‰ã€æŒç»­æ‰«æç›‘æ§ <a class="header-anchor" href="#ä¸‰ã€æŒç»­æ‰«æç›‘æ§" aria-label="Permalink to &quot;ä¸‰ã€æŒç»­æ‰«æç›‘æ§&quot;">â€‹</a></h3><p>å¦‚æœéœ€è¦ kubescape æŒç»­çš„æ‰«æç›‘æ§é›†ç¾¤ï¼Œé‚£ä¹ˆå°±éœ€è¦å®‰è£… kubescape Operatorã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">helm</span><span style="color:#98C379;"> repo</span><span style="color:#98C379;"> add</span><span style="color:#98C379;"> kubescape</span><span style="color:#98C379;"> https://kubescape.github.io/helm-charts/</span><span style="color:#ABB2BF;"> ; </span><span style="color:#61AFEF;">helm</span><span style="color:#98C379;"> repo</span><span style="color:#98C379;"> update</span><span style="color:#ABB2BF;"> ; </span><span style="color:#61AFEF;">helm</span><span style="color:#98C379;"> upgrade</span><span style="color:#D19A66;"> --install</span><span style="color:#98C379;"> kubescape</span><span style="color:#98C379;"> kubescape/kubescape-operator</span><span style="color:#D19A66;"> -n</span><span style="color:#98C379;"> kubescape</span><span style="color:#D19A66;"> --create-namespace</span><span style="color:#D19A66;"> --set</span><span style="color:#98C379;"> clusterName=\`</span><span style="color:#61AFEF;">kubectl</span><span style="color:#98C379;"> config current-context\`</span><span style="color:#61AFEF;"> --set</span><span style="color:#98C379;"> capabilities.continuousScan=enable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#98C379;"> kubectl</span><span style="color:#98C379;"> get</span><span style="color:#98C379;"> pods</span><span style="color:#D19A66;"> -n</span><span style="color:#98C379;"> kubescape</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;">     kubescape-548d6b4577-qshb5</span><span style="color:#98C379;">                          1/1</span><span style="color:#98C379;">     Running</span><span style="color:#D19A66;">   0</span><span style="color:#98C379;">               60m</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;">     kubevuln-6779c9d74b-wfgqf</span><span style="color:#98C379;">                           1/1</span><span style="color:#98C379;">     Running</span><span style="color:#D19A66;">   0</span><span style="color:#98C379;">               60m</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;">     operator-5d745b5b84-ts7zq</span><span style="color:#98C379;">                           1/1</span><span style="color:#98C379;">     Running</span><span style="color:#D19A66;">   0</span><span style="color:#98C379;">               60m</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;">     storage-59567854fd-hg8n8</span><span style="color:#98C379;">                            1/1</span><span style="color:#98C379;">     Running</span><span style="color:#D19A66;">   0</span><span style="color:#98C379;">               60m</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_03-kubescape-ä½¿ç”¨" tabindex="-1">03 Kubescape ä½¿ç”¨ <a class="header-anchor" href="#_03-kubescape-ä½¿ç”¨" aria-label="Permalink to &quot;03 Kubescape ä½¿ç”¨&quot;">â€‹</a></h2><h3 id="ä¸€ã€æ‰«æå‘½ä»¤ä½¿ç”¨" tabindex="-1">ä¸€ã€æ‰«æå‘½ä»¤ä½¿ç”¨ <a class="header-anchor" href="#ä¸€ã€æ‰«æå‘½ä»¤ä½¿ç”¨" aria-label="Permalink to &quot;ä¸€ã€æ‰«æå‘½ä»¤ä½¿ç”¨&quot;">â€‹</a></h3><p><strong>å¿«é€Ÿæ‰«æï¼š</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --verbose</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+g+'" alt="å›¾ç‰‡"></p><ul><li><strong>ä½¿ç”¨ NSA æ¡†æ¶</strong>æ‰«æ ï¼š</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> framework</span><span style="color:#98C379;"> nsa</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+v+`" alt="å›¾ç‰‡"></p><ul><li><strong>ä½¿ç”¨ MITRE ATT&amp;CKÂ® æ¡†æ¶æ‰«æï¼š</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> framework</span><span style="color:#98C379;"> mitre</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æ‰«æç‰¹å®šé¡¹</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> control</span><span style="color:#98C379;"> &quot;Privileged container&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æŒ‡å®š cluster.conf æ‰«æé›†ç¾¤</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --kubeconfig</span><span style="color:#98C379;"> cluster.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æŒ‡å®šæ‰«æé›†ç¾¤ä¸­æŸäº› namespace</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --include-namespaces</span><span style="color:#98C379;"> development,staging,production</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æ‰«ææ’é™¤é›†ç¾¤ä¸­æŸäº› namespace</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --exclude-namespaces</span><span style="color:#98C379;"> kube-system,kube-public</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>éƒ¨ç½²å‰æ‰«ææœ¬åœ° YAML/JSON æ–‡ä»¶ï¼š</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#E5C07B;"> *</span><span style="color:#98C379;">.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æ‰«æ Git å­˜å‚¨åº“ä¸­æ¸…å•æ–‡ä»¶ï¼š</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> https://github.com/kubescape/kubescape</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æ‰«æ Helm Charts</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">/path/to/director</span><span style="color:#ABB2BF;">y&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>æŒ‡å®šæ ¼å¼è¾“å‡º</strong></li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">#Jasoæ ¼å¼</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --format</span><span style="color:#98C379;"> json</span><span style="color:#D19A66;"> --format-version</span><span style="color:#98C379;"> v2</span><span style="color:#D19A66;"> --output</span><span style="color:#98C379;"> results.json</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#PDFæ ¼å¼</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --format</span><span style="color:#98C379;"> pdf</span><span style="color:#D19A66;"> --output</span><span style="color:#98C379;"> results.pdf</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#XMLæ ¼å¼</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --format</span><span style="color:#98C379;"> junit</span><span style="color:#D19A66;"> --output</span><span style="color:#98C379;"> results.xml</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#Prometheus metrics</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --format</span><span style="color:#98C379;"> prometheus</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#htmlæ ¼å¼</span></span>
<span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --format</span><span style="color:#98C379;"> html</span><span style="color:#D19A66;"> --output</span><span style="color:#98C379;"> results.html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="`+D+'" alt="å›¾ç‰‡"></p><p>html æŠ¥å‘Š</p><p><img src="'+A+'" alt="å›¾ç‰‡"></p><p>pdf æŠ¥å‘Š</p><h3 id="äºŒã€æŒ‡æ ‡è§£è¯»" tabindex="-1">äºŒã€æŒ‡æ ‡è§£è¯» <a class="header-anchor" href="#äºŒã€æŒ‡æ ‡è§£è¯»" aria-label="Permalink to &quot;äºŒã€æŒ‡æ ‡è§£è¯»&quot;">â€‹</a></h3><p>Kubescape æä¾›ä¸¤ä¸ªé‡è¦æŒ‡æ ‡æ¥è¯„ä¼°åˆè§„æ€§ï¼š</p><ul><li>æ§åˆ¶åˆè§„æ€§åˆ†æ•°ï¼šè¯¥åˆ†æ•°è¡¡é‡æ¡†æ¶å†…å„ä¸ªæ§åˆ¶çš„åˆè§„æ€§ã€‚å®ƒæ˜¯é€šè¿‡è¯„ä¼°ä¼ é€’çš„èµ„æºä¸æ ¹æ®è¯¥æ§åˆ¶è¯„ä¼°çš„èµ„æºæ€»æ•°çš„æ¯”ç‡æ¥è®¡ç®—çš„ã€‚</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#D19A66;"> --compliance-threshold</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">SCORE_VALUE[float32</span><span style="color:#ABB2BF;">]&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>æ¡†æ¶åˆè§„æ€§åˆ†æ•°ï¼šæ­¤åˆ†æ•°æä¾›é›†ç¾¤å¯¹ç‰¹å®šæ¡†æ¶åˆè§„æ€§çš„æ€»ä½“è¯„ä¼°ã€‚å®ƒæ˜¯é€šè¿‡è®¡ç®—æ¡†æ¶å†…æ‰€æœ‰æ§åˆ¶çš„æ§åˆ¶åˆè§„æ€§åˆ†æ•°çš„å¹³å‡å€¼æ¥è®¡ç®—çš„ã€‚</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">kubescape</span><span style="color:#98C379;"> scan</span><span style="color:#98C379;"> framework</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">FRAMEWORK_NAM</span><span style="color:#ABB2BF;">E&gt; </span><span style="color:#D19A66;">--compliance-threshold</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">SCORE_VALUE[float32</span><span style="color:#ABB2BF;">]&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Kubescape æ‰«æå¹¶æä¾›åˆè§„æ€§åˆ†æ•°å¦‚ä¸‹ï¼š</p><p><img src="'+f+'" alt="å›¾ç‰‡"></p><h2 id="_04-æœ€å" tabindex="-1">04 æœ€å <a class="header-anchor" href="#_04-æœ€å" aria-label="Permalink to &quot;04 æœ€å&quot;">â€‹</a></h2><p>ä½œä¸º Kubernetes å®‰å…¨æ‰«æå·¥å…·ï¼ŒKubescape èƒ½å¤Ÿæ”¯æŒåŒ…æ‹¬é£é™©åˆ†æã€å®‰å…¨åˆè§„ã€RBAC è§„èŒƒæ‰«æå’Œå®¹å™¨æ¼æ´æ‰«æç­‰åŠŸèƒ½ã€‚Kubescape æ”¯æŒæ‰«æéƒ¨ç½²å‰çš„ Helm Chartsã€Yaml ç­‰æ–‡ä»¶ï¼Œå’Œæ­£åœ¨è¿è¡Œä¸­çš„ Kubernetes ï¼Œå¹¶ä¸”æä¾›äº†ç®€å•æ˜“ç”¨çš„ CLI ç•Œé¢ï¼Œå¾ˆå®¹æ˜“å’Œ DveOps ã€CI/CD ç­‰é›†æˆï¼Œæå‡ Kubernetes çš„å®‰å…¨åˆè§„èƒ½åŠ›ã€‚</p><h1 id="æ•™ç¨‹" tabindex="-1">æ•™ç¨‹ <a class="header-anchor" href="#æ•™ç¨‹" aria-label="Permalink to &quot;æ•™ç¨‹&quot;">â€‹</a></h1><p><a href="https://nystudio107.com/blog/dock-life-using-docker-for-all-the-things" target="_blank" rel="noreferrer">çº½çº¦å·¥ä½œå®¤ 107 |Dock Lifeï¼šå°† Docker ç”¨äºæ‰€æœ‰äº‹æƒ…ï¼ (nystudio107.com)</a></p><p><a href="https://mp.weixin.qq.com/s/R2-tFb3uXLp3ZTUvHpSPOA" target="_blank" rel="noreferrer">å…¨ç½‘å¯¹ Docker å‘½ä»¤æ€»ç»“æœ€å…¨çš„æ–‡ç« ï¼Œç§’æ”¶è—ï¼ (qq.com)</a></p>',201),_=[q];function P(w,x,E,K,B,S){return e(),a("div",null,_)}const I=s(F,[["render",P]]);export{L as __pageData,I as default};
