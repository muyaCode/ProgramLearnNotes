import{_ as s,c as a,o as n,a3 as p}from"./chunks/framework.zGi9i9Bf.js";const l="/ProgramLearnNotes/assets/image-20240515164557180.Dvu8lHVd.png",e="/ProgramLearnNotes/assets/image-20240515164733786.6DjL-vL7.png",o="/ProgramLearnNotes/assets/image-20240515164752767.B7jow8ML.png",r="/ProgramLearnNotes/assets/image-20240515164810958.Bj3thIbM.png",t="/ProgramLearnNotes/assets/image-20240515164859999.DSBvcqY6.png",c="/ProgramLearnNotes/assets/image-20240515164930071.BNLh0sgC.png",i="/ProgramLearnNotes/assets/image-20240515164952247.59MNTrnf.png",b="/ProgramLearnNotes/assets/image-20240515165118878.BGDiQ9Yu.png",y="/ProgramLearnNotes/assets/image-20240515165219446.DQK-FtqH.png",d="/ProgramLearnNotes/assets/image-20240515165305891.CcAfcAd4.png",u="/ProgramLearnNotes/assets/image-20240515165349033.CRtJDtZD.png",m="/ProgramLearnNotes/assets/640-19498.Cqk4CsP6.webp",h="/ProgramLearnNotes/assets/640-1715763251131-1.BWO4fcM5.webp",C="/ProgramLearnNotes/assets/640-1715763251131-2.DgaGHyqO.webp",A="/ProgramLearnNotes/assets/640-1715763251131-3.kI90_vk9.png",B=JSON.parse('{"title":"在家打卡的方法","description":"","frontmatter":{},"headers":[],"relativePath":"Document/网络安全/【思路】/在家打卡的方法.md","filePath":"Document/网络安全/【思路】/在家打卡的方法.md","lastUpdated":1715766493000}'),F={name:"Document/网络安全/【思路】/在家打卡的方法.md"},v=p('<h1 id="在家打卡的方法" tabindex="-1">在家打卡的方法 <a class="header-anchor" href="#在家打卡的方法" aria-label="Permalink to &quot;在家打卡的方法&quot;">​</a></h1><h2 id="实现原理" tabindex="-1">实现原理： <a class="header-anchor" href="#实现原理" aria-label="Permalink to &quot;实现原理：&quot;">​</a></h2><p>在控制端设备上运行脚本控制手机运行指定的APP打卡，比如使用钉钉打卡，一般会有“快速打卡”功能，只需要在指定的范围内，重新打开APP就会自动打卡，如果没有开放“快速打卡”功能，也可以点击打卡位置进行打卡。</p><p>整个过程所使用的脚本和命令都是系统默认支持的，除需要使用的硬件设备外，代码不需要花费任何费用。</p><p><strong>虚拟定位是个好东西，就是容易被抓。</strong></p><h2 id="前提条件" tabindex="-1">前提条件： <a class="header-anchor" href="#前提条件" aria-label="Permalink to &quot;前提条件：&quot;">​</a></h2><p>安卓手机一台：准备一台淘汰的安卓系统的手机，为了安全，可以设置使用密码登录，后面将手机放在指定的打卡地址；手机需要开启远程调试功能；root过的手机会比较方便，这里我以没有root过的手机进行操作。</p><p>智能插座一个：智能插座用于给手机充电，可以设置为定时充电，也可以远程访问智能插座手动执行充电操作，更高级一点的，可以根据手机当前电量值设置充电操作，比如当电量低于指定值时进行充电；智能插座大概40左右一个，如果不需要使用手机APP控制的会更便宜。</p><p>一台控制终端：控制终端目前采用的是一台云服务器，安装了CentOS7.6操作系统，云服务器用于执行脚本和作为VPN服务器，具体用途在文章中讲解；云服务器最近阿里、腾讯99元就可以使用一年，当然也可以使用其他方法替代，后续再一一介绍。调试过程中，需要有一台电脑使用USB线直连手机进行调试，我的电脑是Win 10。</p><h2 id="拓扑图" tabindex="-1">拓扑图： <a class="header-anchor" href="#拓扑图" aria-label="Permalink to &quot;拓扑图：&quot;">​</a></h2><p>整个环境网络拓扑结构如下图所示，其中：</p><p>(1)公网服务器：配置了一个公网IP地址，可从互联网访问；用于部署VPN服务端和运行打卡脚本；</p><p>(2)安卓手机：手机通过WIFI或者4G网络可访问互联网；通过VPN与公网服务器组成内网访问；</p><p>(3)笔记本电脑：笔记本电脑可以正常访问互联网，可以通过服务器公网IP地址远程调试服务器，接入VPN后可以使用内网地址访问到安卓手机，另外使用数据线对安卓手机进行调试，无法通过网络访问手机端时方便进行调试。</p><p><img src="'+l+'" alt="image-20240515164557180"></p><h2 id="_1-部署vpn服务" tabindex="-1">1.部署VPN服务 <a class="header-anchor" href="#_1-部署vpn服务" aria-label="Permalink to &quot;1.部署VPN服务&quot;">​</a></h2><p>在公网服务器上部署VPN服务端。</p><p>请看文档：《基于Linux内核的VPN工具》</p><p>文档中已详细记录了VPN的安装环境、安装步骤、使用方法等。</p><p>安卓手机VPN客户端下载地址：</p><p>下载链接：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>https://pan.baidu.com/s/1ieCqMyIzc0z2fCotp_v_ng?pwd=vpnp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-下载adb调试工具" tabindex="-1">2. 下载adb调试工具 <a class="header-anchor" href="#_2-下载adb调试工具" aria-label="Permalink to &quot;2. 下载adb调试工具&quot;">​</a></h2><p>adb调试工具用于对安卓手机进行调试。</p><h3 id="_2-1-笔记本下载adb工具" tabindex="-1">2.1 笔记本下载adb工具 <a class="header-anchor" href="#_2-1-笔记本下载adb工具" aria-label="Permalink to &quot;2.1 笔记本下载adb工具&quot;">​</a></h3><p>adb工具的下载链接我已经上传到百度网盘，如果不适用于你的手机，请自行搜索下载。</p><p>下载链接：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>https://pan.baidu.com/s/1IYcUv90gpkud0tpOsSaYxA?pwd=adbp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-2-公网服务器下载adb工具" tabindex="-1">2.2 公网服务器下载adb工具 <a class="header-anchor" href="#_2-2-公网服务器下载adb工具" aria-label="Permalink to &quot;2.2 公网服务器下载adb工具&quot;">​</a></h3><p>公网服务器需要使用adb命令远程控制手机端，安装步骤如下；</p><p>(1)安装扩展YUM源，基础YUM源是没有adb工具包的</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>yum install epel-release</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>(2)安装adb命令</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>yum install adb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-3-注意" tabindex="-1">2.3 注意 <a class="header-anchor" href="#_2-3-注意" aria-label="Permalink to &quot;2.3 注意&quot;">​</a></h3><p>不管是使用数据线还是远程调试手机，第一次调试时需要在手机上进行授权，手机会自动弹出授权，你需要点击确定，否则无法连接到手机。</p><h2 id="_3-调试软件" tabindex="-1">3. 调试软件 <a class="header-anchor" href="#_3-调试软件" aria-label="Permalink to &quot;3. 调试软件&quot;">​</a></h2><p>因为我们需要远程控制手机打开钉钉，所以需要先获取手机上关于钉钉的信息。</p><h3 id="_3-1-获取手机上钉钉的名称" tabindex="-1">3.1 获取手机上钉钉的名称 <a class="header-anchor" href="#_3-1-获取手机上钉钉的名称" aria-label="Permalink to &quot;3.1 获取手机上钉钉的名称&quot;">​</a></h3><p>步骤1：在笔记本电脑上打开CMD控制台，进入adb工具所在目录，如：</p><p><img src="'+e+'" alt="image-20240515164733786"></p><p>步骤2：使用数据线连接手机，确保手机已开启USB调试，笔记本电脑可以正常查看到连接的手机：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>adb devices</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+o+'" alt="image-20240515164752767"></p><p>步骤3：在手机上打开钉钉，打开后显示在主页，或者在“消息”页面：</p><p><img src="'+r+'" alt="image-20240515164810958"></p><p>步骤4：获取应用的包名和应用名</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>adb shell &quot;dumpsys window | grep -i mCurrentFocus&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>记录：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-2-测试使用命令找开钉钉" tabindex="-1">3.2 测试使用命令找开钉钉 <a class="header-anchor" href="#_3-2-测试使用命令找开钉钉" aria-label="Permalink to &quot;3.2 测试使用命令找开钉钉&quot;">​</a></h3><p>测试时，先将前面打开的页面退出后再测试，使用返回键或者直接返回到手机主页即可，执行命令：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>adb shell am start -n com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+t+'" alt="image-20240515164859999"></p><p>对于显示信息“Warning: Activity not started, its current task has been brought to the front”可以忽略，因为钉钉在后台处于运行状态，如果再次打开则会有警告信息；</p><p>如果后台没有运行就不会有相关提示，但在登录时钉钉需要好几秒钟才会被完全打开，在后面的脚本中，我们会设置延时来保证APP完全正常运行。</p><p>注意：此时手机必须处于解锁状态。</p><p>当我们可以使用adb命令打开钉钉时，就已经学习到重点了。</p><h2 id="_4-开启手机远程调试" tabindex="-1">4. 开启手机远程调试 <a class="header-anchor" href="#_4-开启手机远程调试" aria-label="Permalink to &quot;4. 开启手机远程调试&quot;">​</a></h2><p>在第3章时，我们是使用数据线直接连接手机，通过USB接口调试，在使用网络访问手机时需要具备以下条件：</p><p>(1)服务器可以访问手机：因为手机已连接VPN，所以与服务器在同一内网之中，可以使用内网IP地址访问；</p><p>(2)手机开启远程调试，在笔记本电脑上执行命令：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>adb tcpip 5050</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+c+'" alt="image-20240515164930071"></p><p>端口5050可以自定义，手机重启后端口需要重新开启，这个问题在后续处理。</p><h2 id="_5-在服务器上远程访问手机" tabindex="-1">5. 在服务器上远程访问手机 <a class="header-anchor" href="#_5-在服务器上远程访问手机" aria-label="Permalink to &quot;5. 在服务器上远程访问手机&quot;">​</a></h2><p>连接手机，手机的IP地址是192.168.10.11：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>adb connect 192.168.10.11:5050</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+i+'" alt="image-20240515164952247"></p><p>注意，首次连接时，需要在手机端确认，否则无法连接，提示offline：</p><p><img src="'+b+`" alt="image-20240515165118878"></p><p>测试启动钉钉：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> am</span><span style="color:#98C379;"> start</span><span style="color:#D19A66;"> -n</span><span style="color:#98C379;"> com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>执行完命令后，手机端可以正常打开钉钉APP；</p><p>当我们可以使用服务器打开手机上的APP时，就可以开始写脚本了，因为后面涉及的命令就比较多了，以上只是整个远程打卡环节的重点。</p><h2 id="_6-亮屏和密码输入" tabindex="-1">6. 亮屏和密码输入 <a class="header-anchor" href="#_6-亮屏和密码输入" aria-label="Permalink to &quot;6. 亮屏和密码输入&quot;">​</a></h2><p>手机默认情况下肯定是黑屏状态，为了安全我们还设置了密码，我们在使用手机时，一般先把屏幕点亮，然后输入密码，使用完手机后，会顺手将手机黑屏。</p><h3 id="_6-1-亮屏和息屏" tabindex="-1">6.1 亮屏和息屏 <a class="header-anchor" href="#_6-1-亮屏和息屏" aria-label="Permalink to &quot;6.1 亮屏和息屏&quot;">​</a></h3><p>使用224代码进行亮屏，223进行熄屏：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 224</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用代码26也可以亮屏，代码26相当于我们手动按开机/关机键：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 26</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>再执行一次命令则息屏。</p><p>命令执行过程中可能会因为网络质量问题，导致命令执行时间过长。</p><p>注意，时间间隔太长的话，服务器与手机的连接可能会超时，需要重新连接手机：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> connect</span><span style="color:#98C379;"> 192.168.10.11:5050</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_6-2-输入密码" tabindex="-1">6.2 输入密码 <a class="header-anchor" href="#_6-2-输入密码" aria-label="Permalink to &quot;6.2 输入密码&quot;">​</a></h3><p>密码基本上都是数字，以下是每个数字的代码：</p><p><img src="`+y+`" alt="image-20240515165219446"></p><p>手机上的密码都有很多种，我使用的是自定义模式。更多关于代码的操作，参考：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>https://blog.csdn.net/tabactivity/article/details/128370108</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_6-3-编写脚本" tabindex="-1">6.3 编写脚本 <a class="header-anchor" href="#_6-3-编写脚本" aria-label="Permalink to &quot;6.3 编写脚本&quot;">​</a></h3><p>以下通过脚本将手机从黑屏状态切换到手机主页。</p><p>vi pass.sh</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span>adb connect 192.168.10.11:5050 &gt; /dev/null 2&gt;&amp;1</span></span>
<span class="line"><span>sleep 2</span></span>
<span class="line"><span>adb shell input keyevent 223</span></span>
<span class="line"><span>sleep 2</span></span>
<span class="line"><span>adb shell input keyevent 224</span></span>
<span class="line"><span>sleep 2</span></span>
<span class="line"><span>adb shell input swipe 500 1500 500 100 1000</span></span>
<span class="line"><span>sleep 2</span></span>
<span class="line"><span>adb shell input keyevent 8</span></span>
<span class="line"><span>adb shell input keyevent 7</span></span>
<span class="line"><span>adb shell input keyevent 7</span></span>
<span class="line"><span>adb shell input keyevent 15</span></span>
<span class="line"><span>adb shell input keyevent 13</span></span>
<span class="line"><span>adb shell input keyevent 13</span></span>
<span class="line"><span>adb shell input keyevent 15</span></span>
<span class="line"><span>adb shell input keyevent 7</span></span>
<span class="line"><span>adb shell input keyevent 7</span></span>
<span class="line"><span>adb shell input keyevent 8</span></span>
<span class="line"><span>adb shell input tap 550 1450</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><img src="`+d+`" alt="image-20240515165305891"></p><p>代码说明：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> connect</span><span style="color:#98C379;"> 192.168.10.11:5050</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#98C379;">/dev/null</span><span style="color:#ABB2BF;"> 2&gt;&amp;1    </span><span style="color:#7F848E;font-style:italic;">#连接手机</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span><span style="color:#7F848E;font-style:italic;">    #先息屏，防止手机处于亮屏状态</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 224</span><span style="color:#7F848E;font-style:italic;">    #亮屏</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> swipe</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 1500</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 100</span><span style="color:#D19A66;"> 1000</span><span style="color:#7F848E;font-style:italic;">  #滑动屏幕进入密码输入界面</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span><span style="color:#7F848E;font-style:italic;">  #依次输入手机解锁密码</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> tap</span><span style="color:#D19A66;"> 550</span><span style="color:#D19A66;"> 1450</span><span style="color:#7F848E;font-style:italic;">  #输入密码后需要确认，可能是手机没有root过，只能用点击指定坐标，图片中&quot;完成&quot;所在坐标可以通过550,1450进行点击</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><img src="`+u+'" alt="image-20240515165349033"></p><p>执行命令后，成功登录手机。</p><h2 id="_7-坐标位置获取方法" tabindex="-1">7. 坐标位置获取方法 <a class="header-anchor" href="#_7-坐标位置获取方法" aria-label="Permalink to &quot;7. 坐标位置获取方法&quot;">​</a></h2><h3 id="_7-1-操作方法" tabindex="-1">7.1 操作方法 <a class="header-anchor" href="#_7-1-操作方法" aria-label="Permalink to &quot;7.1 操作方法&quot;">​</a></h3><p>前提：手机开启开发者模式；</p><h3 id="_7-2-打开设置" tabindex="-1">7.2 打开设置 <a class="header-anchor" href="#_7-2-打开设置" aria-label="Permalink to &quot;7.2 打开设置&quot;">​</a></h3><h4 id="_7-2-1-打开开发人员选项" tabindex="-1">7.2.1 打开开发人员选项 <a class="header-anchor" href="#_7-2-1-打开开发人员选项" aria-label="Permalink to &quot;7.2.1 打开开发人员选项&quot;">​</a></h4><p><img src="'+m+'" alt="图片"></p><h4 id="_7-2-2-打开指针位置" tabindex="-1">7.2.2 打开指针位置 <a class="header-anchor" href="#_7-2-2-打开指针位置" aria-label="Permalink to &quot;7.2.2 打开指针位置&quot;">​</a></h4><p><img src="'+h+'" alt="图片"></p><h4 id="_7-2-3-按住屏幕获取坐标" tabindex="-1">7.2.3 按住屏幕获取坐标 <a class="header-anchor" href="#_7-2-3-按住屏幕获取坐标" aria-label="Permalink to &quot;7.2.3 按住屏幕获取坐标&quot;">​</a></h4><p>手指在屏幕滑动的时候，上面的dxdy就会变化。</p><p><img src="'+C+`" alt="图片"></p><h2 id="_8-完善脚本" tabindex="-1">8. 完善脚本 <a class="header-anchor" href="#_8-完善脚本" aria-label="Permalink to &quot;8. 完善脚本&quot;">​</a></h2><p>通过以上一系列的操作，下面将需要使用的命令一并写入到脚本之中，完成整个过程。</p><p>vi openapp.sh</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> connect</span><span style="color:#98C379;"> 192.168.10.11:5050</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#98C379;">/dev/null</span><span style="color:#ABB2BF;"> 2&gt;&amp;1</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> swipe</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 1500</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 100</span><span style="color:#D19A66;"> 1000</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> tap</span><span style="color:#D19A66;"> 550</span><span style="color:#D19A66;"> 1450</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> am</span><span style="color:#98C379;"> start</span><span style="color:#D19A66;"> -n</span><span style="color:#98C379;"> com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#98C379;">/dev/null</span><span style="color:#ABB2BF;"> 2&gt;&amp;1</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 10</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="`+A+`" alt="图片"></p><p>参数说明：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> connect</span><span style="color:#98C379;"> 192.168.10.11:5050</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#98C379;">/dev/null</span><span style="color:#ABB2BF;"> 2&gt;&amp;1    </span><span style="color:#7F848E;font-style:italic;">#连接手机</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span><span style="color:#7F848E;font-style:italic;">    #先息屏，防止手机处于亮屏状态</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 224</span><span style="color:#7F848E;font-style:italic;">    #亮屏</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> swipe</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 1500</span><span style="color:#D19A66;"> 500</span><span style="color:#D19A66;"> 100</span><span style="color:#D19A66;"> 1000</span><span style="color:#7F848E;font-style:italic;">  #滑动屏幕进入密码输入界面</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span><span style="color:#7F848E;font-style:italic;">  #依次输入手机解锁密码</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 13</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 15</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 7</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 8</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> tap</span><span style="color:#D19A66;"> 550</span><span style="color:#D19A66;"> 1450</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span><span style="color:#7F848E;font-style:italic;">  #返回手机主页，防止APP正在桌面运行，一般APP需要重新点击才能完成“快速打卡”操作</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#启动钉钉</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> am</span><span style="color:#98C379;"> start</span><span style="color:#D19A66;"> -n</span><span style="color:#98C379;"> com.alibaba.android.rimet/com.alibaba.android.rimet.biz.LaunchHomeActivity</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#98C379;">/dev/null</span><span style="color:#ABB2BF;"> 2&gt;&amp;1</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 10</span><span style="color:#7F848E;font-style:italic;">    #设置延时，防止APP没有完全打开，造成打卡失败，这里根据实际测试设置时延</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 3</span><span style="color:#7F848E;font-style:italic;">  #再次返回到手机主页</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span>
<span class="line"><span style="color:#61AFEF;">adb</span><span style="color:#98C379;"> shell</span><span style="color:#98C379;"> input</span><span style="color:#98C379;"> keyevent</span><span style="color:#D19A66;"> 223</span><span style="color:#7F848E;font-style:italic;">  #息屏</span></span>
<span class="line"><span style="color:#61AFEF;">sleep</span><span style="color:#D19A66;"> 2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>执行脚本：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">sh</span><span style="color:#98C379;"> openapp.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果钉钉设置了快速打卡，当APP重新打开后，则会自动进行打卡。</p><h2 id="_8-总结" tabindex="-1">8. 总结 <a class="header-anchor" href="#_8-总结" aria-label="Permalink to &quot;8. 总结&quot;">​</a></h2><p>以上就是实现远程打卡的核心配置了，当然还需要很多功能来保障，比如：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>(1)怎么保障手机网络不中断，VPN可以正常访问？</span></span>
<span class="line"><span>(2)怎么智能管理手机电量？</span></span>
<span class="line"><span>(3)脚本执行后是否完成打卡操作怎么通知给你？还有就是很多APP不能同时在多台手机登录，怎么确定打卡成功？</span></span>
<span class="line"><span>(4)打开APP如果要求登录，该怎么办？</span></span>
<span class="line"><span>(5)怎么定时完成打卡操作？</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,124),g=[v];function k(_,D,E,P,q,f){return n(),a("div",null,g)}const w=s(F,[["render",k]]);export{B as __pageData,w as default};
