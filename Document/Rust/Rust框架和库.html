<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rust æ¡†æ¶å’Œåº“ | é¹¤å±¿ç¼–ç¨‹å­¦ä¹ ç¬”è®°</title>
    <meta name="description" content="è½¯ä»¶å¼€å‘è®¡ï¼šå¼€å‘æ–‡æ¡£å’Œå¼€å‘è®¡åˆ’ï¼Œå®ŒæˆåŠŸèƒ½å·¥å…·ï¼Œå’Œå¾…å¼€å‘çš„åŠŸèƒ½å’Œå·¥å…·">
    <meta name="generator" content="VitePress v1.2.2">
    <link rel="preload stylesheet" href="/ProgramLearnNotes/assets/style.Dv0iXHtT.css" as="style">
    
    <script type="module" src="/ProgramLearnNotes/assets/app.CtEdWW_s.js"></script>
    <link rel="preload" href="/ProgramLearnNotes/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/ProgramLearnNotes/assets/chunks/framework.zGi9i9Bf.js">
    <link rel="modulepreload" href="/ProgramLearnNotes/assets/chunks/theme.C9hbWOcA.js">
    <link rel="modulepreload" href="/ProgramLearnNotes/assets/Document_Rust_Rustæ¡†æ¶å’Œåº“.md.BDGeRjzb.lean.js">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/48587992?v=4">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-41e8be72><!--[--><!--]--><!--[--><span tabindex="-1" data-v-403b34f4></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-403b34f4> Skip to content </a><!--]--><!----><header class="VPNav" data-v-41e8be72 data-v-e75c828d><div class="VPNavBar has-sidebar top" data-v-e75c828d data-v-8dd71d78><div class="wrapper" data-v-8dd71d78><div class="container" data-v-8dd71d78><div class="title" data-v-8dd71d78><div class="VPNavBarTitle has-sidebar" data-v-8dd71d78 data-v-f6236270><a class="title" href="/ProgramLearnNotes/" data-v-f6236270><!--[--><!--]--><!--[--><img class="VPImage logo" src="/ProgramLearnNotes/img/buding.svg" alt data-v-8444dd17><!--]--><span data-v-f6236270>é¹¤å±¿ç¼–ç¨‹å­¦ä¹ ç¬”è®°</span><!--[--><!--]--></a></div></div><div class="content" data-v-8dd71d78><div class="content-body" data-v-8dd71d78><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8dd71d78><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8dd71d78 data-v-fd4c8781><span id="main-nav-aria-label" class="visually-hidden" data-v-fd4c8781>Main Navigation</span><!--[--><!--[--><span class="VPLink VPNavBarMenuLink" tabindex="0" data-v-fd4c8781 data-v-ca770222><!--[--><span data-v-ca770222>ğŸŒæˆ‘çš„ä¸ªäººç½‘ç«™</span><!--]--></span><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8dd71d78 data-v-31419d3d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-31419d3d data-v-97b1538b data-v-10ac9a07><span class="check" data-v-10ac9a07><span class="icon" data-v-10ac9a07><!--[--><span class="vpi-sun sun" data-v-97b1538b></span><span class="vpi-moon moon" data-v-97b1538b></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8dd71d78 data-v-4aea72c8 data-v-c48a77dc><!--[--><a class="VPSocialLink no-icon" href="https://github.com/muyaCode/ProgramLearnNotes" aria-label="github" target="_blank" rel="noopener" data-v-c48a77dc data-v-4f038324><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/muyaCode/program-learn-notes" aria-label target="_blank" rel="noopener" data-v-c48a77dc data-v-4f038324><svg t="1690871772610" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" width="256" height="256">
        <path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="988"></path>
      </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8dd71d78 data-v-7a5a60f5 data-v-da01661c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-da01661c><span class="vpi-more-horizontal icon" data-v-da01661c></span></button><div class="menu" data-v-da01661c><div class="VPMenu" data-v-da01661c data-v-4656436b><!----><!--[--><!--[--><!----><div class="group" data-v-7a5a60f5><div class="item appearance" data-v-7a5a60f5><p class="label" data-v-7a5a60f5>Appearance</p><div class="appearance-action" data-v-7a5a60f5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-7a5a60f5 data-v-97b1538b data-v-10ac9a07><span class="check" data-v-10ac9a07><span class="icon" data-v-10ac9a07><!--[--><span class="vpi-sun sun" data-v-97b1538b></span><span class="vpi-moon moon" data-v-97b1538b></span><!--]--></span></span></button></div></div></div><div class="group" data-v-7a5a60f5><div class="item social-links" data-v-7a5a60f5><div class="VPSocialLinks social-links-list" data-v-7a5a60f5 data-v-c48a77dc><!--[--><a class="VPSocialLink no-icon" href="https://github.com/muyaCode/ProgramLearnNotes" aria-label="github" target="_blank" rel="noopener" data-v-c48a77dc data-v-4f038324><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://gitee.com/muyaCode/program-learn-notes" aria-label target="_blank" rel="noopener" data-v-c48a77dc data-v-4f038324><svg t="1690871772610" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" width="256" height="256">
        <path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="988"></path>
      </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8dd71d78 data-v-8b1b27ae><span class="container" data-v-8b1b27ae><span class="top" data-v-8b1b27ae></span><span class="middle" data-v-8b1b27ae></span><span class="bottom" data-v-8b1b27ae></span></span></button></div></div></div></div><div class="divider" data-v-8dd71d78><div class="divider-line" data-v-8dd71d78></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-41e8be72 data-v-13941054><div class="container" data-v-13941054><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-13941054><span class="vpi-align-left menu-icon" data-v-13941054></span><span class="menu-text" data-v-13941054>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-13941054 data-v-b5f027b0><button data-v-b5f027b0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-41e8be72 data-v-b99191f1><div class="curtain" data-v-b99191f1></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b99191f1><span class="visually-hidden" id="sidebar-aria-label" data-v-b99191f1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸæ–‡æ¡£æŒ‡å—</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/order/%E6%96%87%E6%A1%A3%E6%8C%87%E5%8D%97" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ–‡æ¡£æŒ‡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/order/markdown%E5%9B%BE%E6%A0%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>markdownå›¾æ ‡</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0" data-v-b99191f1 data-v-46adc9ff><!----><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç¼–ç¨‹è¯­è¨€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BC%96%E8%AF%91%E5%99%A8%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç¼–è¯‘å™¨åŸç†å’Œå®ç°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%89%8B%E6%90%93CPU" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ‰‹æ“CPU</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%A0%87%E5%87%86%E5%8C%96API%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ ‡å‡†åŒ–APIè®¾è®¡æµç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E5%BC%80%E6%BA%90%E5%B0%8F%E6%8A%84" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¼€æºå°æŠ„</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å‘½ä»¤è¡Œå·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>åŒ…ç®¡ç†å™¨é…ç½®ä»£ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E5%A6%82%E4%BD%95%E5%86%99%E5%87%BA%E5%88%AB%E4%BA%BA%E6%97%A0%E6%B3%95%E7%BB%B4%E6%8A%A4%E7%9A%84%E4%BB%A3%E7%A0%81" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¦‚ä½•å†™å‡ºåˆ«äººæ— æ³•ç»´æŠ¤çš„ä»£ç </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸæœåŠ¡å™¨ç›¸å…³</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3/Nginx%E9%85%8D%E7%BD%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Nginxé…ç½®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸJava</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Java/Java%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Javaå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Java/Java%E6%A1%86%E6%9E%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Javaæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Java/Java%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Javaé¢è¯•ç›¸å…³</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸC#</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-Sharp/C-Sharp%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>C-Sharpå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>ğŸŒŸdotnet</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-Sharp/dotnet/dotnet%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>dotnetå…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-Sharp/dotnet/dotnet%E7%9B%B8%E5%85%B3%E7%BD%91%E5%9D%80" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>dotnetç›¸å…³ç½‘å€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-Sharp/dotnet/dotnet%E7%9B%B8%E5%85%B3%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>dotnetç›¸å…³å¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸGo</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Go/Go%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3%E7%BD%91%E7%AB%99%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Goè¯­è¨€ç›¸å…³ç½‘ç«™èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Go/Go%E5%BC%80%E6%BA%90%E5%BA%94%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Goå¼€æºåº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Go/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Goè¯­è¨€å­¦ä¹ è·¯çº¿</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Go/Go%E6%A1%86%E6%9E%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Goæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸPython</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%AD%A6%E4%B9%A0%E7%BA%BF%E8%B7%AF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonå­¦ä¹ çº¿è·¯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E7%89%88%E6%9C%AC%E5%92%8C%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonç‰ˆæœ¬å’Œç¯å¢ƒç®¡ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E7%9A%84Conda%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E5%91%BD%E4%BB%A4" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonçš„Condaç®¡ç†è½¯ä»¶å‘½ä»¤</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonå…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E6%A1%86%E6%9E%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%BA%93" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonåº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonè„šæœ¬å¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%AE%9E%E6%88%98%E5%BC%80%E5%8F%91" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonå®æˆ˜å¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E7%88%AC%E8%99%AB" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonçˆ¬è™«</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonå¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E4%B8%8E%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%BB%93%E5%90%88" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythonä¸å…¶ä»–è¯­è¨€ç»“åˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Python/Python%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Pythoné¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸMojo</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Mojo/Mojo%E8%AF%AD%E8%A8%80%E7%AE%80%E4%BB%8B%E5%92%8C%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Mojoè¯­è¨€ç®€ä»‹å’Œèµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Mojo/Mojo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Mojoå¼€å‘ç¯å¢ƒæ­å»º</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸPHP</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/PHP/PHP%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>PHPå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸSwift</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Swift/Swift%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Swiftå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸC/C++</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-C++/C-C++%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>C-C++å­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-C++/%E5%BC%80%E6%BA%90%E7%9A%84C-C+%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¼€æºçš„C-C+åŒ…ç®¡ç†å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/C-C++/C-C++%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>C-C++è¯­è¨€ç›¸å…³å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible has-active" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸRust</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustå­¦ä¹ è·¯çº¿</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/0.Rust%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>0.Rustä»‹ç»å’Œåº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/1.Rust%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>1.Rustå¼€å‘ç¯å¢ƒæ­å»º</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/2.Rust%E5%9F%BA%E7%A1%80%E7%AF%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>2.RuståŸºç¡€ç¯‡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/3.Rust%E8%BF%9B%E9%98%B6%E7%AF%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>3.Rustè¿›é˜¶ç¯‡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/4.Rust%E6%A1%86%E6%9E%B6%E7%AF%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>4.Rustæ¡†æ¶ç¯‡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/5.Rust%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E7%AF%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>5.Rusté¡¹ç›®å®æˆ˜ç¯‡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/6.Rust%E4%B8%8EWebAssembly" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>6.Rustä¸WebAssembly</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/7.Rust%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>7.Rustè®¾è®¡æ¨¡å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/8.Rust%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>8.Rustæ¸¸æˆå¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/9.Rust%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>9.Rustç¨‹åºè°ƒè¯•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/10.Rust%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E4%B8%8E%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>10.Rustæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å®æˆ˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/11.Rust%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>11.Rusté¢è¯•é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E6%A1%86%E6%9E%B6%E5%92%8C%E5%BA%93" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustæ¡†æ¶å’Œåº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustå¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Rust/Rust%E5%92%8C%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%BB%93%E5%90%88" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Rustå’Œå…¶ä»–è¯­è¨€ç»“åˆ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸLua</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Luaè¯­è¨€å­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>LuaåŸºç¡€å…¥é—¨</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>LuaåŸºç¡€è¯­æ³•å…¥é—¨</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/1.%E5%BC%80%E5%A7%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>1.å¼€å§‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/2.%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>2.ç±»å‹å’Œå€¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/3.%E8%A1%A8%E8%BE%BE%E5%BC%8F" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>3.è¡¨è¾¾å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/4.%E8%AF%AD%E5%8F%A5" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>4.è¯­å¥</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%AE%9E%E6%88%98" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Luaå®æˆ˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Lua/Lua%E5%BC%80%E5%8F%91%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Luaå¼€å‘å®‰å“åº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸZig</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Zig/Zig%E4%BB%8B%E7%BB%8D" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Zigä»‹ç»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Zig/Zig%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Zigç›¸å…³å­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Zig/Zig%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Zigå…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸæ±‡ç¼–</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96%E7%AE%80%E4%BB%8B%E5%92%8C%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ±‡ç¼–ç®€ä»‹å’Œèµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ±‡ç¼–å…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ±‡ç¼–å¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Harmony%E9%B8%BF%E8%92%99%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Harmony%E9%B8%BF%E8%92%99%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E7%AE%80%E4%BB%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘ç®€ä»‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Harmony%E9%B8%BF%E8%92%99%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Harmony%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Harmonyå¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>AIå¤§è¯­è¨€æ¨¡å‹</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/AI%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/AI%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>AIå¤§è¯­è¨€æ¨¡å‹å­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/AI%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/AI%E6%A8%A1%E5%9E%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>AIæ¨¡å‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>æ•°æ®åº“</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¸¸ç”¨æ•°æ®åº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ•°æ®åº“å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ•°æ®åº“å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E6%A0%B8%E5%AE%9E%E7%8E%B0" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ•°æ®åº“å†…æ ¸å®ç°</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>MySQL</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySQL%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>MySQLå­¦ä¹ èµ„æº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySQL%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>MySQLå­¦ä¹ è·¯çº¿</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySQL%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>MySQLå…¥é—¨</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>SQLite</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E6%95%B0%E6%8D%AE%E5%BA%93/SQLite" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>SQLite</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸLinux</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Linux/Linux%E5%91%BD%E4%BB%A4" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Linuxå‘½ä»¤</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Linux/Linux%E5%86%85%E6%A0%B8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Linuxå†…æ ¸</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Linux/Linux%E8%84%9A%E6%9C%AC" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Linuxè„šæœ¬</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸDocker</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%85%A5%E9%97%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Dockerå…¥é—¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/%E6%80%8E%E4%B9%88%E6%8A%8A%E7%BD%91%E7%AB%99%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BA%94%E7%94%A8%E6%8E%A5%E5%85%A5Docker" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ€ä¹ˆæŠŠç½‘ç«™å’ŒæœåŠ¡ç«¯åº”ç”¨æ¥å…¥Docker</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>ğŸŒŸDockeråº”ç”¨</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Docker%E5%BA%94%E7%94%A8%E6%94%B6%E9%9B%86" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Dockeråº”ç”¨æ”¶é›†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Docker%E8%87%AA%E5%BB%BA%E4%BA%91%E6%89%8B%E6%9C%BA" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Dockerè‡ªå»ºäº‘æ‰‹æœº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Docker%20%E5%8A%A0%E6%8C%81%E7%9A%84%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%EF%BC%9A%E9%9A%8F%E8%BA%AB%E6%90%BA%E5%B8%A6%E7%9A%84%E7%9F%A5%E8%AF%86%E5%BA%93" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Docker åŠ æŒçš„å®‰å“æ‰‹æœºï¼šéšèº«æºå¸¦çš„çŸ¥è¯†åº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/NAS%E8%87%AA%E6%89%98%E7%AE%A1%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1APP%E7%AB%AF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>NASè‡ªæ‰˜ç®¡åº”ç”¨æœåŠ¡APPç«¯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Webman%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B_%E8%BD%BB%E6%9D%BE%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2Webman%E9%A1%B9%E7%9B%AE%E2%80%94%E6%89%93%E9%80%A0%E4%B8%93%E5%B1%9E%E4%BD%A0%E7%9A%84Web%E5%BA%94%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Webmanå®æˆ˜æ•™ç¨‹_è½»æ¾ä½¿ç”¨Dockeréƒ¨ç½²Webmané¡¹ç›®â€”æ‰“é€ ä¸“å±ä½ çš„Webåº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E5%92%8C%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Dockerå¿«é€Ÿå…¥é—¨å’Œéƒ¨ç½²ä½¿ç”¨æ•™ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/Docker-Desktop%E5%BC%80%E5%90%AF%E5%86%85%E7%BD%AE%E7%9A%84K8S%E5%B9%B6%E5%AE%89%E8%A3%85kuboard%E8%BF%9B%E8%A1%8C%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Docker-Desktopå¼€å¯å†…ç½®çš„K8Så¹¶å®‰è£…kuboardè¿›è¡Œå¾®æœåŠ¡ç®¡ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E4%BD%BF%E7%94%A8Watchtower%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0Docker%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ä½¿ç”¨Watchtowerè‡ªåŠ¨æ›´æ–°Dockeré•œåƒä¸å®¹å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%8F%98%E6%9B%B4Docker-Desktop%E7%9A%84%E9%95%9C%E5%83%8F%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¦‚ä½•ä¼˜é›…çš„å˜æ›´Docker-Desktopçš„é•œåƒå­˜å‚¨è·¯å¾„</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20GitHub%20Actions%20%E6%9E%84%E5%BB%BA%20Docker%20%E9%95%9C%E5%83%8F" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¦‚ä½•ä½¿ç”¨ GitHub Actions æ„å»º Docker é•œåƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E5%BC%80%E6%BA%90Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4%E9%9D%A2%E6%9D%BF1Panel%E6%9E%84%E5%BB%BAPHP%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8Cwebman%E6%A1%86%E6%9E%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¼€æºLinuxæœåŠ¡å™¨è¿ç»´é¢æ¿1Panelæ„å»ºPHPå®¹å™¨è¿è¡Œwebmanæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E5%B0%86Docker%E9%95%9C%E5%83%8F%E7%BC%96%E8%AF%91%E6%88%90%E7%8B%AC%E7%AB%8B%E5%8F%AF%E7%A7%BB%E6%A4%8D%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å°†Dockeré•œåƒç¼–è¯‘æˆç‹¬ç«‹å¯ç§»æ¤äºŒè¿›åˆ¶æ–‡ä»¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E5%91%8A%E5%88%ABDockerfile,%E6%8B%A5%E6%8A%B1%20docker%20init%20%E6%9E%84%E5%BB%BADocker%E9%95%9C%E5%83%8F" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å‘Šåˆ«Dockerfile,æ‹¥æŠ± docker init æ„å»ºDockeré•œåƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/Docker%E5%BA%94%E7%94%A8/%E8%91%AB%E8%8A%A6%E5%A8%83%E5%B9%B3%E5%8F%B0%E8%87%AA%E5%8A%A8%E9%A2%84%E7%BA%A6%E8%8C%85%E5%8F%B0" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>è‘«èŠ¦å¨ƒå¹³å°è‡ªåŠ¨é¢„çº¦èŒ…å°</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>ğŸŒŸNAS</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/NAS/NAS%E7%A1%AC%E4%BB%B6%E6%8E%A8%E8%8D%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>NASç¡¬ä»¶æ¨è</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/NAS/NAS%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>NASç³»ç»Ÿæ¨è</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/NAS/NAS%E5%A5%BD%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>NASå¥½å·¥å…·æ¨è</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/NAS/%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87%E6%94%B9%E9%80%A0%E6%88%90NAS" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç¡¬ä»¶è®¾å¤‡æ”¹é€ æˆNAS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/Docker/NAS/%E9%AD%94%E4%BA%91%E8%85%BEZeusC1%E2%80%94%E2%80%94%E4%BA%91%E6%89%8B%E6%9C%BA%E5%BD%9312%E4%B8%AA%E6%89%8B%E6%9C%BA%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>é­”äº‘è…¾ZeusC1â€”â€”äº‘æ‰‹æœºå½“12ä¸ªæ‰‹æœºç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>ğŸŒŸç½‘ç»œå®‰å…¨</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E9%BB%91%E5%AE%A2%E5%B7%A5%E5%85%B7%E7%B3%BB%E5%88%97" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>é»‘å®¢å·¥å…·ç³»åˆ—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%A4%BE%E5%8C%BA%E8%AE%BA%E5%9D%9B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œå®‰å…¨ç¤¾åŒºè®ºå›</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E9%BB%91%E5%AE%A2%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>é»‘å®¢è¾…åŠ©å·¥å…·</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%91/Venom-Crawler%E8%BD%AC%E4%B8%BA%E6%8D%A1%E6%B4%9E%E8%80%8C%E7%94%9F%E7%9A%84%E7%88%AC%E8%99%AB%E7%A5%9E%E5%99%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Venom-Crawlerè½¬ä¸ºæ¡æ´è€Œç”Ÿçš„çˆ¬è™«ç¥å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%91/%E5%AF%86%E6%8E%A2%E5%B7%A5%E5%85%B7%E9%9B%86GUI%E6%B8%97%E9%80%8F%E7%89%88" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¯†æ¢å·¥å…·é›†GUIæ¸—é€ç‰ˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E5%92%8C%E4%BD%BF%E7%94%A8%E3%80%91/Aoman%E5%8E%BB%E6%8C%87%E7%BA%B9%E6%B5%8F%E8%A7%88%E5%99%A8%E2%80%94%E4%BC%AA%E9%80%A0%E4%B8%80%E4%B8%AA%E5%AE%89%E5%85%A8%E7%9A%84%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Aomanå»æŒ‡çº¹æµè§ˆå™¨â€”ä¼ªé€ ä¸€ä¸ªå®‰å…¨çš„æ¸—é€ç¯å¢ƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>æ€è·¯</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E9%98%B2%E8%BA%AB%E7%A7%98%E7%B1%8D" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œå®‰å…¨é˜²èº«ç§˜ç±</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E4%B8%80%E7%A7%8D%E5%88%A9%E7%94%A8%E5%90%88%E6%B3%95%E5%B7%A5%E5%85%B7%E6%B8%97%E9%80%8F%E7%9A%84%E6%96%B0%E5%9E%8B%E6%96%B9%E6%B3%95" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ä¸€ç§åˆ©ç”¨åˆæ³•å·¥å…·æ¸—é€çš„æ–°å‹æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/HFish_%E6%B0%B8%E4%B9%85%E5%85%8D%E8%B4%B9%E2%80%94%E5%B7%A7%E8%AE%BE%E8%9C%9C%E7%BD%90%E8%BF%B7%E5%B1%80" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>HFish_æ°¸ä¹…å…è´¹â€”å·§è®¾èœœç½è¿·å±€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/App%E6%B8%97%E9%80%8F_%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%E7%99%BB%E5%BD%95%E7%BB%95%E8%BF%87" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Appæ¸—é€_äººè„¸è¯†åˆ«ç™»å½•ç»•è¿‡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E8%BF%BD%E8%B8%AA%E6%94%BB%E5%87%BB%E6%BA%90%E5%A4%B4%20%E4%BB%8EIP%E5%9C%B0%E5%9D%80%E5%88%B0%E6%94%BB%E5%87%BB%E8%80%85%E8%BA%AB%E4%BB%BD%E7%9A%84%E6%BA%AF%E6%BA%90%E4%B9%8B%E6%97%85" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>è¿½è¸ªæ”»å‡»æºå¤´ ä»IPåœ°å€åˆ°æ”»å‡»è€…èº«ä»½çš„æº¯æºä¹‹æ—…</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E5%9C%A8%E5%AE%B6%E6%89%93%E5%8D%A1%E7%9A%84%E6%96%B9%E6%B3%95" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>åœ¨å®¶æ‰“å¡çš„æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E7%BD%91%E7%BB%9C%E6%B0%B4%E5%86%9B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œæ°´å†›</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%BC%80%E6%BA%90%E6%83%85%E6%8A%A5%E8%B7%9F%E8%B8%AA%E4%B8%80%E4%B8%AA%E4%BA%BA" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¦‚ä½•ä½¿ç”¨å¼€æºæƒ…æŠ¥è·Ÿè¸ªä¸€ä¸ªäºº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E4%BD%A0%E6%98%AF%E5%90%A6%E5%9C%A8%E6%AD%A3%E7%A1%AE%E7%9A%84%E4%BD%BF%E7%94%A8vpn" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ä½ æ˜¯å¦åœ¨æ­£ç¡®çš„ä½¿ç”¨vpn</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E5%8F%AF%E7%9B%91%E5%90%ACVPN%E7%9A%84%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¯ç›‘å¬VPNçš„é»‘å®¢æŠ€æœ¯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E5%9F%BA%E4%BA%8ELinux%E5%86%85%E6%A0%B8%E7%9A%84VPN%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>åŸºäºLinuxå†…æ ¸çš„VPNå·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6%E2%80%94ModHeader_%E5%8A%A9%E4%BD%A0%E7%BB%95%E8%BF%87%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83%E7%99%BB%E5%BD%95%E9%99%90%E5%88%B6" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æµè§ˆå™¨æ’ä»¶â€”ModHeader_åŠ©ä½ ç»•è¿‡å¾®ä¿¡æˆæƒç™»å½•é™åˆ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%80%9D%E8%B7%AF%E3%80%91/%E6%A3%80%E6%B5%8B%E8%87%AA%E5%AE%B6%E6%91%84%E5%83%8F%E5%A4%B4%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%BC%8F%E6%B4%9E" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ£€æµ‹è‡ªå®¶æ‘„åƒå¤´æ˜¯å¦å­˜åœ¨æ¼æ´</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>KaliLinux</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90KaliLinux%E3%80%91/%E5%AE%9E%E4%BD%93%E6%9C%BA%E5%AE%89%E8%A3%85kali%E6%95%99%E7%A8%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å®ä½“æœºå®‰è£…kaliæ•™ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90KaliLinux%E3%80%91/%E6%89%8B%E6%9C%BA%E5%AE%89%E8%A3%85Kali%20Linux" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ‰‹æœºå®‰è£…Kali Linux</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90KaliLinux%E3%80%91/KaliLinux%E5%B7%A5%E5%85%B7%E8%84%91%E5%9B%BE_%E5%AE%89%E5%85%A8%E4%B8%93%E5%AE%B6%E7%9A%84%E5%86%9B%E6%A2%B0%E5%BA%93" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>KaliLinuxå·¥å…·è„‘å›¾_å®‰å…¨ä¸“å®¶çš„å†›æ¢°åº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90KaliLinux%E3%80%91/kali%20Linux%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>kali Linuxå®‰å…¨å·¥å…·é›†åˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90KaliLinux%E3%80%91/KaliLinux%E4%B8%8B%E7%BC%96%E5%86%99%E5%AE%89%E5%8D%93%E6%9C%A8%E9%A9%AC" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>KaliLinuxä¸‹ç¼–å†™å®‰å“æœ¨é©¬</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>æŠ“åŒ…é…ç½®</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%8A%93%E5%8C%85%E9%85%8D%E7%BD%AE%E3%80%91/%E5%AE%89%E5%8D%93%E9%AB%98%E7%89%88%E6%9C%ACHTTPS%E6%8A%93%E5%8C%85%E7%BB%88%E6%9E%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å®‰å“é«˜ç‰ˆæœ¬HTTPSæŠ“åŒ…ç»ˆæè§£å†³æ–¹æ¡ˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>æ¸—é€æµ‹è¯•å·¥å…·</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E3%80%91/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ¸—é€æµ‹è¯•å·¥å…·</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>é€†å‘ç ´è§£</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/Magisk-Lsposed%20%E8%A7%A3%E5%86%B3%E6%9F%90%E9%9F%B3APP%E6%8A%93%E5%8C%85%E9%97%AE%E9%A2%98" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Magisk-Lsposed è§£å†³æŸéŸ³APPæŠ“åŒ…é—®é¢˜</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E6%8A%96%E9%9F%B3abogus%E9%80%86%E5%90%91%E5%88%86%E6%9E%90" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æŠ–éŸ³abogusé€†å‘åˆ†æ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/JS%E9%80%86%E5%90%91%E5%B7%A5%E5%85%B7%E6%B8%85%E5%8D%95" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>JSé€†å‘å·¥å…·æ¸…å•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/js%E9%80%86%E5%90%91" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>jsé€†å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/frida%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>fridaå…¥é—¨ä½¿ç”¨ä»‹ç»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/Electron%E5%BA%94%E7%94%A8%E9%AA%8C%E8%AF%81%E7%A0%B4%E8%A7%A3" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>Electronåº”ç”¨éªŒè¯ç ´è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/clash+yakt%E6%8A%93%E5%8C%85%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>clash+yaktæŠ“åŒ…å¾®ä¿¡å°ç¨‹åº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/APP%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>APPé€†å‘ç ´è§£æ•™ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/APK%E9%80%86%E5%90%91%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>APKé€†å‘å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E7%BD%91%E7%BB%9C%E5%97%85%E6%8E%A2%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œå—…æ¢çš„åŸç†å’Œå¸¸ç”¨å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E5%BC%80%E6%BA%90%E9%80%86%E5%90%91%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å¼€æºé€†å‘å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E3%80%90%E8%BD%A6%E8%81%94%E7%BD%91%E3%80%91%E8%BD%A6%E8%BD%BD%20Android%20%E5%BA%94%E7%94%A8%E6%94%BB%E5%87%BB-%E9%80%86%E5%90%91%E5%B7%A5%E5%85%B7" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ã€è½¦è”ç½‘ã€‘è½¦è½½ Android åº”ç”¨æ”»å‡»-é€†å‘å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E3%80%90%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91%E3%80%91%E6%B7%98%E7%B3%BB%E6%8A%93%E5%8C%85%E6%B1%87%E6%80%BB(%E9%B1%BC%20%E9%BA%A6%20%E7%8C%AB%20%E9%A5%BF%20%E5%AE%9D)" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ã€å®‰å“é€†å‘ã€‘æ·˜ç³»æŠ“åŒ…æ±‡æ€»(é±¼ éº¦ çŒ« é¥¿ å®)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%80%86%E5%90%91%E7%A0%B4%E8%A7%A3%E3%80%91/%E3%80%90%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91%E3%80%91%E6%9F%90%E9%9F%B3%E6%B5%B7%E5%A4%96%E7%89%88tiktok%E6%8A%93%E5%8C%85" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ã€å®‰å“é€†å‘ã€‘æŸéŸ³æµ·å¤–ç‰ˆtiktokæŠ“åŒ…</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46adc9ff data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h3 class="text" data-v-46adc9ff>é»‘å®¢æŠ€æœ¯</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF%E3%80%91/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E7%9A%84%E5%BA%94%E7%94%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ•°æ®ç»“æ„ç®—æ³•çš„åº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF%E3%80%91/%E4%B8%8D%E5%88%B7%E5%9B%BA%E4%BB%B6%E6%AD%A6%E8%A3%85%E5%AE%B6%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ä¸åˆ·å›ºä»¶æ­¦è£…å®¶ç”¨è·¯ç”±å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF%E3%80%91/%E5%90%8E%E9%97%A8%E6%8A%80%E6%9C%AF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>åé—¨æŠ€æœ¯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E3%80%90%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF%E3%80%91/%E5%9C%A8Windows%E7%B3%BB%E7%BB%9F%E4%B8%8B%E6%8F%90%E6%9D%83%E7%9A%848%E7%A7%8D%E4%B8%BB%E8%A6%81%E5%A7%BF%E5%8A%BF" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>åœ¨Windowsç³»ç»Ÿä¸‹ææƒçš„8ç§ä¸»è¦å§¿åŠ¿</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%95%99%E7%A8%8B" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œå®‰å…¨æ•™ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3%E7%8E%AF%E5%A2%83" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>ç½‘ç»œå®‰å…¨ç›¸å…³ç¯å¢ƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E9%BB%91%E5%AE%A2%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>é»‘å®¢å¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3%E7%9A%84%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>å®‰å…¨ç›¸å…³çš„å¼€æºé¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><div class="group" data-v-b99191f1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b99191f1 data-v-46adc9ff><div class="item" role="button" tabindex="0" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><h2 class="text" data-v-46adc9ff>å¼€æºç›¸å…³</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46adc9ff><span class="vpi-chevron-right caret-icon" data-v-46adc9ff></span></div></div><div class="items" data-v-46adc9ff><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><div class="item" data-v-46adc9ff><div class="indicator" data-v-46adc9ff></div><a class="VPLink link link" href="/ProgramLearnNotes/Document/%E5%BC%80%E6%BA%90%E7%9B%B8%E5%85%B3/%E6%89%93%E9%80%A0%E4%B8%80%E4%B8%AA%E8%8A%B1%E9%87%8C%E8%83%A1%E5%93%A8%E7%9A%84Github%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5" data-v-46adc9ff><!--[--><p class="text" data-v-46adc9ff>æ‰“é€ ä¸€ä¸ªèŠ±é‡Œèƒ¡å“¨çš„Githubä¸ªäººä¸»é¡µ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><div class="VPSidebarItem level-1 is-link" data-v-46adc9ff data-v-46adc9ff><!----><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-41e8be72 data-v-4c7856c6><div class="VPDoc has-sidebar has-aside" data-v-4c7856c6 data-v-54e61e03><!--[--><!--]--><div class="container" data-v-54e61e03><div class="aside" data-v-54e61e03><div class="aside-curtain" data-v-54e61e03></div><div class="aside-container" data-v-54e61e03><div class="aside-content" data-v-54e61e03><div class="VPDocAside" data-v-54e61e03 data-v-f245b7e5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-f245b7e5 data-v-e57a11cf><div class="content" data-v-e57a11cf><div class="outline-marker" data-v-e57a11cf></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-e57a11cf>âš¡ï¸æ–‡æ¡£å†…å®¹å¤§çº²</div><ul class="VPDocOutlineItem root" data-v-e57a11cf data-v-1c0a706d><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-f245b7e5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-54e61e03><div class="content-container" data-v-54e61e03><!--[--><!--]--><main class="main" data-v-54e61e03><div style="position:relative;" class="vp-doc _ProgramLearnNotes_Document_Rust_Rust%E6%A1%86%E6%9E%B6%E5%92%8C%E5%BA%93" data-v-54e61e03><div><h1 id="rust-æ¡†æ¶å’Œåº“" tabindex="-1">Rust æ¡†æ¶å’Œåº“ <a class="header-anchor" href="#rust-æ¡†æ¶å’Œåº“" aria-label="Permalink to &quot;Rust æ¡†æ¶å’Œåº“&quot;">â€‹</a></h1><p><a href="https://github.com/i5ting/learn-rust-for-fe" target="_blank" rel="noreferrer">i5ting/learn-rust-for-fe: Rust æ˜¯æœªæ¥å‰ç«¯åŸºç¡€è®¾æ–½ (github.com)</a></p><p><a href="https://github.com/rust-unofficial/awesome-rust" target="_blank" rel="noreferrer">rust-unofficial/awesome-rustï¼šRust ä»£ç å’Œèµ„æºçš„ç²¾é€‰åˆ—è¡¨ã€‚ (github.com)</a></p><ul><li>å‘½ä»¤è¡Œå·¥å…·</li><li>ç½‘ç»œç¼–ç¨‹</li><li>æ¸¸æˆå¼€å‘</li><li>Web æ¡†æ¶</li><li>æœºå™¨å­¦ä¹ </li><li>æ•°æ®åº“</li><li>æ“ä½œç³»ç»Ÿ</li><li>åŒºå—é“¾</li></ul><h2 id="shuttle-å¯å…è´¹éƒ¨ç½²rust-webåº”ç”¨çš„äº‘å¹³å°" tabindex="-1">Shuttleï¼šå¯å…è´¹éƒ¨ç½²rust webåº”ç”¨çš„äº‘å¹³å° <a class="header-anchor" href="#shuttle-å¯å…è´¹éƒ¨ç½²rust-webåº”ç”¨çš„äº‘å¹³å°" aria-label="Permalink to &quot;Shuttleï¼šå¯å…è´¹éƒ¨ç½²rust webåº”ç”¨çš„äº‘å¹³å°&quot;">â€‹</a></h2><p><a href="https://github.com/shuttle-hq/shuttle" target="_blank" rel="noreferrer">shuttle-hq/shuttleï¼šæ„å»ºå’Œäº¤ä»˜åç«¯ï¼Œæ— éœ€ç¼–å†™ä»»ä½•åŸºç¡€è®¾æ–½æ–‡ä»¶ã€‚ (github.com)</a></p><p>Shuttleæ˜¯ä¸€ä¸ªRuståŸç”Ÿäº‘å¼€å‘å¹³å°ï¼Œå¯ä»¥è®©æ‚¨éƒ¨ç½²åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶è¿˜å¯ä»¥ç®¡ç†æ‰€æœ‰åŸºç¡€è®¾æ–½ã€‚ä½œä¸ºä¸€ä¸ªä¸“æ³¨äºæä¾›å“è¶Šå¼€å‘è€…ä½“éªŒçš„å¹³å°ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©æ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚Shuttleçš„â€œä»£ç åŸºç¡€æ¶æ„â€åŠŸèƒ½ä½¿èµ„æºè°ƒé…å˜å¾—ç®€å•è€Œæ— å¿§ã€‚è·å–æ•°æ®åº“åªéœ€è¦ä¸€ä¸ªå¸¦æœ‰æ•°æ®åº“çš„å®ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[shuttle_runtime::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // automatic db provisioning + hands you back an authenticated connection pool</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[</span><span style="color:#E5C07B;">shuttle_shared_db</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Postgres</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">pool</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">PgPool</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">ShuttleRocket</span><span style="color:#ABB2BF;">&lt;...&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // application code</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä½ å¯ä»¥è„šè¸å®åœ°ï¼Œè¿…é€Ÿå°†ä½ çš„æƒ³æ³•è½¬åŒ–ä¸ºåˆ‡å®å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å¿«é€Ÿæ„å»ºå’Œéƒ¨ç½²åŸå‹æ¥åŠ å¿«é¡¹ç›®è¿›åº¦ï¼Œç¡®ä¿æ‚¨åœ¨åˆ›çºªå½•çš„æ—¶é—´å†…å®ç°æ„¿æ™¯ã€‚</p><p>Shuttleå¯ä»¥æ‰˜ç®¡è®¸å¤šç±»å‹çš„Rustç¨‹åºã€‚Shuttleç¯å¢ƒä¸ºæš´éœ²åœ¨äº’è”ç½‘ä¸Šçš„ç½‘ç»œæµé‡æä¾›äº†ä¸€ä¸ªç½‘ç»œç«¯å£ã€‚å› æ­¤ï¼Œæœ€å¸¸è§çš„ç”¨ä¾‹æ˜¯éƒ¨ç½²webåº”ç”¨ç¨‹åºã€‚å¯ä»¥ç»‘å®šåˆ°å¥—æ¥å­—å¹¶æ¥å—ä¼ å…¥HTTPæµé‡çš„åº”ç”¨ç¨‹åºå¯ä»¥åœ¨Shuttleä¸Šè¿è¡Œã€‚</p><p>ä¸ºäº†è®©å¼€å‘æ›´è½»æ¾ï¼Œæˆ‘ä»¬å®ç°äº†è¿™äº›Rust webæ¡†æ¶æ‰€éœ€çš„æ‰€æœ‰æ ·æ¿ã€‚åªéœ€å‡ è¡Œä»£ç å³å¯å¼€å§‹ã€‚</p><p>Axum</p><p>Actix Web Rocket Warp Tower Salvo Poem Tide Thruster shuttle-next</p><p>Discord Botæ„å»ºæ¡†æ¶Serenityå’ŒPoiseä¹Ÿå¾—åˆ°å®˜æ–¹æ”¯æŒã€‚å¦‚æœæ‚¨éœ€è¦å®šåˆ¶æœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æˆ‘ä»¬çš„æŒ‡å—ã€‚</p><p>Shuttleçš„ä¸€å¤§ç‰¹ç‚¹æ˜¯é€šè¿‡å®æä¾›èµ„æºã€‚åªéœ€å‡ è¡Œä»£ç ï¼Œæ‚¨å°±å¯ä»¥è®¿é—®AWS RDSã€å…±äº«Postgresæˆ–Mongoæ•°æ®åº“ç­‰ã€‚æŸ¥çœ‹å‚è€ƒèµ„æ–™éƒ¨åˆ†ä»¥è·å¾—å®Œæ•´æ¦‚è¿°ã€‚</p><p>åœ¨Shuttleä¸Šæ„å»ºå’Œéƒ¨ç½²webåº”ç”¨ç¨‹åºçš„æœ€ç®€å•æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> axum</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">routing</span><span style="color:#ABB2BF;">::get, </span><span style="color:#E5C07B;">Router</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> hello_world</span><span style="color:#ABB2BF;">() -&gt; &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">    &quot;Hello, world!&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[shuttle_runtime::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">shuttle_axum</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ShuttleAxum</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hello_world</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ­¤ç¤ºä¾‹å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå…¶ä¸­/ç«¯ç‚¹è¿”å›Helloï¼Œworldï¼ã€‚ä½†æœ€é‡è¦çš„æ˜¯ï¼Œæ‚¨åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­çœ‹åˆ°çš„ä»£ç ï¼Œæ˜¯shuttleéƒ¨ç½²æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ã€‚</p><p>#[shuttle_runtime:ï¼šmain]æ˜¯ä¸ªè¿‡ç¨‹å®ã€‚è¯¥å®ä½¿ç”¨Shuttleçš„è¿è¡Œæ—¶åŒ…è£…æ‚¨çš„åº”ç”¨ç¨‹åºã€‚Shuttleè¿è¡Œæ—¶æ¥æ”¶æ¥è‡ªéƒ¨ç½²ç¨‹åºçš„å‘½ä»¤ï¼Œå¦‚åŠ è½½ã€å¯åŠ¨å’Œåœæ­¢ã€‚åŠ è½½é˜¶æ®µä¸ºåº”ç”¨ç¨‹åºæä¾›èµ„æºï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</p><p><img src="/ProgramLearnNotes/assets/image-20240526162110126.CEIUwLoH.png" alt="image-20240526162110126"></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸»å‡½æ•°ä¸­çš„2ä¸ªæ³¨é‡Šæ‰©å±•ä¸ºä»£ç ï¼Œä½¿Shuttleè¿è¡Œæ—¶åœ¨æˆ‘ä»¬ç«¯æä¾›å®ƒä»¬ã€‚</p><p>ä»¥ä¸‹æ˜¯åœ¨å°†æ‰€éœ€æ³¨é‡Šæ·»åŠ åˆ°ä»£ç ä¸­åå¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„ç¤ºä¾‹ï¼š</p><p>å¯†é’¥ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[shuttle_runtime::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> axum</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[</span><span style="color:#E5C07B;">shuttle_secrets</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Secrets</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">secret_store</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">SecretStore</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">shuttle_axum</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ShuttleAxum</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Get secret defined in `Secrets.toml` file.</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> secret</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secret</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> secret_store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MY_API_KEY&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        secret</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">anyhow!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;secret was not found&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ•°æ®åº“ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[shuttle_runtime::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> axum</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[</span><span style="color:#E5C07B;">shuttle_shared_db</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Postgres</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">pool</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">PgPool</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">shuttle_axum</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ShuttleAxum</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // We can query our Postgres database with `pool`</span></span>
<span class="line"><span style="color:#E06C75;">    pool</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">include_str!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;../schema.sql&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map_err</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CustomError</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">new</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å½“æ‚¨è¿è¡Œshuttleéƒ¨ç½²æ—¶ï¼Œæ‚¨çš„é¡¹ç›®ä»£ç ä¼šè¢«å­˜æ¡£å¹¶å‘é€åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œåœ¨é‚£é‡Œè¿›è¡Œç¼–è¯‘ã€‚æˆ‘ä»¬åœ¨shutter_runtime:ï¼šmainä¸­çš„ä»£ç ç”Ÿæˆå°†åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åµŒå…¥ä¸€ä¸ªgRPCæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¯¥æœåŠ¡å™¨æ¥å¯åŠ¨å’Œåœæ­¢æ‚¨çš„æœåŠ¡ï¼Œä»¥åŠä¸€ä¸ªLoaderç»“æ„ï¼Œè¯¥ç»“æ„å°†åœ¨ä¸»å‡½æ•°çš„å‚æ•°ä¸­æä¾›æ‚¨è¯·æ±‚çš„èµ„æºã€‚ç„¶åï¼Œæ‚¨çš„æœåŠ¡å°†åœ¨AWSæ¬§æ´²è¥¿éƒ¨2åœ°åŒºçš„ShuttleåŸºç¡€è®¾æ–½ä¸Šå¯åŠ¨ã€‚</p><p>å®ƒåŒ…å«ç¤¾åŒºç‰ˆæœ¬ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œä½¿ç”¨æ‚¨æ“…é•¿çš„rust webå¼€å‘æ¡†æ¶ï¼Œå‘å¸ƒåˆ°è¿™ä¸ªå¹³å°è¿è¡Œï¼Œç¤¾åŒºç‰ˆæœ¬èµ„æºæœ‰é™åˆ¶ï¼Œç›®å‰æ˜¯æœ€å¤š3ä¸ªé¡¹ç›®ï¼Œèµ·æ­¥æ•°æ®åº“ï¼Œèµ·æ­¥CPUå’Œå†…å­˜ã€‚</p><p>å…·ä½“å®šä»·è¯¦æƒ…è¯·æŸ¥çœ‹ï¼š<a href="https://www.shuttle.rs/pricing" target="_blank" rel="noreferrer">https://www.shuttle.rs/pricing</a></p><p>Githubåœ°å€ï¼š<a href="https://github.com/shuttle-hq/shuttle" target="_blank" rel="noreferrer">https://github.com/shuttle-hq/shuttle</a></p><h1 id="åº“æœç´¢" tabindex="-1">åº“æœç´¢ <a class="header-anchor" href="#åº“æœç´¢" aria-label="Permalink to &quot;åº“æœç´¢&quot;">â€‹</a></h1><p>cratesï¼š<a href="https://crates.io/" target="_blank" rel="noreferrer">https://crates.io/</a></p><p>Lib.rsï¼š<a href="https://lib.rs/" target="_blank" rel="noreferrer">https://lib.rs/</a></p><p>Rust çš„æ ‡å‡†åº“éå¸¸ç²¾ç®€ï¼Œå› æ­¤åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¾èµ–å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><ul><li>crates.io æ˜¯å®˜æ–¹çš„åŒ…æ‰˜ç®¡ç½‘ç«™ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å„ç§å„æ ·çš„ Rust åº“ã€‚</li><li>è€Œ docs.rs åˆ™æ˜¯å®˜æ–¹çš„æ–‡æ¡£æ‰˜ç®¡ç½‘ç«™ï¼Œè‡ªåŠ¨ç”Ÿæˆäº†æ‰€æœ‰å‘å¸ƒåœ¨ crates.io ä¸Šçš„åŒ…æ–‡æ¡£ã€‚é€šè¿‡è¿™ä¸¤ä¸ªç½‘ç«™ï¼Œæ‚¨å¯ä»¥è½»æ¾æ‰¾åˆ°æ‰€éœ€çš„åº“ï¼Œå¹¶æŸ¥çœ‹å…¶è¯¦ç»†æ–‡æ¡£ã€‚</li></ul><h1 id="å‘½ä»¤è¡Œåº“" tabindex="-1">å‘½ä»¤è¡Œåº“ <a class="header-anchor" href="#å‘½ä»¤è¡Œåº“" aria-label="Permalink to &quot;å‘½ä»¤è¡Œåº“&quot;">â€‹</a></h1><h2 id="clap-å‘½ä»¤è¡Œå‚æ•°è§£æå™¨" tabindex="-1">clapï¼šå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ <a class="header-anchor" href="#clap-å‘½ä»¤è¡Œå‚æ•°è§£æå™¨" aria-label="Permalink to &quot;clapï¼šå‘½ä»¤è¡Œå‚æ•°è§£æå™¨&quot;">â€‹</a></h2><p><strong>clapï¼šRust çš„å‘½ä»¤è¡Œå‚æ•°è§£æå™¨</strong>ï¼š<a href="https://docs.rs/clap/latest/clap/" target="_blank" rel="noreferrer">clap - rust (docs.rs)</a></p><h2 id="tui-realm" tabindex="-1">tui-realm <a class="header-anchor" href="#tui-realm" aria-label="Permalink to &quot;tui-realm&quot;">â€‹</a></h2><p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://github.com/veeso/tui-realm" target="_blank" rel="noreferrer">https://github.com/veeso/tui-realm</a></p><p>ui-realm æ˜¯ä¸€ä¸ªç”¨äº ui å’Œ ratatui çš„æ¡†æ¶ï¼Œç”¨äºå®ç°ç®€åŒ–çš„ç»ˆç«¯ç”¨æˆ·ç•Œé¢ï¼Œå¢åŠ äº†ä½¿ç”¨å…·æœ‰å±æ€§å’ŒçŠ¶æ€çš„å¯é‡ç”¨ç»„ä»¶ï¼Œå°±åƒåœ¨ React ä¸­æ‰€åšçš„é‚£æ ·ã€‚ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼šç»„ä»¶é€šè¿‡åŸºäºæ¶ˆæ¯å’Œäº‹ä»¶çš„ç³»ç»Ÿä¸ ui å¼•æ“é€šä¿¡ï¼Œæä¾›å®ç°æ›´æ–°ä¾‹ç¨‹çš„å¯èƒ½æ€§ï¼Œå°±åƒåœ¨ Elm ä¸­å‘ç”Ÿçš„é‚£æ ·ã€‚æ­¤å¤–ï¼Œç»„ä»¶è¢«ç»„ç»‡åœ¨è§†å›¾ä¸­ï¼Œå®ƒç®¡ç†æŒ‚è½½/å¸è½½ã€ç„¦ç‚¹å’Œäº‹ä»¶è½¬å‘ã€‚</p><p>è¿™ä¹Ÿè§£é‡Šäº†åç§°çš„åŸå› ï¼šRealm ä»£è¡¨ React å’Œ Elmã€‚</p><p>åŠŸèƒ½ç‰¹æ€§ï¼š</p><ul><li>äº‹ä»¶é©±åŠ¨</li><li>åŸºäº React å’Œ Elm</li><li>æ ·æ¿ä»£ç </li><li>å¿«é€Ÿå®‰è£…</li><li>å•ä¸€ç„¦ç‚¹å’ŒçŠ¶æ€ç®¡ç†</li><li>æ˜“äºå­¦ä¹ </li><li>é€‚åº”äºä»»ä½•ç”¨ä¾‹</li><li>Tui-realm é™„å¸¦äº†ä¸€ä¸ªå¯é€‰çš„æ ‡å‡†ç»„ä»¶åº“ï¼Œæˆ‘è®¤ä¸ºå¯¹å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½å¾ˆæœ‰ç”¨ã€‚å¦‚æœè¦ä½¿ç”¨å®ƒï¼Œåªéœ€å°† tui-realm-stdlib æ·»åŠ åˆ° Cargo ä¸­ã€‚toml ä¾èµ–æ€§ã€‚</li></ul><h2 id="tailspin-å®‰å…¨è¯­è¨€å¼€å‘çš„æ—¥å¿—é«˜äº®å·¥å…·" tabindex="-1">Tailspinï¼šå®‰å…¨è¯­è¨€å¼€å‘çš„æ—¥å¿—é«˜äº®å·¥å…· <a class="header-anchor" href="#tailspin-å®‰å…¨è¯­è¨€å¼€å‘çš„æ—¥å¿—é«˜äº®å·¥å…·" aria-label="Permalink to &quot;Tailspinï¼šå®‰å…¨è¯­è¨€å¼€å‘çš„æ—¥å¿—é«˜äº®å·¥å…·&quot;">â€‹</a></h2><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/bensadeh/tailspin" target="_blank" rel="noreferrer">https://github.com/bensadeh/tailspin</a></p><h3 id="è½¯ä»¶ä»‹ç»" tabindex="-1">è½¯ä»¶ä»‹ç» <a class="header-anchor" href="#è½¯ä»¶ä»‹ç»" aria-label="Permalink to &quot;è½¯ä»¶ä»‹ç»&quot;">â€‹</a></h3><blockquote><p>åœ¨ GitHub ä¸Šæœ‰ä¸€ä¸ªåä¸º Tailspin çš„é¡¹ç›®ï¼Œå®ƒæ˜¯ä½¿ç”¨ Rust ç¼–å†™çš„å‘½ä»¤è¡Œæ—¥å¿—æŸ¥çœ‹å·¥å…·ã€‚è¿™ä¸ªå·¥å…·çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒæä¾›äº†æ— éœ€é…ç½®å³å¯ç›´æ¥ä½¿ç”¨çš„åŠŸèƒ½ï¼Œé€šè¿‡é«˜äº®æ˜¾ç¤ºæ•°å­—ã€æ—¥æœŸã€IP åœ°å€ã€URL ç­‰å†…å®¹ï¼Œä½¿é‡è¦ä¿¡æ¯æ›´åŠ é†’ç›®æ¸…æ™°ã€‚</p></blockquote><p><img src="/ProgramLearnNotes/assets/image-20240512212801563.CgusDAYO.png" alt="image-20240512212801563"></p><h3 id="åŠŸèƒ½æè¿°" tabindex="-1">åŠŸèƒ½æè¿°ï¼š <a class="header-anchor" href="#åŠŸèƒ½æè¿°" aria-label="Permalink to &quot;åŠŸèƒ½æè¿°ï¼š&quot;">â€‹</a></h3><blockquote><p>Tailspin é€šè¿‡é€è¡Œé˜…è¯»æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é’ˆå¯¹æ¯ä¸€è¡Œè¿è¡Œä¸€ç³»åˆ—æ­£åˆ™è¡¨è¾¾å¼æ¥å·¥ä½œã€‚è¿™äº›æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥è¯†åˆ«ä½ åœ¨æ—¥å¿—æ–‡ä»¶ä¸­æœŸæœ›æ‰¾åˆ°çš„æ¨¡å¼ï¼Œå¦‚æ—¥æœŸã€æ•°å­—ã€ä¸¥é‡ç¨‹åº¦å…³é”®å­—ç­‰ã€‚</p></blockquote><blockquote><p>è¯¥å·¥å…·åœ¨æŸ¥æ‰¾éœ€è¦çªå‡ºæ˜¾ç¤ºçš„é¡¹ç›®æ—¶å¹¶ä¸åšä»»ä½•å‡è®¾ï¼Œå› æ­¤ä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œé«˜äº®æ˜¾ç¤ºåŠŸèƒ½å°†åœ¨ä¸åŒç±»å‹çš„æ—¥å¿—æ–‡ä»¶ä¸­è¡¨ç°ä¸€è‡´ã€‚</p></blockquote><h3 id="åŠŸèƒ½ç‰¹ç‚¹" tabindex="-1">åŠŸèƒ½ç‰¹ç‚¹ï¼š <a class="header-anchor" href="#åŠŸèƒ½ç‰¹ç‚¹" aria-label="Permalink to &quot;åŠŸèƒ½ç‰¹ç‚¹ï¼š&quot;">â€‹</a></h3><ul><li>å¯æŸ¥çœ‹ï¼ˆæˆ– tailï¼‰ä»»ä½•æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶</li><li>æ— éœ€è®¾ç½®æˆ–é…ç½®</li><li>é«˜äº®æ˜¾ç¤ºæ•°å­—ã€æ—¥æœŸã€IP åœ°å€ã€UUIDã€URL ç­‰å†…å®¹</li><li>æ‰€æœ‰é«˜äº®ç»„å‡å¯å®šåˆ¶</li><li>æ˜“äºä¸å…¶ä»–å‘½ä»¤é›†æˆ</li><li>ä½¿ç”¨ less å®ç°æ»šåŠ¨ã€æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½</li></ul><h3 id="ä½¿ç”¨åœºæ™¯" tabindex="-1">ä½¿ç”¨åœºæ™¯ï¼š <a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;ä½¿ç”¨åœºæ™¯ï¼š&quot;">â€‹</a></h3><blockquote><p>Tailspin å¯¹äºéœ€è¦æŸ¥çœ‹å’Œåˆ†ææ—¥å¿—æ–‡ä»¶çš„å¼€å‘äººå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜ç‰¹åˆ«æœ‰ç”¨ã€‚æ— éœ€å¤æ‚çš„é…ç½®ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥å·¥å…·æ¥æŸ¥çœ‹å„ç§æ—¥å¿—ï¼Œå¹¶é€šè¿‡é«˜äº®æ˜¾ç¤ºè®©å…³é”®ä¿¡æ¯ä¸€ç›®äº†ç„¶ã€‚å¦å¤–ï¼Œç”±äº Tailspin æ”¯æŒè‡ªå®šä¹‰é«˜äº®æ˜¾ç¤ºç»„ï¼Œç”¨æˆ·å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚çµæ´»åœ°è®¾ç½®é«˜äº®æ˜¾ç¤ºè§„åˆ™ï¼Œä»è€Œæ›´å¥½åœ°é€‚åº”ä¸åŒç±»å‹çš„æ—¥å¿—æ–‡ä»¶ã€‚</p></blockquote><blockquote><p>æ— è®ºæ˜¯æƒ³å¿«é€Ÿå®šä½é‡è¦ä¿¡æ¯ã€äº†è§£æ—¥å¿—å†…å®¹ï¼Œè¿˜æ˜¯ä¸å…¶ä»–å‘½ä»¤é›†æˆè¿›è¡Œæ›´å¤šæ“ä½œï¼ŒTailspin éƒ½èƒ½å¸®åŠ©ç”¨æˆ·é«˜æ•ˆåœ°å¤„ç†æ—¥å¿—æ•°æ®ã€‚</p></blockquote><blockquote><p>æ€»ä¹‹ï¼ŒTailspin æ˜¯ä¸€ä¸ªç®€å•å®ç”¨ä½†åŠŸèƒ½å¼ºå¤§çš„æ—¥å¿—æŸ¥çœ‹å·¥å…·ï¼Œæ—¨åœ¨æå‡æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶çš„æ•ˆç‡å’Œä¾¿æ·æ€§ã€‚å¦‚æœä½ æ˜¯å…³æ³¨æ—¥å¿—åˆ†æå’Œå¤„ç†çš„æŠ€æœ¯äººå‘˜ï¼Œä¸å¦¨å°è¯•ä½¿ç”¨ Tailspin æ¥ä¼˜åŒ–ä½ çš„å·¥ä½œæµç¨‹ã€‚</p></blockquote><h2 id="rust-ç»ˆç«¯è¡¨æ ¼æ‰“å°åº“" tabindex="-1">Rust ç»ˆç«¯è¡¨æ ¼æ‰“å°åº“ <a class="header-anchor" href="#rust-ç»ˆç«¯è¡¨æ ¼æ‰“å°åº“" aria-label="Permalink to &quot;Rust ç»ˆç«¯è¡¨æ ¼æ‰“å°åº“&quot;">â€‹</a></h2><h3 id="å¼•è¨€" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>å¤§å®¶åœ¨å¼€å‘å‘½ä»¤è¡Œç¨‹åºçš„æ—¶å€™ï¼Œæ˜¯å¦ç»å¸¸éœ€è¦ä»¥è¡¨æ ¼çš„å½¢å¼åœ¨ç»ˆç«¯ä¸Šæ‰“å°å†…å®¹å‘¢ï¼Ÿæœ€è¿‘æˆ‘å‘ç°äº†ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ Rust åº“ï¼štabledï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿã€ä¼˜é›…åœ°åœ¨ç»ˆç«¯ä¸Šæ‰“å°å‡ºç¾è§‚çš„è¡¨æ ¼ã€‚ä»Šå¤©å°±æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹è¿™ä¸ªå®ç”¨çš„å¼€æºé¡¹ç›®ã€‚</p><h3 id="åˆ›ä½œèƒŒæ™¯" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>ä¹‹æ‰€ä»¥æ¨è tabled è¿™ä¸ªåº“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š</p><ol><li>å®ƒçš„ API è®¾è®¡éå¸¸ç®€æ´ï¼Œä¸Šæ‰‹éš¾åº¦ä½ï¼Œå°ç™½ä¹Ÿå¯ä»¥å¿«é€ŸæŒæ¡ï¼›</li><li>æ”¯æŒå¤šç§è¡¨æ ¼æ ·å¼ï¼Œå¦‚ ASCIIã€Markdownã€RestructuredText ç­‰ï¼Œèƒ½æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ï¼›</li><li>å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å¯¹è¡¨æ ¼è¿›è¡Œæ ·å¼è‡ªå®šä¹‰ï¼Œå¦‚å¯¹é½æ–¹å¼ã€å¡«å……å­—ç¬¦ã€é¢œè‰²ç­‰ï¼›</li><li>æ–‡æ¡£ç¤ºä¾‹é½å…¨ï¼Œå¯¹æ–°æ‰‹éå¸¸å‹å¥½ã€‚</li></ol><p>æ‰€ä»¥æ— è®ºä½ æ˜¯ Rust æ–°æ‰‹è¿˜æ˜¯æœ‰ç»éªŒçš„è€æ‰‹ï¼Œtabled éƒ½æ˜¯ä¸€ä¸ªå€¼å¾—æ”¶è—çš„å·¥å…·åº“ã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><p>tabled é™¤äº†åŸºæœ¬çš„è¡¨æ ¼æ‰“å°åŠŸèƒ½å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸€äº›å‡ºè‰²çš„ç‰¹æ€§ï¼š</p><ul><li><p>å¤šç§è¡¨æ ¼è¾¹æ¡†æ ·å¼ï¼š</p></li><li><ul><li>ASCII å­—ç¬¦è¾¹æ¡†</li><li>Unicode å­—ç¬¦è¾¹æ¡†</li><li>Markdown è¡¨æ ¼æ ·å¼</li><li>RestructuredText è¡¨æ ¼æ ·å¼</li><li>ç®€çº¦æ— è¾¹æ¡†æ ·å¼</li></ul></li><li><p>æ”¯æŒè®¾ç½®è¡¨æ ¼æ ‡é¢˜ã€åˆ—æ ‡é¢˜ï¼›</p></li><li><p>å•å…ƒæ ¼å†…å®¹å¯¹é½æ–¹å¼å¯è‡ªå®šä¹‰ï¼›</p></li><li><p>æ”¯æŒå•å…ƒæ ¼åˆå¹¶ï¼›</p></li><li><p>å¯ä»¥ä» Stringã€Vecã€HashMap ç­‰ç±»å‹å¿«é€Ÿåˆ›å»ºè¡¨æ ¼ï¼›</p></li><li><p>é›†æˆäº†å¤šç§å¸¸ç”¨çš„è‰²å½©æ–¹æ¡ˆï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰è‰²å½©ã€‚</p></li></ul><h3 id="å¿«é€Ÿä¸Šæ‰‹" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œå°† tabled æ·»åŠ åˆ°é¡¹ç›®ä¾èµ–ä¸­ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">tabled</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.15&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ‰“å°ä¸€ä¸ª ASCII è¾¹æ¡†è¡¨æ ¼ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> tabled</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Tabled</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Table</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Tabled</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Language</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    designed_by</span><span style="color:#ABB2BF;">: &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">usize</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> languages</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> vec!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#E5C07B;">        Language</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">            name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#E06C75;">            designed_by</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Dennis Ritchie&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1972</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#E5C07B;">        Language</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">            name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Rust&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            designed_by</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Graydon Hoare&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2010</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">    ];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Table</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">languages</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>Language</code> ç»“æ„ä½“ï¼Œç„¶åä¸ºå®ƒæ´¾ç”Ÿäº† <code>Tabled</code> traitã€‚è¿™æ ·ï¼ŒåŒ…å« Language å®ä¾‹çš„ Vec å°±å¯ä»¥ç›´æ¥ä¼ ç»™ <code>Table::new()</code> æ¥åˆ›å»ºè¡¨æ ¼å®ä¾‹äº†ã€‚</p><p><code>Table::to_string()</code> å¯ä»¥å°†è¡¨æ ¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç”¨äºæ‰“å°è¾“å‡ºã€‚</p><p>ä¸Šè¿°ä»£ç çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">+------+----------------+---------------+</span></span>
<span class="line"><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> name</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;"> designed_by</span><span style="color:#56B6C2;">    |</span><span style="color:#E06C75;"> invented_year</span><span style="color:#56B6C2;"> |</span></span>
<span class="line"><span style="color:#ABB2BF;">+------+----------------+---------------+</span></span>
<span class="line"><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> C</span><span style="color:#56B6C2;">    |</span><span style="color:#E5C07B;"> Dennis</span><span style="color:#E5C07B;"> Ritchie</span><span style="color:#56B6C2;"> |</span><span style="color:#D19A66;"> 1972</span><span style="color:#56B6C2;">          |</span></span>
<span class="line"><span style="color:#ABB2BF;">+------+----------------+---------------+</span></span>
<span class="line"><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Rust</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Graydon</span><span style="color:#E5C07B;"> Hoare</span><span style="color:#56B6C2;">  |</span><span style="color:#D19A66;"> 2010</span><span style="color:#56B6C2;">          |</span></span>
<span class="line"><span style="color:#ABB2BF;">+------+----------------+---------------+</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¦‚æœæƒ³è¦æ”¹å˜è¡¨æ ¼æ ·å¼ï¼Œåªéœ€è¦è°ƒç”¨ <code>with()</code> æ–¹æ³•å³å¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Unicode åŒçº¿è¾¹æ¡†æ ·å¼ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> tabled</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">settings</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Style</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Table</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Tabled</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Tabled</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Language</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    designed_by</span><span style="color:#ABB2BF;">: &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">usize</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> languages</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> vec!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#E5C07B;">        Language</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">            name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#E06C75;">            designed_by</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Dennis Ritchie&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1972</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#E5C07B;">        Language</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">            name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Rust&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            designed_by</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Graydon Hoare&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            invented_year</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2010</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">    ];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Table</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">languages</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Style</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">extended</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>è¾“å‡ºæ•ˆæœï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">â•”â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span></span>
<span class="line"><span style="color:#ABB2BF;">â•‘ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> â•‘ </span><span style="color:#E06C75;">designed_by</span><span style="color:#ABB2BF;">    â•‘ </span><span style="color:#E06C75;">invented_year</span><span style="color:#ABB2BF;"> â•‘</span></span>
<span class="line"><span style="color:#ABB2BF;">â• â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£</span></span>
<span class="line"><span style="color:#ABB2BF;">â•‘ </span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;">    â•‘ </span><span style="color:#E5C07B;">Dennis</span><span style="color:#E5C07B;"> Ritchie</span><span style="color:#ABB2BF;"> â•‘ </span><span style="color:#D19A66;">1972</span><span style="color:#ABB2BF;">          â•‘</span></span>
<span class="line"><span style="color:#ABB2BF;">â• â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£</span></span>
<span class="line"><span style="color:#ABB2BF;">â•‘ </span><span style="color:#E5C07B;">Rust</span><span style="color:#ABB2BF;"> â•‘ </span><span style="color:#E5C07B;">Graydon</span><span style="color:#E5C07B;"> Hoare</span><span style="color:#ABB2BF;">  â•‘ </span><span style="color:#D19A66;">2010</span><span style="color:#ABB2BF;">          â•‘</span></span>
<span class="line"><span style="color:#ABB2BF;">â•šâ•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>with()</code> æ–¹æ³•å¯ä»¥ç”¨æ¥è®¾ç½®è¡¨æ ¼çš„å¾ˆå¤šæ ·å¼ï¼Œå¦‚è¡¨æ ¼è¾¹æ¡†ã€å¯¹é½æ–¹å¼ã€å¡«å……å­—ç¬¦ã€é¢œè‰²ç­‰ã€‚ä½ å¯ä»¥åˆ›é€ å‡ºå„ç§å¥½çœ‹çš„è¡¨æ ¼æ ·å¼ã€‚</p><h3 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>tabled æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ï¼Œä½¿ç”¨ç®€å•çš„ Rust ç»ˆç«¯è¡¨æ ¼è¾“å‡ºåº“ã€‚å®ƒèƒ½è®©æˆ‘ä»¬ä»¥æœ€å°‘çš„ä»£ç é‡åˆ›å»ºå‡ºç¾è§‚ã€æ•´æ´çš„è¡¨æ ¼ï¼Œé€‚åˆå„ç§å‘½ä»¤è¡Œç¨‹åºåœºæ™¯ã€‚</p><p>å¦‚æœä½ æ°å¥½åœ¨å¼€å‘ Rust å‘½ä»¤è¡Œç¨‹åºï¼Œä¸å¦¨è¯•è¯• tabled å§ï¼Œç›¸ä¿¡ä¼šç»™ä½ çš„ç»ˆç«¯å¸¦æ¥ä¸€åœºè§†è§‰ç››å®´ã€‚</p><h2 id="ynqa-sig-äº¤äº’å¼-grep-ç”¨äºæµå¼å¤„ç†" tabindex="-1">ynqa/sigï¼šäº¤äº’å¼ grepï¼ˆç”¨äºæµå¼å¤„ç†ï¼‰ <a class="header-anchor" href="#ynqa-sig-äº¤äº’å¼-grep-ç”¨äºæµå¼å¤„ç†" aria-label="Permalink to &quot;ynqa/sigï¼šäº¤äº’å¼ grepï¼ˆç”¨äºæµå¼å¤„ç†ï¼‰&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/ynqa/sig" target="_blank" rel="noreferrer">ynqa/sigï¼šäº¤äº’å¼ grepï¼ˆç”¨äºæµå¼å¤„ç†ï¼‰ (github.com)</a></p><h2 id="å‚è€ƒæ–‡ç« " tabindex="-1"><strong>å‚è€ƒæ–‡ç« </strong> <a class="header-anchor" href="#å‚è€ƒæ–‡ç« " aria-label="Permalink to &quot;**å‚è€ƒæ–‡ç« **&quot;">â€‹</a></h2><ul><li>tabled GitHub ä»“åº“ï¼š<a href="https://github.com/zhiburt/tabled/" target="_blank" rel="noreferrer">https://github.com/zhiburt/tabled/</a></li></ul><h1 id="webassembly-è¿è¡Œæ—¶åº“" tabindex="-1">WebAssembly è¿è¡Œæ—¶åº“ <a class="header-anchor" href="#webassembly-è¿è¡Œæ—¶åº“" aria-label="Permalink to &quot;WebAssembly è¿è¡Œæ—¶åº“&quot;">â€‹</a></h1><h2 id="wasmtime" tabindex="-1">Wasmtime <a class="header-anchor" href="#wasmtime" aria-label="Permalink to &quot;Wasmtime&quot;">â€‹</a></h2><p>Wasmtime æ˜¯ä¸€ä¸ªç”¨äº WebAssemblyï¼ˆç®€ç§° WASMï¼‰çš„ç‹¬ç«‹è¿è¡Œæ—¶ï¼Œå®ƒç”± Bytecode Alliance é¡¹ç›®å¼€å‘ã€‚WASM æ˜¯ä¸€ç§ä¸ºæ›´é«˜æ•ˆæ‰§è¡Œå’Œæ›´å®‰å…¨çš„ Web åº”ç”¨è€Œè®¾è®¡çš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ã€‚Wasmtime è¿è¡Œæ—¶ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç³»åˆ—ä¸°å¯Œã€ç¬¦åˆ WASM æ ‡å‡†çš„ APIï¼Œå¹¶é€šè¿‡ä¼˜åŒ–ç”Ÿæˆé«˜è´¨é‡çš„æœºå™¨ä»£ç ï¼Œä½¿ WASM åº”ç”¨èƒ½åœ¨å„ç§ç¯å¢ƒä¸­å¿«é€Ÿã€å®‰å…¨åœ°è¿è¡Œã€‚</p><h3 id="å®‰è£…ä¸ä½¿ç”¨-wasmtime-è¿è¡Œæ—¶" tabindex="-1">å®‰è£…ä¸ä½¿ç”¨ Wasmtime è¿è¡Œæ—¶ <a class="header-anchor" href="#å®‰è£…ä¸ä½¿ç”¨-wasmtime-è¿è¡Œæ—¶" aria-label="Permalink to &quot;å®‰è£…ä¸ä½¿ç”¨ Wasmtime è¿è¡Œæ—¶&quot;">â€‹</a></h3><p>æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸‹ç®€å•çš„å®‰è£…è„šæœ¬åœ¨ Linux å’Œ macOS ä¸Šå®‰è£… Wasmtime CLIï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">curl</span><span style="color:#98C379;"> https://wasmtime.dev/install.sh</span><span style="color:#D19A66;"> -sSf</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯¹äº Windows ç”¨æˆ·æˆ–å…¶ä»–æ„Ÿå…´è¶£çš„ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ä» GitHub çš„ Releases é¡µé¢ä¸‹è½½å®‰è£…ç¨‹åºå’ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>å®‰è£…å®Œ Wasmtime åï¼Œå¦‚æœæ‚¨å·²ç»å®‰è£…äº† Rust ç¼–è¯‘å™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æ¥ç¼–è¯‘å’Œè¿è¡Œ Rust æºä»£ç ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Rustæºä»£ç </span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello, world!&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç¼–è¯‘å’Œè¿è¡Œå‘½ä»¤</span></span>
<span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#E06C75;">rustup</span><span style="color:#E06C75;"> target</span><span style="color:#E06C75;"> add</span><span style="color:#E06C75;"> wasm32</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">wasi</span></span>
<span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#E06C75;">rustc</span><span style="color:#E06C75;"> hello</span><span style="color:#ABB2BF;">.rs --</span><span style="color:#E06C75;">target</span><span style="color:#E06C75;"> wasm32</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">wasi</span></span>
<span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#E06C75;">wasmtime</span><span style="color:#E06C75;"> hello</span><span style="color:#ABB2BF;">.wasm</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¾“å‡ºï¼šHello, world!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å°† Rust æºä»£ç ç¼–è¯‘ä¸º WASMï¼Œå¹¶ä½¿ç”¨ Wasmtime è¿è¡Œå®ƒã€‚</p><h3 id="wasmtime-çš„ä¸»è¦ç‰¹æ€§" tabindex="-1">Wasmtime çš„ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#wasmtime-çš„ä¸»è¦ç‰¹æ€§" aria-label="Permalink to &quot;Wasmtime çš„ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><ul><li><strong>é€Ÿåº¦å¿«</strong>ï¼šWasmtime åŸºäºä¼˜åŒ–çš„ Cranelift ä»£ç ç”Ÿæˆå™¨æ„å»ºï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡çš„æœºå™¨ä»£ç ã€‚Wasmtime é’ˆå¯¹æœ‰æ•ˆå®ä¾‹åŒ–ã€åµŒå…¥è€…å’Œ wasm ä¹‹é—´çš„ä½å¼€é”€è°ƒç”¨ä»¥åŠå¹¶å‘å®ä¾‹çš„å¯æ‰©å±•æ€§è¿›è¡Œä¼˜åŒ–ã€‚</li><li><strong>å®‰å…¨</strong>ï¼šWasmtime çš„å¼€å‘å¼ºçƒˆä¸“æ³¨äºæ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚æ¯ä¸ª Wasmtime ç‰¹æ€§éƒ½é€šè¿‡ä»”ç»†çš„å®¡æŸ¥å’Œè€ƒè™‘é€šè¿‡ RFC è¿‡ç¨‹ã€‚ä¸€æ—¦ç‰¹æ€§è¢«è®¾è®¡å’Œå®ç°ï¼Œä»–ä»¬å°±ä¼šç»å— Google çš„ OSS Fuzz æä¾›çš„ 24/7 æ¨¡ç³Šæµ‹è¯•ã€‚éšç€ç‰¹æ€§çš„ç¨³å®šï¼Œä»–ä»¬æˆä¸ºç‰ˆæœ¬å‘å¸ƒçš„ä¸€éƒ¨åˆ†ï¼Œå½“äº‹æƒ…å‡ºé”™æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ˜ç¡®çš„å®‰å…¨ç­–ç•¥æ¥å¿«é€Ÿç¼“è§£å¹¶ä¿®å¤ä»»ä½•é—®é¢˜ã€‚æˆ‘ä»¬éµå¾ªæ·±åº¦é˜²å¾¡çš„æœ€ä½³å®è·µï¼Œå¹¶é›†æˆé’ˆå¯¹åƒ Spectre è¿™æ ·çš„é—®é¢˜çš„ä¿æŠ¤å’Œç¼“è§£æªæ–½ã€‚</li><li><strong>å¯é…ç½®</strong>ï¼šWasmtime ä½¿ç”¨åˆç†çš„é»˜è®¤è®¾ç½®ï¼Œä½†ä¹Ÿå¯ä»¥é…ç½®æä¾›å¯¹ CPU å’Œå†…å­˜æ¶ˆè€—ç­‰æ–¹é¢çš„æ›´ç²¾ç»†æ§åˆ¶ã€‚</li></ul><p>Wasmtime è¿˜æä¾›äº†è®¸å¤šè¯­è¨€æ”¯æŒã€‚Bytecode Alliance æ”¯æŒçš„è¯­è¨€åŒ…æ‹¬ Rustï¼ˆwasmtime crateï¼‰ã€Cï¼ˆwasm.hã€wasi.hã€wasmtime.h å¤´æ–‡ä»¶ï¼‰ã€C++ï¼ˆwasmtime-cpp åº“ï¼‰ã€Pythonï¼ˆwasmtime PyPI åŒ…ï¼‰ã€.NETï¼ˆWasmtime NuGet åŒ…ï¼‰ã€Goï¼ˆwasmtime-go åº“ï¼‰å’Œ Rubyï¼ˆwasmtime å®çŸ³ï¼‰ã€‚ç¤¾åŒºè¿˜æ”¯æŒäº† Elixirï¼ˆwasmex hex åŒ…ï¼‰å’Œ Perlï¼ˆWasm Perl åŒ…çš„ Wasm::Wasmtimeï¼‰ã€‚</p><h2 id="spin-åŸºäº-rust-çš„-webassembly-é©±åŠ¨çš„äº‘å¾®æœåŠ¡æ„å»ºæ¡†æ¶" tabindex="-1">Spinï¼šåŸºäº Rust çš„ WebAssembly é©±åŠ¨çš„äº‘å¾®æœåŠ¡æ„å»ºæ¡†æ¶ <a class="header-anchor" href="#spin-åŸºäº-rust-çš„-webassembly-é©±åŠ¨çš„äº‘å¾®æœåŠ¡æ„å»ºæ¡†æ¶" aria-label="Permalink to &quot;Spinï¼šåŸºäº Rust çš„ WebAssembly é©±åŠ¨çš„äº‘å¾®æœåŠ¡æ„å»ºæ¡†æ¶&quot;">â€‹</a></h2><blockquote><p>åœ¨äº‘è®¡ç®—çš„æµªæ½®ä¸­ï¼Œå¾®æœåŠ¡æ¶æ„å·²ç»æˆä¸ºæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•åº”ç”¨çš„ä¸»æµæ–¹å¼ã€‚è€Œä»Šï¼Œä¸€ä¸ªåä¸º Spin çš„æ–°æ˜Ÿæ­£åœ¨å†‰å†‰å‡èµ·ï¼Œå®ƒå°† WebAssembly çš„å¼ºå¤§åŠŸèƒ½ä¸å¾®æœåŠ¡çš„çµæ´»æ€§å®Œç¾ç»“åˆï¼Œä¸ºå¼€å‘è€…å¸¦æ¥äº†å…¨æ–°çš„æ„å»ºå’Œéƒ¨ç½²äº‘åº”ç”¨çš„ä½“éªŒã€‚</p></blockquote><h3 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡" aria-label="Permalink to &quot;æ­£æ–‡&quot;">â€‹</a></h3><h4 id="ğŸŒŸ-spin-æ˜¯ä»€ä¹ˆ" tabindex="-1">ğŸŒŸ Spin æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#ğŸŒŸ-spin-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;ğŸŒŸ Spin æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h4><p>Spin æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œè‡´åŠ›äºç®€åŒ– WebAssembly å¾®æœåŠ¡çš„æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œè¿‡ç¨‹ã€‚å®ƒåˆ©ç”¨æœ€æ–°çš„ WebAssembly ç»„ä»¶æ¨¡å‹å’Œ Wasmtime è¿è¡Œæ—¶ï¼Œæ—¨åœ¨æˆä¸ºå¼€å‘è€…å…¥é—¨ WebAssembly å¾®æœåŠ¡çš„æœ€ä¾¿æ·é€”å¾„ã€‚</p><h4 id="ğŸš€-å¦‚ä½•å¼€å§‹ä½¿ç”¨-spin" tabindex="-1">ğŸš€ å¦‚ä½•å¼€å§‹ä½¿ç”¨ Spinï¼Ÿ <a class="header-anchor" href="#ğŸš€-å¦‚ä½•å¼€å§‹ä½¿ç”¨-spin" aria-label="Permalink to &quot;ğŸš€ å¦‚ä½•å¼€å§‹ä½¿ç”¨ Spinï¼Ÿ&quot;">â€‹</a></h4><p>å¼€å§‹ä½¿ç”¨ Spin çš„æ—…ç¨‹éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œè®¿é—® Spin çš„å®‰è£…é¡µé¢ï¼Œè·å–è¯¦ç»†çš„å®‰è£…å’Œé…ç½®æŒ‡å—ã€‚ç®€å•æ¥è¯´ï¼Œåªéœ€åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>curl -fsSL https://developer.fermyon.com/downloads/install.sh | bash</span></span>
<span class="line"><span>sudo mv ./spin /usr/local/bin/spin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœä½ å–œæ¬¢ä»æºä»£ç æ„å»ºï¼ŒSpin ä¹Ÿæ”¯æŒè¿™ç§æ–¹å¼ã€‚</p><h4 id="ğŸ› ï¸-ä½¿ç”¨-spin-æ„å»ºåº”ç”¨" tabindex="-1">ğŸ› ï¸ ä½¿ç”¨ Spin æ„å»ºåº”ç”¨ <a class="header-anchor" href="#ğŸ› ï¸-ä½¿ç”¨-spin-æ„å»ºåº”ç”¨" aria-label="Permalink to &quot;ğŸ› ï¸ ä½¿ç”¨ Spin æ„å»ºåº”ç”¨&quot;">â€‹</a></h4><p>åˆ›å»ºä¸€ä¸ª Spin åº”ç”¨å°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… Rust çš„<code>wasm32-wasi</code>ç›®æ ‡ã€‚ç„¶åï¼Œä½¿ç”¨<code>spin new</code>å‘½ä»¤ï¼Œä»æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„ Spin åº”ç”¨ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>spin new --accept-defaults -t http-rust hello-rust</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªåä¸º<code>hello-rust</code>çš„ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†ä½ åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œè¿›å…¥ç›®å½•ï¼Œä½¿ç”¨<code>spin build</code>æ„å»ºåº”ç”¨ï¼Œç„¶åç”¨<code>spin up</code>åœ¨æœ¬åœ°è¿è¡Œå®ƒï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>spin build</span></span>
<span class="line"><span>spin up</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç°åœ¨ï¼Œä½ çš„åº”ç”¨å·²ç»åœ¨æœ¬åœ°è¿è¡Œäº†ï¼Œä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ–è€… curl æ¥æµ‹è¯•å®ƒï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>curl -i 127.0.0.1:3000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="å¼€å§‹ä½¿ç”¨" tabindex="-1">å¼€å§‹ä½¿ç”¨ <a class="header-anchor" href="#å¼€å§‹ä½¿ç”¨" aria-label="Permalink to &quot;å¼€å§‹ä½¿ç”¨&quot;">â€‹</a></h3><p>è¯·å‚é˜…<strong>å®‰è£…æ—‹æ¶¡</strong>[1]é¡µé¢çš„<strong>æ—‹æ¶¡æ–‡æ¡£</strong>[2]ä»¥è·å–æœ‰å…³å®‰è£…å’Œé…ç½®æ—‹æ¶¡çš„è¯¦ç»†æŒ‡å—ï¼Œç®€è€Œè¨€ä¹‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>curl -fsSL https://developer.fermyon.com/downloads/install.sh | bash</span></span>
<span class="line"><span>sudo mv ./spin /usr/local/bin/spin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥<strong>ä»æºä»£ç æ„å»ºæ—‹æ¶¡</strong>[3]ã€‚</p><p>è¦å¼€å§‹ç¼–å†™åº”ç”¨ç¨‹åºï¼Œè¯·éµå¾ª<strong>å¿«é€Ÿå…¥é—¨æŒ‡å—</strong>[4]ï¼Œç„¶åéµå¾ª<strong>Rust</strong>[5]ã€<strong>JavaScript</strong>[6]ã€<strong>Python</strong>[7]æˆ–<strong>Go</strong>[8]è¯­è¨€æŒ‡å—ï¼Œä»¥åŠ<strong>ç¼–å†™æ—‹æ¶¡åº”ç”¨ç¨‹åºçš„æŒ‡å—</strong>[9]ã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1">ä½¿ç”¨æ–¹æ³• <a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•" aria-label="Permalink to &quot;ä½¿ç”¨æ–¹æ³•&quot;">â€‹</a></h3><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨<code>spin</code>å‘½ä»¤è¡Œåˆ›å»ºæ–°çš„æ—‹æ¶¡åº”ç”¨ç¨‹åºçš„ç¤ºä¾‹ã€‚è¦è¿è¡Œç¤ºä¾‹ï¼Œæ‚¨éœ€è¦ä¸º Rust å®‰è£…<code>wasm32-wasi</code>ç›®æ ‡ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>$ rustup target add wasm32-wasi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é¦–å…ˆï¼Œè¿è¡Œ<code>spin new</code>å‘½ä»¤ï¼Œæ ¹æ®æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ—‹æ¶¡åº”ç”¨ç¨‹åºã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span># æ ¹æ®Rust httpæ¨¡æ¿åˆ›å»ºä¸€ä¸ªåä¸º&#39;hello-rust&#39;çš„æ–°æ—‹æ¶¡åº”ç”¨ç¨‹åºï¼Œå¹¶æ¥å—æ‰€æœ‰é»˜è®¤è®¾ç½®</span></span>
<span class="line"><span>$ spin new --accept-defaults -t http-rust hello-rust</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿è¡Œ<code>spin new</code>å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ª<code>hello-rust</code>ç›®å½•ï¼Œå…¶ä¸­åŒ…å«æ‚¨çš„åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ã€‚è½¬åˆ°<code>hello-rust</code>ç›®å½•ï¼Œå¹¶ä½¿ç”¨<code>spin build</code>æ„å»ºåº”ç”¨ç¨‹åºï¼Œç„¶åä½¿ç”¨<code>spin up</code>åœ¨æœ¬åœ°è¿è¡Œå®ƒï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span># é€šè¿‡æ‰§è¡Œ`build`å‘½ä»¤ç¼–è¯‘ä¸ºWasmã€‚</span></span>
<span class="line"><span>$ spin build</span></span>
<span class="line"><span>Executing the build command for component hello-rust: cargo build --target wasm32-wasi --release</span></span>
<span class="line"><span>    Finished release [optimized] target(s) in 0.03s</span></span>
<span class="line"><span>Successfully ran the build command for the Spin components.</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åœ¨æœ¬åœ°è¿è¡Œåº”ç”¨ç¨‹åºã€‚</span></span>
<span class="line"><span>$ spin up</span></span>
<span class="line"><span>Logging component stdio to &quot;.spin/logs/&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Serving http://127.0.0.1:3000</span></span>
<span class="line"><span>Available Routes:</span></span>
<span class="line"><span>  hello-rust: http://127.0.0.1:3000      (wildcard)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å°±æ˜¯è¿™æ ·ï¼ç°åœ¨åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–åœ¨å¦ä¸€ä¸ª shell ä¸­ä½¿ç”¨ cURL æ¥å°è¯•å®ƒï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span># å‘åº”ç”¨ç¨‹åºå‘é€è¯·æ±‚ã€‚</span></span>
<span class="line"><span>$ curl -i 127.0.0.1:3000</span></span>
<span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>foo: bar</span></span>
<span class="line"><span>content-length: 14</span></span>
<span class="line"><span>date: Thu, 13 Apr 2023 17:47:24 GMT</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Hello, Fermyon</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘<code>hello-rust</code>ç›®å½•ä¸­çš„<code>src/lib.rs</code>æ–‡ä»¶æ¥ä½¿åº”ç”¨ç¨‹åºåšæ›´å¤šäº‹æƒ…ï¼Œä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨æˆ– IDEã€‚è¦äº†è§£æ›´å¤šå…³äºç¼–å†™æ—‹æ¶¡åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼Œè¯·å‚è§æ—‹æ¶¡æ–‡æ¡£ä¸­çš„<strong>ç¼–å†™åº”ç”¨ç¨‹åº</strong>[10]ã€‚è¦äº†è§£å¦‚ä½•å‘å¸ƒå’Œåˆ†å‘æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè¯·å‚è§æ—‹æ¶¡æ–‡æ¡£ä¸­çš„<strong>å‘å¸ƒå’Œåˆ†å‘</strong>[11]æŒ‡å—ã€‚</p><p>æœ‰å…³ cli å‘½ä»¤å’Œå­å‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<strong>CLI å‚è€ƒ</strong>[12]ã€‚</p><h3 id="æ—‹æ¶¡åŠŸèƒ½çš„è¯­è¨€æ”¯æŒ" tabindex="-1">æ—‹æ¶¡åŠŸèƒ½çš„è¯­è¨€æ”¯æŒ <a class="header-anchor" href="#æ—‹æ¶¡åŠŸèƒ½çš„è¯­è¨€æ”¯æŒ" aria-label="Permalink to &quot;æ—‹æ¶¡åŠŸèƒ½çš„è¯­è¨€æ”¯æŒ&quot;">â€‹</a></h3><p>ä¸‹é¢çš„è¡¨æ ¼æ€»ç»“äº†æ¯ç§è¯­è¨€ SDK ä¸­çš„<strong>åŠŸèƒ½æ”¯æŒ</strong>[13]ã€‚</p><table><thead><tr><th style="text-align:left;">åŠŸèƒ½</th><th style="text-align:left;">Rust SDK æ”¯æŒï¼Ÿ</th><th style="text-align:left;">TypeScript SDK æ”¯æŒï¼Ÿ</th><th style="text-align:left;">Python SDK æ”¯æŒï¼Ÿ</th><th style="text-align:left;">Tiny Go SDK æ”¯æŒï¼Ÿ</th><th style="text-align:left;">C# SDK æ”¯æŒï¼Ÿ</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>è§¦å‘å™¨</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>HTTP</strong>[14]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>Redis</strong>[15]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>APIs</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>Outbound HTTP</strong>[16]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>é…ç½®å˜é‡</strong>[17]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>é”®å€¼å­˜å‚¨</strong>[18]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>SQLite å­˜å‚¨</strong>[19]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>MySQL</strong>[20]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>PostgreSQL</strong>[21]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>Outbound Redis</strong>[22]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>Serverless AI</strong>[23]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left;"><strong>å¯æ‰©å±•æ€§</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>è‡ªå®šä¹‰è§¦å‘å™¨</strong>[24]</td><td style="text-align:left;">æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td><td style="text-align:left;">ä¸æ”¯æŒ</td></tr></tbody></table><h4 id="ğŸŒ-è¯­è¨€æ”¯æŒ" tabindex="-1">ğŸŒ è¯­è¨€æ”¯æŒ <a class="header-anchor" href="#ğŸŒ-è¯­è¨€æ”¯æŒ" aria-label="Permalink to &quot;ğŸŒ è¯­è¨€æ”¯æŒ&quot;">â€‹</a></h4><p>Spin æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Rustã€TypeScriptã€Python å’Œ Goã€‚æ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„ SDKï¼Œæ”¯æŒä¸åŒçš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼ŒRust æ”¯æŒè‡ªå®šä¹‰è§¦å‘å™¨ï¼Œè€Œ TypeScript åˆ™ä¸æ”¯æŒã€‚</p><h3 id="ç»“è¯­" tabindex="-1">ç»“è¯­ï¼š <a class="header-anchor" href="#ç»“è¯­" aria-label="Permalink to &quot;ç»“è¯­ï¼š&quot;">â€‹</a></h3><p>Spin ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹ WebAssembly å¾®æœåŠ¡çš„å¹³å°ã€‚å¦‚æœä½ å¯¹æ–°æŠ€æœ¯å……æ»¡å¥½å¥‡ï¼Œæƒ³è¦åœ¨äº‘æœåŠ¡çš„ä¸–ç•Œä¸­æ¢ç´¢æ›´å¤šå¯èƒ½æ€§ï¼Œé‚£ä¹ˆ Spin ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚è®©æˆ‘ä»¬ä¸€èµ· Spin èµ·æ¥ï¼Œå¼€å¯äº‘æœåŠ¡çš„æ–°ç¯‡ç« ï¼</p><h4 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h4><p>[1] å®‰è£…æ—‹æ¶¡: <em><a href="https://developer.fermyon.com/spin/install" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/install</a></em></p><p>[2] æ—‹æ¶¡æ–‡æ¡£: <em><a href="https://developer.fermyon.com/spin/index" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/index</a></em></p><p>[3] ä»æºä»£ç æ„å»ºæ—‹æ¶¡: <em><a href="https://developer.fermyon.com/spin/contributing" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/contributing</a></em></p><p>[4] å¿«é€Ÿå…¥é—¨æŒ‡å—: <em><a href="https://developer.fermyon.com/spin/quickstart/" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/quickstart/</a></em></p><p>[5] Rust: <em><a href="https://developer.fermyon.com/spin/rust-components/" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/rust-components/</a></em></p><p>[6] JavaScript: <em><a href="https://developer.fermyon.com/spin/javascript-components" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/javascript-components</a></em></p><p>[7] Python: <em><a href="https://developer.fermyon.com/spin/python-components" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/python-components</a></em></p><p>[8] Go: <em><a href="https://developer.fermyon.com/spin/go-components/" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/go-components/</a></em></p><p>[9] ç¼–å†™æ—‹æ¶¡åº”ç”¨ç¨‹åºçš„æŒ‡å—: <em><a href="https://developer.fermyon.com/spin/configuration/" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/configuration/</a></em></p><p>[10] ç¼–å†™åº”ç”¨ç¨‹åº: <em><a href="https://developer.fermyon.com/spin/writing-apps" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/writing-apps</a></em></p><p>[11] å‘å¸ƒå’Œåˆ†å‘: <em><a href="https://developer.fermyon.com/spin/distributing-apps" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/distributing-apps</a></em></p><p>[12] CLI å‚è€ƒ: <em><a href="https://developer.fermyon.com/common/cli-reference" target="_blank" rel="noreferrer">https://developer.fermyon.com/common/cli-reference</a></em></p><p>[13] åŠŸèƒ½æ”¯æŒ: <em><a href="https://developer.fermyon.com/spin/language-support-overview" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/language-support-overview</a></em></p><p>[14] HTTP: <em><a href="https://developer.fermyon.com/spin/http-trigger" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/http-trigger</a></em></p><p>[15] Redis: <em><a href="https://developer.fermyon.com/spin/redis-trigger" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/redis-trigger</a></em></p><p>[16] Outbound HTTP: <em><a href="https://developer.fermyon.com/spin/rust-components.md#sending-outbound-http-requests" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/rust-components.md#sending-outbound-http-requests</a></em></p><p>[17] é…ç½®å˜é‡: <em><a href="https://developer.fermyon.com/spin/variables" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/variables</a></em></p><p>[18] é”®å€¼å­˜å‚¨: <em><a href="https://developer.fermyon.com/spin/kv-store-api-guide" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/kv-store-api-guide</a></em></p><p>[19] SQLite å­˜å‚¨: <em><a href="https://developer.fermyon.com/spin/sqlite-api-guide" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/sqlite-api-guide</a></em></p><p>[20] MySQL: <em><a href="https://developer.fermyon.com/spin/rdbms-storage#using-mysql-and-postgresql-from-applications" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/rdbms-storage#using-mysql-and-postgresql-from-applications</a></em></p><p>[21] PostgreSQL: <em><a href="https://developer.fermyon.com/spin/rdbms-storage#using-mysql-and-postgresql-from-applications" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/rdbms-storage#using-mysql-and-postgresql-from-applications</a></em></p><p>[22] Outbound Redis: <em><a href="https://developer.fermyon.com/spin/rust-components.md#storing-data-in-redis-from-rust-components" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/rust-components.md#storing-data-in-redis-from-rust-components</a></em></p><p>[23] Serverless AI: <em><a href="https://developer.fermyon.com/spin/serverless-ai-api-guide" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/serverless-ai-api-guide</a></em></p><p>[24] è‡ªå®šä¹‰è§¦å‘å™¨: <em><a href="https://developer.fermyon.com/spin/extending-and-embedding" target="_blank" rel="noreferrer">https://developer.fermyon.com/spin/extending-and-embedding</a></em></p><h2 id="ä½¿ç”¨rust-wasmå¼€å‘webåº”ç”¨å¿…å¤‡å·¥å…·ç®±" tabindex="-1">ä½¿ç”¨Rust WASMå¼€å‘Webåº”ç”¨å¿…å¤‡å·¥å…·ç®± <a class="header-anchor" href="#ä½¿ç”¨rust-wasmå¼€å‘webåº”ç”¨å¿…å¤‡å·¥å…·ç®±" aria-label="Permalink to &quot;ä½¿ç”¨Rust WASMå¼€å‘Webåº”ç”¨å¿…å¤‡å·¥å…·ç®±&quot;">â€‹</a></h2><p>æ˜¨æ—¥çš„æ–‡ç« å·²ç»æè¿°äº†Glooæ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒåˆ›å»ºçš„ç”±æ¥ï¼Œæƒ³è¦å®ç°çš„ç›®æ ‡ã€‚ä½†æ˜¯åœ¨è¯»äº†ä¹‹åï¼Œè¿˜æ˜¯äº‘é‡Œé›¾é‡Œï¼Œé‚£ä¹ˆä»Šå¤©å†æ¬¡ç”¨å¿ƒæ¢³ç†ä¸€ä¸‹ï¼Œè®©æˆ‘ä»¬æ›´å¥½åœ°æ˜ç™½ä¸€ä¸‹ï¼ŒGlooæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨å“ªé‡Œï¼Ÿ</p><p>é¦–å…ˆï¼ŒGlooæ˜¯ä¸€ä¸ªåº“çš„é›†åˆï¼Œè¿™äº›åº“ä¸ºæµè§ˆå™¨APIæä¾›ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„RuståŒ…è£…ã€‚å•çº¯ä½¿ç”¨web-sysæˆ–è€…js-syså¾ˆéš¾ï¼Œå› æ­¤glooæä¾›äº†åŸå§‹ç»‘å®šçš„åŒ…è£…å™¨ï¼Œå®ƒä½¿å¾—ä½¿ç”¨è¿™äº›APIå˜å¾—æ›´å®¹æ˜“ã€‚</p><p>è¯·æ‚¨æ³¨æ„ï¼Œè¿™æ˜¯Rust Wasmå·¥ä½œç»„åˆ¶ä½œçš„å·¥å…·ç®±ï¼Œå®ƒæ˜¯ä¸ºæ‚¨æ–¹ä¾¿ä½¿ç”¨WASMå¼€å‘Webåº”ç”¨ç¨‹åºåˆ¶ä½œçš„ä¸€å¥—å·¥å…·ç®±ã€‚WASMçš„ä¸»è¦ç‰¹æ€§æ˜¯é«˜æ€§èƒ½ï¼Œåœ¨æ‚¨éœ€è¦ä½¿ç”¨WASMçš„åœºæ™¯ä¸‹ï¼Œæ‚¨ä½¿ç”¨glooæ¥å¼€å‘å¯ä»¥åŠ é€Ÿæ‚¨çš„å·¥ä½œæ•ˆç‡ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Glooéƒ½æœ‰å“ªäº›åº“ï¼Ÿçœ‹å®Œä¹‹åæƒ³å¿…ä¼šæœ‰æ›´æ·±çš„äº†è§£ã€‚</p><ul><li>console</li><li>dialogs</li><li>events</li><li>file</li><li>history</li><li>net</li><li>render</li><li>storage</li><li>timers</li><li>utils</li><li>worker</li></ul><p>ä»è¿™äº›åº“çš„åç§°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå®ƒå‡ ä¹æ¶µç›–äº†WASMæ‰€è¦ä½¿ç”¨çš„æ‰€æœ‰Web æµè§ˆå™¨APIã€‚è¿™äº›åº“æ˜¯ä»¥Rusté£æ ¼æ¥å®ç°Web APIåŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹consoleåº“ï¼š</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒJavaScript consoleå¯¹è±¡æä¾›äº†å¯¹æµè§ˆå™¨æ§åˆ¶å°çš„è®¿é—®ã€‚åœ¨Rust Wasmä¸­ç›´æ¥ä½¿ç”¨æ§åˆ¶å°å¯¹è±¡æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå®ƒéœ€è¦JavaScriptèƒ¶æ°´ä»£ç ã€‚è¿™ä¸ªconsoleåº“å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæä¾›äº†ä¸€ç»„ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„Rust APIæ¥å¤„ç†æµè§ˆå™¨æ§åˆ¶å°ã€‚</p><p>ä¸‹é¢ä½¿ç”¨è¯¥åº“æ¥æ‰“å°æ—¥å¿—ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use gloo_console::log;</span></span>
<span class="line"><span>let object = JsValue::from(&quot;any JsValue can be logged&quot;);</span></span>
<span class="line"><span>log!(&quot;text&quot;, object);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ‘ä»¬çœ‹ä¸‹netåº“ï¼š</p><p>å®ƒæ˜¯WASMåº”ç”¨ç¨‹åºçš„HTTPè¯·æ±‚åº“ã€‚å®ƒä¸ºweb_sys fetchï¼ŒWebSocketï¼ŒEventSource APIæä¾›äº†Rustç»‘å®šã€‚</p><p>ä¸‹é¢ä½¿ç”¨è¯¥åº“æ¥è¯·æ±‚ç½‘ç»œã€‚</p><p>HTTPè¯·æ±‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>let resp = Request::get(&quot;/path&quot;)</span></span>
<span class="line"><span>    .send()</span></span>
<span class="line"><span>    .await</span></span>
<span class="line"><span>    .unwrap();</span></span>
<span class="line"><span>assert_eq!(resp.status(), 200);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>WebSocketè¯·æ±‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> gloo_net</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">websocket</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">futures</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">WebSocket</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> wasm_bindgen_futures</span><span style="color:#ABB2BF;">::spawn_local;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">SinkExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">StreamExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> ws</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> WebSocket</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;wss://echo.websocket.org&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> write</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> read</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> ws</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">spawn_local</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    write</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">))).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    write</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;test 2&quot;</span><span style="color:#ABB2BF;">))).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">spawn_local</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    while</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> read</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        console_log!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;1. {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#61AFEF;">    console_log!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;WebSocket Closed&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>EventSourceè¯·æ±‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> gloo_net</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">eventsource</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">futures</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">EventSource</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> wasm_bindgen_futures</span><span style="color:#ABB2BF;">::spawn_local;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures</span><span style="color:#ABB2BF;">::{stream, </span><span style="color:#E5C07B;">StreamExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> es</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> EventSource</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;http://api.example.com/ssedemo.php&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> stream_1</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> es</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">subscribe</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;some-event-type&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> stream_2</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> es</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">subscribe</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;another-event-type&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">spawn_local</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> all_streams</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> stream</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">select</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">stream_1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">stream_2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    while</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">event_type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">))) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> all_streams</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        console_log!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;1. {}: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event_type</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#61AFEF;">    console_log!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;EventSource Closed&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åªé€‰æ‹©äº†ä¸¤ä¸ªåº“è¿›è¡Œäº†ä»‹ç»ï¼Œå‰©ä¸‹çš„dialogsï¼Œeventsï¼Œfileï¼Œhistoryï¼Œrenderï¼Œstorageï¼Œtimersï¼Œutilsï¼Œworkerè¿™äº›åº“éƒ½æ˜¯æ–¹ä¾¿Rust WASMä½¿ç”¨è€Œå°è£…çš„ã€‚è¿™äº›åº“å…±åŒç»„æˆäº†glooå·¥å…·ç®±ã€‚å®ƒæ˜¯Rust WASMå¼€å‘Webåº”ç”¨æ‰€èƒ½ç”¨åˆ°çš„æ‰€æœ‰å·¥å…·ã€‚</p><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨Rust WASMæ¥å¼€å‘Webåº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ¨èä½ ä½¿ç”¨è¿™ä¸ªå·¥å…·ç®±ï¼Œå®ƒèƒ½å¤§å¤§åœ°å¢åŠ ä½ çš„å·¥ä½œæ•ˆç‡ã€‚</p><p>å¦‚æœä½ æƒ³è¦ä¸ºglooå·¥å…·ç®±æ·»ç –åŠ ç“¦ï¼Œä¹Ÿæ˜¯éå¸¸æ¬¢è¿çš„ã€‚å¦‚æœä½ éœ€è¦æ·±å…¥äº†è§£å…·ä½“å†…å®¹è¯·å‚è€ƒGithubï¼š</p><p><a href="https://github.com/rustwasm/gloo" target="_blank" rel="noreferrer">https://github.com/rustwasm/gloo</a></p><h1 id="web-æ¡†æ¶" tabindex="-1">Web æ¡†æ¶ <a class="header-anchor" href="#web-æ¡†æ¶" aria-label="Permalink to &quot;Web æ¡†æ¶&quot;">â€‹</a></h1><p>åœ¨å¼€å§‹æ„å»º Rust Web åº”ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ Web æ¡†æ¶ã€‚ç›®å‰ï¼ŒRust æœ€å—æ¬¢è¿çš„ Web æ¡†æ¶åŒ…æ‹¬ Actix-webã€Rocket å’Œ Warpã€‚</p><ul><li><strong>Actix-web</strong>ï¼šæå…¶å¼ºå¤§ä¸”çµæ´»ï¼Œæä¾›äº†é«˜æ€§èƒ½çš„å¼‚æ­¥å¤„ç†èƒ½åŠ›ã€‚</li><li><strong>Rocket</strong>ï¼šä»¥å…¶å‡ºè‰²çš„æ˜“ç”¨æ€§å’Œå®‰å…¨æ€§è€Œé—»åï¼Œä½†åªèƒ½åœ¨ Rust çš„å¤œé—´ç‰ˆæœ¬ä¸Šè¿è¡Œã€‚</li><li><strong>Warp</strong>ï¼šä¸€ä¸ªåŸºäº Hyper çš„å¾®æ¡†æ¶ï¼Œåˆ©ç”¨ Rust çš„å¼‚æ­¥ç‰¹æ€§æ¥æä¾›é«˜æ•ˆçš„æ€§èƒ½ã€‚</li></ul><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493418&amp;idx=1&amp;sn=5d8de90cdd17e47cc0eae510a8698e6b&amp;chksm=c0e7693df790e02bd3184a34a19fcea2d484ffe97e1b53021945fdfd951a64d8615c85163eea&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">Rust åç«¯æ¡†æ¶ Graphul å…¥é—¨æ•™ç¨‹ï¼šæ„å»ºä½ çš„ Rust Web æœåŠ¡ (qq.com)</a></p><p><a href="https://actix.rs/docs/whatis/" target="_blank" rel="noreferrer">ä»€ä¹ˆæ˜¯ Actix Web |é˜¿å…‹æå…‹æ–¯</a></p><p><a href="https://github.com/retep998/winapi-rs" target="_blank" rel="noreferrer">retep998/winapi-rsï¼šä¸ Windows API çš„ Rust ç»‘å®š (github.com)</a></p><p><a href="https://github.com/BurntSushi/ripgrep" target="_blank" rel="noreferrer">BurntSushi/ripgrepï¼šripgrep é€’å½’åœ°æœç´¢ç›®å½•ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼ŒåŒæ—¶å°Šé‡ä½ çš„ gitignore (github.com)</a></p><p><a href="https://github.com/rust-lang/regex" target="_blank" rel="noreferrer">rust-lang/regexï¼šRust æ­£åˆ™è¡¨è¾¾å¼çš„å®ç°ã€‚æ­¤å®ç°ä½¿ç”¨æœ‰é™è‡ªåŠ¨æœºï¼Œå¹¶ä¿è¯æ‰€æœ‰è¾“å…¥ä¸Šçš„çº¿æ€§æ—¶é—´åŒ¹é…ã€‚ (github.com)</a></p><p><a href="https://github.com/clap-rs/clap" target="_blank" rel="noreferrer">clap-rs/clapï¼šä¸€ä¸ªåŠŸèƒ½é½å…¨ã€å¿«é€Ÿçš„ Rust å‘½ä»¤è¡Œå‚æ•°è§£æå™¨ (github.com)</a></p><p><a href="https://github.com/serde-rs/serde" target="_blank" rel="noreferrer">serde-rs/serdeï¼šRust çš„åºåˆ—åŒ–æ¡†æ¶ (github.com)</a></p><p><a href="https://github.com/crossbeam-rs/crossbeam" target="_blank" rel="noreferrer">crossbeam-rs/crossbeamï¼šRust ä¸­å¹¶å‘ç¼–ç¨‹çš„å·¥å…· (github.com)</a></p><p><a href="https://github.com/TeXitoi/structopt" target="_blank" rel="noreferrer">TeXitoi/structoptï¼šé€šè¿‡å®šä¹‰ç»“æ„æ¥è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ (github.com)</a></p><p><a href="https://github.com/dtolnay/thiserror" target="_blank" rel="noreferrer">dtolnay/thiserrorï¼šstruct å’Œ enum é”™è¯¯ç±»å‹çš„ deriveï¼ˆErrorï¼‰ (github.com)</a></p><p>Apache Arrow DataFusion SQL æŸ¥è¯¢å¼•æ“ï¼š<a href="https://github.com/apache/arrow-datafusion" target="_blank" rel="noreferrer">apache/arrow-datafusionï¼šApache Arrow DataFusion SQL æŸ¥è¯¢å¼•æ“ (github.com)</a></p><p>å®˜ç½‘ï¼š<a href="https://github.com/apache/arrow-datafusion" target="_blank" rel="noreferrer">apache/arrow-datafusionï¼šApache Arrow DataFusion SQL æŸ¥è¯¢å¼•æ“ (github.com)</a></p><h2 id="farm-æè‡´æ€§èƒ½å…¼å®¹ä½“éªŒ-æµ·é‡ç¼–è¯‘ç‰¹æ€§-çœŸæ­£çš„ä¸‹ä¸€ä»£-rust-web-æ„å»ºå¼•æ“" tabindex="-1">Farm æè‡´æ€§èƒ½å…¼å®¹ä½“éªŒï¼Œæµ·é‡ç¼–è¯‘ç‰¹æ€§ï¼ŒçœŸæ­£çš„ä¸‹ä¸€ä»£ Rust web æ„å»ºå¼•æ“ï¼ <a class="header-anchor" href="#farm-æè‡´æ€§èƒ½å…¼å®¹ä½“éªŒ-æµ·é‡ç¼–è¯‘ç‰¹æ€§-çœŸæ­£çš„ä¸‹ä¸€ä»£-rust-web-æ„å»ºå¼•æ“" aria-label="Permalink to &quot;Farm æè‡´æ€§èƒ½å…¼å®¹ä½“éªŒï¼Œæµ·é‡ç¼–è¯‘ç‰¹æ€§ï¼ŒçœŸæ­£çš„ä¸‹ä¸€ä»£ Rust web æ„å»ºå¼•æ“ï¼&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/farm-fe/farm" target="_blank" rel="noreferrer">https://github.com/farm-fe/farm</a></p><p><a href="https://juejin.cn/post/7357231056288940072" target="_blank" rel="noreferrer">ğŸ”¥Rust Farm v1.0 å‘å¸ƒï¼æè‡´æ€§èƒ½å…¼å®¹ä½“éªŒï¼Œæµ·é‡ç¼–è¯‘ç‰¹æ€§ï¼ŒçœŸæ­£çš„ä¸‹ä¸€ä»£ Rust web æ„å»ºå¼•æ“ï¼ - æ˜é‡‘ (juejin.cn)</a></p><h2 id="tiny-http-rustä¸­ä½çº§åˆ«httpæœåŠ¡å™¨åº“" tabindex="-1">tiny-httpï¼šRustä¸­ä½çº§åˆ«HTTPæœåŠ¡å™¨åº“ <a class="header-anchor" href="#tiny-http-rustä¸­ä½çº§åˆ«httpæœåŠ¡å™¨åº“" aria-label="Permalink to &quot;tiny-httpï¼šRustä¸­ä½çº§åˆ«HTTPæœåŠ¡å™¨åº“&quot;">â€‹</a></h2><p>æ›´å¤šå†…å®¹è¯·å‚è€ƒGithubï¼š<a href="https://github.com/tiny-http/tiny-http" target="_blank" rel="noreferrer">https://github.com/tiny-http/tiny-http</a></p><p>Rustä¸­å°å‹ä½†å¼ºå¤§çš„HTTPæœåŠ¡å™¨ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯100%ç¬¦åˆHTTPæ ‡å‡†ï¼Œå¹¶æä¾›ä¸€ç§åˆ›å»ºHTTPæœåŠ¡å™¨çš„ç®€å•æ–¹æ³•ã€‚</p><p>å®ƒå¯ä»¥åšä»€ä¹ˆï¼Ÿ</p><ul><li>æ¥å—å’Œç®¡ç†ä¸å®¢æˆ·ç«¯çš„è¿æ¥</li><li>è§£æè¯·æ±‚</li><li>è¯·æ±‚å¤„ç†æµæ°´çº¿</li><li>HTTPSï¼ˆä½¿ç”¨OpenSSLã€Rustlsæˆ–æœ¬æœºtlsï¼‰</li><li>ä¼ è¾“ç¼–ç å’Œå†…å®¹ç¼–ç </li><li>å°†ç”¨æˆ·è¾“å…¥ï¼ˆä¾‹å¦‚POSTè¾“å…¥ï¼‰è½¬æ¢ä¸ºè¿ç»­çš„UTF-8å­—ç¬¦ä¸²ï¼ˆå°šæœªå®ç°ï¼‰</li><li>Rangesï¼ˆå°šæœªå®æ–½ï¼‰</li><li>è¿æ¥ï¼šå‡çº§ï¼ˆç”±websocketsä½¿ç”¨ï¼‰</li></ul><p>tiny-httpå¤„ç†ä¸å®¢æˆ·ç«¯è¿æ¥ã€æ•°æ®ä¼ è¾“å’Œç¼–ç ç›¸å…³çš„ä¸€åˆ‡ã€‚å…¶ä»–ä¸€åˆ‡ï¼ˆè§£æå¤´ã€å¤šåª’ä½“æ•°æ®ã€è·¯ç”±ã€etagsã€ç¼“å­˜æ§åˆ¶ã€HTMLæ¨¡æ¿ç­‰çš„å€¼ï¼‰éƒ½å¿…é¡»ç”±ä»£ç å¤„ç†ã€‚å¦‚æœä½ æƒ³åœ¨Rustä¸­åˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ä¸€ä¸ªæ¡†æ¶è€Œä¸æ˜¯è¿™ä¸ªåº“ã€‚</p><p>å®‰è£…ï¼Œåœ¨Cargo.tomlæ–‡ä»¶ä¸­åŠ å…¥</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>[dependencies]tiny_http = &quot;0.11&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use tiny_http::{Server, Response};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let server = Server::http(&quot;0.0.0.0:8000&quot;).unwrap();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for request in server.incoming_requests() {</span></span>
<span class="line"><span>    println!(&quot;received request! method: {:?}, url: {:?}, headers: {:?}&quot;,</span></span>
<span class="line"><span>        request.method(),</span></span>
<span class="line"><span>        request.url(),</span></span>
<span class="line"><span>        request.headers()</span></span>
<span class="line"><span>    );</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    let response = Response::from_string(&quot;hello world&quot;);</span></span>
<span class="line"><span>    request.respond(response);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Tiny httpçš„è®¾è®¡è€ƒè™‘åˆ°äº†é€Ÿåº¦ï¼š</p><p>æ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥éƒ½å°†è¢«è°ƒåº¦åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ã€‚æ¯ä¸ªçº¿ç¨‹å°†å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚å¦‚æœå®¢æˆ·ç«¯è¿æ¥æ—¶æ²¡æœ‰å¯ç”¨çš„çº¿ç¨‹ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚é•¿æ—¶é—´ç©ºé—²ï¼ˆå½“å‰ä¸º5ç§’ï¼‰çš„çº¿ç¨‹å°†è‡ªåŠ¨å¤±æ•ˆã€‚</p><p>å¦‚æœæ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„å¤šä¸ªè¯·æ±‚æ­£åœ¨è¿›è¡Œæµæ°´çº¿å¤„ç†ï¼ˆå³ï¼Œåœ¨ä¸ç­‰å¾…ç­”æ¡ˆçš„æƒ…å†µä¸‹å‘é€å¤šä¸ªè¯·æ±‚ï¼‰ï¼Œé‚£ä¹ˆtiny-httpå°†ä¸€æ¬¡è¯»å–æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶ä¸”è¿™äº›è¯·æ±‚éƒ½å¯ä»¥é€šè¿‡server.recvï¼ˆï¼‰è·å¾—ã€‚tiny-httpå°†è‡ªåŠ¨é‡æ–°æ’åˆ—å“åº”ï¼Œä»¥ä¾¿æŒ‰æ­£ç¡®çš„é¡ºåºå‘é€ã€‚</p><p>æœ‰ä¸ªä¾‹å¤–ï¼Œå½“ä¸€ä¸ªè¯·æ±‚æœ‰ä¸€ä¸ªå¤§çš„æ­£æ–‡ï¼ˆå½“å‰&gt;1kBï¼‰æ—¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¤„ç†ç¨‹åºå°†ç›´æ¥ä»æµä¸­è¯»å–æ­£æ–‡ï¼Œè€Œtiny-httpå°†ç­‰å¾…å®ƒè¢«è¯»å–ï¼Œç„¶åå†å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚tiny-httpæ°¸è¿œä¸ä¼šç­‰å¾…ä¸€ä¸ªè¯·æ±‚å¾—åˆ°å›å¤æ¥è¯»å–ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</p><p>å½“å®¢æˆ·ç«¯è¿æ¥å‘é€äº†æœ€åä¸€ä¸ªè¯·æ±‚ï¼ˆé€šè¿‡å‘é€connection:closeå¤´ï¼‰æ—¶ï¼Œçº¿ç¨‹å°†ç«‹å³åœæ­¢ä»æ­¤å®¢æˆ·ç«¯è¯»å–ï¼Œå¹¶ä¸”å¯ä»¥å›æ”¶ï¼Œå³ä½¿è¯·æ±‚å°šæœªå¾—åˆ°å“åº”ã€‚Socketçš„è¯»å–éƒ¨åˆ†ä¹Ÿå°†ç«‹å³å…³é—­ã€‚</p><p>è§£ç å®¢æˆ·ç«¯çš„è¯·æ±‚æ˜¯æ‡’æƒ°åœ°å®Œæˆçš„ã€‚å¦‚æœä½ æ²¡æœ‰é˜…è¯»è¯·æ±‚çš„æ­£æ–‡ï¼Œå®ƒå°†ä¸ä¼šè¢«è§£ç ã€‚</p><h2 id="æ–°ä¸€ä»£-web-æ¡†æ¶-teo-åŒæ—¶æ”¯æŒ-node-å’Œ-python-é€Ÿåº¦æƒŠäºº" tabindex="-1">æ–°ä¸€ä»£ Web æ¡†æ¶ Teoï¼ŒåŒæ—¶æ”¯æŒ Node å’Œ Pythonï¼Œé€Ÿåº¦æƒŠäºº <a class="header-anchor" href="#æ–°ä¸€ä»£-web-æ¡†æ¶-teo-åŒæ—¶æ”¯æŒ-node-å’Œ-python-é€Ÿåº¦æƒŠäºº" aria-label="Permalink to &quot;æ–°ä¸€ä»£ Web æ¡†æ¶ Teoï¼ŒåŒæ—¶æ”¯æŒ Node å’Œ Pythonï¼Œé€Ÿåº¦æƒŠäºº&quot;">â€‹</a></h2><p><strong>ç›¸å…³ç½‘å€ï¼š</strong></p><ul><li>GitHubï¼š<a href="https://github.com/teocloud/teo" target="_blank" rel="noreferrer">https://github.com/teocloud/teo</a></li><li>giteeï¼š<a href="https://gitee.com/teocloud/teo" target="_blank" rel="noreferrer">https://gitee.com/teocloud/teo</a></li><li>å®˜ç½‘ï¼š<a href="https://teocloud.io/" target="_blank" rel="noreferrer">https://teocloud.io/</a></li><li>åšå®¢ï¼š<a href="https://teocloud.io/blog" target="_blank" rel="noreferrer">https://teocloud.io/blog</a></li><li>æ–‡æ¡£ï¼š<a href="https://docs.teocloud.io/" target="_blank" rel="noreferrer">https://docs.teocloud.io/</a></li></ul><p>ä»¥ç»“æ„ä¸ºæ ¸å¿ƒçš„æ–°ä¸€ä»£ç½‘ç»œæ¡†æ¶â€”â€”TEOï¼Œ<strong>é€‚ç”¨äº Rustã€Node.js å’Œ Python çš„ Web æ¡†æ¶</strong>ï¼Œèƒ½éå¸¸å¥½æé«˜åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜åœ¨ä½¿ç”¨ Web æœåŠ¡å™¨å’Œæ•°æ®åº“æ—¶çš„å·¥ä½œæ•ˆç‡ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¯¥é¡¹ç›®ç›®å‰å·²ç»æˆä¸º Gitee çš„ GVP é¡¹ç›®ã€‚</p><h4 id="teo-æ˜¯ä»€ä¹ˆ" tabindex="-1">TEO æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#teo-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;TEO æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h4><p>Teo æ˜¯æ–°ä¸€ä»£ Web æ¡†æ¶ã€‚å®ƒç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>Teo schemaï¼šç›´è§‚ä¸”åˆ›æ–°çš„æ¨¡å¼è¯­è¨€ï¼Œå…·æœ‰æè¿°æ€§å’Œå¯è¯»æ€§</li><li>Teo æœåŠ¡å™¨ï¼šç”¨ Rust ç¼–å†™çš„é«˜æ€§èƒ½æ ¸å¿ƒä»¥åŠ Node.jsã€Python å’Œ Rust çš„ API ç»‘å®š</li><li>Teo CLIï¼šä¸€ç§ CLI å·¥å…·ï¼Œç”¨äºè¯»å–æ¶æ„å¹¶æ‰§è¡Œä½œä¸šï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿ç§»ã€è¿è¡ŒæœåŠ¡å™¨å’Œæ’­ç§æ•°æ®</li><li>Teo æŸ¥è¯¢å®¢æˆ·ç«¯ï¼šé€‚ç”¨äºå¤šç§å¹³å°å’Œè¯­è¨€çš„è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹å®‰å…¨æŸ¥è¯¢æ„å»ºå™¨</li></ul><h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨-teo" tabindex="-1">ä¸ºä»€ä¹ˆä½¿ç”¨ TEO ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½¿ç”¨-teo" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆä½¿ç”¨ TEO ï¼Ÿ&quot;">â€‹</a></h4><p><strong>ä¼ ç»Ÿ Web æ¡†æ¶</strong></p><ul><li><strong>æ ·æ¿ä»£ç å¤š</strong>ï¼šå¼€å‘è€…éœ€è¦ä¸ºæ¯ä¸ªè·¯ç”±ç¼–å†™é‡å¤çš„ä»£ç ï¼Œè¿™ä¸ä»…è€—æ—¶ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</li><li><strong>ç¼ºä¹å†…ç½®åŠŸèƒ½</strong>ï¼šä¼ ç»Ÿæ¡†æ¶å¾€å¾€ä¸æä¾›è¿‡æ»¤ã€æ’åºå’Œåˆ†é¡µç­‰å¸¸ç”¨åŠŸèƒ½ï¼Œå¼€å‘è€…éœ€è¦è‡ªå·±å®ç°è¿™äº›åŠŸèƒ½ã€‚</li><li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šSQL æŸ¥è¯¢å’Œ MongoDB èšåˆçš„è°ƒè¯•è¿‡ç¨‹å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™ï¼Œä¸”è€—æ—¶ã€‚</li><li><strong>ç±»å‹å’Œæ¥å£é‡å¤</strong>ï¼šåœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¼€å‘è€…éœ€è¦é‡æ–°å£°æ˜åç«¯æ¨¡å‹çš„æ•°æ®ç±»å‹å’Œæ¥å£ï¼Œé€ æˆå·¥ä½œé‡å¤ã€‚</li></ul><p><strong>Teo ç°ä»£ Web æ¡†æ¶ï¼š</strong></p><ul><li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šæ–°ä¸€ä»£æ¡†æ¶é€šè¿‡æä¾›æ›´å¤šçš„æŠ½è±¡å’Œè‡ªåŠ¨åŒ–å·¥å…·ï¼Œå‡å°‘äº†å¼€å‘è€…éœ€è¦ç¼–å†™çš„æ ·æ¿ä»£ç ã€‚</li><li><strong>å†…ç½®å¸¸ç”¨åŠŸèƒ½</strong>ï¼šç°ä»£æ¡†æ¶é€šå¸¸å†…ç½®äº†è¿‡æ»¤ã€æ’åºå’Œåˆ†é¡µç­‰å¸¸ç”¨åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾å®ç°è¿™äº›åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ä»å¤´å¼€å§‹ç¼–å†™ã€‚</li><li>æ–°ä¸€ä»£æ¡†æ¶æä¾›äº†æ›´å¥½çš„å·¥å…·å’Œæ¥å£æ¥ç®€åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œèšåˆçš„è°ƒè¯•è¿‡ç¨‹ï¼Œé™ä½äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚</li><li><strong>ç»Ÿä¸€æ•°æ®ç±»å‹å’Œæ¥å£</strong>ï¼šç°ä»£æ¡†æ¶å…è®¸å¼€å‘è€…åœ¨æœåŠ¡å™¨ç«¯å®šä¹‰æ•°æ®æ¨¡å‹å’Œæ¥å£ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç ï¼Œå‡å°‘äº†é‡å¤å·¥ä½œï¼Œå¹¶æé«˜äº†å‰åç«¯ä»£ç çš„ä¸€è‡´æ€§ã€‚</li></ul><p>å…³äºæ›´å¤š Teo å¯ä»¥å»å®˜ç½‘æŸ¥é˜…ã€‚</p><h4 id="åŠŸèƒ½ä¸ç‰¹æ€§" tabindex="-1">åŠŸèƒ½ä¸ç‰¹æ€§ <a class="header-anchor" href="#åŠŸèƒ½ä¸ç‰¹æ€§" aria-label="Permalink to &quot;åŠŸèƒ½ä¸ç‰¹æ€§&quot;">â€‹</a></h4><p>ä¸‹é¢æ¥çœ‹çœ‹ Teo çš„æä¾›ç‰¹æ€§æœ‰å“ªäº›ã€‚</p><ul><li>æå…·åˆ›æ–°çš„å— GraphQL å’Œ Prisma å¯å‘çš„ç»“æ„å®šä¹‰</li><li>è‡ªåŠ¨æ•°æ®åº“è¿ç§»</li><li>æ”¯æŒ Rustã€Node.js å’Œ Python</li><li>æ”¯æŒ MySQLã€PostgreSQLã€SQLite å’Œ MongoDB</li><li>ç”Ÿæˆçš„ ORM ç±»å‹å’Œæ¥å£</li><li>ä¸ºå‰ç«¯ç”Ÿæˆçš„æŸ¥è¯¢å®¢æˆ·ç«¯</li><li>éå¸¸é«˜æ•ˆå’Œé«˜æ€§èƒ½</li><li>æ•°æ®æ¸…ç†ã€è½¬æ¢å’ŒéªŒè¯</li><li>å†…ç½®ç”¨æˆ·ä¼šè¯</li><li>å†…ç½®æƒé™æ£€æŸ¥</li><li>å…ˆè¿›åå‡ºä¸­é—´ä»¶</li><li>è‡ªå®šä¹‰è·¯ç”±å’Œå¤„ç†ç¨‹åº</li></ul><h4 id="å¿«é€Ÿå…¥é—¨" tabindex="-1">å¿«é€Ÿå…¥é—¨ <a class="header-anchor" href="#å¿«é€Ÿå…¥é—¨" aria-label="Permalink to &quot;å¿«é€Ÿå…¥é—¨&quot;">â€‹</a></h4><p>å…¸å‹çš„ Teo å·¥ä½œæµç¨‹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p><p><strong>1. é€‰æ‹©æ‚¨çš„è¯­è¨€å †æ ˆ</strong></p><p>Teo æ”¯æŒä¸‰ç§æœåŠ¡å™¨ç«¯ç¼–ç¨‹è¯­è¨€ï¼šNode.jsã€Python å’Œ Rustï¼Œå¯ä»¥é€‰æ‹©ä½ ç†Ÿæ‚‰è¯­è¨€æ¥å¼€å±•å·¥ä½œã€‚</p><ul><li>Node.js ä¸ Web æŠ€æœ¯é…åˆå¾—å¾ˆå¥½ã€‚</li><li>Python éå¸¸é€‚åˆä¸äººå·¥æ™ºèƒ½åŸºç¡€è®¾æ–½äº¤äº’ã€‚</li><li>Rust è¿½æ±‚æè‡´çš„æ€§èƒ½ï¼Œä½†å®ƒå¾ˆéš¾ç¼–å†™ã€‚</li></ul><p>Teo å…³å¿ƒä»£ç é‡å¤å’Œç”Ÿäº§åŠ›ã€‚å› æ­¤ï¼Œå‰ç«¯å®¢æˆ·ç«¯æ˜¯ç”± Teo ç”Ÿæˆçš„ã€‚Teo æ”¯æŒ 5 ç§å‰ç«¯è¯­è¨€ï¼šTypeScriptã€Swiftã€Kotlinã€C# å’Œ Dartã€‚è¿™å‡ ä¹æ¶µç›–äº†ä¸»æµçš„å‰ç«¯æŠ€æœ¯ã€‚è½»æ¾ä½¿ç”¨è¿™äº›ç”Ÿæˆçš„å®¢æˆ·ç«¯æˆ–å°†å®ƒä»¬å…±äº«ç»™å‰ç«¯å¼€å‘äººå‘˜ã€‚</p><p>æ³¨æ„ï¼šç›®å‰ Swiftã€Kotlinã€C# å’Œ Dart æš‚æ—¶è¿˜ä¸æ”¯æŒï¼Œä½† Teo å›¢é˜Ÿå°†äº 2024 å¹´çš„ä¸€ä¸ªç›®æ ‡ï¼Œç›¸ä¿¡åº”è¯¥ä¹Ÿå¾ˆå¿«å¾—åˆ°æ”¯æŒäº†ã€‚</p><p><strong>2. æ¶æ„æ‚¨çš„æ•°æ®</strong></p><p>Teo æ‹¥æœ‰ä¸€ç§å— GraphQL å’Œ Prisma å¯å‘çš„åˆ›æ–°ä¸”æ˜“äºé˜…è¯»çš„æ¨¡å¼è¯­è¨€ã€‚æ•°æ®åº“é…ç½®ã€æœåŠ¡å™¨é…ç½®ã€æ¨¡å‹å’Œæšä¸¾ã€è·¯ç”±å¤„ç†ç¨‹åºéƒ½åœ¨å…¶ä¸­å£°æ˜ã€‚æ‰€å†™å³æ‰€æƒ³ï¼Œæ‰€è§å³æ‰€å¾—ï¼Œè¿™çœŸæ˜¯å¤ªå¥½äº†ã€‚</p><p>Teo é‡‡ç”¨æ‚¨è¯¦ç»†æè¿°çš„æ¨¡å¼å¹¶ä¸ºæ‚¨è¿›è¡Œæ•°æ®åº“è¿ç§»ã€è¾“å…¥éªŒè¯å’Œè½¬æ¢ã€‚</p><p><strong>3. ORM å®ä½“å’ŒæœåŠ¡å™¨ä»£ç </strong></p><p>è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±å¤„ç†ç¨‹åºå¯ä»¥æ»¡è¶³ 80% çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ€»æœ‰ä¸€äº›è‡ªå®šä¹‰éœ€æ±‚éœ€è¦å¼€å‘äººå‘˜ç¼–å†™ä»£ç æ¥å¤„ç†ã€‚Teo æ˜¯ä¸€ä¸ªæˆç†Ÿçš„ Web æ¡†æ¶ï¼Œè€Œä¸æ˜¯æ— ä»£ç æˆ–ä½ä»£ç å·¥å…·ã€‚è®© Teo å®Œæˆç¹é‡çš„å·¥ä½œå¹¶ç”Ÿæˆ ORM å®ä½“ã€‚ä½¿ç”¨ Teo çš„ç¼–ç¨‹ API ä»¥ Teo æ”¯æŒçš„ä»»ä½•æœåŠ¡å™¨è¯­è¨€ç¼–å†™ä»£ç ã€‚</p><p><strong>4. ä¸ºå‰ç«¯ç”Ÿæˆå®¢æˆ·ç«¯</strong></p><p><strong>ä¼ ç»Ÿå‰ç«¯å¼€å‘çš„é—®é¢˜ï¼š</strong></p><ul><li>å¼€å‘äººå‘˜åœ¨å¤šä¸ªå‰ç«¯é¡¹ç›®ä¸­é‡å¤ç¼–å†™æ¥å£è¯·æ±‚å’Œå‚æ•°å¤„ç†ä»£ç ï¼Œæ•ˆç‡ä½ä¸”æ˜“å‡ºé”™ã€‚</li></ul><p><strong>Teo æ¡†æ¶çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li>Teo è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„å‰ç«¯ä»£ç ï¼Œå‡å°‘é‡å¤å·¥ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li><li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œé€‚åº”ä¸åŒçš„å¼€å‘éœ€æ±‚ã€‚</li><li>é›†æˆåˆ°ç°æœ‰é¡¹ç›®æˆ–åˆ›å»ºæ–°åŒ…ï¼Œæä¾›çµæ´»æ€§ã€‚</li></ul><h2 id="viz-è½»é‡çº§-web-æ¡†æ¶" tabindex="-1">Vizï¼šè½»é‡çº§ Web æ¡†æ¶ <a class="header-anchor" href="#viz-è½»é‡çº§-web-æ¡†æ¶" aria-label="Permalink to &quot;Vizï¼šè½»é‡çº§ Web æ¡†æ¶&quot;">â€‹</a></h2><p><a href="https://mp.weixin.qq.com/s/h4zmDzR6icaQHRdgveEunw" target="_blank" rel="noreferrer">Rust åç«¯æ¡†æ¶ Vizï¼šæ„å»ºé«˜æ•ˆ Web æœåŠ¡çš„ Rust æ¡†æ¶æ•™ç¨‹ (qq.com)</a></p><h4 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h4><p>Vizï¼Œæ˜¯ä¸ªåŸºäº RUst çš„ï¼Œå¿«é€Ÿã€å¥å£®ã€çµæ´»ã€è½»é‡çº§çš„ Web æ¡†æ¶ã€‚</p><h5 id="ç‰¹ç‚¹" tabindex="-1">ç‰¹ç‚¹ <a class="header-anchor" href="#ç‰¹ç‚¹" aria-label="Permalink to &quot;ç‰¹ç‚¹&quot;">â€‹</a></h5><ul><li>å®‰å…¨ï¼Œç¦æ­¢ä¸å®‰å…¨ä»£ç </li><li>è½»é‡</li><li>ç®€å• + çµæ´»çš„å¤„ç†å™¨å’Œä¸­é—´ä»¶</li><li>é“¾å¼æ“ä½œ</li><li>å¼ºå¤§çš„ Routing è·¯ç”±</li></ul><h4 id="ä¸€ã€hello-viz" tabindex="-1">ä¸€ã€Hello Viz <a class="header-anchor" href="#ä¸€ã€hello-viz" aria-label="Permalink to &quot;ä¸€ã€Hello Viz&quot;">â€‹</a></h4><h5 id="_1-åˆ›å»ºé¡¹ç›®" tabindex="-1">1. åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_1-åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;1. åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h5><p>æ­£å¦‚å­¦ä¹ ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆä»å®˜æ–¹å…¥é—¨æ¡ˆä¾‹å­¦èµ·ï¼Œé¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo new viz_hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_6a2fd0cf90a8417e99d45012a09b103f.D2zz7QIy.png" alt="image">ç„¶åä½¿ç”¨ vscode æ‰“å¼€</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_e6a355912d9947488695adc41d6879c9.BuEKRHPA.png" alt="image"></p><h5 id="_2-å¼•å…¥-viz" tabindex="-1">2. å¼•å…¥ viz <a class="header-anchor" href="#_2-å¼•å…¥-viz" aria-label="Permalink to &quot;2. å¼•å…¥ viz&quot;">â€‹</a></h5><p>åœ¨<code>Cargo.toml</code>ä¸­å†™å…¥ï¼Œå¦‚ä¸‹å›¾</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>tokio = { version = &quot;1.20.1&quot;, features = [&quot;full&quot;] }</span></span>
<span class="line"><span>viz = &quot;0.3.1&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_423563868c104d2cabc104ef91d32058.Dit2qJ2l.png" alt="image"></p><p>ç„¶åä½¿ç”¨ build æ¥ä¸‹è½½ä¾èµ–</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_15bdf7dbea8d4664ab0f5843107ae544.1fQGAh6U.png" alt="image"></p><p>å®‰è£…å®Œæˆ</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_042023d948644de3ae62e2bbc48dfb43.BjHi5kmq.png" alt="image"></p><h5 id="_3-è¿è¡Œ-hello-viz" tabindex="-1">3. è¿è¡Œ Hello Viz <a class="header-anchor" href="#_3-è¿è¡Œ-hello-viz" aria-label="Permalink to &quot;3. è¿è¡Œ Hello Viz&quot;">â€‹</a></h5><p>å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°<code>main.rs</code>ï¼Œ</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use std::net::SocketAddr;</span></span>
<span class="line"><span>use viz::{Request, Result, Router, Server, ServiceMaker};</span></span>
<span class="line"><span>async fn index(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Hello Viz&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>#[tokio::main]</span></span>
<span class="line"><span>async fn main() -&gt; Result&lt;()&gt; {</span></span>
<span class="line"><span>    let addr = SocketAddr::from(([127, 0, 0, 1], 3000));</span></span>
<span class="line"><span>    println!(&quot;listening on {}&quot;, addr);</span></span>
<span class="line"><span>    let app = Router::new().get(&quot;/&quot;, index);</span></span>
<span class="line"><span>    if let Err(err) = Server::bind(&amp;addr)</span></span>
<span class="line"><span>        .serve(ServiceMaker::from(app))</span></span>
<span class="line"><span>        .await</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        println!(&quot;{}&quot;, err);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    Ok(())</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h5 id="_4-è¿è¡Œç»“æœ" tabindex="-1">4. è¿è¡Œç»“æœ <a class="header-anchor" href="#_4-è¿è¡Œç»“æœ" aria-label="Permalink to &quot;4. è¿è¡Œç»“æœ&quot;">â€‹</a></h5><p>å¦‚æœä½ ä»¥ä¸Šæ­¥éª¤æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆåœ¨ç»ˆç«¯ä¸­è¿è¡Œ</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ•ˆæœå¦‚ä¸‹å›¾</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_098ac149c2674becac27225c6f3d0ab5.BhGUvCj9.png" alt="image">æœ€åä¸€è¡Œçš„æ„æ€æ˜¯æ­£åœ¨ç›‘å¬æœ¬åœ°çš„ 127.0.0.1 çš„ 3000 ç«¯å£ï¼Œè¯´æ˜ç¨‹åºæ²¡æœ‰å‡ºé”™</p><p>æ­¤æ—¶åœ¨æµè§ˆå™¨æ‰“å¼€ç½‘å€</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>http://localhost:3000/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><h4 id="æ³¨æ„" tabindex="-1">æ³¨æ„ <a class="header-anchor" href="#æ³¨æ„" aria-label="Permalink to &quot;æ³¨æ„&quot;">â€‹</a></h4><p>localhost æŒ‡å‘ 127.0.0.1</p></blockquote><p>æ­¤æ—¶é¡µé¢åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_58eb26882b2c44ffb59d3d53a8707ab5.Zmo_H3Wy.png" alt="image"></p><h4 id="äºŒã€hello-viz-ä»£ç è¯¦è§£" tabindex="-1">äºŒã€Hello Viz ä»£ç è¯¦è§£ <a class="header-anchor" href="#äºŒã€hello-viz-ä»£ç è¯¦è§£" aria-label="Permalink to &quot;äºŒã€Hello Viz ä»£ç è¯¦è§£&quot;">â€‹</a></h4><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_51103c36b1ff4842928d0e7208f26a84.CSkqSBdx.png" alt="image"></p><p>ä»æ•´ä½“ä¸Šæ¥çœ‹ï¼Œè¿™å—ä»£ç ä¸»è¦åˆ†ä¸º 3 ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¯¼å…¥ç»„ä»¶ï¼Œå¤„ç† index è¯·æ±‚å’Œä¸»ç¨‹åº</p><h5 id="å¯¼å…¥ç»„ä»¶" tabindex="-1">å¯¼å…¥ç»„ä»¶ <a class="header-anchor" href="#å¯¼å…¥ç»„ä»¶" aria-label="Permalink to &quot;å¯¼å…¥ç»„ä»¶&quot;">â€‹</a></h5><p>é¦–å…ˆå¯¼å…¥äº† SocketAddrï¼Œç”¨æ¥è¡¨ç¤º socket åœ°å€ï¼Œç„¶åå¯¼å…¥äº† Viz çš„ä¸€äº›ç»„ä»¶</p><ul><li>Request è¯·æ±‚</li><li>Result å“åº”</li><li>Router è·¯ç”±</li><li>Server æœåŠ¡å™¨</li><li>ServiceMaker æœåŠ¡</li></ul><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_14fc814ef5ff45da8c8802d2eb7633ee.DXLqNcsq.png" alt="image"></p><h5 id="å¤„ç†è¯·æ±‚" tabindex="-1">å¤„ç†è¯·æ±‚ <a class="header-anchor" href="#å¤„ç†è¯·æ±‚" aria-label="Permalink to &quot;å¤„ç†è¯·æ±‚&quot;">â€‹</a></h5><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_ef5103e067aa49709eafe2338be41819.Bth-PT_z.png" alt="image">è¿™é‡Œä½¿ç”¨å¼‚æ­¥å‡½æ•°æ¥å®ç° index çš„å¤„ç†ï¼Œä¼ å…¥ Requestï¼Œè¿™ä¸ªè¿‡ç¨‹ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬å¤„ç†ã€‚ç„¶åå“åº”çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œåœ¨å‡½æ•°ä½“ä¸­è¿”å›äº†å­—ç¬¦ä¸²â€œHello Vizâ€</p><h5 id="ä¸»å‡½æ•°" tabindex="-1">ä¸»å‡½æ•° <a class="header-anchor" href="#ä¸»å‡½æ•°" aria-label="Permalink to &quot;ä¸»å‡½æ•°&quot;">â€‹</a></h5><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_4b3aa9ed463e4f49a6726e5a397e5c7e.5XbSzHtA.png" alt="image">åœ¨ Viz ä¸­ï¼Œä¸»å‡½æ•°ä¹Ÿæ˜¯å¼‚æ­¥å‡½æ•°ï¼Œä½¿ç”¨ addr è¡¨ç¤ºæœ¬åœ°åœ°å€å’Œç›‘å¬çš„ç«¯å£ï¼Œç„¶åæŒ‚è½½ Routerï¼Œä½¿ä¸ index å¤„ç†å™¨ç›¸è”ç³»ï¼Œå†å¼€å¯æœåŠ¡å™¨ã€‚</p><h4 id="ä¸‰ã€å¸¸è§ç”¨æ³•" tabindex="-1">ä¸‰ã€å¸¸è§ç”¨æ³• <a class="header-anchor" href="#ä¸‰ã€å¸¸è§ç”¨æ³•" aria-label="Permalink to &quot;ä¸‰ã€å¸¸è§ç”¨æ³•&quot;">â€‹</a></h4><h5 id="ç®€å•çš„å¤„ç†ç¨‹åº" tabindex="-1">ç®€å•çš„å¤„ç†ç¨‹åº <a class="header-anchor" href="#ç®€å•çš„å¤„ç†ç¨‹åº" aria-label="Permalink to &quot;ç®€å•çš„å¤„ç†ç¨‹åº&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>async fn index(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(Response::text(&quot;Hello, World!&quot;))</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn about(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;About Me!&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn not_found(_: Request) -&gt; Result&lt;impl IntoResponse&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Not Found!&quot;)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="å®ç°å¤„ç†ç¨‹åºç‰¹è´¨" tabindex="-1">å®ç°å¤„ç†ç¨‹åºç‰¹è´¨ <a class="header-anchor" href="#å®ç°å¤„ç†ç¨‹åºç‰¹è´¨" aria-label="Permalink to &quot;å®ç°å¤„ç†ç¨‹åºç‰¹è´¨&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#[derive(Clone)]</span></span>
<span class="line"><span>struct MyHandler {</span></span>
<span class="line"><span>    code: Arc&lt;AtomicUsize&gt;,</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>#[async_trait]</span></span>
<span class="line"><span>impl Handler&lt;Request&gt; for MyHandler {</span></span>
<span class="line"><span>    type Output = Result&lt;Response&gt;;</span></span>
<span class="line"><span>    async fn call(&amp;self, req: Request) -&gt; Self::Output {</span></span>
<span class="line"><span>        let path = req.path().clone();</span></span>
<span class="line"><span>        let method = req.method().clone();</span></span>
<span class="line"><span>        let code = self.code.fetch_add(1, Ordering::SeqCst);</span></span>
<span class="line"><span>        Ok(format!(&quot;code = {}, method = {}, path = {}&quot;, code, method, path).into_response())</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="è·¯ç”±ä¼ å‚" tabindex="-1">è·¯ç”±ä¼ å‚ <a class="header-anchor" href="#è·¯ç”±ä¼ å‚" aria-label="Permalink to &quot;è·¯ç”±ä¼ å‚&quot;">â€‹</a></h5><p>Viz å…è®¸æ›´çµæ´»åœ°ç»„ç»‡ä»£ç ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>async fn show_user(mut req: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    let Params(id)  = req.extract::&lt;Params&lt;u64&gt;&gt;().await?;</span></span>
<span class="line"><span>    Ok(format!(&quot;post {}&quot;, id).into_response())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn show_user_ext(Params(id): Params&lt;u64&gt;) -&gt; Result&lt;impl IntoResponse&gt; {</span></span>
<span class="line"><span>    Ok(format!(&quot;Hi, NO.{}&quot;, id))</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn show_user_wrap(req: Request) -&gt; Result&lt;impl IntoResponse&gt; {</span></span>
<span class="line"><span>    // https://github.com/rust-lang/rust/issues/48919</span></span>
<span class="line"><span>    // show_user_ext.call(req).await</span></span>
<span class="line"><span>    FnExt::call(&amp;show_user_ext, req).await</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>let app = Router::new()</span></span>
<span class="line"><span>    .get(&quot;/users/:id&quot;, show_user)</span></span>
<span class="line"><span>    .get(&quot;/users_wrap/:id&quot;, show_user_wrap)</span></span>
<span class="line"><span>    .get(&quot;/users_ext/:id&quot;, show_user_ext.into_handler());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="é“¾å¼ç»„åˆç¨‹åº" tabindex="-1">é“¾å¼ç»„åˆç¨‹åº <a class="header-anchor" href="#é“¾å¼ç»„åˆç¨‹åº" aria-label="Permalink to &quot;é“¾å¼ç»„åˆç¨‹åº&quot;">â€‹</a></h5><p>HandlerExt æ˜¯ Handler çš„æ‹“å±•ç‰¹è´¨ï¼Œå®ƒæä¾›äº†å„ç§æ–¹ä¾¿çš„ç»„åˆå‡½æ•°ã€‚æ¯”å¦‚ FutureExt å’Œ StreamExt ç‰¹è´¨ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>async fn index(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(Response::text(&quot;hyper&quot;))</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn before(req: Request) -&gt; Result&lt;Request&gt; {</span></span>
<span class="line"><span>    if req.method() == Method::POST {</span></span>
<span class="line"><span>        Ok(req)</span></span>
<span class="line"><span>    } else {</span></span>
<span class="line"><span>        Err(StatusCode::METHOD_NOT_ALLOWED.into_error())</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn around&lt;H&gt;((req, handler): Next&lt;Request, H&gt;) -&gt; Result&lt;Response&gt;</span></span>
<span class="line"><span>where</span></span>
<span class="line"><span>    H: Handler&lt;Request, Output = Result&lt;Response&gt;&gt; + Clone,</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    // before ...</span></span>
<span class="line"><span>    let result = handler.call(req).await;</span></span>
<span class="line"><span>    // after ...</span></span>
<span class="line"><span>    result</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn after(result: Result&lt;Response&gt;) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    result.map(|mut res| {</span></span>
<span class="line"><span>        *res.status_mut() = StatusCode::NO_CONTENT;</span></span>
<span class="line"><span>        res</span></span>
<span class="line"><span>    })</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>let routing = Router::new()</span></span>
<span class="line"><span>    .get(&quot;/&quot;, index.before(before).around(around).after(after));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="ä¸­é—´ä»¶" tabindex="-1">ä¸­é—´ä»¶ <a class="header-anchor" href="#ä¸­é—´ä»¶" aria-label="Permalink to &quot;ä¸­é—´ä»¶&quot;">â€‹</a></h5><p>Viz çš„ä¸­é—´ä»¶å’Œå¤„ç†ç¨‹åºå…·æœ‰å…±åŒçš„ Handler ç‰¹è´¨ï¼Œå› æ­¤å®ƒå¾ˆå®¹æ˜“å®ç°å’Œæ‰©å±•ä¸­é—´ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†ä¸­é—´ä»¶æ·»åŠ åˆ°å•ä¸ªå¤„ç†ç¨‹åºæˆ–æ‰€æœ‰å¤„ç†ç¨‹åºã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ„é€ è¿‡ç¨‹ä¸­ä½¿ç”¨ Transform ç‰¹è´¨ trait æ¥åŒ…è£…å†…éƒ¨å¤„ç†ç¨‹åºã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> index</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">OK</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_response</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> not_found</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> IntoResponse</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">OK</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> show_user</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Params</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Params</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> IntoResponse</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;post {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// middleware fn</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> around</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;((</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Next</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    H</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Output</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">&gt;&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // before ...</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> handler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // after ...</span></span>
<span class="line"><span style="color:#E06C75;">    result</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// middleware struct</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> MyMiddleware</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;">#[async_trait]</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Next</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;&gt; </span><span style="color:#C678DD;">for</span><span style="color:#E5C07B;"> MyMiddleware</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    H</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Output</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> H</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Output</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> call</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Next</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Output</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        h</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// A configuration for Timeout Middleware</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Timeout</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    delay</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Timeout</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secs</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Self</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">delay</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secs</span><span style="color:#ABB2BF;">) }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E5C07B;">Transform</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">for</span><span style="color:#E5C07B;"> Timeout</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Output</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> TimeoutMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> transform</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Output</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        TimeoutMiddleware</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.delay)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Timeout Middleware</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> TimeoutMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;(</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">#[async_trait]</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">for</span><span style="color:#E5C07B;"> TimeoutMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    H</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">&gt; + </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Output</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> H</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Output</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> call</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Output</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">index</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // handler level</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">around</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MyMiddleware</span><span style="color:#ABB2BF;"> {})</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Timeout</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/users/:id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">        show_user</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">into_handler</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">map_into_response</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // handler level</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">around</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Timeout</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;update&quot;</span><span style="color:#ABB2BF;">)) })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // handler level</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">around</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Timeout</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // route level</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_handler</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MyMiddleware</span><span style="color:#ABB2BF;"> {})</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Timeout</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/*&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">not_found</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map_into_response</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // handler level</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">around</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">around</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MyMiddleware</span><span style="color:#ABB2BF;"> {})</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // router level</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">with_handler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">around</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">with_handler</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MyMiddleware</span><span style="color:#ABB2BF;"> {})</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Timeout</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><h5 id="å‚æ•°æ¥æ”¶å™¨" tabindex="-1">å‚æ•°æ¥æ”¶å™¨ <a class="header-anchor" href="#å‚æ•°æ¥æ”¶å™¨" aria-label="Permalink to &quot;å‚æ•°æ¥æ”¶å™¨&quot;">â€‹</a></h5><p>ä» Request ä¸­æå–å‚æ•°ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>struct Counter(u16);</span></span>
<span class="line"><span>#[async_trait]</span></span>
<span class="line"><span>impl FromRequest for Counter {</span></span>
<span class="line"><span>    type Error = Infallible;</span></span>
<span class="line"><span>    async fn extract(req: &amp;mut Request) -&gt; Result&lt;Self, Self::Error&gt; {</span></span>
<span class="line"><span>        let c = get_query_param(req.query_string());</span></span>
<span class="line"><span>        Ok(Counter(c))</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>fn get_query_param(query: Option&lt;&amp;str&gt;) -&gt; u16 {</span></span>
<span class="line"><span>   let query = query.unwrap_or(&quot;&quot;);</span></span>
<span class="line"><span>   let q = if let Some(pos) = query.find(&#39;q&#39;) {</span></span>
<span class="line"><span>       query.split_at(pos + 2).1.parse().unwrap_or(1)</span></span>
<span class="line"><span>   } else {</span></span>
<span class="line"><span>       1</span></span>
<span class="line"><span>   };</span></span>
<span class="line"><span>   cmp::min(500, cmp::max(1, q))</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h5 id="è·¯ç”±" tabindex="-1">è·¯ç”± <a class="header-anchor" href="#è·¯ç”±" aria-label="Permalink to &quot;è·¯ç”±&quot;">â€‹</a></h5><p>è¯†åˆ« URL å’Œåˆ†é…å¤„ç†å™¨ã€‚</p><h6 id="ä¸€ä¸ªç®€å•çš„è·¯ç”±" tabindex="-1">ä¸€ä¸ªç®€å•çš„è·¯ç”± <a class="header-anchor" href="#ä¸€ä¸ªç®€å•çš„è·¯ç”±" aria-label="Permalink to &quot;ä¸€ä¸ªç®€å•çš„è·¯ç”±&quot;">â€‹</a></h6><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>async fn index(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(().into_response())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>let root = Router::new()</span></span>
<span class="line"><span>  .get(&quot;/&quot;, index)</span></span>
<span class="line"><span>  .route(&quot;/about&quot;, get(|_| async { Ok(&quot;about&quot;) }));</span></span>
<span class="line"><span>let search = Router::new()</span></span>
<span class="line"><span>  .route(&quot;/&quot;, Route::new().get(|_| async { Ok(&quot;search&quot;) }));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="crud-æ“ä½œ" tabindex="-1">CRUD æ“ä½œ <a class="header-anchor" href="#crud-æ“ä½œ" aria-label="Permalink to &quot;CRUD æ“ä½œ&quot;">â€‹</a></h6><p>æ·»åŠ å¸¦è¯·æ±‚æ–¹å¼çš„æ–¹æ³•ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>async fn index_todos(_: Request) -&gt; Result&lt;impl IntoResponse&gt; {</span></span>
<span class="line"><span>    Ok(())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn create_todo(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;created&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn new_todo(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(Response::html(r#&quot;</span></span>
<span class="line"><span>        &lt;form method=&quot;post&quot; action=&quot;/&quot;&gt;</span></span>
<span class="line"><span>            &lt;input name=&quot;todo&quot; /&gt;</span></span>
<span class="line"><span>            &lt;button type=&quot;submit&quot;&gt;Create&lt;/button&gt;</span></span>
<span class="line"><span>        &lt;/form&gt;</span></span>
<span class="line"><span>    &quot;#))</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn show_todo(mut req: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    let Params(id): Params&lt;u64&gt; = req.extract().await?;</span></span>
<span class="line"><span>    Ok(Response::text(format!(&quot;todo&#39;s id is {}&quot;, id)))</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn update_todo(_: Request) -&gt; Result&lt;()&gt; {</span></span>
<span class="line"><span>    Ok(())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn destroy_todo(_: Request) -&gt; Result&lt;()&gt; {</span></span>
<span class="line"><span>    Ok(())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>async fn edit_todo(_: Request) -&gt; Result&lt;()&gt; {</span></span>
<span class="line"><span>    Ok(())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>let todos = Router::new()</span></span>
<span class="line"><span>  .route(&quot;/&quot;, get(index_todos).post(create_todo))</span></span>
<span class="line"><span>  .post(&quot;/new&quot;, new_todo)</span></span>
<span class="line"><span>  .route(&quot;/:id&quot;, get(show_todo).patch(update_todo).delete(destroy_todo))</span></span>
<span class="line"><span>  .get(&quot;/:id/edit&quot;, edit_todo);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h5 id="èµ„æº" tabindex="-1">èµ„æº <a class="header-anchor" href="#èµ„æº" aria-label="Permalink to &quot;èµ„æº&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>// GET `/search`</span></span>
<span class="line"><span>async fn search_users(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(Response::json::&lt;Vec&lt;u64&gt;&gt;(vec![])?)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// GET `/`</span></span>
<span class="line"><span>async fn index_users(_: Request) -&gt; Result&lt;Response&gt; {</span></span>
<span class="line"><span>    Ok(Response::json::&lt;Vec&lt;u64&gt;&gt;(vec![])?)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// GET `/new`</span></span>
<span class="line"><span>async fn new_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;User Form&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// POST `/`</span></span>
<span class="line"><span>async fn create_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Created User&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// GET `/user_id`</span></span>
<span class="line"><span>async fn show_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;User ID 007&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// GET `/user_id/edit`</span></span>
<span class="line"><span>async fn edit_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Edit User Form&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// PUT `/user_id`</span></span>
<span class="line"><span>async fn update_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Updated User&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>// DELETE `/user_id`</span></span>
<span class="line"><span>async fn delete_user(_: Request) -&gt; Result&lt;&amp;&#39;static str&gt; {</span></span>
<span class="line"><span>    Ok(&quot;Deleted User&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>let users = Resources::default()</span></span>
<span class="line"><span>  .named(&quot;user&quot;)</span></span>
<span class="line"><span>  .route(&quot;/search&quot;, get(search_users))</span></span>
<span class="line"><span>  .index(index_users)</span></span>
<span class="line"><span>  .new(new_user)</span></span>
<span class="line"><span>  .create(create_user)</span></span>
<span class="line"><span>  .show(show_user)</span></span>
<span class="line"><span>  .edit(edit_user)</span></span>
<span class="line"><span>  .update(update_user)</span></span>
<span class="line"><span>  .destroy(delete_user);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="æ€»ç»“-1" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-1" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h4><p>æœ¬æœŸä¸»è¦æ˜¯å¯¹ Rust çš„è½»é‡çº§ Web æ¡†æ¶ Viz è¿›è¡Œäº†å…¥é—¨çº§çš„äº†è§£ï¼Œå¹¶ä¸”ç»™å‡ºäº† Viz å®˜æ–¹çš„ç¤ºä¾‹ä»£ç ï¼ŒåŒ…æ‹¬ä¸­é—´ä»¶ï¼Œå“åº”å¤„ç†ï¼Œè·¯ç”±ç­‰ç»„ä»¶çš„ç”¨æ³•ï¼Œå¯ä»¥çœ‹å‡º Viz æ˜¯ä¸ªçº¯ web æ¡†æ¶ï¼Œéå¸¸çš„ç®€æ´ã€‚</p><h2 id="rust-çš„-websocket-æ¡†æ¶â€”â€”ws-rs" tabindex="-1">Rust çš„ Websocket æ¡†æ¶â€”â€”ws-rs <a class="header-anchor" href="#rust-çš„-websocket-æ¡†æ¶â€”â€”ws-rs" aria-label="Permalink to &quot;Rust çš„ Websocket æ¡†æ¶â€”â€”ws-rs&quot;">â€‹</a></h2><h4 id="å‰è¨€-1" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€-1" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h4><p>ws-rs å®ç°äº† MIO çš„ WebSockets RFC6455 æ ‡å‡†ã€‚å®ƒå…è®¸åœ¨å•ä¸ªçº¿ç¨‹ä¸Šå¤„ç†å¤šä¸ªè¿æ¥ï¼Œç”šè‡³å¯ä»¥åœ¨åŒä¸€çº¿ç¨‹ä¸Šç”Ÿæˆæ–°çš„å®¢æˆ·ç«¯è¿æ¥ã€‚è¿™ä½¿å¾— WebSockets éå¸¸å¿«é€Ÿä¸”èµ„æºé«˜æ•ˆã€‚API è®¾è®¡æŠ½è±¡äº† WebSocket åè®®çš„åº•å±‚éƒ¨åˆ†ï¼Œä½¿å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºä»£ç ï¼Œè€Œä¸å¿…æ‹…å¿ƒåè®®çš„ä¸€è‡´æ€§ã€‚</p><h4 id="ä¸€ã€åˆ›å»ºé¡¹ç›®" tabindex="-1">ä¸€ã€åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#ä¸€ã€åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;ä¸€ã€åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>é¦–å…ˆè¿˜æ˜¯è€è§„çŸ©ï¼Œå…ˆåˆ›å»ºæœ¬æœŸå†…å®¹æ‰€éœ€è¦çš„å·¥ç¨‹ï¼Œç”±äºæœ¬æœŸæ˜¯é€šä¿¡ç±»çš„ Websocketï¼Œå› æ­¤éœ€è¦å‡†å¤‡ä¸¤ä¸ªå·¥ç¨‹ï¼Œä¸€ä¸ª serverï¼Œä¸€ä¸ª clientã€‚</p><h5 id="_1-åˆ›å»ºæœåŠ¡ç«¯é¡¹ç›®" tabindex="-1">1. åˆ›å»ºæœåŠ¡ç«¯é¡¹ç›® <a class="header-anchor" href="#_1-åˆ›å»ºæœåŠ¡ç«¯é¡¹ç›®" aria-label="Permalink to &quot;1. åˆ›å»ºæœåŠ¡ç«¯é¡¹ç›®&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo new ws_rs_server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åæ·»åŠ ä¾èµ–ï¼Œå°†ä»¥ä¸‹å†…å®¹åŠ å…¥åˆ°å·¥ç¨‹<code>Cargo.toml</code>ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>ws = &quot;0.9.2&quot;</span></span>
<span class="line"><span>env_logger = &quot;0.6&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_41df2c704a8649b39a9f25c25e5f7942.CbKgoODg.png" alt="image"></p><h5 id="_2-åˆ›å»ºå®¢æˆ·ç«¯é¡¹ç›®" tabindex="-1">2. åˆ›å»ºå®¢æˆ·ç«¯é¡¹ç›® <a class="header-anchor" href="#_2-åˆ›å»ºå®¢æˆ·ç«¯é¡¹ç›®" aria-label="Permalink to &quot;2. åˆ›å»ºå®¢æˆ·ç«¯é¡¹ç›®&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo new ws_rs_client</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åæ·»åŠ ä¾èµ–ï¼ŒåŒæ ·åŠ ä¸Šåˆšæ‰çš„ä¾èµ–ï¼Œ</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>ws = &quot;0.9.2&quot;</span></span>
<span class="line"><span>env_logger = &quot;0.6&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="äºŒã€ç¼–å†™æµ‹è¯•ä»£ç " tabindex="-1">äºŒã€ç¼–å†™æµ‹è¯•ä»£ç  <a class="header-anchor" href="#äºŒã€ç¼–å†™æµ‹è¯•ä»£ç " aria-label="Permalink to &quot;äºŒã€ç¼–å†™æµ‹è¯•ä»£ç &quot;">â€‹</a></h4><h5 id="_1-æœåŠ¡ç«¯" tabindex="-1">1.æœåŠ¡ç«¯ <a class="header-anchor" href="#_1-æœåŠ¡ç«¯" aria-label="Permalink to &quot;1.æœåŠ¡ç«¯&quot;">â€‹</a></h5><p>é¦–å…ˆæ˜¯æœåŠ¡ç«¯éƒ¨åˆ†çš„ä»£ç ï¼Œä½¿ç”¨è¯¥åº“éœ€è¦å¼•å…¥<code>ws::listen</code></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use ws::listen;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶ååœ¨ main ä¸­è°ƒç”¨ï¼Œå®ç°ç›‘å¬æ“ä½œï¼Œä¾‹å¦‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç›‘å¬åœ°å€å¹¶ä¸ºæ¯ä¸ªè¿æ¥è°ƒç”¨é—­åŒ…</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> listen</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;127.0.0.1:3012&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">out</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¤„ç†ç¨‹åºéœ€è¦è·å–outçš„æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨move</span></span>
<span class="line"><span style="color:#C678DD;">        move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">msg</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¤„ç†åœ¨æ­¤è¿æ¥ä¸Šæ¥æ”¶çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯ &#39;{}&#39;. &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä½¿ç”¨è¾“å‡ºé€šé“å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#E06C75;">            out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // é€šçŸ¥ç”¨æˆ·æ•…éšœ</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;åˆ›å»ºWebsocketå¤±è´¥ï¼ŒåŸå› ï¼š {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>listen éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç›‘å¬çš„åœ°å€å’Œç«¯å£ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>127.0.0.1:3012</code>ï¼Œç„¶åå°±æ˜¯ä¸ªåŒ¿åå‡½æ•°ï¼Œä¼ å…¥<code>out</code>ï¼Œè·å–<code>out</code>çš„æ‰€æœ‰æƒï¼Œç„¶ååœ¨å…¶å†…éƒ¨ä½¿ç”¨<code>move</code>å…³é”®å­—è‡ªåŠ¨æ•è·<code>msg</code>ï¼Œå…¶ä¸­<code>msg</code>å°±æ˜¯æœåŠ¡ç«¯æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œåœ¨æœåŠ¡ç«¯å¼€å‘ä¸­ï¼Œä¸»è¦å¤„ç†çš„å°±æ˜¯è¿™éƒ¨åˆ†å†…å®¹ã€‚</p><p>è¿™é‡Œå¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯é€»è¾‘å¾ˆç®€å•ï¼Œ</p><ol><li>è¾“å‡ºä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ¶ˆæ¯</li><li>æŠŠå®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯è¿”å›</li></ol><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ª echoï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«çš„ï¼Œè¿™ä¸ªåªè¿”å›ä¸€æ¬¡ã€‚</p><h5 id="_2-å®¢æˆ·ç«¯" tabindex="-1">2.å®¢æˆ·ç«¯ <a class="header-anchor" href="#_2-å®¢æˆ·ç«¯" aria-label="Permalink to &quot;2.å®¢æˆ·ç«¯&quot;">â€‹</a></h5><p>å®¢æˆ·ç«¯éƒ¨åˆ†éœ€è¦å¼•å…¥<code>connect</code>ç”¨æ¥è¿æ¥æœåŠ¡ç«¯ï¼Œå¼•å…¥<code>CloseCode</code>æ¥å…³é—­è¿æ¥ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> ws</span><span style="color:#ABB2BF;">::{connect, </span><span style="color:#E5C07B;">CloseCode</span><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åå°±æ˜¯åœ¨<code>main</code>ä¸­è°ƒç”¨ï¼Œé¦–å…ˆæ˜¯<code>connect</code>ï¼Œå…¶è°ƒç”¨æ–¹å¼å’Œ<code>server</code>çš„<code>listen</code>æ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œ</p><ol><li>wss è¿æ¥ï¼Œä¾‹å¦‚<code>ws://127.0.0.1:3012</code>ï¼Œå…¶ä¸­<code>ws://</code>è¡¨ç¤ºä½¿ç”¨ websocket åè®®ï¼Œ<code>127.0.0.1</code>æ˜¯ ip åœ°å€ï¼Œ<code>3012</code>æ˜¯ç«¯å£ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯è¦å’Œ server ç›¸å¯¹åº”ï¼Œå¦åˆ™ä¼šè¿æ¥å¤±è´¥</li><li>ä¸€ä¸ªé—­åŒ…åŒ¿åå‡½æ•°ï¼Œä¼ å…¥<code>out</code></li></ol><p>å®¢æˆ·ç«¯çš„é—­åŒ…åŒ¿åå‡½æ•°ä¸»è¦è¦åšä¸¤ä»¶äº‹ï¼Œ</p><ol><li>å‘é€æ¶ˆæ¯åˆ°æœåŠ¡ç«¯</li><li>å¤„ç†æ¥è‡ªæœåŠ¡ç«¯çš„æ¶ˆæ¯</li></ol><p>è¿™é‡Œçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è¿æ¥åˆ°urlå¹¶è°ƒç”¨é—­åŒ…</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> connect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ws://127.0.0.1:3012&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">out</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å°†WebSocketæ‰“å¼€æ—¶è¦å‘é€çš„æ¶ˆæ¯æ’é˜Ÿ</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#E06C75;"> out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello WebSocket&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">is_err</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Websocketæ— æ³•åˆå§‹æ¶ˆæ¯æ’é˜Ÿ&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Client å‘é€æ¶ˆæ¯ &#39;Hello WebSocket&#39;. &quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¤„ç†ç¨‹åºéœ€è¦è·å–outçš„æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨move</span></span>
<span class="line"><span style="color:#C678DD;">        move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">msg</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¤„ç†åœ¨æ­¤è¿æ¥ä¸Šæ¥æ”¶çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Client æ”¶åˆ°æ¶ˆæ¯ &#39;{}&#39;. &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å…³é—­è¿æ¥</span></span>
<span class="line"><span style="color:#E06C75;">            out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CloseCode</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Normal</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // é€šçŸ¥ç”¨æˆ·æ•…éšœ</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to create WebSocket due to: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ®µä»£ç çš„é€»è¾‘æ˜¯ï¼Œ</p><ol><li>å…ˆå‘é€<code>Hello WebSocket</code>åˆ°æœåŠ¡ç«¯ï¼ŒåŒæ—¶åˆ¤æ–­å‘é€è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰é”™ï¼Œå¦‚æœå‘é€å‡ºé”™ï¼Œåˆ™è¾“å‡º<code>Websocketæ— æ³•åˆå§‹æ¶ˆæ¯æ’é˜Ÿ</code>ï¼Œå‘é€æˆåŠŸçš„æƒ…å†µä¸‹åœ¨å®¢æˆ·ç«¯ç•Œé¢è¾“å‡º<code>Client å‘é€æ¶ˆæ¯ &#39;Hello WebSocket&#39;.</code></li><li>å¤„ç†æ¥è‡ªæœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œå’Œ server æ˜¯é«˜åº¦ç›¸ä¼¼çš„ï¼Œæ”¶åˆ°æ¶ˆæ¯åï¼Œè¾“å‡º<code>Client æ”¶åˆ°æ¶ˆæ¯ &#39;{}&#39;. </code>ï¼Œå…¶ä¸­<code>{}</code>æ˜¯æœåŠ¡ç«¯æ¶ˆæ¯çš„å ä½ç¬¦ï¼Œæ”¶åˆ°æ¶ˆæ¯åç›´æ¥æ–­å¼€æœåŠ¡ç«¯çš„è¿æ¥</li></ol><h4 id="ä¸‰ã€-è¿è¡Œæ•ˆæœ" tabindex="-1">ä¸‰ã€ è¿è¡Œæ•ˆæœ <a class="header-anchor" href="#ä¸‰ã€-è¿è¡Œæ•ˆæœ" aria-label="Permalink to &quot;ä¸‰ã€ è¿è¡Œæ•ˆæœ&quot;">â€‹</a></h4><p>è¿è¡ŒæœåŠ¡ç«¯</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_d2ccfe0ce7cd4a9cade4f41a8d0b48b6.AWsjRhRJ.png" alt="image"></p><p>è¿è¡Œå®¢æˆ·ç«¯</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_3460a0af9e8d4d1f8e3f709df101add3.Dtp2MO4i.png" alt="image"></p><h4 id="æ€»ç»“-2" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-2" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h4><p>æœ¬æœŸå­¦ä¹ äº† Rust çš„ websocket é€šä¿¡æ¡†æ¶ ws-rsï¼Œå¹¶ä¸”ç¼–å†™äº†ä¸¤ä¸ªå®˜æ–¹æä¾›çš„å°æ¡ˆä¾‹ï¼Œé€šè¿‡æœ¬æœŸå†…å®¹çš„å­¦ä¹ ï¼Œä½ å·²å­¦ä¼šäº†ä½¿ç”¨ Rust æ¥ç¼–å†™ websocket ç¨‹åºï¼Œè¿™ä¸ªåœ¨å¼€å‘ä¸­æ˜¯å…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰çš„ï¼Œä½ å†™çš„ç¨‹åºä»æ­¤å¯ä»¥è”ç½‘è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä½¿å¾—ç¨‹åºç»™ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒï¼Œå¹¶ä¸”ä¼šè®©ä½ çš„ç¨‹åºå˜å¾—ä¸°å¯Œå¤šå½©ã€‚</p><h4 id="å®Œæ•´ä»£ç " tabindex="-1">å®Œæ•´ä»£ç  <a class="header-anchor" href="#å®Œæ•´ä»£ç " aria-label="Permalink to &quot;å®Œæ•´ä»£ç &quot;">â€‹</a></h4><h5 id="æœåŠ¡ç«¯" tabindex="-1">æœåŠ¡ç«¯ <a class="header-anchor" href="#æœåŠ¡ç«¯" aria-label="Permalink to &quot;æœåŠ¡ç«¯&quot;">â€‹</a></h5><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> ws</span><span style="color:#ABB2BF;">::listen;</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆå§‹åŒ–æ—¥å¿—</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç›‘å¬åœ°å€å¹¶ä¸ºæ¯ä¸ªè¿æ¥è°ƒç”¨é—­åŒ…</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> listen</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;127.0.0.1:3012&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">out</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¤„ç†ç¨‹åºéœ€è¦è·å–outçš„æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨move</span></span>
<span class="line"><span style="color:#C678DD;">        move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">msg</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¤„ç†åœ¨æ­¤è¿æ¥ä¸Šæ¥æ”¶çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯ &#39;{}&#39;. &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä½¿ç”¨è¾“å‡ºé€šé“å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#E06C75;">            out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // é€šçŸ¥ç”¨æˆ·æ•…éšœ</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;åˆ›å»ºWebsocketå¤±è´¥ï¼ŒåŸå› ï¼š {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h5 id="å®¢æˆ·ç«¯" tabindex="-1">å®¢æˆ·ç«¯ <a class="header-anchor" href="#å®¢æˆ·ç«¯" aria-label="Permalink to &quot;å®¢æˆ·ç«¯&quot;">â€‹</a></h5><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> ws</span><span style="color:#ABB2BF;">::{connect, </span><span style="color:#E5C07B;">CloseCode</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆå§‹åŒ–æ—¥å¿—</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¿æ¥åˆ°urlå¹¶è°ƒç”¨é—­åŒ…</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> connect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ws://127.0.0.1:3012&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">out</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å°†WebSocketæ‰“å¼€æ—¶è¦å‘é€çš„æ¶ˆæ¯æ’é˜Ÿ</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#E06C75;"> out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello WebSocket&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">is_err</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Websocketæ— æ³•åˆå§‹æ¶ˆæ¯æ’é˜Ÿ&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Client å‘é€æ¶ˆæ¯ &#39;Hello WebSocket&#39;. &quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¤„ç†ç¨‹åºéœ€è¦è·å–outçš„æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨move</span></span>
<span class="line"><span style="color:#C678DD;">        move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">msg</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¤„ç†åœ¨æ­¤è¿æ¥ä¸Šæ¥æ”¶çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Client got message &#39;{}&#39;. &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å…³é—­è¿æ¥</span></span>
<span class="line"><span style="color:#E06C75;">            out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CloseCode</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Normal</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // é€šçŸ¥ç”¨æˆ·æ•…éšœ</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to create WebSocket due to: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="thruster-rust-å¿«é€Ÿä¸”ç›´è§‚çš„-web-æ¡†æ¶-é«˜æ€§èƒ½ã€ç®€å•ã€ç›´è§‚" tabindex="-1">Thruster: Rust å¿«é€Ÿä¸”ç›´è§‚çš„ web æ¡†æ¶: é«˜æ€§èƒ½ã€ç®€å•ã€ç›´è§‚ <a class="header-anchor" href="#thruster-rust-å¿«é€Ÿä¸”ç›´è§‚çš„-web-æ¡†æ¶-é«˜æ€§èƒ½ã€ç®€å•ã€ç›´è§‚" aria-label="Permalink to &quot;Thruster: Rust å¿«é€Ÿä¸”ç›´è§‚çš„ web æ¡†æ¶: é«˜æ€§èƒ½ã€ç®€å•ã€ç›´è§‚&quot;">â€‹</a></h2><blockquote><p>ä¸€ä¸ªæ—¨åœ¨æé«˜å¼€å‘è€…åœ¨é¡¹ç›®å’Œå›¢é˜Ÿä¹‹é—´ç”Ÿäº§åŠ›å’Œä¸€è‡´æ€§çš„ Web æ¡†æ¶</p></blockquote><p>âœ… ç¨³å®šè¿è¡Œ âœ… è¿è¡Œå¿«é€Ÿ âœ… ä¸ä½¿ç”¨ä¸å®‰å…¨ä»£ç </p><h3 id="ç‰¹ç‚¹-1" tabindex="-1">ç‰¹ç‚¹ <a class="header-anchor" href="#ç‰¹ç‚¹-1" aria-label="Permalink to &quot;ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li><strong>è€ƒè™‘åˆ°å¼‚æ­¥/ç­‰å¾…çš„æ„å»º</strong>[1]</li><li><strong>ä¸ Hyper å…¼å®¹</strong>[2]</li><li><strong>æ”¯æŒ SSL</strong>[3]</li><li><strong>å¯æµ‹è¯•</strong>[4]</li><li><strong>é™æ€æ–‡ä»¶æœåŠ¡</strong>[5]</li><li><strong>SocketIO</strong>[6]</li><li><strong>gRPC</strong>[7]ï¼Œä»¥åŠæ›´å¤šå®éªŒæ€§çš„<strong>é Tonic åŸºç¡€çš„ gRPC</strong>[8]</li><li><strong>ä¾èµ–æ³¨å…¥</strong>[9]</li></ul><h3 id="åŠ¨æœº" tabindex="-1">åŠ¨æœº <a class="header-anchor" href="#åŠ¨æœº" aria-label="Permalink to &quot;åŠ¨æœº&quot;">â€‹</a></h3><blockquote><p>Thruster æ˜¯ä¸€ä¸ªæ—¨åœ¨æé«˜å¼€å‘è€…åœ¨é¡¹ç›®å’Œå›¢é˜Ÿä¹‹é—´ç”Ÿäº§åŠ›å’Œä¸€è‡´æ€§çš„ Web æ¡†æ¶ã€‚å…¶ç›®æ ‡æ˜¯ï¼š</p></blockquote><ul><li>é«˜æ€§èƒ½</li><li>ç®€å•</li><li>ç›´è§‚</li></ul><p>Thruster è¿˜ï¼š</p><ul><li>ä¸ä½¿ç”¨ <code>unsafe</code></li><li>åœ¨ç¨³å®šç‰ˆçš„ Rust ä¸­å·¥ä½œ</li></ul><h3 id="å¿«é€Ÿ" tabindex="-1">å¿«é€Ÿ <a class="header-anchor" href="#å¿«é€Ÿ" aria-label="Permalink to &quot;å¿«é€Ÿ&quot;">â€‹</a></h3><p><code>Thruster</code> å¯ä»¥ä¸ä¸åŒçš„æœåŠ¡å™¨åç«¯ä¸€èµ·è¿è¡Œï¼Œå¹¶ä»£è¡¨äº†å®ƒä»¬ä¹‹ä¸Šçš„ä¸€ä¸ªç²¾å¿ƒåŒ…è£…çš„å±‚ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥è·Ÿä¸Š <code>Hyper</code>ã€<code>Actix</code> æˆ–ç”šè‡³æ˜¯ <code>ThrusterServer</code>ï¼ˆä¸€ä¸ªè‡ªäº§çš„ <code>HTTP</code> å¼•æ“ï¼‰çš„æœ€æ–°å’Œæœ€å¥½çš„å˜åŒ–ã€‚</p><h3 id="ç›´è§‚" tabindex="-1">ç›´è§‚ <a class="header-anchor" href="#ç›´è§‚" aria-label="Permalink to &quot;ç›´è§‚&quot;">â€‹</a></h3><p>åŸºäºåƒ <code>Koa</code> å’Œ <code>Express</code> è¿™æ ·çš„æ¡†æ¶ï¼Œ<code>Thruster</code> æ—¨åœ¨æˆä¸ºä¸€ä¸ªæ„‰å¿«çš„å¼€å‘ä½“éªŒã€‚</p><h3 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h3><p>è¦è¿è¡Œç¤ºä¾‹ï¼Œè¯·ä½¿ç”¨ <code>cargo run --example &lt;ç¤ºä¾‹åç§°&gt;</code>ã€‚ ä¾‹å¦‚ï¼Œ<code>cargo run --example hello_world</code> å¹¶æ‰“å¼€ **<a href="http://localhost:4321/**%5B10%5D" target="_blank" rel="noreferrer">http://localhost:4321/**[10]</a></p><h4 id="ä¸­é—´ä»¶åŸºç¡€" tabindex="-1">ä¸­é—´ä»¶åŸºç¡€ <a class="header-anchor" href="#ä¸­é—´ä»¶åŸºç¡€" aria-label="Permalink to &quot;ä¸­é—´ä»¶åŸºç¡€&quot;">â€‹</a></h4><p>ä½¿æ–°çš„å¼‚æ­¥ç­‰å¾…ä»£ç å·¥ä½œçš„æ ¸å¿ƒéƒ¨åˆ†æ˜¯ä½¿ç”¨ <code>#[middleware_fn]</code> å±æ€§æŒ‡å®šä¸­é—´ä»¶å‡½æ•°ï¼ˆè¿™æ ‡å¿—ç€ä¸­é—´ä»¶ä¸ Thruster æ„å»ºçš„ç¨³å®šç‰ˆ futures ç‰ˆæœ¬å…¼å®¹ï¼‰ï¼Œç„¶ååœ¨å®é™…è·¯ç”±ä¸­çš„ <code>m!</code> å®ã€‚</p><p>ä¸€ä¸ªç®€å•çš„ä½¿ç”¨å¼‚æ­¥ç­‰å¾…çš„ç¤ºä¾‹æ˜¯ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">boxed</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">future</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">pin</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Pin</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">time</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Instant</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">BasicContext</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::{m, middleware_fn, </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ThrusterServer</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> profile</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> start_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> next</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> elapsed_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> start_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsed</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">        &quot;[{}Î¼s] {} -- {}&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        elapsed_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_micros</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">        context</span><span style="color:#ABB2BF;">.request.</span><span style="color:#61AFEF;">method</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">        context</span><span style="color:#ABB2BF;">.request.</span><span style="color:#61AFEF;">path</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> plaintext</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;Hello, World!&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> four_oh_four</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Whoops! That route doesn&#39;t exist!&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Starting server...&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, ()&gt;::</span><span style="color:#61AFEF;">new_basic</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/plaintext&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">profile</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">plaintext</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E06C75;">    app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set404</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">four_oh_four</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> server</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Server</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    server</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;0.0.0.0&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4321</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h4 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;é”™è¯¯å¤„ç†&quot;">â€‹</a></h4><p>è¿™é‡Œæœ‰ä¸€ä¸ªä¸é”™çš„ç¤ºä¾‹</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">errors</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ThrusterError</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">proc</span><span style="color:#ABB2BF;">::{m, middleware_fn};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::{map_try, </span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">BasicContext</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> thruster</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MiddlewareReturnValue</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ThrusterServer</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> plaintext</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;Hello, World!&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> error</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;Hello, world&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map_err</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> context</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Ctx</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">            context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            ThrusterError</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                context</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Custom error message&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">                cause</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">non_existent_param</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Starting server...&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, ()&gt;::</span><span style="color:#61AFEF;">new_basic</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/plaintext&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">plaintext</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/error&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> server</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Server</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    server</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;0.0.0.0&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4321</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h3><p>Thruster æä¾›äº†ä¸€ä¸ªç®€å•çš„æµ‹è¯•å¥—ä»¶æ¥æµ‹è¯•æ‚¨çš„ç«¯ç‚¹ï¼Œåªéœ€å¦‚ä¸‹åŒ…å« <code>testing</code> æ¨¡å—ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, ()&gt;::</span><span style="color:#61AFEF;">new_basic</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/plaintext&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">plaintext</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> testing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;/plaintext&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">assert!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">.body </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;Hello, World!&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="åˆ¶ä½œæ‚¨è‡ªå·±çš„ä¸­é—´ä»¶æ¨¡å—" tabindex="-1">åˆ¶ä½œæ‚¨è‡ªå·±çš„ä¸­é—´ä»¶æ¨¡å— <a class="header-anchor" href="#åˆ¶ä½œæ‚¨è‡ªå·±çš„ä¸­é—´ä»¶æ¨¡å—" aria-label="Permalink to &quot;åˆ¶ä½œæ‚¨è‡ªå·±çš„ä¸­é—´ä»¶æ¨¡å—&quot;">â€‹</a></h3><p>åˆ¶ä½œä¸­é—´ä»¶éå¸¸ç®€å•ï¼åªéœ€åˆ›å»ºä¸€ä¸ªå‡½æ•°å¹¶å°†å…¶å¯¼å‡ºä¸ºæ¨¡å—çº§åˆ«ã€‚ä¸‹é¢ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå…è®¸å¯¹è¯·æ±‚è¿›è¡Œåˆ†æçš„ä¸­é—´ä»¶ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> profiling</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;">: &#39;</span><span style="color:#E5C07B;">static</span><span style="color:#ABB2BF;"> + </span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;"> + </span><span style="color:#E5C07B;">Send</span><span style="color:#ABB2BF;">&gt;(</span></span>
<span class="line"><span style="color:#C678DD;">    mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> start_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> next</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> elapsed_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> start_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsed</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">    info!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;[{}Î¼s] {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">elapsed_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_micros</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ‚¨å¯èƒ½ä¼šå‘ç°æ‚¨æƒ³è¦åœ¨ä¸Šä¸‹æ–‡ä¸­å­˜å‚¨æ›´å…·ä½“çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼Œä¹Ÿè®¸æ‚¨æƒ³è¦å°†æŸ¥è¯¢å‚æ•°æ³¨å…¥åˆ°ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ä¸­ï¼Œä¾›å…¶ä»–ä¸­é—´ä»¶åç»­ä½¿ç”¨ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨å¯ä»¥ä¸ºä¸Šä¸‹æ–‡åˆ›å»ºä¸€ä¸ªé¢å¤–çš„ç‰¹è´¨ï¼Œä¸‹æ¸¸çš„ä¸­é—´ä»¶å¿…é¡»éµå®ˆã€‚æŸ¥çœ‹æä¾›çš„ <strong>query_params ä¸­é—´ä»¶</strong>[11] ä½œä¸ºç¤ºä¾‹ã€‚</p><h3 id="å…¶ä»–æˆ–è‡ªå®šä¹‰åç«¯" tabindex="-1">å…¶ä»–æˆ–è‡ªå®šä¹‰åç«¯ <a class="header-anchor" href="#å…¶ä»–æˆ–è‡ªå®šä¹‰åç«¯" aria-label="Permalink to &quot;å…¶ä»–æˆ–è‡ªå®šä¹‰åç«¯&quot;">â€‹</a></h3><p>Thruster èƒ½å¤Ÿä»…åœ¨æŸç§æœåŠ¡å™¨ä¹‹ä¸Šæä¾›è·¯ç”±å±‚ï¼Œä¾‹å¦‚ä¸Šé¢çš„ Hyper ä»£ç ç‰‡æ®µã€‚åªè¦æœåŠ¡å™¨å®ç°äº† <code>ThrusterServer</code>ï¼Œè¿™å¯ä»¥å¹¿æ³›åœ°åº”ç”¨äºä»»ä½•åç«¯ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> async_trait</span><span style="color:#ABB2BF;">::async_trait;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[async_trait]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> trait</span><span style="color:#E5C07B;"> ThrusterServer</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;"> + </span><span style="color:#E5C07B;">Send</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Send</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Request</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">RequestWithParams</span><span style="color:#ABB2BF;"> + </span><span style="color:#E5C07B;">Send</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">host</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">port</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u16</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>éœ€è¦æœ‰ï¼š</p><ul><li>ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ã€‚</li><li>ä¸€ä¸ªå‡½æ•°æ¥æ„å»ºæœåŠ¡å™¨åˆ°ä¸€ä¸ªå¯ä»¥åŠ è½½åˆ°å¼‚æ­¥è¿è¡Œæ—¶ä¸­çš„æœªæ¥ã€‚</li></ul><p>åœ¨ <code>build</code> å‡½æ•°å†…ï¼ŒæœåŠ¡å™¨å®ç°åº”è¯¥ï¼š</p><ul><li>å¯åŠ¨æŸç§è¿æ¥ç›‘å¬å™¨</li><li>è°ƒç”¨ <code>let matched = app.resolve_from_method_and_path(&lt;some method&gt;, &lt;some path&gt;);</code>ï¼ˆè¿™æ˜¯æä¾›å®é™…è·¯ç”±ã€‚ï¼‰</li><li>è°ƒç”¨ <code>app.resolve(&lt;incoming request&gt;, matched)</code>ï¼ˆè¿™è¿è¡Œäº†é“¾å¼ä¸­é—´ä»¶ã€‚ï¼‰</li></ul><h3 id="ä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨-thruster" tabindex="-1">ä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨ Thruster <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨-thruster" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆä½ åº”è¯¥ä½¿ç”¨ Thruster&quot;">â€‹</a></h3><ul><li>éšæ„æ›´æ¢æ‚¨çš„åç«¯ã€‚Thruster ç°åœ¨å¯ä»¥ä¸ <strong>actix-web</strong>[12], <strong>hyper</strong>[13], æˆ– <strong>è‡ªå®šä¹‰åç«¯</strong>[14] ä¸€èµ·ä½¿ç”¨ã€‚</li><li>Thruster ä»æ¡†æ¶çº§åˆ«æ”¯æŒ <strong>æµ‹è¯•</strong>[15]ã€‚</li><li>@trezm å½“æ²¡æœ‰äººåš PR æˆ–æ‰“å¼€é—®é¢˜æ—¶ä¼šæ„Ÿåˆ°å­¤ç‹¬ã€‚</li><li>Thruster å¯¹äºæ›´ä»¥ä¸­é—´ä»¶ä¸ºä¸­å¿ƒçš„æ¦‚å¿µæ›´åŠ ç®€æ´â€”â€”åƒä¸€ä¸ªè·¯ç”±å®ˆå«ã€‚ä»¥è¿™ä¸ª actix çš„ç¤ºä¾‹ä¸ºä¾‹ï¼Œé™åˆ¶ IPï¼š</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> ip_guard</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">RequestHead</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ£€æŸ¥ Cloudflare çš„ IP å¤´</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> ip</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> head</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">headers</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">CF_IP_HEADER</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_str</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap_or</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">to_owned</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> head</span><span style="color:#ABB2BF;">.peer_addr {</span></span>
<span class="line"><span style="color:#E06C75;">        val</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    &quot;1.2.3.4&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">contains</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">ip</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[actix_web::post(</span><span style="color:#98C379;">&quot;/ping&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> ping</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">HttpResponse</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">UserPersonalError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpResponse</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;pong&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#E5C07B;">        web</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">scope</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/*&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // è¿™å¯èƒ½ä¼šä»¤äººå›°æƒ‘ï¼Œä½†æˆ‘ä»¬æ•æ‰åˆ°æ‰€æœ‰æ²¡æœ‰</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // IP å®ˆå«çš„è·¯ç”±å¹¶è¿”å›é”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">guard</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">guard</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Not</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ip_guard</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/*&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpResponse</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Forbidden</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">service</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ping</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>è¿™é‡Œæ˜¯ Thruster çš„ä»£ç ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> ip_guard</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#98C379;"> &quot;1.2.3.4&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">contains</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">headers</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Auth-Token&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap_or</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E06C75;">        context</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> next</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">unauthorized_error</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[middleware_fn]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> ping</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_next</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MiddlewareNext</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">MiddlewareResult</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Ctx</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">    context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;pong&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#E06C75;">    app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/ping&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">m!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ip_guard</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">plaintext</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æ›´ç›´æ¥ä¸€ç‚¹å¾ˆä¸é”™ï¼</p><h3 id="ä¸ºä»€ä¹ˆä½ ä¸åº”è¯¥ä½¿ç”¨-thruster" tabindex="-1">ä¸ºä»€ä¹ˆä½ ä¸åº”è¯¥ä½¿ç”¨ Thruster <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½ ä¸åº”è¯¥ä½¿ç”¨-thruster" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆä½ ä¸åº”è¯¥ä½¿ç”¨ Thruster&quot;">â€‹</a></h3><ul><li>å®ƒçš„ç»´æŠ¤è€…å¾ˆå°‘ï¼ˆå‡ ä¹åªæœ‰ä¸€ä¸ªã€‚ï¼‰</li><li>æœ‰å…¶ä»–é¡¹ç›®ç»è¿‡äº†æ›´å¤šçš„å®æˆ˜æµ‹è¯•ã€‚Thruster åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ï¼Œä½†ä¸æ˜¯åœ¨ä½ çŸ¥é“æˆ–é‡è¦çš„åœ°æ–¹ã€‚</li><li>å®ƒè¿˜æ²¡æœ‰è¢«éå¸¸èªæ˜çš„äººä¼˜åŒ–ã€‚@trezm å°½åŠ›è€Œä¸ºï¼Œä½†æ€»æ˜¯è¢«ä»–çš„ç‹—åˆ†æ•£æ³¨æ„åŠ›ã€‚</li><li>ä¸¥è‚ƒåœ°è¯´ï¼Œè¿™ä¸ªæ¡†æ¶ ~å¯èƒ½~ æ˜¯å¾ˆæ£’çš„ï¼Œä½†å®ƒè‚¯å®šæ²¡æœ‰åƒå…¶ä»–æ¡†æ¶é‚£æ ·è¢«æ·±å…¥æ¢ç´¢å’Œæµ‹è¯•ã€‚ä½ çš„å¸®åŠ©å¯ä»¥ä½¿å®ƒå˜å¾—æ›´å®‰å…¨ã€æ›´å¥å£®ï¼Œä½†æˆ‘ä»¬å¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨è¾¾åˆ°é‚£ä¸ªæ°´å¹³ã€‚</li></ul><h3 id="è·¯ç”±è§£æç®—æ³•" tabindex="-1">è·¯ç”±è§£æç®—æ³• <a class="header-anchor" href="#è·¯ç”±è§£æç®—æ³•" aria-label="Permalink to &quot;è·¯ç”±è§£æç®—æ³•&quot;">â€‹</a></h3><p>è·¯ç”±è§£æç®—æ³•åº”è¯¥æ˜¯ç›¸å½“æ¸…æ™°çš„ã€‚å®ƒçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><h4 id="æ„å»º" tabindex="-1">æ„å»º <a class="header-anchor" href="#æ„å»º" aria-label="Permalink to &quot;æ„å»º&quot;">â€‹</a></h4><ol><li>ç§»é™¤æŸ¥è¯¢å‚æ•°ï¼Œå°†å…¶é™„åŠ åˆ°è¯·æ±‚å¯¹è±¡ä¸Šï¼ˆæˆ–ç¨åå¯è®¿é—®çš„æŸå¤„ï¼‰</li><li>æŒ‰æ–œæ å°†è·¯ç”±æ‹†åˆ†ï¼Œç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªç»„ä»¶åˆ—è¡¨</li><li>å°†å…¶æ·»åŠ åˆ°æ ‘ä¸­ï¼Œå°† <code>*</code> å’Œ <code>:param</code> è§†ä¸ºé€šé…ç¬¦ ä¾‹å¦‚ï¼š<code>get(&quot;/a/b&quot;)</code> å’Œ <code>get(&quot;:id&quot;)</code> åº”è¯¥ç”Ÿæˆå¦‚ä¸‹æ ‘çŠ¶ç»“æ„</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>æ ¹èŠ‚ç‚¹ (/)</span></span>
<span class="line"><span>|\</span></span>
<span class="line"><span>| \</span></span>
<span class="line"><span>a  *  // é€šé…ç¬¦èŠ‚ç‚¹</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>b</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="è§£æ" tabindex="-1">è§£æ <a class="header-anchor" href="#è§£æ" aria-label="Permalink to &quot;è§£æ&quot;">â€‹</a></h4><ol><li><p>ä¸æ„å»ºæœŸé—´ç›¸åŒï¼Œæ‹†åˆ†ä¼ å…¥çš„è·¯ç”±</p></li><li><p>è®¾ç½® <code>current_node = æ ¹èŠ‚ç‚¹</code></p></li><li><p>å¦‚æœ <code>split.get(0)</code> ä¸å­˜åœ¨ï¼Œè§£æå®Œæˆï¼Œè¿”å›ç´¯ç§¯çš„ä¸­é—´ä»¶</p></li><li><p>æ£€æŸ¥ç¬¬ä¸€éƒ¨åˆ†ï¼ˆ<code>split.get(0)</code>ï¼‰æ˜¯å¦ä¸ <code>current_node</code> åŒ¹é…</p></li><li><ol><li>æ£€æŸ¥æ˜¯å¦æœ‰é€šé…ç¬¦èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰åˆ™ <code>current_node = current_node.wildcard</code></li><li>å¦‚æœæ²¡æœ‰é€šé…ç¬¦ï¼Œåˆ™è·¯ç”±æœªæ‰¾åˆ°ï¼Œè°ƒç”¨ 404 å¤„ç†å™¨</li><li>è®¾ç½® <code>current_node = å­èŠ‚ç‚¹</code></li><li>ç´¯ç§¯è¯¥èŠ‚ç‚¹é™„åŠ çš„ä»»ä½•ä¸­é—´ä»¶</li><li>å¦‚æœåŒ¹é…</li><li>å¦‚æœä¸åŒ¹é…</li></ol></li><li><p>ç§»é™¤æ‹†åˆ†åçš„ç¬¬ä¸€æ®µï¼ˆæˆ–å¢åŠ ç´¢å¼•ï¼‰</p></li><li><p>è¿”å›æ­¥éª¤ 3</p></li></ol><p>è¿™ä¸ªç®—æ³•ç¡®ä¿äº†è·¯ç”±è¯·æ±‚å¯ä»¥é«˜æ•ˆåœ°ä¸é¢„å®šä¹‰çš„è·¯ç”±æ ‘è¿›è¡ŒåŒ¹é…ï¼ŒåŒæ—¶å…è®¸ä½¿ç”¨é€šé…ç¬¦æ¥åŒ¹é…åŠ¨æ€è·¯å¾„æ®µã€‚é€šè¿‡ç´¯ç§¯ä¸­é—´ä»¶ï¼Œå®ƒè¿˜æ”¯æŒåœ¨è·¯ç”±å±‚çº§ç»“æ„ä¸­çš„ä¸åŒç‚¹æ·»åŠ å¤„ç†é€»è¾‘ã€‚å¦‚æœè·¯ç”±åŒ¹é…å¤±è´¥ï¼Œåˆ™è°ƒç”¨å®šä¹‰çš„ 404 é”™è¯¯å¤„ç†ç¨‹åºã€‚</p><h3 id="æŠ€æœ¯è·¯çº¿" tabindex="-1">æŠ€æœ¯è·¯çº¿ <a class="header-anchor" href="#æŠ€æœ¯è·¯çº¿" aria-label="Permalink to &quot;æŠ€æœ¯è·¯çº¿&quot;">â€‹</a></h3><h4 id="ç›®æ ‡" tabindex="-1">ç›®æ ‡ <a class="header-anchor" href="#ç›®æ ‡" aria-label="Permalink to &quot;ç›®æ ‡&quot;">â€‹</a></h4><ul><li>å¯é€‰çš„ä¾èµ–æ³¨å…¥</li><li>å¼‚æ­¥ Diesel/Diesel 2.0</li><li>æ”¹è¿›çš„ WebSocket æ”¯æŒ</li><li>æ”¹è¿›çš„ gRPC æ”¯æŒ</li></ul><h4 id="å»¶ä¼¸ç›®æ ‡" tabindex="-1">å»¶ä¼¸ç›®æ ‡ <a class="header-anchor" href="#å»¶ä¼¸ç›®æ ‡" aria-label="Permalink to &quot;å»¶ä¼¸ç›®æ ‡&quot;">â€‹</a></h4><ul><li>æ”¹è¿› Socket.IO æ”¯æŒ</li><li>æ˜“äºä½¿ç”¨çš„ Askama ä¸­é—´ä»¶</li><li>æ˜“äºä½¿ç”¨çš„å‰ç«¯åº“ï¼ˆå¦‚ Yewã€Leptos ç­‰ï¼‰</li></ul><h3 id="åŠ¨æœº-1" tabindex="-1">åŠ¨æœº <a class="header-anchor" href="#åŠ¨æœº-1" aria-label="Permalink to &quot;åŠ¨æœº&quot;">â€‹</a></h3><p>éš¾ä»¥ç½®ä¿¡ï¼Œæˆ‘å·²ç»åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šå·¥ä½œäº†è¿™ä¹ˆé•¿æ—¶é—´â€”â€”åˆ°ç°åœ¨å·²ç»äº”å¹´åŠäº†ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒç»å†äº†è®¸å¤šè¿­ä»£ï¼ŒAPI å‘ç”Ÿäº†å˜åŒ–ï¼Œåº•å±‚ç®—æ³•ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œä½†ç›®æ ‡å§‹ç»ˆä¸å˜ï¼›åˆ¶ä½œä¸€ä¸ªæ˜“äºä½¿ç”¨ã€æ€§èƒ½ä¼˜è¶Šçš„æ¡†æ¶ï¼Œå…·æœ‰åŒæ„çš„ä¸­é—´ä»¶/è¯·æ±‚å¤„ç†å™¨ã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œæˆ‘è®¤ä¸º Thruster å·²ç»åŸºæœ¬å®ç°äº†è¿™äº›ç›®æ ‡ã€‚</p><p>è¯è™½å¦‚æ­¤ï¼Œä¸€ä¸ªæ¡†æ¶ä¹‹æ‰€ä»¥æˆä¸ºä¸€ä¸ªæ¡†æ¶ï¼Œæ˜¯å› ä¸ºå®ƒæ‰€æ”¯æŒçš„ç”Ÿæ€ç³»ç»Ÿå’Œåº“ã€‚å¤šå¹´æ¥ï¼ŒThruster å·²ç»è¢«ç”¨äºè®¸å¤šä¸åŒçš„åº”ç”¨ç¨‹åºå’Œäº§å“ï¼Œä½†å®ƒç¼ºä¹ä¸€ä¸ªåšå®çš„æ‰©å±•/è§£å†³æ–¹æ¡ˆåŸºç¡€ï¼Œç”¨äºè§£å†³å¸¸è§é—®é¢˜å’Œç”¨ä¾‹ã€‚æˆ‘é‡å†™æ•°æ®åº“é›†æˆæˆ–é‡æ–°é›†æˆæ¨¡æ¿å¼•æ“çš„æ¬¡æ•°å·²ç»åˆ°äº†æˆ‘ç¡®ä¿¡æˆ‘å¯ä»¥åœ¨è’™çœ¼çš„æƒ…å†µä¸‹å®Œæˆå®ƒä»¬çš„åœ°æ­¥â€”â€”ä¸ºä»€ä¹ˆå®ƒä»¬ä¸ä½œä¸ºæ¡†æ¶çš„ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ç»„æˆéƒ¨åˆ†å­˜åœ¨å‘¢ï¼Ÿ</p><p>æ€»çš„æ¥è¯´ï¼ŒThruster éœ€è¦æ›´å¥½åœ°ã€æ›´å®¹æ˜“åœ°æ”¯æŒå¤§å¤šæ•°å¼€å‘äººå‘˜é¢ä¸´çš„å¸¸è§ç”¨ä¾‹ã€‚è¿™ä¸ªè·¯çº¿å›¾åº”è¯¥ä½œä¸ºä¸€ä¸ªè¿‘æœŸåˆ°ä¸­æœŸçš„é‡Œç¨‹ç¢‘æ¸…å•ï¼Œä»¥å®ç°æ›´å®¹æ˜“çš„é›†æˆå’Œå¯¹å¸¸è§å¼€å‘äººå‘˜ç”¨ä¾‹çš„æ›´å¥½æ”¯æŒã€‚</p><h3 id="ç›®æ ‡-1" tabindex="-1">ç›®æ ‡ <a class="header-anchor" href="#ç›®æ ‡-1" aria-label="Permalink to &quot;ç›®æ ‡&quot;">â€‹</a></h3><h4 id="åŒ…å«å¯é€‰çš„ä¾èµ–æ³¨å…¥-jab" tabindex="-1">åŒ…å«å¯é€‰çš„ä¾èµ–æ³¨å…¥ï¼ˆJabï¼‰ <a class="header-anchor" href="#åŒ…å«å¯é€‰çš„ä¾èµ–æ³¨å…¥-jab" aria-label="Permalink to &quot;åŒ…å«å¯é€‰çš„ä¾èµ–æ³¨å…¥ï¼ˆJabï¼‰&quot;">â€‹</a></h4><p>Thruster æ‹¥æœ‰ä¸€ä¸ªå¾ˆæ£’çš„æµ‹è¯•å¥—ä»¶â€”â€”å¯ä»¥è½»æ¾åœ°å¯¹ <code>App</code> è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ—¶è¿˜èƒ½é€æ­¥è°ƒè¯•ä»£ç ã€‚è¯è™½å¦‚æ­¤ï¼Œæ‹¥æœ‰å¤–éƒ¨ API é›†æˆå’Œä¾èµ–å¯èƒ½æ„å‘³ç€ä»£ç éœ€è¦ç¼–è¯‘æ—¶æ ‡å¿—ï¼Œä»¥ä¾¿å•å…ƒæµ‹è¯•ä¸ä¼šè°ƒç”¨å¤–éƒ¨æä¾›å•†ï¼ˆæˆ–æ‚¨æ¶æ„ä¸­çš„å…¶ä»–æœåŠ¡ï¼ï¼‰ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œå¾ˆä¹…ä»¥å‰ï¼ŒJabDI è¯ç”Ÿäº†ã€‚</p><p>å¯é€‰åŒ…å« Jab å°†å‡è½»è¿™æ–¹é¢çš„æ‹…å¿§ã€‚å¼€å‘äººå‘˜å°†èƒ½å¤Ÿåœ¨ä¸éœ€è¦ç¼–è¯‘æ—¶æ ‡å¿—çš„æƒ…å†µä¸‹ï¼Œä»¥å®‰å…¨ã€å¼ºç±»å‹çš„æ–¹å¼åŠ¨æ€äº¤æ¢æ¨¡å—çš„è™šæ‹Ÿç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚</p><h4 id="åŒ…å«å¯é€‰çš„-diesel-2-0-æ”¯æŒ" tabindex="-1">åŒ…å«å¯é€‰çš„ Diesel 2.0 æ”¯æŒ <a class="header-anchor" href="#åŒ…å«å¯é€‰çš„-diesel-2-0-æ”¯æŒ" aria-label="Permalink to &quot;åŒ…å«å¯é€‰çš„ Diesel 2.0 æ”¯æŒ&quot;">â€‹</a></h4><p>Diesel æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„ ORMï¼ŒçœŸçš„ã€‚å¤šå¹´æ¥ï¼Œæˆ‘æ„å»ºäº†ä¸€äº› <strong>ORM ç±»ä¼¼çš„åŒ…</strong>[16]ï¼Œä½†ä¸ Diesel ç›¸æ¯”ï¼Œå®ƒä»¬çš„èŒƒå›´å’Œèƒ½åŠ›éƒ½ç›¸å½¢è§ç»Œã€‚éšç€å¼‚æ­¥ Diesel åº“å’Œ Diesel 2.0 çš„å‡ºç°ï¼Œæ˜¯æ—¶å€™è®© Thruster åˆ¶ä½œä¸€ä¸ªæ˜“äºä½¿ç”¨çš„æ¨¡å—æˆ–ä¸€ç»„æ¨¡å—æ¥åŒ…å«å®ƒäº†ã€‚è¿™é‡Œçš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ–¹æ³•ï¼Œè½»æ¾åœ°å°† Diesel èå…¥æ–°çš„åŸºäº Thruster çš„é¡¹ç›®ä¸­ã€‚</p><h4 id="æ”¹è¿›-websocket-æ”¯æŒ" tabindex="-1">æ”¹è¿› WebSocket æ”¯æŒ <a class="header-anchor" href="#æ”¹è¿›-websocket-æ”¯æŒ" aria-label="Permalink to &quot;æ”¹è¿› WebSocket æ”¯æŒ&quot;">â€‹</a></h4><p>WebSocket å¯¹äº Thruster çš„åŒæ„ä¸­é—´ä»¶è®¾è®¡æ¥è¯´æ˜¯ä¸€ä¸ªç»ä½³çš„ç”¨ä¾‹ã€‚å®ƒä»¬ä¹Ÿæ˜¯ç°ä»£ Web ä¸­å®æ—¶å‘å¸ƒ/è®¢é˜…é€šä¿¡çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç›®å‰æœ‰ä¸€äº›å®éªŒæ€§çš„ crates ä¸º Thruster ä½¿ç”¨å®ƒä»¬ï¼Œä¾‹å¦‚ Socket.IO å®ç°ï¼Œä½†è¿˜æ²¡æœ‰ä¸€ä¸ªç®€å•æš´éœ²çš„ä»… WebSocket çš„å®ç°ã€‚</p><h4 id="æ”¹è¿›-grpc-æ”¯æŒ" tabindex="-1">æ”¹è¿› GRPC æ”¯æŒ <a class="header-anchor" href="#æ”¹è¿›-grpc-æ”¯æŒ" aria-label="Permalink to &quot;æ”¹è¿› GRPC æ”¯æŒ&quot;">â€‹</a></h4><p>GRPC å·²ç»å­˜åœ¨å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†ä»ç„¶åœ¨æ—¥ç›Šæµè¡Œã€‚å®ƒå¿«é€Ÿã€ç±»å‹å®‰å…¨ï¼Œå¹¶ä¸”åœ¨è®¸å¤šä¸åŒçš„å¹³å°ä¸Šéƒ½æœ‰å®ç°ã€‚å½“å‰çš„ GRPC æ”¯æŒåœ¨ <strong>thruster-grpc</strong>[17] ä¸­ï¼Œéœ€è¦ä¸€äº›æ”¹è¿›ï¼Œä»¥ä½¿å…¶æ›´å¿«ã€æ›´æ˜“äºä½¿ç”¨ã€‚</p><h3 id="å»¶ä¼¸ç›®æ ‡-1" tabindex="-1">å»¶ä¼¸ç›®æ ‡ <a class="header-anchor" href="#å»¶ä¼¸ç›®æ ‡-1" aria-label="Permalink to &quot;å»¶ä¼¸ç›®æ ‡&quot;">â€‹</a></h3><h4 id="æ”¹è¿›-socket-io-æ”¯æŒ" tabindex="-1">æ”¹è¿› Socket.IO æ”¯æŒ <a class="header-anchor" href="#æ”¹è¿›-socket-io-æ”¯æŒ" aria-label="Permalink to &quot;æ”¹è¿› Socket.IO æ”¯æŒ&quot;">â€‹</a></h4><p>è‡³å°‘æœ‰ä¸¤ä¸ªç”Ÿäº§çº§åˆ«çš„æœåŠ¡æ­£åœ¨ç§¯æä½¿ç”¨ <strong>socket.io</strong>[18] åº“ï¼Œä½†è¯¥åº“æœ¬èº«å¹¶ä¸æ”¯æŒ Socket.IO çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼Œå¦‚è½®è¯¢å›é€€ã€‚å®ƒä½œä¸ºä¸€ä¸ªæ¦‚å¿µéªŒè¯éå¸¸å¼ºå¤§ï¼Œä½†ç†æƒ³çš„æƒ…å†µæ˜¯åˆ¶ä½œä¸€ä¸ªæ›´å®Œæ•´çš„ã€ç¬¦åˆè§„èŒƒçš„å®ç°ã€‚</p><p>ä»£ç æœ¬èº«ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œåº”è¯¥è¿›è¡Œæ¸…ç†ã€‚</p><h4 id="åŒ…å«å¯é€‰çš„-askama-æ”¯æŒ" tabindex="-1">åŒ…å«å¯é€‰çš„ Askama æ”¯æŒ <a class="header-anchor" href="#åŒ…å«å¯é€‰çš„-askama-æ”¯æŒ" aria-label="Permalink to &quot;åŒ…å«å¯é€‰çš„ Askama æ”¯æŒ&quot;">â€‹</a></h4><p>Askama æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„åŸºäº Jinja çš„æ¨¡æ¿åº“ã€‚å®ƒå¿«é€Ÿï¼ŒAPI å¾ˆæ£’ã€‚Thruster åº”è¯¥æœ‰ä¸€ä¸ªå†…ç½®çš„æˆ–æ˜“äºä½¿ç”¨çš„æ¨¡å—ï¼Œç”¨äºåŒ…å« Askamaï¼Œè€Œä¸éœ€è¦é‡å†™æ ·æ¿ä»£ç ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªç‰¹å®šçš„ Askama ä¸­é—´ä»¶ï¼Œå¯ä»¥è½»æ¾åœ°æ·»åŠ åˆ°ä»»ä½• Thruster åº”ç”¨ç¨‹åºä¸­ã€‚</p><h4 id="åŒ…å«å‰ç«¯åŠ¨æ€æ¸²æŸ“åº“" tabindex="-1">åŒ…å«å‰ç«¯åŠ¨æ€æ¸²æŸ“åº“ <a class="header-anchor" href="#åŒ…å«å‰ç«¯åŠ¨æ€æ¸²æŸ“åº“" aria-label="Permalink to &quot;åŒ…å«å‰ç«¯åŠ¨æ€æ¸²æŸ“åº“&quot;">â€‹</a></h4><p>é™¤äº† Askama æä¾›æœåŠ¡å™¨ç«¯æ¸²æŸ“ä¹‹å¤–ï¼Œæ”¯æŒåƒ <strong>Yew</strong>[19] æˆ– <strong>Leptos</strong>[20] è¿™æ ·çš„å‰ç«¯åº“ä¹Ÿå°†æ˜¯æå¥½çš„ã€‚å¯¹äºé‚£äº›å¸Œæœ›å®ç°æ›´ &quot;express-like&quot; ç”Ÿæ€ç³»ç»Ÿçš„äººæ¥è¯´ï¼Œè¿™æ˜¯ç†æƒ³çš„ï¼Œä»–ä»¬å¯ä»¥è½»æ¾åœ°åœ¨æ•´ä¸ªæ ˆä¸­ä½¿ç”¨ä¸€ç§è¯­è¨€ï¼Œè€Œä¸å¿…æ‹…å¿ƒï¼ˆå¤ªå¤šï¼‰ç¼–è¯‘æ­¥éª¤ã€CDN å’Œ CORSã€‚</p><h3 id="æ€»ç»“-3" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-3" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>å¦‚æœä½ è¯»åˆ°è¿™é‡Œï¼Œé‚£æˆ‘å¾ˆä½©æœï¼æˆ‘è‡ªå·±å¯èƒ½ä¸ä¼šå®Œæ•´åœ°é˜…è¯»æ•´ç¯‡æ–‡ç« â€”â€”æˆ‘å¯èƒ½ä¼šè·³è¿‡é¡¶éƒ¨çš„é¡¹ç›®ç¬¦å·ç„¶åç»§ç»­ã€‚è¿™ä¸ªå¤§çº²å°†ä¸ºæˆ‘è‡ªå·±ï¼ˆä»¥åŠä»»ä½•å…¶ä»–æ„¿æ„è´¡çŒ®çš„äººï¼ï¼‰æä¾›æ˜å¹´çš„å¤§é‡å·¥ä½œã€‚å¦‚æœæˆ‘é—æ¼äº†ä½ è®¤ä¸ºéœ€è¦çš„åŠŸèƒ½ï¼Œè¯·éšæ—¶æå‡ºé—®é¢˜ã€‚æ¬¢è¿ä»»ä½•å½¢å¼çš„æ–°è´¡çŒ®ï¼Œå³ä½¿æ˜¯ä¿®å¤ä¸€ä¸ªé”™åˆ«å­—ã€‚</p><p>ç¥ä½ æœ‰ä¸€ä¸ªå¥½çš„ä¸€å¹´ï¼Œå¹¶å»ºé€ ä¸€äº›å¾ˆé…·çš„ä¸œè¥¿ï¼Œæˆ‘çš„æœ‹å‹ä»¬ã€‚</p><h3 id="å‚è€ƒèµ„æ–™-1" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-1" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><p>[1] è€ƒè™‘åˆ°å¼‚æ­¥/ç­‰å¾…çš„æ„å»º: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/profiling.rs#L11" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/profiling.rs#L11</a></em></p><p>[2] ä¸ Hyper å…¼å®¹: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hyper_most_basic.rs" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hyper_most_basic.rs</a></em></p><p>[3] æ”¯æŒ SSL: <em><a href="https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/hyper_most_basic_ssl" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/hyper_most_basic_ssl</a></em></p><p>[4] å¯æµ‹è¯•: <em>#æµ‹è¯•</em></p><p>[5] é™æ€æ–‡ä»¶æœåŠ¡: <em><a href="https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/static_file" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/static_file</a></em></p><p>[6] SocketIO: <em><a href="https://github.com/thruster-rs/thruster-socketio" target="_blank" rel="noreferrer">https://github.com/thruster-rs/thruster-socketio</a></em></p><p>[7] gRPC: <em><a href="https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/grpc" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/tree/master/thruster/examples/grpc</a></em></p><p>[8] é Tonic åŸºç¡€çš„ gRPC: <em><a href="https://github.com/thruster-rs/thruster-grpc" target="_blank" rel="noreferrer">https://github.com/thruster-rs/thruster-grpc</a></em></p><p>[9] ä¾èµ–æ³¨å…¥: <em><a href="https://github.com/thruster-rs/thruster-jab" target="_blank" rel="noreferrer">https://github.com/thruster-rs/thruster-jab</a></em></p><p>[10] <a href="http://localhost:4321/:" target="_blank" rel="noreferrer">http://localhost:4321/:</a> _<a href="http://localhost:4321/_" target="_blank" rel="noreferrer">http://localhost:4321/_</a></p><p>[11] query_params ä¸­é—´ä»¶: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/src/middleware/query_params.rs" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/src/middleware/query_params.rs</a></em></p><p>[12] actix-web: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/actix_most_basic.rs" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/actix_most_basic.rs</a></em></p><p>[13] hyper: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hyper_most_basic.rs" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hyper_most_basic.rs</a></em></p><p>[14] è‡ªå®šä¹‰åç«¯: <em><a href="https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hello_world.rs" target="_blank" rel="noreferrer">https://github.com/thruster-rs/Thruster/blob/master/thruster/examples/hello_world.rs</a></em></p><p>[15] æµ‹è¯•: <em>#æµ‹è¯•</em></p><p>[16] ORM ç±»ä¼¼çš„åŒ…: <a href="https://github.com/trezm/usual" target="_blank" rel="noreferrer">https://github.com/trezm/usual</a></p><p>[17] thruster-grpc: <a href="https://github.com/thruster-rs/thruster-grpc" target="_blank" rel="noreferrer">https://github.com/thruster-rs/thruster-grpc</a></p><p>[18] socket.io: <a href="https://github.com/thruster-rs/thruster-socketio" target="_blank" rel="noreferrer">https://github.com/thruster-rs/thruster-socketio</a></p><p>[19] Yew: <a href="https://github.com/yewstack/yew" target="_blank" rel="noreferrer">https://github.com/yewstack/yew</a></p><p>[20] Leptos: <a href="https://github.com/leptos-rs/leptos" target="_blank" rel="noreferrer">https://github.com/leptos-rs/leptos</a></p><h2 id="salvo-èµ›é£-rust-web-åç«¯æ¡†æ¶-æ ¸å¿ƒåŠŸèƒ½è¯¦è§£" tabindex="-1">Salvo(èµ›é£)ï¼šRust Web åç«¯æ¡†æ¶ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£ <a class="header-anchor" href="#salvo-èµ›é£-rust-web-åç«¯æ¡†æ¶-æ ¸å¿ƒåŠŸèƒ½è¯¦è§£" aria-label="Permalink to &quot;Salvo(èµ›é£)ï¼šRust Web åç«¯æ¡†æ¶ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£&quot;">â€‹</a></h2><p>Salvo(èµ›é£) æ˜¯ä¸€ä¸ªæå…¶ç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„ Rust Web åç«¯æ¡†æ¶. ä»…ä»…éœ€è¦åŸºç¡€ Rust çŸ¥è¯†å³å¯å¼€å‘åç«¯æœåŠ¡ã€‚</p><p>ç‰¹è‰²ï¼š</p><ul><li>æœ‰ç€æ¯” axum ç­‰æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†å´æ›´æ˜“äºä¸Šæ‰‹ã€‚</li><li>è·Ÿ go ç­‰å…¶ä»–è¯­è¨€æ¡†æ¶æ›´æ¥è¿‘ï¼Œæ¯” Rust è¯­è¨€å„ä¸ª Web æ¡†æ¶æ›´å°‘çš„ç±»å‹ç³»ç»Ÿçš„çƒ¦æ¼ã€‚</li><li>æ”¯æŒ HTTP1, HTTP2 and HTTP3;</li><li>ç»Ÿä¸€çš„ä¸­é—´ä»¶å’Œ Handler æ¥å£ï¼Œæ— éœ€ä»»ä½•å¤æ‚è¯­è¨€åªæ˜¯ï¼Œè½»æ¾å®ç°ä¸­é—´ä»¶ã€‚çµæ´»é«˜æ•ˆã€‚</li><li>å†…ç½®è¡¨å•å¤„ç†ï¼Œå¼ºå¤§çš„æå–å™¨ï¼Œè½»æ¾ååºåˆ—è¯·æ±‚æ•°æ®åˆ°ç»“æ„ä½“ã€‚</li><li>æ”¯æŒ WebSocket, WebTransport</li><li>å¯¹ OpenAPI æœ€å®Œç¾çš„æ”¯æŒï¼Œä¸”å†…ç½®å¤šç§å¼€æº OpenAPI å±•ç¤ºç•Œé¢</li><li>æ”¯æŒ Acmeï¼Œ å¯ä»¥è½»æ¾è·å–å¹¶è‡ªåŠ¨æ›´æ–°å…è´¹çš„ TLS è¯ä¹¦</li><li>é€‚é… Tower ç”Ÿæ€</li></ul><p>æ–‡ç« æ•™ç¨‹ï¼š<a href="https://mp.weixin.qq.com/s/qK3gua-3IqhSGiwWpXnNAw" target="_blank" rel="noreferrer">Salvo(èµ›é£) Rust Web åç«¯æ¡†æ¶ æ ¸å¿ƒåŠŸèƒ½æ•™ç¨‹è¯¦è§£ (qq.com)</a></p><h3 id="å‚è€ƒèµ„æ–™-2" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-2" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><p>[1] Hyper1ï¼š<a href="https://crates.io/crates/hyper" target="_blank" rel="noreferrer">https://crates.io/crates/hyper</a></p><p>[2] Tokioï¼š<a href="https://crates.io/crates/tokio" target="_blank" rel="noreferrer">https://crates.io/crates/tokio</a></p><p>[3] let&#39;s encryptï¼š<a href="https://letsencrypt.org/" target="_blank" rel="noreferrer">https://letsencrypt.org/</a></p><p>[4] å®ä¾‹ä»£ç ï¼š<a href="https://github.com/salvo-rs/salvo/tree/main/examples" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo/tree/main/examples</a></p><p>[5] å®˜ç½‘ï¼š<a href="https://salvo.rs" target="_blank" rel="noreferrer">https://salvo.rs</a></p><p>[6] salvo-cliï¼š<a href="https://github.com/salvo-rs/salvo-cli" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo-cli</a></p><p>[7] å®Œæ•´æºç ï¼š<a href="https://github.com/salvo-rs/salvo/blob/main/examples/middleware-add-header/src/main.rs" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo/blob/main/examples/middleware-add-header/src/main.rs</a></p><p>[8] å®Œæ•´æºç ï¼š<a href="https://github.com/salvo-rs/salvo/blob/main/examples/routing-guid/src/main.rs" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo/blob/main/examples/routing-guid/src/main.rs</a></p><p>[9] å®Œæ•´æºç ï¼š<a href="https://github.com/salvo-rs/salvo/blob/main/examples/extract-nested/src/main.rs" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo/blob/main/examples/extract-nested/src/main.rs</a></p><p>[10] MultiMapï¼š<a href="https://docs.rs/multimap/latest/multimap/struct.MultiMap.html" target="_blank" rel="noreferrer">https://docs.rs/multimap/latest/multimap/struct.MultiMap.html</a></p><p>[11] extract-nestedï¼š<a href="https://github.com/salvo-rs/salvo/blob/main/examples/extract-nested/src/main.rs" target="_blank" rel="noreferrer">https://github.com/salvo-rs/salvo/blob/main/examples/extract-nested/src/main.rs</a></p><p>[12] code rustï¼š<code>../../../../codes/custom-error-page/src/main.rs</code></p><p>[13] code tomlï¼š<code>../../../../codes/custom-error-page/Cargo.toml</code></p><p>[14] code rustï¼š<code>../../../../codes/use-depot/src/main.rs</code></p><p>[15] code tomlï¼š<code>../../../../codes/use-depot/Cargo.toml</code></p><p>[16] æœ€æ–°æ–‡æ¡£ï¼š<a href="https://docs.rs/salvo_core/latest/salvo_core/test/index.html" target="_blank" rel="noreferrer">https://docs.rs/salvo_core/latest/salvo_core/test/index.html</a></p><h2 id="warp-æ¡†æ¶-æ„å»ºé«˜æ•ˆ-web-æœåŠ¡çš„æ–°é€‰æ‹©" tabindex="-1">Warp æ¡†æ¶ï¼šæ„å»ºé«˜æ•ˆ Web æœåŠ¡çš„æ–°é€‰æ‹© <a class="header-anchor" href="#warp-æ¡†æ¶-æ„å»ºé«˜æ•ˆ-web-æœåŠ¡çš„æ–°é€‰æ‹©" aria-label="Permalink to &quot;Warp æ¡†æ¶ï¼šæ„å»ºé«˜æ•ˆ Web æœåŠ¡çš„æ–°é€‰æ‹©&quot;">â€‹</a></h2><blockquote><p>â</p><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæ€§èƒ½å’Œå®‰å…¨æ€§æ˜¯ä¸¤ä¸ªè‡³å…³é‡è¦çš„å› ç´ ã€‚Rust è¯­è¨€ä»¥å…¶å†…å­˜å®‰å…¨å’Œå¹¶å‘æ€§èƒ½è€Œé—»åï¼Œè€Œ Warp æ¡†æ¶åˆ™æ˜¯ Rust ç”Ÿæ€ä¸­ä¸€ä¸ªé«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨æ¡†æ¶ã€‚æœ¬æ–‡å°†ä»‹ç» Warp æ¡†æ¶çš„åŸºæœ¬æ¦‚å¿µã€ç‰¹æ€§ä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ„å»ºé«˜æ•ˆçš„ Web æœåŠ¡ã€‚</p><p>â</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯-warp" tabindex="-1">ä»€ä¹ˆæ˜¯ Warpï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-warp" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Warpï¼Ÿ&quot;">â€‹</a></h3><p><code>Warp</code> æ˜¯ä¸€ä¸ªåŸºäº Rust è¯­è¨€çš„ Web æœåŠ¡å™¨æ¡†æ¶ï¼Œå®ƒå»ºç«‹åœ¨ Hyper åº“ä¹‹ä¸Šï¼Œå› æ­¤å¤©ç”Ÿæ”¯æŒå¼‚æ­¥å¤„ç†ã€HTTP/2 åè®®ï¼Œä»¥åŠæä¾›â€œæ­£ç¡®çš„ HTTP å®ç°â€ã€‚Warp çš„è®¾è®¡å“²å­¦æ˜¯ç®€å•æ˜“ç”¨å’Œé«˜åº¦å¯ç»„åˆï¼Œå®ƒé€šè¿‡ä¸€ä¸ªå¼ºå¤§çš„ Filter ç³»ç»Ÿï¼Œæä¾›äº†çµæ´»çš„ HTTP å¤„ç†æ–¹å¼ã€‚</p><h3 id="warp-çš„æ ¸å¿ƒç‰¹æ€§" tabindex="-1">Warp çš„æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#warp-çš„æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;Warp çš„æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><ol><li><strong>ã€Œå¼‚æ­¥æ”¯æŒã€</strong>ï¼šWarp åŸºäº Tokio è¿è¡Œæ—¶ï¼Œå¯ä»¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œè¿™ä½¿å¾—å®ƒåœ¨å¤„ç†é«˜å¹¶å‘è¯·æ±‚æ—¶è¡¨ç°å‡ºè‰²ã€‚</li><li><strong>ã€ŒHTTP/2 æ”¯æŒã€</strong>ï¼šWarp æ”¯æŒ HTTP/2ï¼Œè¿™æ„å‘³ç€æ›´å¿«çš„æ•°æ®ä¼ è¾“å’Œæ›´ä¼˜çš„ç”¨æˆ·ä½“éªŒã€‚</li><li><strong>ã€ŒFilter ç³»ç»Ÿã€</strong>ï¼šWarp çš„ Filter ç³»ç»Ÿå…è®¸å¼€å‘è€…ä»¥å£°æ˜å¼çš„æ–¹å¼æ„å»ºè·¯ç”±å’Œä¸­é—´ä»¶é€»è¾‘ï¼Œè¿™æå¤§åœ°æé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</li><li><strong>ã€Œå®‰å…¨æ€§ã€</strong>ï¼šRust è¯­è¨€çš„è®¾è®¡ä¿è¯äº†å†…å­˜å®‰å…¨ï¼ŒWarp æ¡†æ¶ä¹Ÿç»§æ‰¿äº†è¿™ä¸€ç‰¹æ€§ï¼Œæä¾›äº†å®‰å…¨çš„ Web æœåŠ¡æ„å»ºä¿éšœã€‚</li></ol><p>Warp çš„æ ¸å¿ƒæ„ä»¶æ˜¯â€œè¿‡æ»¤å™¨â€(Filter)ï¼Œå®ƒä»¬èƒ½å¤Ÿçµæ´»ç»„åˆï¼Œä»¥ç²¾å‡†å®šä¹‰å¯¹è¯·æ±‚çš„å„é¡¹è¦æ±‚ã€‚</p><p>å€ŸåŠ©å…¶å†…ç½®çš„è¿‡æ»¤å™¨ç³»ç»Ÿï¼Œ<code>Warp</code> æ¡†æ¶æä¾›äº†ä»¥ä¸‹å†…ç½®åŠŸèƒ½ï¼š</p><ul><li>è·¯å¾„è·¯ç”±ä¸å‚æ•°æŠ½å–</li><li>è¯·æ±‚å¤´è¦æ±‚ä¸æŠ½å–</li><li>æŸ¥è¯¢å­—ç¬¦ä¸²çš„ååºåˆ—åŒ–</li><li><code>JSON</code> å’Œè¡¨å•æ•°æ®çš„å¤„ç†</li><li>å¤šéƒ¨åˆ†è¡¨å•æ•°æ®å¤„ç†</li><li>é™æ€æ–‡ä»¶ä¸ç›®å½•çš„å¿«é€Ÿè®¿é—®</li><li><code>WebSockets</code> æ”¯æŒ</li><li>è®¿é—®æ—¥å¿—è®°å½•</li><li>æ”¯æŒ <code>Gzip</code>ã€<code>Deflate</code> ä¸ <code>Brotli</code> å‹ç¼©ç®—æ³•</li><li>Warp æ¡†æ¶æ„å»ºäº Hyper åº“ä¹‹ä¸Šï¼Œå› æ­¤å®ƒå¤©ç”Ÿå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</li><li>æ”¯æŒ HTTP/1 å’Œ HTTP/2 åè®®</li><li>å¼‚æ­¥å¤„ç†èƒ½åŠ›</li><li>ä½œä¸ºæœ€å¿«é€Ÿçš„ HTTP å®ç°ä¹‹ä¸€</li><li>ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œç¡®ä¿æ­£ç¡®æ€§</li><li>Warp æ¡†æ¶ä»¥å…¶ç®€æ´ã€é«˜æ•ˆå’Œå¼ºå¤§çš„åŠŸèƒ½é›†ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¿«é€Ÿæ„å»ºé«˜æ€§èƒ½ Web æœåŠ¡çš„ç†æƒ³é€‰æ‹©ã€‚</li></ul><h3 id="å®‰è£…ä¸ä½¿ç”¨" tabindex="-1">å®‰è£…ä¸ä½¿ç”¨ <a class="header-anchor" href="#å®‰è£…ä¸ä½¿ç”¨" aria-label="Permalink to &quot;å®‰è£…ä¸ä½¿ç”¨&quot;">â€‹</a></h3><p>åœ¨ Rust é¡¹ç›®ä¸­å®‰è£… Warp éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨<code>Cargo.toml</code>æ–‡ä»¶ä¸­æ·»åŠ  Warp ä½œä¸ºä¾èµ–å³å¯ã€‚ä¾‹å¦‚ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">tokio</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">version</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">features</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;full&quot;</span><span style="color:#ABB2BF;">] }</span></span>
<span class="line"><span style="color:#E06C75;">warp</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.3&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¹‹åï¼Œå¯ä»¥é€šè¿‡ç»„åˆä¸åŒçš„ Filter æ¥å®šä¹‰è·¯ç”±å’Œå¤„ç†è¯·æ±‚ã€‚ä¸€ä¸ªåŸºæœ¬çš„â€œHello, Worldâ€ç¤ºä¾‹å¯ä»¥è¿™æ ·å®ç°ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> hello</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;"> / </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello, {}!&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">serve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(([</span><span style="color:#D19A66;">127</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">3030</span><span style="color:#ABB2BF;">)).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é€šè¿‡è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œé€šè¿‡è®¿é—®<code>http://127.0.0.1:3030/hello/warp</code>æ¥æµ‹è¯•â€œHello, Worldâ€æœåŠ¡ã€‚</p><h3 id="è¿‡æ»¤å™¨" tabindex="-1">è¿‡æ»¤å™¨ <a class="header-anchor" href="#è¿‡æ»¤å™¨" aria-label="Permalink to &quot;è¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>åœ¨ Warp ä¸­ï¼Œä¸»è¦æ¦‚å¿µæ˜¯â€œè¿‡æ»¤å™¨â€ï¼ˆFilterï¼‰ï¼Œå®ƒå…è®¸ç»„åˆå¤šä¸ªæ¡ä»¶æ¥æè¿°æ‚¨çš„ Web æœåŠ¡ä¸­çš„å„ç§ç«¯ç‚¹ã€‚é™¤äº†è¿™ä¸€å¼ºå¤§çš„ç‰¹æ€§ï¼ŒWarp è¿˜è‡ªå¸¦äº†å¤šä¸ªå†…ç½®çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚è¿›è¡Œç»„åˆã€‚</p><p>ä»¥ä¸€ä¸ªå…·æœ‰è·¯å¾„å’Œå¤´éƒ¨è¦æ±‚çš„ç«¯ç‚¹ä¸ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> hi</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">param</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;user-agent&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">param</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">agent</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello {}, whose agent is {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">param</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">agent</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¿™ä¸ªä¾‹å­ä½¿ç”¨<code>and</code>æ–¹æ³•å°†å¤šä¸ªè¿‡æ»¤å™¨ç»„åˆåœ¨ä¸€èµ·ï¼š</p><ul><li>â€œhelloâ€ä½œä¸ºè·¯å¾„å‰ç¼€</li><li>ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è·¯å¾„å‚æ•°</li><li>è§£æä¸ºå­—ç¬¦ä¸²çš„<code>user-agent</code>è¯·æ±‚å¤´</li></ul><p>è¿™äº›ç‰¹å®šçš„è¿‡æ»¤å™¨ä¼šæ‹’ç»ä¸ç¬¦åˆå®ƒä»¬è¦æ±‚çš„è¯·æ±‚ã€‚</p><p>æœ€ç»ˆï¼Œå®ƒä¼šåŒ¹é…å¦‚ä¸‹è¯·æ±‚ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">GET</span><span style="color:#98C379;"> /hello/sean</span><span style="color:#98C379;"> HTTP/1.1</span></span>
<span class="line"><span style="color:#61AFEF;">Host:</span><span style="color:#98C379;"> hyper.rs</span></span>
<span class="line"><span style="color:#61AFEF;">User-Agent:</span><span style="color:#98C379;"> reqwest/v0.8.6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¹¶è¿”å›ç±»ä¼¼è¿™æ ·çš„å“åº”ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">HTTP/1.1</span><span style="color:#D19A66;"> 200</span><span style="color:#98C379;"> OK</span></span>
<span class="line"><span style="color:#61AFEF;">Content-Length:</span><span style="color:#D19A66;"> 41</span></span>
<span class="line"><span style="color:#61AFEF;">Date:</span><span style="color:#98C379;"> ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">Hello</span><span style="color:#98C379;"> sean,</span><span style="color:#98C379;"> whose</span><span style="color:#98C379;"> agent</span><span style="color:#98C379;"> is</span><span style="color:#98C379;"> reqwest/v0.8.6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æŸ¥çœ‹å®Œæ•´çš„è¿‡æ»¤å™¨åˆ—è¡¨ï¼Œäº†è§£æ‚¨å¯ä»¥æ„å»ºçš„åŠŸèƒ½ã€‚</p><p>æµ‹è¯• è½»æ¾æµ‹è¯•æ‚¨çš„ Web æœåŠ¡æå…¶é‡è¦ï¼ŒWarp æä¾›äº†ä¸€ä¸ªæµ‹è¯•æ¨¡å—ï¼Œå¸®åŠ©æ‚¨é€šè¿‡æœåŠ¡å‘é€æ¨¡æ‹Ÿè¯·æ±‚ã€‚</p><p>æ¨¡å—</p><ul><li><code>filters</code>ï¼šå†…ç½®çš„è¿‡æ»¤å™¨ã€‚</li><li><code>redirect</code>ï¼šå°†è¯·æ±‚é‡å®šå‘åˆ°æ–°ä½ç½®ã€‚</li><li><code>reject</code>ï¼šæ‹’ç»è¯·æ±‚ã€‚</li><li><code>reply</code>ï¼šå“åº”è¯·æ±‚ã€‚</li><li><code>test</code>ï¼šæµ‹è¯•å·¥å…·ï¼Œç”¨äºæµ‹è¯•æ‚¨çš„è¿‡æ»¤å™¨ã€‚</li></ul><p>å®</p><ul><li><code>path</code>ï¼šæ–¹ä¾¿åœ°ç»„åˆå¤šä¸ªè·¯å¾„è¿‡æ»¤å™¨ã€‚</li></ul><p>ç»“æ„ä½“</p><ul><li><code>Error</code>ï¼šWarp å†…éƒ¨å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</li><li><code>Server</code>ï¼šå‡†å¤‡å°±ç»ªçš„ Warp æœåŠ¡å™¨ï¼Œç”¨äºè¿‡æ»¤è¯·æ±‚ã€‚</li><li><code>TlsServer</code>ï¼šå‡†å¤‡å°±ç»ªçš„ Warp æœåŠ¡å™¨ï¼Œç”¨äºé€šè¿‡ TLS è¿‡æ»¤è¯·æ±‚ã€‚</li></ul><p>ç‰¹å¾</p><ul><li><code>Filter</code>ï¼šå¯ç»„åˆçš„è¯·æ±‚è¿‡æ»¤å™¨ã€‚</li></ul><p>å‡½æ•°</p><ul><li><code>serve</code>ï¼šä½¿ç”¨æä¾›çš„è¿‡æ»¤å™¨åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ã€‚</li><li><code>service</code>ï¼šå°†è¿‡æ»¤å™¨è½¬æ¢ä¸ºæœåŠ¡ã€‚</li><li><code>wrap_fn</code>ï¼šå°†æ¥æ”¶åˆ°çš„è¿‡æ»¤å™¨ä¸å‰ç½®å’Œåç½®è¿‡æ»¤å™¨ç»„åˆã€‚</li></ul><h3 id="æ¨¡å—" tabindex="-1">æ¨¡å— <a class="header-anchor" href="#æ¨¡å—" aria-label="Permalink to &quot;æ¨¡å—&quot;">â€‹</a></h3><p><code>warp::filters</code> ä¸»è¦ä½œä¸ºæ–‡æ¡£å­˜åœ¨ï¼Œç”¨äºæ±‡æ€»å†…ç½®è¿‡æ»¤å™¨çš„åˆ—è¡¨ã€‚è¿™äº›è¿‡æ»¤å™¨å¤§å¤šæ•°åœ¨æ›´æ–¹ä¾¿çš„è·¯å¾„ä¸Šå¯ç”¨ã€‚</p><h4 id="æ¨¡å—æ¦‚è§ˆ" tabindex="-1">æ¨¡å—æ¦‚è§ˆ <a class="header-anchor" href="#æ¨¡å—æ¦‚è§ˆ" aria-label="Permalink to &quot;æ¨¡å—æ¦‚è§ˆ&quot;">â€‹</a></h4><ul><li><strong>ã€Œaddrã€</strong>ï¼šç”¨äºå¤„ç† Socket åœ°å€çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œanyã€</strong>ï¼šä¸€ä¸ªåŒ¹é…ä»»ä½•è·¯ç”±çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œbodyã€</strong>ï¼šå¤„ç†è¯·æ±‚ä½“çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œcompressionã€</strong>ï¼šå‹ç¼©è¿‡æ»¤å™¨ï¼Œç”¨äºå‹ç¼©å“åº”ä½“ã€‚</li><li><strong>ã€Œcookieã€</strong>ï¼šå¤„ç† HTTP è¯·æ±‚ä¸­ Cookie çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œcorsã€</strong>ï¼šè·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰è¿‡æ»¤å™¨ï¼Œç”¨äºå¤„ç†è·¨åŸŸè¯·æ±‚ã€‚</li><li><strong>ã€Œextã€</strong>ï¼šè¯·æ±‚æ‰©å±•è¿‡æ»¤å™¨ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚çš„æ‰©å±•éƒ¨åˆ†ã€‚</li><li><strong>ã€Œfsã€</strong>ï¼šæ–‡ä»¶ç³»ç»Ÿè¿‡æ»¤å™¨ï¼Œç”¨äºè¯»å–æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€‚</li><li><strong>ã€Œheaderã€</strong>ï¼šå¤„ç† HTTP è¯·æ±‚å¤´çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œhostã€</strong>ï¼šå¤„ç† HTTP è¯·æ±‚ä¸­çš„â€œä¸»æœºâ€ï¼ˆauthorityï¼‰éƒ¨åˆ†çš„è¿‡æ»¤å™¨ã€‚</li><li><strong>ã€Œlogã€</strong>ï¼šæ—¥å¿—è®°å½•è¿‡æ»¤å™¨ï¼Œç”¨äºè®°å½•è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—ã€‚</li><li><strong>ã€Œmethodã€</strong>ï¼šHTTP æ–¹æ³•è¿‡æ»¤å™¨ï¼Œæ ¹æ® HTTP è¯·æ±‚æ–¹æ³•è¿›è¡ŒåŒ¹é…ã€‚</li><li><strong>ã€Œmultipartã€</strong>ï¼šå¤šéƒ¨åˆ†è¯·æ±‚ä½“è¿‡æ»¤å™¨ï¼Œç”¨äºå¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ã€‚</li><li><strong>ã€Œpathã€</strong>ï¼šè·¯å¾„è¿‡æ»¤å™¨ï¼Œç”¨äºåŒ¹é… URL è·¯å¾„å¹¶æå–è·¯å¾„å‚æ•°ã€‚</li><li><strong>ã€Œqueryã€</strong>ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²è¿‡æ»¤å™¨ï¼Œç”¨äºè§£æå’Œå¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</li><li><strong>ã€Œreplyã€</strong>ï¼šå“åº”è¿‡æ»¤å™¨ï¼Œç”¨äºæ„é€  HTTP å“åº”ã€‚</li><li><strong>ã€Œsseã€</strong>ï¼šæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰è¿‡æ»¤å™¨ï¼Œç”¨äºåˆ›å»º SSE è¿æ¥ã€‚</li><li><strong>ã€Œtraceã€</strong>ï¼šè¿½è¸ªè¿‡æ»¤å™¨ï¼Œç”¨äºç›‘æ§å’Œè¿½è¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹ã€‚</li><li><strong>ã€Œwsã€</strong>ï¼šWebSocket è¿‡æ»¤å™¨ï¼Œç”¨äºå¤„ç† WebSocket è¿æ¥å‡çº§ã€‚</li></ul><p>Warp æ¡†æ¶é€šè¿‡è¿™äº›å†…ç½®çš„è¿‡æ»¤å™¨æä¾›äº†å¼ºå¤§çš„è·¯ç”±å’Œè¯·æ±‚å¤„ç†èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿçµæ´»åœ°æ„å»ºå¤æ‚çš„ Web æœåŠ¡ã€‚æ¯ä¸ªè¿‡æ»¤å™¨éƒ½å¯ä»¥å•ç‹¬ä½¿ç”¨æˆ–ä¸å…¶ä»–è¿‡æ»¤å™¨ç»„åˆä½¿ç”¨ï¼Œä»¥æ»¡è¶³å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><h3 id="ç»“æ„ä½“" tabindex="-1">ç»“æ„ä½“ <a class="header-anchor" href="#ç»“æ„ä½“" aria-label="Permalink to &quot;ç»“æ„ä½“&quot;">â€‹</a></h3><h4 id="warp-filters-boxedfilter" tabindex="-1"><code>warp::filters::BoxedFilter</code> <a class="header-anchor" href="#warp-filters-boxedfilter" aria-label="Permalink to &quot;`warp::filters::BoxedFilter`&quot;">â€‹</a></h4><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>pub struct BoxedFilter&lt;T: Tuple&gt; { /* private fields */ }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä»£è¡¨ä¸€ä¸ªå°è£…äº† <code>Filter</code> trait å¯¹è±¡çš„ç±»å‹ã€‚</p><p>è¿™ä¸ªç»“æ„ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ trait å¯¹è±¡ã€‚å®ƒçš„ç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–ä»å…¶ä»–å‡½æ•°è¿”å›è¿‡æ»¤å™¨ã€‚</p><h4 id="åˆ›å»º-boxedfilter" tabindex="-1">åˆ›å»º <code>BoxedFilter</code> <a class="header-anchor" href="#åˆ›å»º-boxedfilter" aria-label="Permalink to &quot;åˆ›å»º `BoxedFilter`&quot;">â€‹</a></h4><p>è¦åˆ›å»º <code>BoxedFilter</code>ï¼Œå¯ä»¥åœ¨ä»»ä½•è¿‡æ»¤å™¨ä¸Šè°ƒç”¨ <code>Filter::boxed</code> æ–¹æ³•ã€‚</p><h4 id="ç¤ºä¾‹-1" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-1" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">filters</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">BoxedFilter</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Reply</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> assets_filter</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">BoxedFilter</span><span style="color:#ABB2BF;">&lt;(</span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Reply</span><span style="color:#ABB2BF;">,)&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;assets&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">dir</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./assets&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">boxed</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="ç‰¹å¾å®ç°-trait-implementations" tabindex="-1">ç‰¹å¾å®ç° (Trait Implementations) <a class="header-anchor" href="#ç‰¹å¾å®ç°-trait-implementations" aria-label="Permalink to &quot;ç‰¹å¾å®ç° (Trait Implementations)&quot;">â€‹</a></h4><ul><li><code>Clone</code>ï¼šä¸º <code>BoxedFilter&lt;T&gt;</code> å®ç°äº† <code>Clone</code> ç‰¹å¾ï¼Œå…è®¸å…‹éš† <code>BoxedFilter</code> å¯¹è±¡ã€‚</li><li><code>Debug</code>ï¼šä¸º <code>BoxedFilter&lt;T&gt;</code> å®ç°äº† <code>Debug</code> ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨æ ¼å¼åŒ–è°ƒè¯•è¾“å‡ºã€‚</li></ul><h4 id="è‡ªåŠ¨ç‰¹å¾å®ç°-auto-trait-implementations" tabindex="-1">è‡ªåŠ¨ç‰¹å¾å®ç° (Auto Trait Implementations) <a class="header-anchor" href="#è‡ªåŠ¨ç‰¹å¾å®ç°-auto-trait-implementations" aria-label="Permalink to &quot;è‡ªåŠ¨ç‰¹å¾å®ç° (Auto Trait Implementations)&quot;">â€‹</a></h4><ul><li><code>Freeze</code>ï¼šå®ç°äº† <code>Freeze</code>ï¼Œè¡¨æ˜ <code>BoxedFilter&lt;T&gt;</code> å¯ä»¥è¢«å†»ç»“ï¼Œå³å®ƒçš„å†…éƒ¨æ•°æ®ä¸å¯å˜ã€‚</li><li><code>Send</code>ï¼šå®ç°äº† <code>Send</code>ï¼Œè¡¨æ˜ <code>BoxedFilter&lt;T&gt;</code> å¯ä»¥å®‰å…¨åœ°åœ¨å¤šçº¿ç¨‹é—´ä¼ é€’ã€‚</li><li><code>Sync</code>ï¼šå®ç°äº† <code>Sync</code>ï¼Œè¡¨æ˜å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—® <code>BoxedFilter&lt;T&gt;</code>ã€‚</li><li><code>Unpin</code>ï¼šå®ç°äº† <code>Unpin</code>ï¼Œè¡¨æ˜ <code>BoxedFilter&lt;T&gt;</code> ä¸æ˜¯å›ºå®šï¼ˆpinnedï¼‰çŠ¶æ€ï¼Œå¯ä»¥è‡ªç”±ç§»åŠ¨ã€‚</li><li><code>!UnwindSafe</code>ï¼šå®ç°äº† <code>!UnwindSafe</code>ï¼Œè¡¨æ˜ <code>BoxedFilter&lt;T&gt;</code> åœ¨ Rust çš„æ ˆå±•å¼€ï¼ˆunwindingï¼‰è¿‡ç¨‹ä¸­å¯èƒ½ä¸å®‰å…¨ã€‚</li></ul><h4 id="é€šç”¨ç‰¹å¾å®ç°-blanket-implementations" tabindex="-1">é€šç”¨ç‰¹å¾å®ç° (Blanket Implementations) <a class="header-anchor" href="#é€šç”¨ç‰¹å¾å®ç°-blanket-implementations" aria-label="Permalink to &quot;é€šç”¨ç‰¹å¾å®ç° (Blanket Implementations)&quot;">â€‹</a></h4><ul><li><code>Any</code>ï¼šä¸ºæ‰€æœ‰ <code>&#39;static + ?Sized</code> ç±»å‹å®ç°äº† <code>Any</code> ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨ <code>as_any</code> å’Œ <code>downcast_ref</code> æ–¹æ³•ã€‚</li><li><code>Borrow&lt;T&gt;</code> å’Œ <code>BorrowMut&lt;T&gt;</code>ï¼šä¸ºæ‰€æœ‰ <code>?Sized</code> ç±»å‹å®ç°äº†å€Ÿç”¨ç‰¹å¾ï¼Œå…è®¸å€Ÿç”¨å’Œå€Ÿç”¨çªå˜ã€‚</li><li><code>Filter</code>ï¼šä¸ºæ‰€æœ‰å®ç°äº† <code>FilterBase</code> çš„ <code>T</code> å®ç°äº† <code>Filter</code> ç‰¹å¾ã€‚</li><li><code>From&lt;T&gt;</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>From</code> ç‰¹å¾ï¼Œå…è®¸è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li><code>Instrument</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>Instrument</code> ç‰¹å¾ï¼Œç”¨äºç›‘æ§å’Œè·Ÿè¸ªã€‚</li><li><code>Same</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>Same</code> ç‰¹å¾ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒã€‚</li><li><code>ToOwned</code>ï¼šä¸ºæ‰€æœ‰å®ç°äº† <code>Clone</code> çš„ <code>T</code> å®ç°äº† <code>ToOwned</code> ç‰¹å¾ï¼Œå…è®¸åˆ›å»ºç±»å‹çš„æ‰€æœ‰æƒå‰¯æœ¬ã€‚</li><li><code>TryFrom&lt;U&gt;</code> å’Œ <code>TryInto&lt;U&gt;</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº†å°è¯•ä» <code>U</code> è½¬æ¢å’Œå°è¯•è½¬æ¢ä¸º <code>U</code> çš„ç‰¹å¾ã€‚</li><li><code>VZip&lt;V&gt;</code>ï¼šä¸ºæ‰€æœ‰ <code>V: MultiLane&lt;T&gt;</code> çš„ <code>T</code> å®ç°äº† <code>VZip</code> ç‰¹å¾ï¼Œå…è®¸å¤šè½¦é“çš„å‹ç¼©ã€‚</li><li><code>WithSubscriber</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>WithSubscriber</code> ç‰¹å¾ï¼Œå…è®¸ä¸ç›‘æ§è®¢é˜…è€…ä¸€èµ·ä½¿ç”¨ã€‚</li></ul><p><code>BoxedFilter</code> ç»“æ„ä½“æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼ï¼Œå…è®¸å°†è¿‡æ»¤å™¨ä½œä¸ºåŠ¨æ€ç±»å‹ä¼ é€’å’Œè¿”å›ï¼Œè¿™åœ¨æ„å»ºæ¨¡å—åŒ–å’Œå¯é‡ç”¨çš„ Web æœåŠ¡æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h4 id="å®-warp-path" tabindex="-1">å® <code>warp::path</code> <a class="header-anchor" href="#å®-warp-path" aria-label="Permalink to &quot;å® `warp::path`&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">macro_rules!</span><span style="color:#61AFEF;"> path</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    ($($</span><span style="color:#E06C75;">pieces</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">tt</span><span style="color:#ABB2BF;">)*) =&gt; { ... };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>warp::path</code>å®æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥é“¾æ¥å¤šä¸ªè·¯å¾„è¿‡æ»¤å™¨ã€‚</p><p>å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„ç±»å‹æ ‡è¯†ç¬¦æˆ–å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œæ¯ä¸ªè¡¨è¾¾å¼ä¹‹é—´ç”¨æ­£æ–œæ  (/) åˆ†éš”ã€‚å­—ç¬¦ä¸²ç”¨äºç²¾ç¡®åŒ¹é…è·¯å¾„æ®µï¼Œè€Œç±»å‹æ ‡è¯†ç¬¦çš„ç”¨æ³•ä¸ <code>param</code> è¿‡æ»¤å™¨ç›¸åŒã€‚</p><h4 id="ç¤ºä¾‹-2" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-2" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åŒ¹é… `/sum/:a/:b`</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sum&quot;</span><span style="color:#ABB2BF;"> / </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;"> / </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{} + {} = {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;"> + </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¦‚æœä¸ä½¿ç”¨ <code>path!</code> å®ï¼Œç­‰æ•ˆçš„è¿‡æ»¤å™¨é“¾çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sum&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">param</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">&gt;())</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">param</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">&gt;())</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">end</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{} + {} = {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;"> + </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="è·¯å¾„å‰ç¼€" tabindex="-1">è·¯å¾„å‰ç¼€ <a class="header-anchor" href="#è·¯å¾„å‰ç¼€" aria-label="Permalink to &quot;è·¯å¾„å‰ç¼€&quot;">â€‹</a></h4><p><code>path!</code> å®è‡ªåŠ¨å‡å®šè·¯å¾„åº”è¯¥åŒ…å«ä¸€ä¸ª <code>end()</code> è¿‡æ»¤å™¨ã€‚è¦æ„å»ºä¸€ä¸ªè·¯å¾„è¿‡æ»¤å™¨å‰ç¼€ï¼Œä½¿å¾—ä¸åŒ…å« <code>end()</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>/ ..</code> è¯­æ³•ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> prefix</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;math&quot;</span><span style="color:#ABB2BF;"> / </span><span style="color:#98C379;">&quot;sum&quot;</span><span style="color:#ABB2BF;"> / ..);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> sum</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">path!</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;"> / </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{} + {} = {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;"> + </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> help</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">end</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#98C379;"> &quot;This API returns the sum of two u32&#39;s&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> api</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> prefix</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sum</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">or</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">help</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>prefix</code> åˆ›å»ºäº†ä¸€ä¸ªè·¯å¾„å‰ç¼€ <code>&quot;math&quot; / &quot;sum&quot;</code>ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªåŠ¨æ·»åŠ  <code>end()</code> è¿‡æ»¤å™¨ã€‚è¿™å…è®¸åœ¨å‰ç¼€çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ·»åŠ æ›´å¤šçš„è·¯å¾„è¿‡æ»¤å™¨ï¼Œæˆ–è€…ä½¿ç”¨ <code>sum</code> å’Œ <code>help</code> è¿™æ ·çš„ç‹¬ç«‹è·¯ç”±ã€‚æœ€ç»ˆï¼Œ<code>api</code> å°† <code>sum</code> è·¯ç”±å’Œ <code>help</code> è·¯ç”±ç»„åˆåœ¨ç”± <code>prefix</code> å®šä¹‰çš„è·¯å¾„å‰ç¼€ä¸‹ã€‚</p><h4 id="ç»“æ„ä½“-warp-error" tabindex="-1">ç»“æ„ä½“ <code>warp::Error</code> <a class="header-anchor" href="#ç»“æ„ä½“-warp-error" aria-label="Permalink to &quot;ç»“æ„ä½“ `warp::Error`&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;"> { </span><span style="color:#7F848E;font-style:italic;">/* private fields */</span><span style="color:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¡¨ç¤ºåœ¨ Warp ä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</p><h4 id="ç‰¹å¾å®ç°-trait-implementations-1" tabindex="-1">ç‰¹å¾å®ç° (Trait Implementations) <a class="header-anchor" href="#ç‰¹å¾å®ç°-trait-implementations-1" aria-label="Permalink to &quot;ç‰¹å¾å®ç° (Trait Implementations)&quot;">â€‹</a></h4><ul><li><code>Debug</code>ï¼šä¸º <code>Error</code> å®ç°äº† <code>Debug</code> ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨æ ¼å¼åŒ–è°ƒè¯•è¾“å‡ºã€‚</li><li><code>Display</code>ï¼šä¸º <code>Error</code> å®ç°äº† <code>Display</code> ç‰¹å¾ï¼Œæä¾›äº†é”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚</li><li><code>Error</code>ï¼šä¸º <code>Error</code> å®ç°äº† <code>Error</code> ç‰¹å¾ï¼Œè¿™æ˜¯ Rust æ ‡å‡†åº“ä¸­çš„é”™è¯¯å¤„ç† traitï¼Œæä¾›äº†å¯¹é”™è¯¯çš„ä½çº§æºçš„è®¿é—®ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚</li></ul><h5 id="å·²å¼ƒç”¨çš„æ–¹æ³•" tabindex="-1">å·²å¼ƒç”¨çš„æ–¹æ³• <a class="header-anchor" href="#å·²å¼ƒç”¨çš„æ–¹æ³•" aria-label="Permalink to &quot;å·²å¼ƒç”¨çš„æ–¹æ³•&quot;">â€‹</a></h5><ul><li><code>description</code>ï¼šæ­¤æ–¹æ³•å·²è¢«å¼ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨ <code>Display</code> å®ç°æˆ– <code>to_string()</code> æ–¹æ³•ã€‚</li><li><code>cause</code>ï¼šæ­¤æ–¹æ³•å·²è¢«å¼ƒç”¨ï¼Œè¢« <code>Error::source</code> æ›¿ä»£ï¼Œåè€…æ”¯æŒå‘ä¸‹è½¬å‹ã€‚</li></ul><h5 id="å®éªŒæ€§-api" tabindex="-1">å®éªŒæ€§ API <a class="header-anchor" href="#å®éªŒæ€§-api" aria-label="Permalink to &quot;å®éªŒæ€§ API&quot;">â€‹</a></h5><ul><li><code>provide</code>ï¼šè¿™æ˜¯ä¸€ä¸ªä»…åœ¨å¤œé—´ç‰ˆæœ¬ä¸­å¯ç”¨çš„å®éªŒæ€§ APIï¼Œå®ƒåŸºäºé”™è¯¯æŠ¥å‘Šæä¾›äº†åŸºäºç±»å‹çš„ä¸Šä¸‹æ–‡è®¿é—®ã€‚</li></ul><h4 id="ä»å…¶ä»–ç±»å‹è½¬æ¢" tabindex="-1">ä»å…¶ä»–ç±»å‹è½¬æ¢ <a class="header-anchor" href="#ä»å…¶ä»–ç±»å‹è½¬æ¢" aria-label="Permalink to &quot;ä»å…¶ä»–ç±»å‹è½¬æ¢&quot;">â€‹</a></h4><ul><li><code>From&lt;Infallible&gt;</code>ï¼šå®ç°äº†ä» <code>Infallible</code>ï¼ˆä¸€ç§æ°¸è¿œä¸ä¼šå‘ç”Ÿé”™è¯¯çš„ç±»å‹ï¼‰è½¬æ¢ä¸º <code>Error</code>ã€‚</li></ul><h4 id="è‡ªåŠ¨ç‰¹å¾å®ç°-auto-trait-implementations-1" tabindex="-1">è‡ªåŠ¨ç‰¹å¾å®ç° (Auto Trait Implementations) <a class="header-anchor" href="#è‡ªåŠ¨ç‰¹å¾å®ç°-auto-trait-implementations-1" aria-label="Permalink to &quot;è‡ªåŠ¨ç‰¹å¾å®ç° (Auto Trait Implementations)&quot;">â€‹</a></h4><ul><li><code>Freeze</code>ï¼šå®ç°äº† <code>Freeze</code>ï¼Œè¡¨æ˜ <code>Error</code> å¯ä»¥è¢«å†»ç»“ï¼Œå³å®ƒçš„å†…éƒ¨æ•°æ®ä¸å¯å˜ã€‚</li><li><code>Send</code>ï¼šå®ç°äº† <code>Send</code>ï¼Œè¡¨æ˜ <code>Error</code> å¯ä»¥å®‰å…¨åœ°åœ¨å¤šçº¿ç¨‹é—´ä¼ é€’ã€‚</li><li><code>Sync</code>ï¼šå®ç°äº† <code>Sync</code>ï¼Œè¡¨æ˜å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—® <code>Error</code>ã€‚</li><li><code>Unpin</code>ï¼šå®ç°äº† <code>Unpin</code>ï¼Œè¡¨æ˜ <code>Error</code> ä¸æ˜¯å›ºå®šï¼ˆpinnedï¼‰çŠ¶æ€ï¼Œå¯ä»¥è‡ªç”±ç§»åŠ¨ã€‚</li><li><code>!UnwindSafe</code>ï¼šå®ç°äº† <code>!UnwindSafe</code>ï¼Œè¡¨æ˜ <code>Error</code> åœ¨ Rust çš„æ ˆå±•å¼€ï¼ˆunwindingï¼‰è¿‡ç¨‹ä¸­å¯èƒ½ä¸å®‰å…¨ã€‚</li></ul><h4 id="é€šç”¨ç‰¹å¾å®ç°-blanket-implementations-1" tabindex="-1">é€šç”¨ç‰¹å¾å®ç° (Blanket Implementations) <a class="header-anchor" href="#é€šç”¨ç‰¹å¾å®ç°-blanket-implementations-1" aria-label="Permalink to &quot;é€šç”¨ç‰¹å¾å®ç° (Blanket Implementations)&quot;">â€‹</a></h4><ul><li><code>Any</code>ï¼šä¸ºæ‰€æœ‰ <code>&#39;static + ?Sized</code> ç±»å‹å®ç°äº† <code>Any</code> ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨ <code>as_any</code> å’Œ <code>downcast_ref</code> æ–¹æ³•ã€‚</li><li><code>Borrow&lt;T&gt;</code> å’Œ <code>BorrowMut&lt;T&gt;</code>ï¼šä¸ºæ‰€æœ‰ <code>?Sized</code> ç±»å‹å®ç°äº†å€Ÿç”¨ç‰¹å¾ï¼Œå…è®¸å€Ÿç”¨å’Œå€Ÿç”¨çªå˜ã€‚</li><li><code>From&lt;T&gt;</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>From</code> ç‰¹å¾ï¼Œå…è®¸è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li><code>Instrument</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>Instrument</code> ç‰¹å¾ï¼Œç”¨äºç›‘æ§å’Œè·Ÿè¸ªã€‚</li><li><code>Same</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>Same</code> ç‰¹å¾ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒã€‚</li><li><code>ToString</code>ï¼šä¸ºæ‰€æœ‰å®ç°äº† <code>Display</code> çš„ç±»å‹å®ç°äº† <code>ToString</code> ç‰¹å¾ï¼Œå…è®¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li><li><code>TryFrom&lt;U&gt;</code> å’Œ <code>TryInto&lt;U&gt;</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº†å°è¯•ä» <code>U</code> è½¬æ¢å’Œå°è¯•è½¬æ¢ä¸º <code>U</code> çš„ç‰¹å¾ã€‚</li><li><code>VZip&lt;V&gt;</code>ï¼šä¸ºæ‰€æœ‰ <code>V: MultiLane&lt;T&gt;</code> çš„ <code>T</code> å®ç°äº† <code>VZip</code> ç‰¹å¾ï¼Œå…è®¸å¤šè½¦é“çš„å‹ç¼©ã€‚</li><li><code>WithSubscriber</code>ï¼šä¸ºæ‰€æœ‰ç±»å‹å®ç°äº† <code>WithSubscriber</code> ç‰¹å¾ï¼Œå…è®¸ä¸ç›‘æ§è®¢é˜…è€…ä¸€èµ·ä½¿ç”¨ã€‚</li></ul><p><code>warp::Error</code> ç»“æ„ä½“æ˜¯ Warp æ¡†æ¶ä¸­é”™è¯¯å¤„ç†çš„æ ¸å¿ƒï¼Œå®ƒé€šè¿‡å¤šç§ç‰¹å¾å®ç°äº†çµæ´»çš„é”™è¯¯å¤„ç†å’Œä¸Šä¸‹æ–‡æä¾›ã€‚</p><h3 id="å‡½æ•°warp-service" tabindex="-1">å‡½æ•°<code>warp::service</code> <a class="header-anchor" href="#å‡½æ•°warp-service" aria-label="Permalink to &quot;å‡½æ•°`warp::service`&quot;">â€‹</a></h3><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> service</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">F</span><span style="color:#ABB2BF;">&gt;(</span><span style="color:#E06C75;">filter</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">F</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">FilteredService</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">F</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    F</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">F</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> TryFuture</span><span style="color:#ABB2BF;">&gt;::</span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Reply</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">F</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> TryFuture</span><span style="color:#ABB2BF;">&gt;::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">IsReject</span><span style="color:#ABB2BF;">,</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å°†ä¸€ä¸ª <code>Filter</code> è½¬æ¢æˆ <code>Service</code>ã€‚</p><p>åœ¨ Warp ä¸­ï¼ŒAPI é€šå¸¸æ˜¯åŸºäº <code>Filter</code> æ„å»ºçš„ã€‚ç„¶è€Œï¼Œå°† <code>Filter</code> è½¬æ¢æˆ <code>Service</code> å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³è¦è¿›ä¸€æ­¥è‡ªå®šä¹‰ <code>hyper::Service</code>ï¼Œæˆ–è€…æƒ³è¦åˆ©ç”¨ Tower æä¾›çš„æ›´å¹¿æ³›çš„ä¸­é—´ä»¶é›†åˆã€‚</p><h4 id="ç¤ºä¾‹-3" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-3" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><p>åœ¨å¸¸è§„çš„ <code>hyper::Server</code> ä¸Šè¿è¡Œ <code>warp::Filter</code>ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">convert</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Infallible</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Filter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ä¸€ä¸ª Filter...</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">any</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#98C379;"> &quot;Hello From Warp!&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å°†å…¶è½¬æ¢ä¸º `Service`...</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> svc</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> warp</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">service</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">route</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å…¸å‹çš„ hyper æœåŠ¡å™¨è®¾ç½®...</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> make_svc</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> hyper</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">service</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">make_service_fn</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Infallible</span><span style="color:#ABB2BF;">&gt;(</span><span style="color:#E06C75;">svc</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¯åŠ¨æœåŠ¡å™¨...</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> server</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> hyper</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(&amp;([</span><span style="color:#D19A66;">127</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">3030</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">serve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">make_svc</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¼‚æ­¥è¿è¡ŒæœåŠ¡å™¨...</span></span>
<span class="line"><span style="color:#E06C75;">server</span><span style="color:#ABB2BF;">.</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ Warp <code>Filter</code>ï¼Œå®ƒå¯¹ä»»ä½•è¯·æ±‚éƒ½æ˜ å°„æˆä¸€ä¸ªå­—ç¬¦ä¸² &quot;Hello From Warp!&quot;ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>warp::service</code> å‡½æ•°å°†è¿™ä¸ª <code>Filter</code> è½¬æ¢æˆä¸€ä¸ª <code>Service</code>ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>hyper::service::make_service_fn</code> åˆ›å»ºäº†ä¸€ä¸ª <code>make_svc</code>ï¼Œå®ƒä¸ºæ¯ä¸ªä¼ å…¥çš„è¯·æ±‚ç”Ÿæˆæˆ‘ä»¬çš„ Warp <code>Service</code>ã€‚æœ€åï¼Œæˆ‘ä»¬ç»‘å®šåˆ°æœ¬åœ°çš„ 3030 ç«¯å£å¹¶å¯åŠ¨ <code>hyper::Server</code>ï¼Œå®ƒå°†ä½¿ç”¨æˆ‘ä»¬çš„ Warp <code>Service</code> æ¥å¤„ç†è¯·æ±‚ã€‚</p><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒWarp <code>Filter</code> å¯ä»¥è½»æ¾åœ°é›†æˆåˆ°åŸºäº Hyper çš„å¼‚æ­¥æœåŠ¡å™¨ä¸­ï¼ŒåŒæ—¶è¿˜èƒ½åˆ©ç”¨ Hyper çš„ç‰¹æ€§å’Œç”Ÿæ€ã€‚è¿™ä¸ºæ„å»ºå’Œæ‰©å±• Rust ä¸­çš„å¼‚æ­¥ Web æœåŠ¡æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p><h4 id="ç¤ºä¾‹-4" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-4" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><p>æ¬¢è¿ä½¿ç”¨ç¤ºä¾‹ï¼è¿™äº›ç¤ºä¾‹å±•ç¤ºäº† <code>warp</code> çš„åŠŸèƒ½ï¼Œå¹¶è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><p>å¼€å§‹å…¥é—¨</p><p>è¦å¼€å§‹ï¼Œè¯·è¿è¡Œ <code>examples/hello.rs</code>ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --example</span><span style="color:#98C379;"> hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™å°†åœ¨æ‚¨çš„æœ¬åœ°ä¸»æœºç«¯å£ 3030 ä¸Šå¯åŠ¨ä¸€ä¸ªç®€å•çš„â€œHello Worldâ€æœåŠ¡ã€‚</p><p>æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯å¹¶è¿è¡Œï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">curl</span><span style="color:#98C379;"> http://localhost:3030/hi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Hello, World!</p><p>æ­å–œä½ ï¼Œä½ åˆšåˆšè¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª Warp æœåŠ¡ï¼</p><p>ä½ å¯ä»¥ä½¿ç”¨ <code>cargo run --example [example name]</code> è¿è¡Œå…¶ä»–ç¤ºä¾‹ï¼š</p><ul><li><code>hello.rs</code>[1] - åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„â€œHello Worldâ€API</li><li><code>routing.rs</code>[2] - æ„å»ºæ›´å¤æ‚çš„è·¯ç”±é›†åˆï¼Œå¹¶å±•ç¤ºå¦‚ä½•ç»„åˆè¿‡æ»¤å™¨</li><li><code>body.rs</code>[3] - æ²¡æœ‰è§£æè¯·æ±‚ä½“æ•°æ®çš„ API ç®—ä»€ä¹ˆå¥½ APIï¼Ÿ</li><li><code>headers.rs</code>[4] - ä»è¯·æ±‚å¤´ä¸­è§£ææ•°æ®</li><li><code>rejections.rs</code>[5] - ä½ çš„ API æ˜¾ç„¶å¾ˆå®Œç¾ï¼Œä½†å¯¹äºä»¥é”™è¯¯æ–¹å¼è°ƒç”¨å®ƒä»¬çš„äººæ¥è¯´ï¼Œä½ ä¼šæƒ³ä¸ºä»–ä»¬å®šä¹‰é”™è¯¯</li><li><code>futures.rs</code>[6] - ç­‰ç­‰ï¼...æˆ–è€…è¯´å¦‚ä½•å°† futures é›†æˆåˆ°è¿‡æ»¤å™¨ä¸­</li><li><code>todos.rs</code>[7] - å°†è¿™äº›æ•´åˆåœ¨ä¸€èµ·æ„å»ºä¸€ä¸ªåˆé€‚çš„åº”ç”¨</li></ul><h4 id="æ›´å¤šç”¨ä¾‹" tabindex="-1">æ›´å¤šç”¨ä¾‹ <a class="header-anchor" href="#æ›´å¤šç”¨ä¾‹" aria-label="Permalink to &quot;æ›´å¤šç”¨ä¾‹&quot;">â€‹</a></h4><h5 id="æœåŠ¡-html-å’Œå…¶ä»–æ–‡ä»¶" tabindex="-1">æœåŠ¡ HTML å’Œå…¶ä»–æ–‡ä»¶ <a class="header-anchor" href="#æœåŠ¡-html-å’Œå…¶ä»–æ–‡ä»¶" aria-label="Permalink to &quot;æœåŠ¡ HTML å’Œå…¶ä»–æ–‡ä»¶&quot;">â€‹</a></h5><ul><li><code>file.rs</code>[8] - æœåŠ¡é™æ€æ–‡ä»¶</li><li><code>dir.rs</code>[9] - æˆ–æ•´ä¸ªç›®å½•çš„æ–‡ä»¶</li><li><code>handlebars_template.rs</code>[10] - ä½¿ç”¨ Handlebars å¡«å…… HTML æ¨¡æ¿</li></ul><h5 id="websockets" tabindex="-1">WebSockets <a class="header-anchor" href="#websockets" aria-label="Permalink to &quot;WebSockets&quot;">â€‹</a></h5><p>ä¸‡å²ï¼<code>warp</code> ä¹Ÿå†…ç½®äº†å¯¹ WebSockets çš„æ”¯æŒ</p><ul><li><code>websockets.rs</code>[11] - WebSocket å‡çº§çš„åŸºæœ¬å¤„ç†</li><li><code>websockets_chat.rs</code>[12] - å®Œæ•´çš„ WebSocket åº”ç”¨</li></ul><h5 id="æœåŠ¡å™¨ç«¯äº‹ä»¶-server-side-events" tabindex="-1">æœåŠ¡å™¨ç«¯äº‹ä»¶ (Server-Side Events) <a class="header-anchor" href="#æœåŠ¡å™¨ç«¯äº‹ä»¶-server-side-events" aria-label="Permalink to &quot;æœåŠ¡å™¨ç«¯äº‹ä»¶ (Server-Side Events)&quot;">â€‹</a></h5><ul><li><code>sse.rs</code>[13] - åŸºæœ¬çš„æœåŠ¡å™¨ç«¯äº‹ä»¶</li><li><code>sse_chat.rs</code>[14] - å®Œæ•´çš„ SSE åº”ç”¨</li></ul><h5 id="tls" tabindex="-1">TLS <a class="header-anchor" href="#tls" aria-label="Permalink to &quot;TLS&quot;">â€‹</a></h5><ul><li><code>tls.rs</code>[15] - æˆ‘å¯ä»¥æ‹¥æœ‰å®‰å…¨æ€§å—ï¼Ÿ</li></ul><h5 id="è‡ªåŠ¨é‡è½½" tabindex="-1">è‡ªåŠ¨é‡è½½ <a class="header-anchor" href="#è‡ªåŠ¨é‡è½½" aria-label="Permalink to &quot;è‡ªåŠ¨é‡è½½&quot;">â€‹</a></h5><ul><li><code>autoreload.rs</code>[16] - æ›´æ”¹ä¸€äº›ä»£ç å¹¶è§‚å¯ŸæœåŠ¡å™¨è‡ªåŠ¨é‡è½½ï¼</li></ul><h5 id="è°ƒè¯•" tabindex="-1">è°ƒè¯• <a class="header-anchor" href="#è°ƒè¯•" aria-label="Permalink to &quot;è°ƒè¯•&quot;">â€‹</a></h5><ul><li><code>tracing.rs</code>[17] - Warp å†…ç½®äº†ä¸°å¯Œçš„è¯Šæ–­æ”¯æŒï¼Œä½¿ç”¨ <code>tracing</code>[18]ï¼</li></ul><h5 id="è‡ªå®šä¹‰-http-æ–¹æ³•" tabindex="-1">è‡ªå®šä¹‰ HTTP æ–¹æ³• <a class="header-anchor" href="#è‡ªå®šä¹‰-http-æ–¹æ³•" aria-label="Permalink to &quot;è‡ªå®šä¹‰ HTTP æ–¹æ³•&quot;">â€‹</a></h5><ul><li><code>custom_methods.rs</code>[19] - ä¹Ÿå¯ä»¥ä½¿ç”¨ Warp ä¸è‡ªå®šä¹‰ HTTP æ–¹æ³•ã€‚</li></ul><h3 id="éƒ¨ç½²ä¸æ€§èƒ½" tabindex="-1">éƒ¨ç½²ä¸æ€§èƒ½ <a class="header-anchor" href="#éƒ¨ç½²ä¸æ€§èƒ½" aria-label="Permalink to &quot;éƒ¨ç½²ä¸æ€§èƒ½&quot;">â€‹</a></h3><p><code>Warp</code> ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„ <code>HTTP</code> æœåŠ¡å™¨ï¼Œä¸éœ€è¦é¢å¤–çš„åŠ¨æ€æœåŠ¡å™¨æ”¯æŒï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°éƒ¨ç½²åœ¨å„ç§ç¯å¢ƒä¸­ã€‚ç”±äºå…¶é«˜æ•ˆçš„å¤„ç†èƒ½åŠ›ï¼Œ<code>Warp</code> å°¤å…¶é€‚åˆéœ€è¦é«˜æ€§èƒ½çš„ <code>Web</code> åº”ç”¨åœºæ™¯ã€‚</p><h3 id="ç»“è¯­-1" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­-1" aria-label="Permalink to &quot;ç»“è¯­&quot;">â€‹</a></h3><p><code>Warp</code> æ¡†æ¶ä»¥å…¶é«˜æ•ˆã€å®‰å…¨å’Œæ˜“ç”¨æ€§ï¼Œåœ¨ <code>Rust</code> çš„ <code>Web</code> å¼€å‘é¢†åŸŸä¸­å æ®äº†ä¸€å¸­ä¹‹åœ°ã€‚å¯¹äºè¿½æ±‚é«˜æ€§èƒ½ Web æœåŠ¡çš„å¼€å‘è€…æ¥è¯´ï¼Œ<code>Warp</code> æ— ç–‘æ˜¯ä¸€ä¸ªå€¼å¾—è€ƒè™‘çš„é€‰æ‹©ã€‚éšç€ <code>Rust</code> è¯­è¨€å’Œç”Ÿæ€ç³»ç»Ÿçš„ä¸æ–­å‘å±•ï¼Œ<code>Warp</code> æ¡†æ¶ä¹Ÿå°†æŒç»­æ¼”è¿›ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´åŠ å¼ºå¤§çš„å·¥å…·å’Œæ›´ä¼˜çš„ä½“éªŒã€‚</p><hr><p><strong>ã€Œå‚è€ƒæ–‡çŒ®ã€</strong>ï¼š</p><p>warp - Rust - Docs.rsï¼š<a href="https://docs.rs/warp/latest/warp/" target="_blank" rel="noreferrer">https://docs.rs/warp/latest/warp/</a></p><h3 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">â€‹</a></h3><p>[1] <code>hello.rs</code>:./hello.rs</p><p>[2] <code>routing.rs</code>:./routing.rs</p><p>[3] <code>body.rs</code>:./body.rs</p><p>[4] <code>headers.rs</code>:./headers.rs</p><p>[5] <code>rejections.rs</code>:./rejections.rs</p><p>[6] <code>futures.rs</code>:./futures.rs</p><p>[7] <code>todos.rs</code>:./todos.rs</p><p>[8] <code>file.rs</code>:./file.rs</p><p>[9] <code>dir.rs</code>:./dir.rs</p><p>[10] <code>handlebars_template.rs</code>:./handlebars_template.rs</p><p>[11] <code>websockets.rs</code>:./websockets.rs</p><p>[12] <code>websockets_chat.rs</code>:./websockets_chat.rs</p><p>[13] <code>sse.rs</code>:./sse.rs</p><p>[14] <code>sse_chat.rs</code>:./sse_chat.rs</p><p>[15] <code>tls.rs</code>:./tls.rs</p><p>[16] <code>autoreload.rs</code>:./autoreload.rs</p><p>[17] <code>tracing.rs</code>:./tracing.rs</p><p>[18] <code>tracing</code>:<a href="https://docs.rs/tracing" target="_blank" rel="noreferrer">https://docs.rs/tracing</a></p><p>[19] <code>custom_methods.rs</code>:./custom_methods.rs</p><p>[20] warp - Rust - Docs.rs:<a href="https://docs.rs/warp/latest/warp/" target="_blank" rel="noreferrer">https://docs.rs/warp/latest/warp/</a></p><h2 id="trillium-rust-web-æ¡†æ¶å®æˆ˜æŒ‡å—" tabindex="-1">Trilliumï¼šRust Web æ¡†æ¶å®æˆ˜æŒ‡å— <a class="header-anchor" href="#trillium-rust-web-æ¡†æ¶å®æˆ˜æŒ‡å—" aria-label="Permalink to &quot;Trilliumï¼šRust Web æ¡†æ¶å®æˆ˜æŒ‡å—&quot;">â€‹</a></h2><p>æ•™ç¨‹ï¼Œå¼‚æ­¥ã€æ¨¡å—åŒ–ã€å¯æ‰©å±•</p><h3 id="trillium-rust-web-æ¡†æ¶å®æˆ˜æŒ‡å—-1" tabindex="-1"><code>Trillium</code> Rust Web æ¡†æ¶å®æˆ˜æŒ‡å— <a class="header-anchor" href="#trillium-rust-web-æ¡†æ¶å®æˆ˜æŒ‡å—-1" aria-label="Permalink to &quot;`Trillium` Rust Web æ¡†æ¶å®æˆ˜æŒ‡å—&quot;">â€‹</a></h3><h4 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">â€‹</a></h4><blockquote><p><code>Trillium</code> æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ Rust Web æ¡†æ¶ï¼Œä»¥å…¶å¼‚æ­¥ã€æ¨¡å—åŒ–å’Œå¯æ‰©å±•æ€§è‘—ç§°ã€‚å®ƒä¸ä»…æ”¯æŒå¿«é€Ÿå¼€å‘ç®€å•çš„ Web åº”ç”¨ï¼Œè¿˜èƒ½æ„å»ºå¤æ‚çš„å…¨æ ˆæœåŠ¡ã€‚</p></blockquote><h4 id="å®‰è£…ä¸é…ç½®" tabindex="-1">å®‰è£…ä¸é…ç½® <a class="header-anchor" href="#å®‰è£…ä¸é…ç½®" aria-label="Permalink to &quot;å®‰è£…ä¸é…ç½®&quot;">â€‹</a></h4><p>å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† <code>Rust</code> ç¼–è¯‘å™¨å’Œ <code>Cargo</code>ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®ï¼Œå¹¶é€šè¿‡ <code>Cargo.toml</code> æ–‡ä»¶å¼•å…¥ Trilliumï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#61AFEF;">trillium</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.2&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="å¿«é€Ÿå…¥é—¨-1" tabindex="-1">å¿«é€Ÿå…¥é—¨ <a class="header-anchor" href="#å¿«é€Ÿå…¥é—¨-1" aria-label="Permalink to &quot;å¿«é€Ÿå…¥é—¨&quot;">â€‹</a></h4><p><code>Trillium</code> çš„å…¥é—¨éå¸¸ç®€å•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æœåŠ¡å™¨ç¤ºä¾‹ï¼Œå®ƒä½¿ç”¨ <code>trillium_smol</code> è¿è¡Œæ—¶æ¥å¯åŠ¨ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello from trillium!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h4><p>Trillium çš„æ ¸å¿ƒæ˜¯ <code>Conn</code> ç±»å‹ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ª HTTP è¯·æ±‚å’Œå“åº”çš„è¿æ¥ã€‚è€Œ <code>Handler</code> trait å…è®¸ä½ å®šä¹‰å¦‚ä½•å¤„ç†è¿™äº›è¿æ¥ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> MyHandler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> MyHandler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> handle</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // åœ¨è¿™é‡Œå¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello from MyHandler!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="è¿›é˜¶ç‰¹æ€§" tabindex="-1">è¿›é˜¶ç‰¹æ€§ <a class="header-anchor" href="#è¿›é˜¶ç‰¹æ€§" aria-label="Permalink to &quot;è¿›é˜¶ç‰¹æ€§&quot;">â€‹</a></h4><p>Trillium æä¾›äº†ä¸°å¯Œçš„ç‰¹æ€§ï¼Œå¦‚ Routerã€WebSockets å’Œé™æ€æ–‡ä»¶æœåŠ¡ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡æ·»åŠ ç›¸åº”çš„ä¾èµ–å¹¶å®ç°ç›¸åº”çš„åŠŸèƒ½æ¥å¯ç”¨ã€‚</p><h4 id="å¼‚æ­¥æ”¯æŒ" tabindex="-1">å¼‚æ­¥æ”¯æŒ <a class="header-anchor" href="#å¼‚æ­¥æ”¯æŒ" aria-label="Permalink to &quot;å¼‚æ­¥æ”¯æŒ&quot;">â€‹</a></h4><p>Trillium å®Œå…¨æ”¯æŒå¼‚æ­¥ Rustï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è½»æ¾åœ°ç¼–å†™éé˜»å¡ä»£ç ï¼Œå¤§å¹…æå‡åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{async_trait, </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[async_trait]</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> MyAsyncHandler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> handle</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¼‚æ­¥å¤„ç†é€»è¾‘</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello from an async handler!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬é’ˆå¯¹å®‰å…¨æ€§ã€æ€§èƒ½æµ‹è¯•å’Œéƒ¨ç½²ç­‰å…³é”®ç¯èŠ‚ï¼Œè¿›ä¸€æ­¥è¡¥å……ç»†èŠ‚ã€‚</p><h3 id="å®‰å…¨æ€§" tabindex="-1">å®‰å…¨æ€§ <a class="header-anchor" href="#å®‰å…¨æ€§" aria-label="Permalink to &quot;å®‰å…¨æ€§&quot;">â€‹</a></h3><p>Trillium æä¾›äº†å¤šç§æœºåˆ¶æ¥ç¡®ä¿åº”ç”¨çš„å®‰å…¨æ€§ï¼š</p><ol><li><p><strong>HTTPS æ”¯æŒ</strong>ï¼šé€šè¿‡ <code>trillium-rustls</code> é›†æˆï¼Œå¯ä»¥è½»æ¾åœ°ä¸ºåº”ç”¨æ·»åŠ  TLS æ”¯æŒã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_rustls</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">TlsHandler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> handler</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> TlsHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* é…ç½®è¯ä¹¦å’Œå¯†é’¥ */</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">and_then</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* å…¶ä»– handler é“¾ */</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><strong>å®‰å…¨å¤´</strong>ï¼šTrillium å…è®¸ä½ è®¾ç½® HTTP å®‰å…¨å¤´ï¼Œå¦‚ <code>Content-Security-Policy</code>ï¼Œä»¥é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œæ•°æ®æ³„éœ²ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">conn</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">HeaderName</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">HeaderValue</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> secure_headers</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">response_builder</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">header</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HeaderName</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_static</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Content-Security-Policy&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#E5C07B;">HeaderValue</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_static</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;default-src &#39;self&#39;&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">    response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_inner</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol><h3 id="æ€§èƒ½æµ‹è¯•" tabindex="-1">æ€§èƒ½æµ‹è¯• <a class="header-anchor" href="#æ€§èƒ½æµ‹è¯•" aria-label="Permalink to &quot;æ€§èƒ½æµ‹è¯•&quot;">â€‹</a></h3><p>æ€§èƒ½æµ‹è¯•æ˜¯ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ‰¿å—é«˜è´Ÿè½½çš„å…³é”®æ­¥éª¤ï¼š</p><ol><li><p><strong>åŸºå‡†æµ‹è¯•</strong>ï¼šRust æä¾›äº†å†…ç½®çš„åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œå¯ä»¥ç”¨æ¥æµ‹è¯• Handler çš„æ€§èƒ½ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(test)]</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> tests {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;font-style:italic;"> super</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[bench]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> bench_handler</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> test</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Bencher</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> handler</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> MyHandler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">        b</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">iter</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#C678DD;"> async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ¨¡æ‹Ÿè¯·æ±‚å¹¶å¤„ç†</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> _</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> handler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handle</span><span style="color:#ABB2BF;">(</span><span style="color:#7F848E;font-style:italic;">/* æ¨¡æ‹Ÿ Conn */</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li><li><p><strong>å‹åŠ›æµ‹è¯•</strong>ï¼šä½¿ç”¨åƒ <code>wrk</code> æˆ– <code>hyperfine</code> è¿™æ ·çš„å·¥å…·å¯¹åº”ç”¨è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œæ¨¡æ‹Ÿå¤šç”¨æˆ·åŒæ—¶è®¿é—®çš„åœºæ™¯ã€‚</p></li></ol><h3 id="éƒ¨ç½²" tabindex="-1">éƒ¨ç½² <a class="header-anchor" href="#éƒ¨ç½²" aria-label="Permalink to &quot;éƒ¨ç½²&quot;">â€‹</a></h3><p>Trillium åº”ç”¨å¯ä»¥éƒ¨ç½²åˆ°å¤šç§ç¯å¢ƒä¸­ï¼š</p><ol><li><p><strong>æœ¬åœ°éƒ¨ç½²</strong>ï¼šå¯¹äºå¼€å‘å’Œæµ‹è¯•ï¼Œå¯ä»¥ç›´æ¥åœ¨æœ¬åœ°è¿è¡Œ Trillium åº”ç”¨ã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>ç”Ÿäº§éƒ¨ç½²</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨åŒ–æŠ€æœ¯å¦‚ Dockerï¼Œæˆ–è€…é€šè¿‡ä¸“ä¸šçš„ Rust åº”ç”¨éƒ¨ç½²æœåŠ¡ã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">FROM</span><span style="color:#98C379;"> rust:latest</span><span style="color:#98C379;"> AS</span><span style="color:#98C379;"> build</span></span>
<span class="line"><span style="color:#61AFEF;">WORKDIR</span><span style="color:#98C379;"> /usr/src/myapp</span></span>
<span class="line"><span style="color:#61AFEF;">COPY</span><span style="color:#98C379;"> .</span><span style="color:#98C379;"> .</span></span>
<span class="line"><span style="color:#61AFEF;">RUN</span><span style="color:#98C379;"> cargo</span><span style="color:#98C379;"> install</span><span style="color:#D19A66;"> --path</span><span style="color:#98C379;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">FROM</span><span style="color:#98C379;"> rust:latest</span><span style="color:#98C379;"> AS</span><span style="color:#98C379;"> run</span></span>
<span class="line"><span style="color:#61AFEF;">WORKDIR</span><span style="color:#98C379;"> /usr/src/myapp</span></span>
<span class="line"><span style="color:#61AFEF;">COPY</span><span style="color:#D19A66;"> --from=build</span><span style="color:#98C379;"> /usr/local/cargo/bin/myapp</span><span style="color:#98C379;"> /usr/local/bin/myapp</span></span>
<span class="line"><span style="color:#61AFEF;">CMD</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;myapp&quot;</span><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p><strong>äº‘æœåŠ¡</strong>ï¼šå¯ä»¥åˆ©ç”¨äº‘æœåŠ¡å•†å¦‚ AWSã€Azure æˆ– Google Cloud Platform æä¾›çš„å®¹å™¨æœåŠ¡æ¥éƒ¨ç½² Trillium åº”ç”¨ã€‚</p></li></ol><h3 id="æ ¸å¿ƒæ¦‚å¿µ-å¤„ç†å™¨ã€è¿æ¥å’Œé€‚é…å™¨" tabindex="-1">æ ¸å¿ƒæ¦‚å¿µï¼šå¤„ç†å™¨ã€è¿æ¥å’Œé€‚é…å™¨ <a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ-å¤„ç†å™¨ã€è¿æ¥å’Œé€‚é…å™¨" aria-label="Permalink to &quot;æ ¸å¿ƒæ¦‚å¿µï¼šå¤„ç†å™¨ã€è¿æ¥å’Œé€‚é…å™¨&quot;">â€‹</a></h3><p>æ„å»º <code>Trillium</code> åº”ç”¨ç¨‹åºæ—¶æœ€é‡è¦çš„æ¦‚å¿µæ˜¯ <code>Conn</code> ç±»å‹å’Œ <code>Handler</code> ç‰¹æ€§ã€‚æ¯ä¸ª <code>Conn</code> ä»£è¡¨å•ä¸ª <code>HTTP</code> è¯·æ±‚/å“åº”å¯¹ï¼Œè€Œ <code>Handler</code> æ˜¯æ‰€æœ‰åº”ç”¨ç¨‹åºã€ä¸­é—´ä»¶å’Œç«¯ç‚¹å®ç°çš„ç‰¹æ€§ã€‚</p><p>è®©æˆ‘ä»¬å…ˆä»ç®€å•çš„ <code>Trillium</code> åº”ç”¨ç¨‹åºæ¦‚è§ˆå¼€å§‹ï¼Œç„¶åæ›´æ·±å…¥åœ°æ¢è®¨è¿™äº›æ¦‚å¿µã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello from trillium!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>trillium_smol::run</code> æ˜¯è¿è¡Œæ—¶é€‚é…å™¨ï¼Œé—­åŒ…æ˜¯ä¸€ä¸ªå¤„ç†å™¨ï¼Œå®ƒå¯¹å®ƒæ¥æ”¶åˆ°çš„ä»»ä½• Web è¯·æ±‚éƒ½å“åº” &quot;hello from trillium!&quot;ã€‚è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€åŠŸèƒ½å®Œå¤‡çš„ç¤ºä¾‹ï¼Œä½ åªéœ€è¦ä»¥ä¸‹ä¾èµ–å³å¯è¿è¡Œï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">trillium</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.2&quot;</span></span>
<span class="line"><span style="color:#E06C75;">trillium</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">smol</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.2&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¦‚æœæˆ‘ä»¬è¿è¡Œ <code>cargo run</code> è¿™ä¸ªç¤ºä¾‹ï¼Œç„¶åå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a> æˆ–è€…å¯¹é‚£ä¸ª URL å‘é€ curl è¯·æ±‚ï¼Œå°±å¯ä»¥çœ‹åˆ° &quot;hello from trillium!&quot; ä½œä¸ºå“åº”ä½“ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨ç»ˆç«¯çœ‹åˆ°ä»»ä½•è¾“å‡ºï¼Œå› ä¸º Trillium é»˜è®¤æ˜¯é™é»˜çš„ã€‚</p><h4 id="å¤„ç†å™¨" tabindex="-1">å¤„ç†å™¨ <a class="header-anchor" href="#å¤„ç†å™¨" aria-label="Permalink to &quot;å¤„ç†å™¨&quot;">â€‹</a></h4><p>å¤„ç†å™¨æœ€ç®€å•çš„å½¢å¼æ˜¯ä»»ä½•æ¥å— Conn å¹¶è¿”å› Conn çš„å¼‚æ­¥å‡½æ•°ã€‚è¿™ä¸ªç¤ºä¾‹è®¾ç½®äº†ä¸€ä¸ª 200 Ok çŠ¶æ€å¹¶è®¾ç½®äº†å­—ç¬¦ä¸²æ­£æ–‡ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> hello_world</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ— éœ€è¿›ä¸€æ­¥ä¿®æ”¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸ªå¤„ç†å™¨æ”¾å…¥ Trillium æœåŠ¡å™¨ä¸­ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬å“åº” HTTP è¯·æ±‚ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åŸºäº smol-runtime çš„æœåŠ¡å™¨é€‚é…å™¨ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hello_world</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ­¤å®šä¹‰ä¸ºé—­åŒ…ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™ä¸ªå¤„ç†å™¨å°†å“åº”ä»»ä½•è·¯å¾„çš„è¯·æ±‚ï¼Œå¹¶ä¸”å®ƒå°†å§‹ç»ˆå‘é€ä¸€ä¸ªå¸¦æœ‰ &quot;hello world&quot; æ­£æ–‡çš„ 200 Ok HTTP çŠ¶æ€ã€‚</p><h4 id="çŠ¶æ€å¤„ç†å™¨" tabindex="-1">çŠ¶æ€å¤„ç†å™¨ <a class="header-anchor" href="#çŠ¶æ€å¤„ç†å™¨" aria-label="Permalink to &quot;çŠ¶æ€å¤„ç†å™¨&quot;">â€‹</a></h4><p>Trillium åœ¨ä¸» trillium crate ä¸­åªæä¾›äº†ä¸€ä¸ªå¤„ç†å™¨ï¼šState å¤„ç†å™¨ï¼Œå®ƒå°†æ‚¨æä¾›çš„ä»»ä½•ç±»å‹çš„å‰¯æœ¬æ”¾ç½®åˆ°æ¯ä¸ªé€šè¿‡å®ƒçš„ conn çš„çŠ¶æ€é›†ä¸­ã€‚æœ‰å…³ç¤ºä¾‹ä½¿ç”¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ State çš„ rustdocsã€‚</p><h4 id="å…ƒç»„å¤„ç†å™¨" tabindex="-1">å…ƒç»„å¤„ç†å™¨ <a class="header-anchor" href="#å…ƒç»„å¤„ç†å™¨" aria-label="Permalink to &quot;å…ƒç»„å¤„ç†å™¨&quot;">â€‹</a></h4><p>ä¹‹å‰ï¼Œæˆ‘ä»¬è®¨è®ºäº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŠ¶æ€åœ¨å¤„ç†å™¨ä¹‹é—´å‘é€æ•°æ®ï¼Œå¹¶ä¸”å¤„ç†å™¨æ€»æ˜¯å¯ä»¥å°† conn åŸæ ·ä¼ é€’ã€‚ä¸ºäº†ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å…ƒç»„å¤„ç†å™¨çš„æ¦‚å¿µã€‚</p><p>å…ƒç»„å¤„ç†å™¨ä¸­çš„æ¯ä¸ªå¤„ç†å™¨ä»å·¦åˆ°å³è¢«è°ƒç”¨ï¼Œç›´åˆ° conn è¢«åœæ­¢ã€‚</p><p>ğŸ”Œ ç†Ÿæ‚‰ Elixir Plug çš„è¯»è€…ä¼šè®¤è¯†åˆ°è¿™ä¸ªæ¦‚å¿µä¸æµæ°´çº¿å®Œå…¨ç›¸åŒï¼Œè€Œæœ¯è¯­ &quot;halt&quot; æ˜¯å—åˆ° Plug çš„å¯å‘è€Œå€Ÿç”¨çš„</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">    Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#56B6C2;">    |</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;tuple!&quot;</span><span style="color:#ABB2BF;">) }</span></span>
<span class="line"><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ®µä»£ç ç‰‡æ®µä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ·»åŠ äº†ä¸€ä¸ª HTTP æ—¥å¿—è®°å½•å™¨ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>RUST_LOG=info cargo run</code> æ‰§è¡Œåº”ç”¨ç¨‹åºå¹¶å‘ <code>http://localhost:8000</code> å‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬å°†åœ¨æ ‡å‡†è¾“å‡ºä¸Šçœ‹åˆ°æ—¥å¿—è¾“å‡ºã€‚</p><ul><li>ğŸ§‘â€ğŸ“â“ ä¸ºä»€ä¹ˆä¸æ˜¯å‘é‡æˆ–æ•°ç»„ï¼Ÿ</li></ul><p><code>Rust</code> å‘é‡å’Œæ•°ç»„æ˜¯ç±»å‹åŒè´¨çš„ï¼Œå› æ­¤ä¸ºäº†åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­çš„æ•°ç»„æˆ–å‘é‡ä¸­å­˜å‚¨ <code>Logger</code> å’Œé—­åŒ…ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬åˆ†é…åˆ°å †ä¸Šï¼Œå¹¶ä¸”å®é™…ä¸Šåœ¨åŒè´¨é›†åˆä¸­å­˜å‚¨ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚<code>Trillium</code> æœ€åˆæ˜¯å›´ç»• &quot;åºåˆ—&quot; çš„æ¦‚å¿µæ„å»ºçš„ï¼Œå®ƒä»¬æ˜¯ <code>Vec&lt;Box&lt;dyn Handler + &#39;static&gt;&gt;</code>çš„åŒ…è£…å™¨ã€‚å› ä¸ºå…ƒç»„å¯¹å®ƒä»¬çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥åŒ…å«ä¸åŒå¤§å°çš„å¼‚è´¨å…ƒç´ ï¼Œè€Œæ— éœ€å †åˆ†é…æˆ–æ™ºèƒ½æŒ‡é’ˆã€‚</p><h4 id="å®ç°å¤„ç†å™¨" tabindex="-1">å®ç°å¤„ç†å™¨ <a class="header-anchor" href="#å®ç°å¤„ç†å™¨" aria-label="Permalink to &quot;å®ç°å¤„ç†å™¨&quot;">â€‹</a></h4><p><code>Handler</code> çš„ <code>rustdocs</code> åŒ…å«äº†åº“ä½œè€…çš„ <code>Handler</code> æ¥å£çš„å®Œæ•´è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºè®¸å¤šåº”ç”¨ç¨‹åºï¼Œé™¤äº†å¼‚æ­¥å‡½æ•°æˆ–é—­åŒ…ä¹‹å¤–ï¼Œä½¿ç”¨ä»»ä½•å…¶ä»–ä¸œè¥¿å¯èƒ½éƒ½ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯ <code>Handler</code> å¯ä»¥åŒ…å«è‡ªå·±çš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºä»»ä½•æ‚¨ç¼–å†™çš„ç±»å‹å®ç°ã€‚</p><p>ç”± <code>trillium crate</code> æä¾›çš„å„ç§å®ç° æ‚¨å¯èƒ½ä¼šåœ¨æµ‹è¯•å’Œç¤ºä¾‹ä¸­çœ‹åˆ°ä¸€äº›å…¶ä»–ç±»å‹ã€‚</p><ul><li><code>()</code>ï¼šæ— æ“ä½œå¤„ç†å™¨ï¼Œä¸ <code>|conn: Conn| async move { conn }</code> ç›¸åŒã€‚</li><li><code>&amp;&#39;static str å’Œ Stringï¼š</code>è¿™ä¸ªç®€å•çš„å¤„ç†å™¨é€šè¿‡åœæ­¢ã€è®¾ç½® 200-ok çŠ¶æ€ï¼Œå¹¶å°†å­—ç¬¦ä¸²å†…å®¹ä½œä¸ºå“åº”æ­£æ–‡æ¥å“åº”æ‰€æœ‰ <code>conn</code>ã€‚<code>trillium_smol::run(&quot;hello&quot;)</code> ä¸ <code>trillium_smol::run(|conn: Conn| async move { conn.ok(&quot;hello&quot;) })</code> ç›¸åŒã€‚</li><li><code>Option&lt;impl Handler&gt;</code>ï¼šå¦‚æœ Option å˜ä½“æ˜¯ noneï¼Œè¿™ä¸ªå¤„ç†å™¨å°†æ— æ“ä½œã€‚è¿™åœ¨æ ¹æ®é…ç½®æˆ–ç¯å¢ƒæ¡ä»¶åœ°åœ¨è¿è¡Œæ—¶åŒ…å«å¤„ç†å™¨æ—¶éå¸¸æœ‰ç”¨ã€‚</li></ul><h3 id="conn" tabindex="-1">Conn <a class="header-anchor" href="#conn" aria-label="Permalink to &quot;Conn&quot;">â€‹</a></h3><p>åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥æ¢ç´¢å¤„ç†å™¨çš„æ¦‚å¿µä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ Connã€‚å¦‚ä¸Šæ‰€è¿°ï¼ŒConn ä»£è¡¨è¯·æ±‚å’Œå“åº”ï¼Œä»¥åŠåº”ç”¨ç¨‹åºä¸è¯¥è¯·æ±‚-å“åº”å‘¨æœŸç›¸å…³è”çš„ä»»ä½•æ•°æ®ã€‚</p><h4 id="é«˜çº§è¯´æ˜" tabindex="-1">é«˜çº§è¯´æ˜ <a class="header-anchor" href="#é«˜çº§è¯´æ˜" aria-label="Permalink to &quot;é«˜çº§è¯´æ˜&quot;">â€‹</a></h4><p>è™½ç„¶ Conn çš„å‘½åç›´æ¥å€Ÿé‰´è‡ª <code>Elixir</code> çš„ <code>Plug</code>ï¼Œå› æ­¤ä¹Ÿç”¨äº <code>Phoenix</code>ï¼Œä½†å®ƒå®é™…ä¸Šï¼ˆåœ¨ Rust çš„æ„ä¹‰ä¸Šï¼‰ä¹Ÿæ‹¥æœ‰è¡¨ç¤ºä¸ HTTP å®¢æˆ·ç«¯è¿æ¥çš„å•ä¸€ <code>TcpStream</code>ï¼Œä¸¢å¼ƒ <code>Conn</code> ä¹Ÿå°†å¯¼è‡´å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ã€‚</p><p><code>Conn</code> çš„ <code>rustdocs</code> åŒ…å«äº†ä½ å¯ä»¥ç”¨ conn åšçš„æ‰€æœ‰äº‹æƒ…çš„å®Œæ•´è¯¦ç»†ä¿¡æ¯ã€‚</p><h4 id="è¿”å›-conn" tabindex="-1">è¿”å› Conn <a class="header-anchor" href="#è¿”å›-conn" aria-label="Permalink to &quot;è¿”å› Conn&quot;">â€‹</a></h4><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå› ä¸ºä½ å°†ä»å¤„ç†å™¨è¿”å› Connï¼Œå®ƒæ”¯æŒä¸€ä¸ªå¯é“¾å¼ï¼ˆæµç•…çš„ï¼‰æ¥å£æ¥è®¾ç½®å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">202</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">with_response_header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;content-type&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;application/something-custom&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">with_body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;this is my custom body&quot;</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="è®¿é—®-http-è¯·æ±‚å±æ€§" tabindex="-1">è®¿é—® <code>HTTP</code> è¯·æ±‚å±æ€§ <a class="header-anchor" href="#è®¿é—®-http-è¯·æ±‚å±æ€§" aria-label="Permalink to &quot;è®¿é—® `HTTP` è¯·æ±‚å±æ€§&quot;">â€‹</a></h4><p>Conn è¿˜åŒ…å«åªè¯»å±æ€§ï¼Œå¦‚è¯·æ±‚å¤´ã€è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰ä¸ä¹‹å…³è”çš„è·å–å™¨å‡½æ•°ã€‚</p><h4 id="é»˜è®¤å“åº”" tabindex="-1">é»˜è®¤å“åº” <a class="header-anchor" href="#é»˜è®¤å“åº”" aria-label="Permalink to &quot;é»˜è®¤å“åº”&quot;">â€‹</a></h4><p>Conn çš„é»˜è®¤å“åº”æ˜¯ 404ï¼Œæ²¡æœ‰å“åº”ä½“ï¼Œå› æ­¤ä»å¤„ç†å™¨è¿”å›æœªç»ä¿®æ”¹çš„ Conn æ€»æ˜¯æœ‰æ•ˆçš„ï¼ˆ<code>|conn: Conn| async move { conn }</code> æ˜¯æœ€ç®€å•çš„æœ‰æ•ˆå¤„ç†å™¨ï¼‰ã€‚</p><h4 id="çŠ¶æ€" tabindex="-1">çŠ¶æ€ <a class="header-anchor" href="#çŠ¶æ€" aria-label="Permalink to &quot;çŠ¶æ€&quot;">â€‹</a></h4><p>é™¤äº†æŒæœ‰è¯·æ±‚å±æ€§å’Œç´¯ç§¯åº”ç”¨ç¨‹åºå°†è¦å‘é€çš„å“åº”ä¹‹å¤–ï¼ŒConn è¿˜ä½œä¸ºæ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºéœ€è¦ä¸è¯¥è¯·æ±‚å…³è”çš„ä»»ä½•ä¿¡æ¯ã€‚è¿™å¯¹äºå¤„ç†å™¨ä¹‹é—´çš„é€šä¿¡ç‰¹åˆ«æœ‰ä»·å€¼ï¼Œå¤§å¤šæ•°æ ¸å¿ƒå¤„ç†å™¨éƒ½æ˜¯ä½¿ç”¨ conn çŠ¶æ€å®ç°çš„ã€‚ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹æ˜¯ï¼Œæ¯ä¸ª Conn åªèƒ½åŒ…å«æ¯ç§ç±»å‹æ°å¥½ä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤å¼ºçƒˆå»ºè®®ä»…åœ¨çŠ¶æ€ä¸­å­˜å‚¨ä½ å®šä¹‰çš„ç±»å‹ã€‚</p><h4 id="ä¸-tide-çš„æ¯”è¾ƒ" tabindex="-1">ä¸ <code>Tide</code> çš„æ¯”è¾ƒ <a class="header-anchor" href="#ä¸-tide-çš„æ¯”è¾ƒ" aria-label="Permalink to &quot;ä¸ `Tide` çš„æ¯”è¾ƒ&quot;">â€‹</a></h4><p>Tide æœ‰ä¸‰ç§ä¸åŒç±»å‹çš„çŠ¶æ€ï¼šæœåŠ¡å™¨çŠ¶æ€ã€è¯·æ±‚çŠ¶æ€å’Œå“åº”çŠ¶æ€ã€‚åœ¨ Trillium ä¸­ï¼ŒæœåŠ¡å™¨çŠ¶æ€æ˜¯é€šè¿‡ trillium::State å¤„ç†å™¨å®ç°çš„ï¼Œè¯¥å¤„ç†å™¨æŒæœ‰ä»»ä½•å¯ä»¥å…‹éš†çš„ç±»å‹ï¼Œå¹¶å°†è¯¥ç±»å‹çš„ä¸€ä¸ªå‰¯æœ¬æ”¾å…¥é€šè¿‡å¤„ç†å™¨çš„æ¯ä¸ª Conn çš„çŠ¶æ€ä¸­ã€‚</p><h4 id="æ‰©å±•-conn" tabindex="-1">æ‰©å±• <code>Conn</code> <a class="header-anchor" href="#æ‰©å±•-conn" aria-label="Permalink to &quot;æ‰©å±• `Conn`&quot;">â€‹</a></h4><p>åœ¨ trillium ä¸­ï¼Œåº“æ‰©å±• Conn ä»¥æä¾›é¢å¤–åŠŸèƒ½æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ¨¡å¼ã€‚Conn æ¥å£ä¸æ”¯æŒä¼šè¯ã€Cookieã€è·¯ç”±å‚æ•°æˆ–å…¶ä»–è®¸å¤šå…¶ä»–æ¡†æ¶æ„å»ºåˆ°æ ¸å¿ƒç±»å‹ä¸­çš„æ„å»ºå—ã€‚ç›¸åï¼Œä»¥ä¼šè¯ä¸ºä¾‹ï¼Œtrillium_sessions æä¾›äº†ä¸€ä¸ª SessionConnExt traitï¼Œä¸º Conn æä¾›äº†æä¾›ä¼šè¯æ”¯æŒçš„å…³è”å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå°†æ•°æ®æ”¾å…¥ conn çŠ¶æ€çš„å¤„ç†å™¨ä¹Ÿä¼šæä¾›æ–¹ä¾¿çš„å‡½æ•°æ¥è®¿é—®è¯¥çŠ¶æ€ï¼Œå¹¶ä¼šå¯¼å‡ºä¸€ä¸ª [Something]ConnExt traitã€‚</p><h4 id="ç¤ºä¾‹-5" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-5" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><p>è¦æŸ¥çœ‹è¿™äº›æ¨¡å¼ä¹‹ä¸€çš„ç¤ºä¾‹ï¼Œè¯·å‚è§ library_patternsï¼Œäº†è§£å¦‚ä½•ç¼–å†™è¿™äº›åº“ä¹‹ä¸€ã€‚</p><h3 id="è¿è¡Œæ—¶é€‚é…å™¨å’Œ-tls" tabindex="-1">è¿è¡Œæ—¶é€‚é…å™¨å’Œ TLS <a class="header-anchor" href="#è¿è¡Œæ—¶é€‚é…å™¨å’Œ-tls" aria-label="Permalink to &quot;è¿è¡Œæ—¶é€‚é…å™¨å’Œ TLS&quot;">â€‹</a></h3><h4 id="è¿è¡Œæ—¶é€‚é…å™¨" tabindex="-1">è¿è¡Œæ—¶é€‚é…å™¨ <a class="header-anchor" href="#è¿è¡Œæ—¶é€‚é…å™¨" aria-label="Permalink to &quot;è¿è¡Œæ—¶é€‚é…å™¨&quot;">â€‹</a></h4><p>è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è®¨è®ºæˆ‘ä»¬ä¸€ç›´åœ¨å†™çš„ trillium_smol::run è¡Œã€‚Trillium æœ¬èº«æ˜¯å»ºç«‹åœ¨æœªæ¥ï¼ˆå…·ä½“æ¥è¯´ï¼Œæ˜¯ future-liteï¼‰ä¹‹ä¸Šçš„ã€‚ä¸ºäº†è¿è¡Œå®ƒï¼Œå®ƒéœ€è¦ä¸€ä¸ªé€‚é…å™¨æ¥è¿æ¥å¼‚æ­¥è¿è¡Œæ—¶ã€‚ç›®å‰æœ‰å››ä¸ªè¿™æ ·çš„é€‚é…å™¨ï¼š</p><ul><li>trillium_smol</li><li>trillium_async_std</li><li>trillium_tokio</li><li>trillium_aws_lambda</li></ul><p>å°½ç®¡æˆ‘ä»¬åœ¨è¿™äº›æ–‡æ¡£ä¸­ä¸€ç›´ä½¿ç”¨ smol é€‚é…å™¨ï¼Œä½†ä½ åº”è¯¥ä½¿ç”¨ä½ æ›´å–œæ¬¢çš„ä»»ä½•è¿è¡Œæ—¶ã€‚å¦‚æœä½ é¢„è®¡ä¼šæœ‰å¯¹ async-std æˆ– tokio çš„ä¾èµ–ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨é‚£ä¸ªè¿è¡Œæ—¶çš„é€‚é…å™¨ã€‚å¦‚æœä½ æ˜¯å¼‚æ­¥ Rust çš„æ–°æ‰‹æˆ–æ²¡æœ‰åå¥½ï¼Œæˆ‘å»ºè®®ä» trillium_smol å¼€å§‹ã€‚åœ¨ä»»ä½•æ—¶å€™åˆ‡æ¢ Trillium åˆ°ä¸åŒçš„è¿è¡Œæ—¶éƒ½å¾ˆå®¹æ˜“ã€‚</p><h4 id="é»˜è®¤æƒ…å†µä¸‹éµå¾ª-12-å› ç´ åŸåˆ™-ä½†å¯è¦†ç›–" tabindex="-1">é»˜è®¤æƒ…å†µä¸‹éµå¾ª 12 å› ç´ åŸåˆ™ï¼Œä½†å¯è¦†ç›– <a class="header-anchor" href="#é»˜è®¤æƒ…å†µä¸‹éµå¾ª-12-å› ç´ åŸåˆ™-ä½†å¯è¦†ç›–" aria-label="Permalink to &quot;é»˜è®¤æƒ…å†µä¸‹éµå¾ª 12 å› ç´ åŸåˆ™ï¼Œä½†å¯è¦†ç›–&quot;">â€‹</a></h4><p>Trillium åŠ›æ±‚éµå¾ªé…ç½®çš„ 12 å› ç´ æ–¹æ³•ï¼Œå°½å¯èƒ½åœ°ä»ç¯å¢ƒæ¥å—é…ç½®ã€‚å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰çš„é…ç½®ç‚¹æ•°é‡å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå¢åŠ ã€‚</p><p>è¦ä½¿ç”¨ä¸åŒçš„ä¸»æœºæˆ–ç«¯å£è¿è¡Œ Trilliumï¼Œå¯ä»¥æä¾› HOST å’Œ/æˆ– PORT ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…å°†ç‰¹å®šå€¼ç¼–è¯‘åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">config</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_port</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1337</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_host</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;127.0.0.1&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">) })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é™¤äº†ä»ç¯å¢ƒæ¥å— HOST å’Œ PORT é…ç½®å¤–ï¼Œåœ¨ cfg(unix) ç³»ç»Ÿä¸Šï¼ŒTrillium è¿˜ä¼šä½¿ç”¨ LISTEN_FD ç¯å¢ƒå˜é‡ä¸ catflap/systemfd ä¸€èµ·ä½¿ç”¨ã€‚åœ¨ cfg(unix) ç³»ç»Ÿä¸Šï¼Œå¦‚æœ HOST ä»¥ .ã€/ æˆ– ~ å¼€å¤´ï¼Œå®ƒè¢«è§£é‡Šä¸ºè·¯å¾„å¹¶ä½œä¸º Unix åŸŸå¥—æ¥å­—ç»‘å®šã€‚</p><p>æœ‰å…³é»˜è®¤å€¼çš„æ›´å¤šæ–‡æ¡£ä»¥åŠå¯ä»¥é“¾æ¥åˆ° config() ä¸Šçš„é…ç½®ï¼Œè¯·å‚é˜… trillium_server_common::Configã€‚</p><h4 id="tls-https" tabindex="-1">TLS / HTTPS <a class="header-anchor" href="#tls-https" aria-label="Permalink to &quot;TLS / HTTPS&quot;">â€‹</a></h4><p>é™¤äº† aws lambdaï¼ˆåœ¨è´Ÿè½½å¹³è¡¡å™¨å¤„æä¾›è‡ªå·±çš„ tls ç»ˆæ­¢ï¼‰ä¹‹å¤–ï¼Œä¸Šè¿°æ¯ä¸ªæœåŠ¡å™¨éƒ½å¯ä»¥ä¸ rustls æˆ– native-tls ç»“åˆä½¿ç”¨ï¼Œæˆ–è€…ä¸ trillium-acme ç»“åˆä½¿ç”¨ï¼Œä»¥è‡ªåŠ¨ä½¿ç”¨ Let&#39;s Encrypt ç­‰ ACME è¯ä¹¦æä¾›å•†æ³¨å†Œè¯ä¹¦ã€‚</p><h5 id="rustls" tabindex="-1">Rustls: <a class="header-anchor" href="#rustls" aria-label="Permalink to &quot;Rustls:&quot;">â€‹</a></h5><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_rustls</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">RustlsAcceptor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> KEY</span><span style="color:#ABB2BF;">: &amp;[</span><span style="color:#E5C07B;">u8</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> include_bytes!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./key.pem&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> CERT</span><span style="color:#ABB2BF;">: &amp;[</span><span style="color:#E5C07B;">u8</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> include_bytes!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./cert.pem&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">config</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_acceptor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">RustlsAcceptor</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_single_cert</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">CERT</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">KEY</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ok&quot;</span><span style="color:#ABB2BF;">) });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="åŸç”Ÿ-tls" tabindex="-1">åŸç”Ÿ tls: <a class="header-anchor" href="#åŸç”Ÿ-tls" aria-label="Permalink to &quot;åŸç”Ÿ tls:&quot;">â€‹</a></h5><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_native_tls</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">NativeTlsAcceptor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> acceptor</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> NativeTlsAcceptor</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_pkcs12</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">include_bytes!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./identity.p12&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;changeit&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">config</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_acceptor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">acceptor</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ok&quot;</span><span style="color:#ABB2BF;">) });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="é€šè¿‡-let-s-encrypt-è‡ªåŠ¨-https" tabindex="-1">é€šè¿‡ Let&#39;s Encrypt è‡ªåŠ¨ HTTPS: <a class="header-anchor" href="#é€šè¿‡-let-s-encrypt-è‡ªåŠ¨-https" aria-label="Permalink to &quot;é€šè¿‡ Let&#39;s Encrypt è‡ªåŠ¨ HTTPS:&quot;">â€‹</a></h5><p>æŸ¥çœ‹ trillium-acme æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ã€‚</p><h3 id="è·¯ç”±å™¨" tabindex="-1">è·¯ç”±å™¨ <a class="header-anchor" href="#è·¯ç”±å™¨" aria-label="Permalink to &quot;è·¯ç”±å™¨&quot;">â€‹</a></h3><p>Trillium çš„è·¯ç”±å™¨åŸºäº routefinderã€‚è¿™ä¸ªè·¯ç”±å™¨æ”¯æŒä¸¤ç§ç±»å‹çš„æ¨¡å¼ï¼šæœªç±»å‹åŒ–çš„å‚æ•°å’Œå•ä¸ªé€šé…ç¬¦ã€‚å‘½åå‚æ•°è¢«æ•è·åœ¨ä¸€ä¸ªç±»ä¼¼æ˜ å°„çš„æ¥å£ä¸­ã€‚ä»»ä½•å¤„ç†å™¨éƒ½å¯ä»¥å®‰è£…åœ¨è·¯ç”±å™¨ï¼ˆåŒ…æ‹¬å…¶ä»–è·¯ç”±å™¨ï¼‰å†…éƒ¨ï¼Œå…è®¸æ•´ä¸ªåº”ç”¨ç¨‹åºè¢«å®‰è£…åœ¨è·¯å¾„ä¸Šï¼Œå¹¶å…è®¸ç»™å®šè·¯ç”±ä¸Šè¿è¡Œå…ƒç»„å¤„ç†å™¨ã€‚åœ¨åŒ…å« <code>*</code> çš„è·¯ç”±å†…å®‰è£…çš„ä»»ä½•å¤„ç†å™¨éƒ½å°†ä½¿ URL è¢«é‡å†™ä¸ºè¯¥æ˜Ÿå·çš„å†…å®¹ã€‚</p><p>åŸºäº routefinder çš„æ›¿ä»£è·¯ç”±å™¨æ˜¯åˆ›æ–°å’Œæ¢ç´¢çš„ç»ä½³æœºä¼šã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºç¤ºä¾‹ï¼Œå®ƒå“åº”è¯·æ±‚ <code>http://localhost:8000/greet/earth</code> æ—¶è¿”å› &quot;hello earth&quot;ï¼Œå“åº” <code>http://localhost:8000/greet/mars</code> æ—¶è¿”å› &quot;hello mars&quot;ï¼Œå“åº” <code>http://localhost:8000</code> æ—¶è¿”å› &quot;hello everyone&quot;ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_router</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Router</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">RouterConnExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">        Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello everyone&quot;</span><span style="color:#ABB2BF;">) })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/hello/:planet&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> planet</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">param</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;planet&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> response_body</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello {planet}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">response_body</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            }),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="åµŒå¥—" tabindex="-1">åµŒå¥— <a class="header-anchor" href="#åµŒå¥—" aria-label="Permalink to &quot;åµŒå¥—&quot;">â€‹</a></h3><p>Trillium è¿˜æ”¯æŒè·¯ç”±å™¨çš„åµŒå¥—ï¼Œä½¿å¾—å¯ä»¥è¡¨è¾¾å¤æ‚çš„å­åº”ç”¨ç¨‹åºï¼Œç±»ä¼¼äº Rails å¼•æ“ã€‚å½“å­˜åœ¨å…¶ä»–ç±»å‹çš„è·¯ç”±å™¨æ—¶ï¼Œä½¿ç”¨ä¸€ç§ç±»å‹çš„è·¯ç”±å™¨æ„å»ºçš„åº”ç”¨ç¨‹åºå°†å¯ä»¥ä½œä¸ºä¸€ä¸ª crate å‘å¸ƒï¼Œå¹¶åµŒå¥—åœ¨å¦ä¸€ä¸ªè·¯ç”±å™¨å†…éƒ¨ï¼Œåªè¦å®ƒä»¬ä¾èµ–äº trillium crate çš„å…¼å®¹ç‰ˆæœ¬ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{conn_try, conn_unwrap, </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_router</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Router</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">RouterConnExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">usize</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> nested_app {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;font-style:italic;"> super</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> load_user</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> id</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> conn_try!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">param</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;user_id&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;"> }; </span><span style="color:#7F848E;font-style:italic;">// å‡è®¾æˆ‘ä»¬æ˜¯ä»æ•°æ®åº“ä¸­åŠ è½½ç”¨æˆ·</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_state</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> greeting</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> conn_unwrap!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">take_state</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">&gt;(), </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello user {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">.id))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> post</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> conn_unwrap!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">take_state</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">&gt;(), </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> conn_try!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request_body_string</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello user {}, {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">.id, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> some_other_route</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;this is an uninspired example&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> handler</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        (</span></span>
<span class="line"><span style="color:#E06C75;">            load_user</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">            Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/greeting&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">greeting</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/some/other/route&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">some_other_route</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/post&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">post</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E5C07B;">        Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello everyone&quot;</span><span style="color:#ABB2BF;">) })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">any</span><span style="color:#ABB2BF;">(&amp;[</span><span style="color:#98C379;">&quot;get&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;post&quot;</span><span style="color:#ABB2BF;">], </span><span style="color:#98C379;">&quot;/users/:user_id/*&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">nested_app</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">handler</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="æ¨¡æ¿å¼•æ“" tabindex="-1">æ¨¡æ¿å¼•æ“ <a class="header-anchor" href="#æ¨¡æ¿å¼•æ“" aria-label="Permalink to &quot;æ¨¡æ¿å¼•æ“&quot;">â€‹</a></h3><p>Trillium ç›®å‰æ”¯æŒä¸‰ç§æ¨¡æ¿å¼•æ“ï¼Œè™½ç„¶å®ƒä»¬å¹¶ä¸äº’æ–¥ï¼Œä½†å¤§å¤šæ•°åº”ç”¨ç¨‹åºé€šå¸¸æœ€å¤šåªä¼šé€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚</p><h4 id="askama" tabindex="-1">Askama <a class="header-anchor" href="#askama" aria-label="Permalink to &quot;Askama&quot;">â€‹</a></h4><p>Askama æ˜¯ä¸€ä¸ªåŸºäº Jinja çš„æ¨¡æ¿å¼•æ“ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶é¢„å¤„ç†æ¨¡æ¿ï¼Œç”Ÿæˆé«˜æ•ˆä¸”ç±»å‹å®‰å…¨çš„æ¨¡æ¿ï¼Œå¹¶ç¼–è¯‘åˆ°åº”ç”¨ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚ä»¥ä¸‹æ˜¯ Askama çš„ç¤ºä¾‹ï¼š</p><p>åœ¨ <code>ï¼ˆcargo rootï¼‰/templates/examples/hello.html</code> æ–‡ä»¶ä¸­ç»™å®šä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Hello</span><span style="color:#ABB2BF;">, {{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> }}</span><span style="color:#56B6C2;">!</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_askama</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">AskamaConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Template</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Template</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#ABB2BF;">#[template(path </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;examples/hello.html&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> HelloTemplate</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: &amp;&#39;</span><span style="color:#E5C07B;">a</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HelloTemplate</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;world&quot;</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="ructe" tabindex="-1">Ructe <a class="header-anchor" href="#ructe" aria-label="Permalink to &quot;Ructe&quot;">â€‹</a></h4><p>Ructe æ˜¯ä¸€ä¸ªä¸ Askama ç±»ä¼¼çš„ç¼–è¯‘æ—¶ç±»å‹æ¨¡æ¿ç³»ç»Ÿï¼Œä½†å®ƒä½¿ç”¨æ„å»ºè„šæœ¬è€Œä¸æ˜¯å®ã€‚</p><ul><li><strong>Crate</strong>: **<a href="https://crates.io/crates/trillium-ructe**%5B1%5D" target="_blank" rel="noreferrer">https://crates.io/crates/trillium-ructe**[1]</a></li><li><strong>Repository</strong>: **<a href="https://github.com/prabirshrestha/trillium-ructe**%5B2%5D" target="_blank" rel="noreferrer">https://github.com/prabirshrestha/trillium-ructe**[2]</a></li><li><strong>Docs</strong>: **<a href="https://docs.rs/trillium-ructe/latest/trillium_ructe/**%5B3%5D" target="_blank" rel="noreferrer">https://docs.rs/trillium-ructe/latest/trillium_ructe/**[3]</a></li></ul><p>Ructe çš„ä½¿ç”¨ç¤ºä¾‹å¯ä»¥åœ¨æä¾›çš„ GitHub ä»“åº“æˆ–å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚</p><h4 id="tera" tabindex="-1">Tera <a class="header-anchor" href="#tera" aria-label="Permalink to &quot;Tera&quot;">â€‹</a></h4><p>Tera æä¾›è¿è¡Œæ—¶æ¨¡æ¿æ¸²æŸ“ã€‚Trillium çš„ Tera é›†æˆæä¾›äº†ä¸€ä¸ªä¸ Phoenix æˆ– Rails éå¸¸ç›¸ä¼¼çš„æ¥å£ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰å°†èµ‹å€¼è®¾ç½®åœ¨ Conn ä¸Šã€‚</p><p>åœ¨ä¸ <code>main.rs</code> ç›¸åŒç›®å½•ä¸‹çš„ <code>examples</code> æ–‡ä»¶å¤¹ä¸­ç»™å®šä»¥ä¸‹æ–‡ä»¶ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Hello</span><span style="color:#ABB2BF;">, {{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> }}</span><span style="color:#56B6C2;">!</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_tera</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">TeraConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TeraHandler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span><span style="color:#E5C07B;">TeraHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;**/*.html&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;hi&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;examples/hello.html&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="handlebars" tabindex="-1">Handlebars <a class="header-anchor" href="#handlebars" aria-label="Permalink to &quot;Handlebars&quot;">â€‹</a></h4><p>Handlebars ä¹Ÿæä¾›è¿è¡Œæ—¶æ¨¡æ¿æ¸²æŸ“ã€‚</p><p>åœ¨ <code>examples/templates/hello.hbs</code> æ–‡ä»¶ä¸­ç»™å®šä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;"> {{</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">}}</span><span style="color:#56B6C2;">!</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_handlebars</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">HandlebarsConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">HandlebarsHandler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        HandlebarsHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./examples/templates/*.hbs&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#56B6C2;">        |</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;world&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;examples/templates/hello.hbs&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>é€‰æ‹©å“ªç§æ¨¡æ¿å¼•æ“å–å†³äºä½ çš„ä¸ªäººåå¥½å’Œåº”ç”¨ç¨‹åºçš„å…·ä½“éœ€æ±‚ã€‚æ¯ç§å¼•æ“éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œä¾‹å¦‚ Askama å’Œ Ructe æä¾›ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè€Œ Tera å’Œ Handlebars æä¾›äº†æ›´çµæ´»çš„è¿è¡Œæ—¶æ¨¡æ¿æ¸²æŸ“ã€‚</p><h3 id="æ—¥å¿—" tabindex="-1">æ—¥å¿— <a class="header-anchor" href="#æ—¥å¿—" aria-label="Permalink to &quot;æ—¥å¿—&quot;">â€‹</a></h3><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::{apache_combined, </span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">(&amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> name</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> user_id</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;">) -&gt; &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">&gt;().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap_or</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        State</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">User</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;jacob&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#E5C07B;">        Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">with_formatter</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">apache_combined</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user_id</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;ok&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="cookies" tabindex="-1">Cookies <a class="header-anchor" href="#cookies" aria-label="Permalink to &quot;Cookies&quot;">â€‹</a></h3><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_cookies</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">CookiesConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">CookiesHandler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span><span style="color:#E5C07B;">CookiesHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(), </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cookie_value</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cookies</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;some_cookie&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current cookie value: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">cookie_value</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">value</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_cookie</span><span style="color:#ABB2BF;">((</span><span style="color:#98C379;">&quot;some_cookie&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;some-cookie-value&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ok!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="ä¼šè¯-sessions" tabindex="-1">ä¼šè¯ï¼ˆSessionsï¼‰ <a class="header-anchor" href="#ä¼šè¯-sessions" aria-label="Permalink to &quot;ä¼šè¯ï¼ˆSessionsï¼‰&quot;">â€‹</a></h3><p>åœ¨ Web æ¡†æ¶ä¸­ï¼Œä¼šè¯æ˜¯ä¸€ç§å¸¸è§çº¦å®šï¼Œå®ƒå…è®¸ä»¥ä¸€ç§å®‰å…¨çš„æ–¹å¼å…³è”æœåŠ¡å™¨ç«¯æ•°æ®ä¸ç‰¹å®šçš„ HTTP å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚Trillium çš„ä¼šè¯å­˜å‚¨å»ºç«‹åœ¨ <code>async-session</code> crate ä¹‹ä¸Šï¼Œè¿™å…è®¸æˆ‘ä»¬ä¸ Tide åˆ†äº«ä¼šè¯å­˜å‚¨ã€‚ç›®å‰ï¼Œå­˜åœ¨ä»¥ä¸‹ä¼šè¯å­˜å‚¨ï¼š</p><ol><li><strong>MemoryStore</strong>ï¼ˆä½œä¸º <code>trillium_sessions::MemoryStore</code> é‡æ–°å¯¼å‡ºï¼‰</li><li><strong>CookieStore</strong>ï¼ˆä½œä¸º <code>trillium_sessions::CookieStore</code> é‡æ–°å¯¼å‡ºï¼‰</li><li><strong>PostgresSessionStore</strong> å’Œ <strong>SqliteSessionStore</strong> æ¥è‡ª <code>async-sqlx-session</code></li><li><strong>RedisSessionStore</strong> æ¥è‡ª <code>async-redis-session</code></li><li><strong>MongodbSessionStore</strong> æ¥è‡ª <code>async-mongodb-session</code></li></ol><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šç”Ÿäº§åº”ç”¨ä¸­åº”é¿å…ä½¿ç”¨å†…å­˜å­˜å‚¨å’Œ Cookie å­˜å‚¨ã€‚å†…å­˜å­˜å‚¨åœ¨æœåŠ¡å™¨è¿›ç¨‹é‡å¯æ—¶å°†ä¸¢å¤±æ‰€æœ‰ä¼šè¯çŠ¶æ€ï¼Œè€Œ Cookie å­˜å‚¨ä¸æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨ç›¸æ¯”ï¼Œæ¶‰åŠä¸åŒçš„å®‰å…¨æƒè¡¡ã€‚å¦‚æœå¯èƒ½ï¼Œä½¿ç”¨æ•°æ®åº“ã€‚</p><p>â—<strong>ä¼šè¯å¤„ç†å™¨å¿…é¡»ä¸ Cookie å¤„ç†å™¨ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”å¿…é¡»åœ¨ Cookie å¤„ç†å™¨ä¹‹åè¿è¡Œ</strong>ã€‚è¿™ç§ç‰¹å®šçš„äº¤äº’ä¹Ÿå­˜åœ¨äºå…¶ä»–æ¡†æ¶ä¸­ï¼Œè¿™æ˜¯å› ä¸ºæ— è®ºä½¿ç”¨å“ªç§ä¼šè¯å­˜å‚¨ï¼Œä¼šè¯éƒ½ä½¿ç”¨å®‰å…¨ Cookie ä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_cookies</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">CookiesHandler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_sessions</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">MemoryStore</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">SessionConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">SessionHandler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        CookiesHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E5C07B;">        SessionHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MemoryStore</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(), </span><span style="color:#98C379;">&quot;01234567890123456789012345678901123&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#56B6C2;">        |</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> count</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">usize</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">session</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;count&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">            conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_session</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;count&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> + </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;count: {count}&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>MemoryStore</code> åˆ›å»ºäº†ä¸€ä¸ªä¼šè¯å¤„ç†å™¨ï¼Œå¹¶é€šè¿‡ <code>SessionHandler</code> è®¾ç½®äº†ä¸€ä¸ªåŠ å¯†å¯†é’¥ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„å¤„ç†å™¨ï¼Œç”¨äºå¢åŠ ä¼šè¯ä¸­çš„è®¡æ•°å™¨å¹¶è¿”å›æ–°çš„è®¡æ•°å€¼ã€‚æ³¨æ„ï¼Œä¼šè¯å¤„ç†å™¨éœ€è¦åœ¨ <code>CookiesHandler</code> ä¹‹åä½¿ç”¨ï¼Œä»¥ç¡®ä¿ Cookie å·²ç»è®¾ç½®ï¼Œä¼šè¯å¯ä»¥æ­£ç¡®åœ°è¢«æ£€ç´¢å’Œæ›´æ–°ã€‚</p><h3 id="ä»£ç†-proxy" tabindex="-1">ä»£ç†ï¼ˆProxyï¼‰ <a class="header-anchor" href="#ä»£ç†-proxy" aria-label="Permalink to &quot;ä»£ç†ï¼ˆProxyï¼‰&quot;">â€‹</a></h3><p>Trillium åŒ…å«äº†ä¸€ä¸ªå®šåˆ¶çš„ HTTP å®¢æˆ·ç«¯å®ç°ï¼Œä»¥æ”¯æŒåå‘ä»£ç†è¯·æ±‚ã€‚è¿™ä¸ªå®¢æˆ·ç«¯æœ‰ä¸¤ç§ TLS å®ç°ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_client</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Client</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_proxy</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    upstream</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">ConnectionCounting</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IntoUpstreamSelector</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">UpstreamSelector</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">    Proxy</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ClientConfig</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> upstream</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> if</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">args</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">count</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦‚æœæ²¡æœ‰æä¾›é¢å¤–çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä½¿ç”¨é»˜è®¤çš„ä¸Šæ¸¸æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#98C379;">        &quot;http://localhost:8080&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_upstream</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">boxed</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦åˆ™ï¼Œå°†æ‰€æœ‰æä¾›çš„å‘½ä»¤è¡Œå‚æ•°ä½œä¸ºä¸Šæ¸¸æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#E5C07B;">        std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">args</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">skip</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">collect</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">ConnectionCounting</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">&gt;&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">boxed</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E5C07B;">        Proxy</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Client</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ClientConfig</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">with_default_pool</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">            upstream</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_via_pseudonym</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;trillium-proxy&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒTrillium ä½œä¸ºä¸€ä¸ªåå‘ä»£ç†è¿è¡Œã€‚å¦‚æœæ²¡æœ‰æä¾›å‘½ä»¤è¡Œå‚æ•°ï¼Œå®ƒå°†æŠŠè¯·æ±‚è½¬å‘åˆ° <code>http://localhost:8080</code>ã€‚å¦‚æœæä¾›äº†å‚æ•°ï¼Œå®ƒä»¬å°†è¢«ç”¨ä½œä¸Šæ¸¸æœåŠ¡å™¨çš„åœ°å€ã€‚<code>ConnectionCounting</code> ç»´æŠ¤æ¯ä¸ªä¸Šæ¸¸æœåŠ¡å™¨çš„è¿æ¥æ•°ï¼Œè¿™å¯¹äºæµ‹è¯•æˆ–è´Ÿè½½å‡è¡¡éå¸¸æœ‰ç”¨ã€‚</p><p><code>Proxy</code> ä½¿ç”¨ <code>Client</code> æ¥æ‰§è¡Œä¼ å‡ºè¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥é…ç½®ä¸€ä¸ªè¿æ¥æ± ã€‚<code>with_via_pseudonym</code> ç”¨äºè®¾ç½® HTTP è¯·æ±‚çš„ <code>Via</code> å¤´éƒ¨çš„ä¼ªåï¼Œè¿™æ˜¯ä»£ç†æœåŠ¡å™¨çš„å¸¸è§åšæ³•ã€‚</p><h4 id="æ³¨æ„-1" tabindex="-1">æ³¨æ„ <a class="header-anchor" href="#æ³¨æ„-1" aria-label="Permalink to &quot;æ³¨æ„&quot;">â€‹</a></h4><ul><li><code>into_upstream()</code> å‡½æ•°å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸º <code>UpstreamSelector</code>ï¼Œå®ƒå…è®¸ Trillium çŸ¥é“è¯·æ±‚åº”è¯¥è¢«è½¬å‘åˆ°å“ªä¸ªä¸Šæ¸¸æœåŠ¡ã€‚</li><li><code>boxed()</code> å°† <code>UpstreamSelector</code> è½¬æ¢ä¸º <code>Box&lt;dyn UpstreamSelector&gt;</code>ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ <code>Proxy::new</code> ä¸­ä½¿ç”¨äº†ã€‚</li><li><code>ClientConfig</code> å…è®¸ä½ ä¸º HTTP å®¢æˆ·ç«¯é…ç½®é€‰é¡¹ï¼Œå¦‚è¶…æ—¶ã€æœ€å¤§å“åº”ä½“å¤§å°ç­‰ã€‚</li><li><code>with_default_pool()</code> ä¸º HTTP å®¢æˆ·ç«¯åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„è¿æ¥æ± ã€‚</li></ul><p>ä½¿ç”¨ Trillium çš„ä»£ç†åŠŸèƒ½ï¼Œä½ å¯ä»¥æ„å»ºå¤æ‚çš„ç½‘ç»œæ‹“æ‰‘ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€SSL ç»ˆæ­¢ã€è¯·æ±‚ä¿®æ”¹ç­‰ã€‚</p><h3 id="é™æ€æ–‡ä»¶æœåŠ¡" tabindex="-1">é™æ€æ–‡ä»¶æœåŠ¡ <a class="header-anchor" href="#é™æ€æ–‡ä»¶æœåŠ¡" aria-label="Permalink to &quot;é™æ€æ–‡ä»¶æœåŠ¡&quot;">â€‹</a></h3><p>Trillium æä¾›äº†ä¸¤ç§åŸºæœ¬çš„é™æ€æ–‡ä»¶æœåŠ¡æ–¹æ³•ã€‚ç›®å‰ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½è¿˜æ²¡æœ‰æ‰§è¡Œä»»ä½•ä¸ç¼“å­˜ç›¸å…³çš„å¤´éƒ¨æ£€æŸ¥ã€‚</p><h4 id="ä»ç£ç›˜æœåŠ¡" tabindex="-1">ä»ç£ç›˜æœåŠ¡ <a class="header-anchor" href="#ä»ç£ç›˜æœåŠ¡" aria-label="Permalink to &quot;ä»ç£ç›˜æœåŠ¡&quot;">â€‹</a></h4><p>è¿™ä¸ªå¤„ç†å™¨åœ¨è¯·æ±‚æ—¶ä»ç£ç›˜åŠ è½½å†…å®¹ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰æ‰§è¡Œä»»ä½•å†…å­˜ç¼“å­˜ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(unix)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> trillium_static</span><span style="color:#ABB2BF;">::{crate_relative_path, files};</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">logger</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#61AFEF;">        files</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">crate_relative_path!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;examples/files&quot;</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">with_index_file</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;index.html&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ))</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(not(unix))]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒTrillium è¢«é…ç½®ä¸ºä»ç›¸å¯¹äº cargo crate çš„è·¯å¾„ <code>&quot;examples/files&quot;</code> æœåŠ¡é™æ€æ–‡ä»¶ï¼Œå¹¶å°† <code>&quot;index.html&quot;</code> ä½œä¸ºç´¢å¼•æ–‡ä»¶ã€‚</p><h4 id="ä»å†…å­˜æœåŠ¡-ç¼–è¯‘æ—¶" tabindex="-1">ä»å†…å­˜æœåŠ¡ï¼ˆç¼–è¯‘æ—¶ï¼‰ <a class="header-anchor" href="#ä»å†…å­˜æœåŠ¡-ç¼–è¯‘æ—¶" aria-label="Permalink to &quot;ä»å†…å­˜æœåŠ¡ï¼ˆç¼–è¯‘æ—¶ï¼‰&quot;">â€‹</a></h4><p>è¿™ä¸ªå¤„ç†å™¨å°†æ‰€æœ‰é™æ€å†…å®¹åŒ…å«åœ¨ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå…è®¸å®ƒç‹¬ç«‹äºèµ„æºè¿›è¡Œåˆ†å‘ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(unix)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> trillium_static_compiled</span><span style="color:#ABB2BF;">::static_compiled;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">        trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E5C07B;">        trillium_caching_headers</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">CachingHeaders</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#61AFEF;">        static_compiled!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;./examples/files&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">with_index_file</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;index.html&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(not(unix))]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ <code>static_compiled!</code> å®å°†ä½äº <code>./examples/files</code> çš„é™æ€æ–‡ä»¶åœ¨ç¼–è¯‘æ—¶åŒ…å«è¿›äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”åŒæ ·å°† <code>&quot;index.html&quot;</code> ä½œä¸ºç´¢å¼•æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œä½¿ç”¨ <code>CachingHeaders</code> ä¸­é—´ä»¶ä¸ºé™æ€æ–‡ä»¶æ·»åŠ ç¼“å­˜ç›¸å…³çš„ HTTP å¤´éƒ¨ï¼Œè¿™æœ‰åŠ©äºæé«˜æ€§èƒ½å¹¶å‡å°‘ç½‘ç»œä¼ è¾“ã€‚</p><h4 id="æ³¨æ„-2" tabindex="-1">æ³¨æ„ <a class="header-anchor" href="#æ³¨æ„-2" aria-label="Permalink to &quot;æ³¨æ„&quot;">â€‹</a></h4><ul><li><code>crate_relative_path!</code> å®ç”Ÿæˆç›¸å¯¹äºå½“å‰ crate root çš„è·¯å¾„ï¼Œå®ƒåœ¨æ„å»ºæ—¶ç¡®å®šã€‚</li><li><code>static_compiled!</code> å®å°†æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶åŒ…å«åœ¨æœ€ç»ˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä½¿å¾—å¯ä»¥åœ¨æ²¡æœ‰å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿç»“æ„çš„æƒ…å†µä¸‹æä¾›é™æ€æ–‡ä»¶ã€‚</li><li><code>CachingHeaders</code> ä¸­é—´ä»¶æ·»åŠ äº† <code>Cache-Control</code> å’Œ <code>ETag</code> å¤´éƒ¨ï¼Œä½¿å¾—å®¢æˆ·ç«¯å’Œä»£ç†å¯ä»¥æ›´æœ‰æ•ˆåœ°ç¼“å­˜é™æ€èµ„æºã€‚</li></ul><p>ä½¿ç”¨ Trillium çš„é™æ€æ–‡ä»¶æœåŠ¡åŠŸèƒ½ï¼Œå¯ä»¥è½»æ¾åœ°å°†é™æ€èµ„æºå¦‚ HTMLã€CSSã€JavaScript æ–‡ä»¶å’Œå›¾ç‰‡é›†æˆåˆ° Web åº”ç”¨ç¨‹åºä¸­ã€‚</p><h3 id="websocket-æ”¯æŒ" tabindex="-1">WebSocket æ”¯æŒ <a class="header-anchor" href="#websocket-æ”¯æŒ" aria-label="Permalink to &quot;WebSocket æ”¯æŒ&quot;">â€‹</a></h3><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures_util</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">StreamExt</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::logger;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_websockets</span><span style="color:#ABB2BF;">::{websocket, </span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">WebSocketConn</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> websocket_handler</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">WebSocketConn</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    while</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;">))) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">send_string</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;received your message: {}&quot;</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            log</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">error!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{e}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">            break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">((</span><span style="color:#61AFEF;">logger</span><span style="color:#ABB2BF;">(), </span><span style="color:#61AFEF;">websocket</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">websocket_handler</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="æµ‹è¯•-trillium-åº”ç”¨ç¨‹åº" tabindex="-1">æµ‹è¯• Trillium åº”ç”¨ç¨‹åº <a class="header-anchor" href="#æµ‹è¯•-trillium-åº”ç”¨ç¨‹åº" aria-label="Permalink to &quot;æµ‹è¯• Trillium åº”ç”¨ç¨‹åº&quot;">â€‹</a></h3><p>Trillium æä¾›äº†ä¸€ä¸ªæµ‹è¯• crateï¼Œæ—¨åœ¨ä¸º Trillium åº”ç”¨ç¨‹åºæä¾›â€œåŠŸèƒ½/å•å…ƒæµ‹è¯•â€å’Œâ€œé›†æˆæµ‹è¯•â€ã€‚</p><h4 id="ç¤ºä¾‹åº”ç”¨ç¨‹åº" tabindex="-1">ç¤ºä¾‹åº”ç”¨ç¨‹åº <a class="header-anchor" href="#ç¤ºä¾‹åº”ç”¨ç¨‹åº" aria-label="Permalink to &quot;ç¤ºä¾‹åº”ç”¨ç¨‹åº&quot;">â€‹</a></h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå®Œå…¨è™šæ„çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{conn_try, </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">KnownHeaderName</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> teapot</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> request_body</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> conn_try!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request_body_string</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#E06C75;"> request_body</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_empty</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">406</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">with_body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;unacceptable!&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">halt</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_body</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;request body was: {request_body}&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">with_status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">418</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">with_response_header</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">KnownHeaderName</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;zojirushi&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> application</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    (</span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">teapot</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">application</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="ç¼–å†™æµ‹è¯•" tabindex="-1">ç¼–å†™æµ‹è¯• <a class="header-anchor" href="#ç¼–å†™æµ‹è¯•" aria-label="Permalink to &quot;ç¼–å†™æµ‹è¯•&quot;">â€‹</a></h4><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç®€å•çš„æµ‹è¯•ç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(test)]</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> tests {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;font-style:italic;"> super</span><span style="color:#ABB2BF;">::{application, teapot};</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> trillium_testing</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[test]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> handler_sends_correct_headers_and_is_a_teapot</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> application</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> application</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_response!</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">            post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">with_request_body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello trillium!&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">application</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">            Status</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ImATeapot</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;request body was: hello trillium!&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;server&quot;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&quot;zojirushi&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;content-length&quot;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&quot;33&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[test]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> we_can_also_test_the_individual_handler</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_body!</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">            post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">with_request_body</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;a different body&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">teapot</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#98C379;">            &quot;request body was: a different body&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[test]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> application_is_lemongrab_when_body_is_empty</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> application</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> application</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_response!</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">            post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">application</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">            Status</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">NotAcceptable</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &quot;unacceptable!&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h4 id="æµ‹è¯•è¯´æ˜" tabindex="-1">æµ‹è¯•è¯´æ˜ <a class="header-anchor" href="#æµ‹è¯•è¯´æ˜" aria-label="Permalink to &quot;æµ‹è¯•è¯´æ˜&quot;">â€‹</a></h4><ul><li><p><code>application</code> å‡½æ•°è¿”å›æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å¤„ç†å™¨ã€‚</p></li><li><p><code>teapot</code> å‡½æ•°æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘å¤„ç†å™¨ï¼Œå®ƒæ ¹æ®è¯·æ±‚ä½“çš„å†…å®¹è¿”å›ä¸åŒçš„å“åº”ã€‚</p></li><li><p><code>tests</code> æ¨¡å—åŒ…å«äº†ä¸‰ä¸ªæµ‹è¯•ï¼š</p></li><li><ul><li><code>handler_sends_correct_headers_and_is_a_teapot</code> æµ‹è¯•å½“è¯·æ±‚ä½“ä¸ä¸ºç©ºæ—¶ï¼Œå¤„ç†å™¨æ˜¯å¦å‘é€æ­£ç¡®çš„å¤´éƒ¨å¹¶è¿”å› 418 ImATeapot çŠ¶æ€ã€‚</li><li><code>we_can_also_test_the_individual_handler</code> æµ‹è¯• <code>teapot</code> å¤„ç†å™¨å•ç‹¬çš„è¡Œä¸ºï¼Œç¡®ä¿å®ƒèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†è¯·æ±‚ä½“ã€‚</li><li><code>application_is_lemongrab_when_body_is_empty</code> æµ‹è¯•å½“è¯·æ±‚ä½“ä¸ºç©ºæ—¶ï¼Œåº”ç”¨ç¨‹åºæ˜¯å¦è¿”å› 406 NotAcceptable çŠ¶æ€ã€‚</li></ul></li></ul><p>ä½¿ç”¨ Trillium çš„æµ‹è¯•å·¥å…·ï¼Œä½ å¯ä»¥è½»æ¾åœ°å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿å…¶æŒ‰é¢„æœŸå·¥ä½œã€‚è¿™äº›å·¥å…·æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥æ¨¡æ‹Ÿè¯·æ±‚å¹¶æ–­è¨€å“åº”ï¼Œä½¿å¾—æµ‹è¯•è¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œå¯é ã€‚</p><h3 id="åº“ä½œè€…æ¨¡å¼è®¾è®¡" tabindex="-1">åº“ä½œè€…æ¨¡å¼è®¾è®¡ <a class="header-anchor" href="#åº“ä½œè€…æ¨¡å¼è®¾è®¡" aria-label="Permalink to &quot;åº“ä½œè€…æ¨¡å¼è®¾è®¡&quot;">â€‹</a></h3><h4 id="çŠ¶æ€ç®¡ç†" tabindex="-1">çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h4><p>è€ƒè™‘ä¸€ä¸ªåº“çš„å®ç°ï¼Œè¯¥åº“é€’å¢å¼åœ°è®¡ç®—ç©¿è¿‡å…¶çš„è¿æ¥ï¼ˆconnï¼‰æ•°é‡ï¼Œå¹¶å°†è¯¥æ•°å€¼é™„åŠ åˆ°æ¯ä¸ªè¿æ¥ä¸Šã€‚ç›´æ¥åœ¨çŠ¶æ€é›†ä¸­å­˜å‚¨ <code>u64</code> ç±»å‹æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå…¶ä»–åº“å¯èƒ½ä¹Ÿåœ¨è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç§æœ‰çš„æ–°ç±»å‹ <code>ConnNumber</code> æ¥å°è£…å®ƒã€‚ç”±äºè¿™ä¸ªæ–°ç±»å‹åœ¨æˆ‘ä»¬çš„åº“ä¹‹å¤–æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åªæœ‰æˆ‘ä»¬çš„å¤„ç†å™¨èƒ½å¤Ÿè®¾ç½®å®ƒã€‚æˆ‘ä»¬è¿˜æä¾›äº†ä¸€ä¸ª <code>ConnExt</code> ç‰¹æ€§ï¼ˆtraitï¼‰ï¼Œä»¥ä¾¿æä¾›å¯¹è¿™äº›æ•°æ®çš„è®¿é—®ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> conn_counter {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">sync</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">        atomic</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">AtomicU64</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ordering</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">        Arc</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{async_trait, </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç§æœ‰æ–°ç±»å‹ï¼Œå°è£… u64 ç±»å‹çš„è¿æ¥è®¡æ•°</span></span>
<span class="line"><span style="color:#C678DD;">    struct</span><span style="color:#E5C07B;"> ConnNumber</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä½¿ç”¨ Arc&lt;AtomicU64&gt; æ¥çº¿ç¨‹å®‰å…¨åœ°é€’å¢è¿æ¥è®¡æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[derive(</span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> ConnCounterHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">AtomicU64</span><span style="color:#ABB2BF;">&gt;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    impl</span><span style="color:#E5C07B;"> ConnCounterHandler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Self</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[async_trait]</span></span>
<span class="line"><span style="color:#C678DD;">    impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> ConnCounterHandler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // åŸå­åœ°é€’å¢è®¡æ•°å¹¶è·å–å½“å‰å€¼</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> number</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0.</span><span style="color:#61AFEF;">fetch_add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ordering</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">SeqCst</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å°†è®¡æ•°é™„åŠ åˆ°è¿æ¥çš„çŠ¶æ€ä¸­</span></span>
<span class="line"><span style="color:#E06C75;">            conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_state</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">ConnNumber</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æä¾› conn_number æ–¹æ³•æ¥è®¿é—®è¿æ¥è®¡æ•°</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> trait</span><span style="color:#E5C07B;"> ConnCounterConnExt</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        fn</span><span style="color:#61AFEF;"> conn_number</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    impl</span><span style="color:#E5C07B;"> ConnCounterConnExt</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> Conn</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        fn</span><span style="color:#61AFEF;"> conn_number</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä»è¿æ¥çŠ¶æ€ä¸­æ£€ç´¢å¹¶è¿”å›è®¡æ•°</span></span>
<span class="line"><span style="color:#E5C07B;">            self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">ConnNumber</span><span style="color:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;conn_number must be called after the handler&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h4 id="åº“çš„ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">åº“çš„ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#åº“çš„ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;åº“çš„ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> conn_counter</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">ConnCounterConnExt</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ConnCounterHandler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> trillium</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Conn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Handler</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºå¤„ç†å™¨ï¼Œå…ˆè¿è¡Œ ConnCounterHandler ç„¶åæ˜¯å“åº”ç”Ÿæˆé€»è¾‘</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> handler</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Handler</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    (</span><span style="color:#E5C07B;">ConnCounterHandler</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(), </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">conn</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Conn</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> conn_number</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">conn_number</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// è®¿é—®è¿æ¥è®¡æ•°</span></span>
<span class="line"><span style="color:#E06C75;">        conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;conn number was {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">conn_number</span><span style="color:#ABB2BF;">)) </span><span style="color:#7F848E;font-style:italic;">// æ„é€ å“åº”</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    trillium_smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">handler</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">// è¿è¡Œå¤„ç†å™¨</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="æµ‹è¯•ç”¨ä¾‹" tabindex="-1">æµ‹è¯•ç”¨ä¾‹ <a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹" aria-label="Permalink to &quot;æµ‹è¯•ç”¨ä¾‹&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(test)]</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> test {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> trillium_testing</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[test]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> test_conn_counter</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> handler</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;font-style:italic;"> super</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">handler</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // æ–­è¨€å¤„ç†å™¨å¯¹è¿ç»­è¯·æ±‚çš„å“åº”</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_ok!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;conn number was 0&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_ok!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;conn number was 1&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_ok!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;conn number was 2&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">        assert_ok!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">handler</span><span style="color:#ABB2BF;">), </span><span style="color:#98C379;">&quot;conn number was 3&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="è¯´æ˜" tabindex="-1">è¯´æ˜ <a class="header-anchor" href="#è¯´æ˜" aria-label="Permalink to &quot;è¯´æ˜&quot;">â€‹</a></h4><ul><li><code>ConnNumber</code> æ˜¯å°è£…è¿æ¥è®¡æ•°çš„ç§æœ‰æ–°ç±»å‹ã€‚</li><li><code>ConnCounterHandler</code> ç»“æ„ä½“ä½¿ç”¨ <code>Arc&lt;AtomicU64&gt;</code> æ¥å®ç°çº¿ç¨‹å®‰å…¨çš„è®¡æ•°é€’å¢ã€‚</li><li><code>run</code> æ–¹æ³•å®ç°äº† <code>Handler</code> traitï¼Œå®ƒå°†å½“å‰è®¡æ•°é™„åŠ åˆ°é€šè¿‡çš„ <code>Conn</code> çš„çŠ¶æ€ä¸­ã€‚</li><li><code>ConnCounterConnExt</code> trait æä¾›äº† <code>conn_number</code> æ–¹æ³•ï¼Œç”¨äºä» <code>Conn</code> ä¸­æ£€ç´¢è®¡æ•°ã€‚</li><li>åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¤„ç†å™¨ç»„åˆï¼Œå…ˆè¿è¡Œ <code>ConnCounterHandler</code> ç„¶åç”Ÿæˆå“åº”ã€‚</li><li>æµ‹è¯•æ¨¡å—ä½¿ç”¨ <code>trillium_testing</code> crate æ¥æ¨¡æ‹Ÿè¯·æ±‚å¹¶éªŒè¯å¤„ç†å™¨çš„å“åº”ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™-3" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-3" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><p>[1] <a href="https://crates.io/crates/trillium-ructe" target="_blank" rel="noreferrer">https://crates.io/crates/trillium-ructe</a></p><p>[2] <a href="https://github.com/prabirshrestha/trillium-ructe" target="_blank" rel="noreferrer">https://github.com/prabirshrestha/trillium-ructe</a></p><p>[3] <a href="https://docs.rs/trillium-ructe/latest/trillium_ructe/" target="_blank" rel="noreferrer">https://docs.rs/trillium-ructe/latest/trillium_ructe/</a></p><h2 id="zino-åº”ç”¨å¼€å‘æ¡†æ¶å¿«é€Ÿä¸Šæ‰‹æŒ‡å—" tabindex="-1">Zino åº”ç”¨å¼€å‘æ¡†æ¶å¿«é€Ÿä¸Šæ‰‹æŒ‡å— <a class="header-anchor" href="#zino-åº”ç”¨å¼€å‘æ¡†æ¶å¿«é€Ÿä¸Šæ‰‹æŒ‡å—" aria-label="Permalink to &quot;Zino åº”ç”¨å¼€å‘æ¡†æ¶å¿«é€Ÿä¸Šæ‰‹æŒ‡å—&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/photino/zino" target="_blank" rel="noreferrer">https://github.com/photino/zino</a></p><h3 id="ã€Œå‰è¨€ã€" tabindex="-1">ã€Œå‰è¨€ã€ <a class="header-anchor" href="#ã€Œå‰è¨€ã€" aria-label="Permalink to &quot;ã€Œå‰è¨€ã€&quot;">â€‹</a></h3><p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼ŒRust è¯­è¨€ä»¥å…¶å‡ºè‰²çš„æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œæ­£é€æ¸æˆä¸ºç³»ç»Ÿç¼–ç¨‹çš„æ–°æ˜Ÿã€‚è€Œ <code>Zino</code> æ¡†æ¶ï¼Œä½œä¸º Rust ç”Ÿæ€ä¸­çš„åç«¯æ¡†æ¶ï¼Œä»¥å…¶é«˜æ•ˆã€ç®€æ´å’Œæ¨¡å—åŒ–çš„ç‰¹ç‚¹ï¼Œå¸å¼•äº†ä¼—å¤šå¼€å‘è€…çš„ç›®å…‰ã€‚æœ¬æ–‡å°†å¸¦ä½ å¿«é€Ÿå…¥é—¨ <code>Zino</code> æ¡†æ¶ï¼Œæ¢ç´¢å…¶å¼ºå¤§çš„åŠŸèƒ½å’Œä¼˜é›…çš„è®¾è®¡ã€‚</p><h3 id="ã€Œä¸€ã€zino-æ¡†æ¶ç®€ä»‹ã€" tabindex="-1">ã€Œä¸€ã€Zino æ¡†æ¶ç®€ä»‹ã€ <a class="header-anchor" href="#ã€Œä¸€ã€zino-æ¡†æ¶ç®€ä»‹ã€" aria-label="Permalink to &quot;ã€Œä¸€ã€Zino æ¡†æ¶ç®€ä»‹ã€&quot;">â€‹</a></h3><p><code>Zino</code> æ˜¯ä¸€ä¸ªåŸºäº Rust è¯­è¨€çš„åç«¯åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒå¼ºè°ƒç®€æ´æ€§ã€å¯æ‰©å±•æ€§å’Œç”Ÿäº§åŠ›ã€‚<code>Zino</code> æä¾›äº†è¯¸å¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚é«˜åº¦ä¼˜åŒ–çš„ ORMã€è½»é‡çº§å®šæ—¶ä»»åŠ¡ä»¥åŠå¯¹ <code>actix-web</code>ã€<code>axum</code> ç­‰æ¡†æ¶çš„é›†æˆæ”¯æŒã€‚</p><p>Zino è‡´åŠ›äºæ‰“é€  Rust è¯­è¨€ä¸­æœ€å¥½ç”¨çš„ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶ã€‚ æˆ‘ä»¬å¥‰è¡Œã€çº¦å®šä¼˜äºé…ç½®ã€çš„åŸåˆ™ï¼Œå€Ÿé‰´ Node çš„ Egg.jsã€Go çš„ GoFrameã€ Java çš„ Spring Boot ç­‰æ¡†æ¶ï¼Œæä¾›å¼€ç®±å³ç”¨çš„åŠŸèƒ½æ¨¡å—ï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡ï¼› å¹¶é€šè¿‡åº”ç”¨æ¥å£æŠ½è±¡ä¸ Rust çš„ axumã€actix-web ç­‰æ¡†æ¶é›†æˆï¼Œæ‰“é€šç¤¾åŒºç”Ÿæ€èµ„æºã€‚</p><h3 id="ã€ŒäºŒã€ç¯å¢ƒå‡†å¤‡ã€" tabindex="-1">ã€ŒäºŒã€ç¯å¢ƒå‡†å¤‡ã€ <a class="header-anchor" href="#ã€ŒäºŒã€ç¯å¢ƒå‡†å¤‡ã€" aria-label="Permalink to &quot;ã€ŒäºŒã€ç¯å¢ƒå‡†å¤‡ã€&quot;">â€‹</a></h3><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²å®‰è£… Rust ç¯å¢ƒã€‚<code>Zino</code> è¦æ±‚è‡³å°‘ Rust 1.75+ çš„ç‰ˆæœ¬ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… Rustï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">curl</span><span style="color:#D19A66;"> --proto</span><span style="color:#98C379;"> &#39;=https&#39;</span><span style="color:#D19A66;"> --tlsv1.2</span><span style="color:#D19A66;"> -sSf</span><span style="color:#98C379;"> https://sh.rustup.rs</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ã€Œä¸‰ã€åˆ›å»ºä½ çš„-zino-åº”ç”¨ã€" tabindex="-1">ã€Œä¸‰ã€åˆ›å»ºä½ çš„ Zino åº”ç”¨ã€ <a class="header-anchor" href="#ã€Œä¸‰ã€åˆ›å»ºä½ çš„-zino-åº”ç”¨ã€" aria-label="Permalink to &quot;ã€Œä¸‰ã€åˆ›å»ºä½ çš„ Zino åº”ç”¨ã€&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>Zino</code> åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> new</span><span style="color:#98C379;"> my-zino-app</span><span style="color:#D19A66;"> --bin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åï¼Œåœ¨é¡¹ç›®çš„ <code>Cargo.toml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>Zino</code> ä½œä¸ºä¾èµ–ï¼Œå¹¶å¯ç”¨ <code>axum</code> ç‰¹æ€§ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[package]</span></span>
<span class="line"><span style="color:#61AFEF;">name</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;zino-app&quot;</span></span>
<span class="line"><span style="color:#61AFEF;">version</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.1.0&quot;</span></span>
<span class="line"><span style="color:#61AFEF;">edition</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;2021&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#61AFEF;">zino</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span><span style="color:#98C379;"> version</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.21&quot;,</span><span style="color:#98C379;"> features</span><span style="color:#98C379;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;axum&quot;</span><span style="color:#ABB2BF;">] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ã€Œå››ã€ç¼–å†™ä½ çš„ç¬¬ä¸€è¡Œ-zino-ä»£ç ã€" tabindex="-1">ã€Œå››ã€ç¼–å†™ä½ çš„ç¬¬ä¸€è¡Œ Zino ä»£ç ã€ <a class="header-anchor" href="#ã€Œå››ã€ç¼–å†™ä½ çš„ç¬¬ä¸€è¡Œ-zino-ä»£ç ã€" aria-label="Permalink to &quot;ã€Œå››ã€ç¼–å†™ä½ çš„ç¬¬ä¸€è¡Œ Zino ä»£ç ã€&quot;">â€‹</a></h3><p>åœ¨ä½ çš„ <code>main.rs</code> æ–‡ä»¶ä¸­ï¼Œç¼–å†™ä»¥ä¸‹ä»£ç æ¥å¯åŠ¨ä¸€ä¸ªç®€å•çš„ <code>Zino</code> åº”ç”¨ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Cluster</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">boot</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™æ®µä»£ç åˆ©ç”¨ <code>Zino</code> çš„ <code>Cluster</code> æ¥å¯åŠ¨åº”ç”¨ç¨‹åºã€‚</p><h3 id="ã€Œäº”ã€å®šä¹‰æ¨¡å‹ã€" tabindex="-1">ã€Œäº”ã€å®šä¹‰æ¨¡å‹ã€ <a class="header-anchor" href="#ã€Œäº”ã€å®šä¹‰æ¨¡å‹ã€" aria-label="Permalink to &quot;ã€Œäº”ã€å®šä¹‰æ¨¡å‹ã€&quot;">â€‹</a></h3><p><code>Zino</code> æä¾›äº†å¼ºå¤§çš„ ORM åŠŸèƒ½ï¼Œå¯ä»¥è½»æ¾å®šä¹‰å’Œæ“ä½œæ•°æ®åº“æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æ¨¡å‹å®šä¹‰ç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> serde</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Deserialize</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Serialize</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Serialize</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Deserialize</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Schema</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    email</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å®šä¹‰æ¨¡å‹åï¼Œ<code>Zino</code> èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†æ•°æ®åº“çš„ CRUD æ“ä½œã€‚</p><h3 id="ã€Œå…­ã€æ·»åŠ è·¯ç”±å’Œæ§åˆ¶å™¨ã€" tabindex="-1">ã€Œå…­ã€æ·»åŠ è·¯ç”±å’Œæ§åˆ¶å™¨ã€ <a class="header-anchor" href="#ã€Œå…­ã€æ·»åŠ è·¯ç”±å’Œæ§åˆ¶å™¨ã€" aria-label="Permalink to &quot;ã€Œå…­ã€æ·»åŠ è·¯ç”±å’Œæ§åˆ¶å™¨ã€&quot;">â€‹</a></h3><p>é€šè¿‡ <code>Zino</code> çš„ <code>router</code> æ¨¡å—ï¼Œä½ å¯ä»¥è½»æ¾åœ°æ·»åŠ è·¯ç”±å’Œæ§åˆ¶å™¨ã€‚ä¾‹å¦‚ï¼Œä¸ºç”¨æˆ·æ¨¡å‹æ·»åŠ ä¸€ä¸ªè·å–ç”¨æˆ·åˆ—è¡¨çš„è·¯ç”±ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> routes</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Router</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/users&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">list_users</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> list_users</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Json</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Vec</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">&gt;&gt;, </span><span style="color:#E5C07B;">Status</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> users</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">all</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">users</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™é‡Œä½¿ç”¨äº† <code>axum</code> çš„ <code>Router</code> å’Œ <code>Request</code> æ¥å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°ã€‚</p><h3 id="ã€Œä¸ƒã€è¿è¡Œä½ çš„åº”ç”¨ã€" tabindex="-1">ã€Œä¸ƒã€è¿è¡Œä½ çš„åº”ç”¨ã€ <a class="header-anchor" href="#ã€Œä¸ƒã€è¿è¡Œä½ çš„åº”ç”¨ã€" aria-label="Permalink to &quot;ã€Œä¸ƒã€è¿è¡Œä½ çš„åº”ç”¨ã€&quot;">â€‹</a></h3><p>è¿è¡Œä½ çš„ <code>Zino</code> åº”ç”¨ï¼Œåªéœ€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ä¼šåœ¨ <code>6080</code> ç«¯å£å¯åŠ¨ï¼Œå¹¶é€šè¿‡ <code>debug</code> æ¨¡å¼æä¾› API æ–‡æ¡£ã€‚</p><h3 id="core" tabindex="-1">core <a class="header-anchor" href="#core" aria-label="Permalink to &quot;core&quot;">â€‹</a></h3><h4 id="ç‰¹æ€§æ ‡å¿—" tabindex="-1">ç‰¹æ€§æ ‡å¿— <a class="header-anchor" href="#ç‰¹æ€§æ ‡å¿—" aria-label="Permalink to &quot;ç‰¹æ€§æ ‡å¿—&quot;">â€‹</a></h4><p>ä»¥ä¸‹æ˜¯å¯ç”¨çš„å¯é€‰ç‰¹æ€§ï¼š</p><table><thead><tr><th style="text-align:left;">åç§°</th><th style="text-align:left;">æè¿°</th><th style="text-align:left;">é»˜è®¤?</th></tr></thead><tbody><tr><td style="text-align:left;"><code>accessor</code></td><td style="text-align:left;">å¯ç”¨åŸºäº <code>opendal</code> æ„å»ºçš„æ•°æ®è®¿é—®å±‚ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>chatbot</code></td><td style="text-align:left;">å¯ç”¨èŠå¤©æœºå™¨äººæœåŠ¡ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>connector</code></td><td style="text-align:left;">å¯ç”¨æ•°æ®æºè¿æ¥å™¨ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>cookie</code></td><td style="text-align:left;">å¯ç”¨å¯¹ cookie çš„æ”¯æŒã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>crypto-sm</code></td><td style="text-align:left;">å¯ç”¨ä¸­å›½æ ‡å‡†çš„åŠ å¯†ç®—æ³•ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>dotenv</code></td><td style="text-align:left;">å¯ç”¨ <code>.env</code> æ–‡ä»¶çš„é…ç½®åŠ è½½å™¨ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>env-filter</code></td><td style="text-align:left;">ä¸º <code>tracing-subscriber</code> å¯ç”¨ <code>env-filter</code>ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>i18n</code></td><td style="text-align:left;">å¯ç”¨å›½é™…åŒ–æ”¯æŒã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>jwt</code></td><td style="text-align:left;">å¯ç”¨å¯¹ JSON Web Token çš„æ”¯æŒã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>locale</code></td><td style="text-align:left;">å¯ç”¨ä¸æœ¬åœ°åŒ–ç›¸å…³çš„å®ç”¨å·¥å…·æ”¯æŒã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>metrics</code></td><td style="text-align:left;">å¯ç”¨ <code>metrics</code> å¯¼å‡ºå™¨ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>orm</code></td><td style="text-align:left;">å¯ç”¨ MySQLã€PostgreSQL æˆ– <strong>ã€ŒSQLiteã€</strong> çš„ ORMã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>runtime-async-std</code></td><td style="text-align:left;">å¯ç”¨ <code>async-std</code> è¿è¡Œæ—¶ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>runtime-tokio</code></td><td style="text-align:left;">å¯ç”¨ <code>tokio</code> è¿è¡Œæ—¶ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>sentry</code></td><td style="text-align:left;">å¯ç”¨ä¸ <code>sentry</code> çš„é›†æˆã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>tls-native</code></td><td style="text-align:left;">å¯ç”¨ <code>native-tls</code> TLS åç«¯ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>tls-rustls</code></td><td style="text-align:left;">å¯ç”¨ <code>rustls</code> TLS åç«¯ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>tracing-log</code></td><td style="text-align:left;">ä¸º <code>tracing-subscriber</code> å¯ç”¨ <code>tracing-log</code>ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>validator</code></td><td style="text-align:left;">å¯ç”¨é€šç”¨éªŒè¯è§„åˆ™ã€‚</td><td style="text-align:left;">å¦</td></tr><tr><td style="text-align:left;"><code>view</code></td><td style="text-align:left;">å¯ç”¨ HTML æ¨¡æ¿æ¸²æŸ“ã€‚</td><td style="text-align:left;">å¦</td></tr></tbody></table><p>é€šè¿‡è¿™äº›ç‰¹æ€§æ ‡å¿—ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶å’Œæ‰©å±• <code>zino</code> åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚</p><h3 id="actix-app-ç¤ºä¾‹" tabindex="-1">actix-app ç¤ºä¾‹ <a class="header-anchor" href="#actix-app-ç¤ºä¾‹" aria-label="Permalink to &quot;actix-app ç¤ºä¾‹&quot;">â€‹</a></h3><ul><li>examples/actix-app/src/main.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> controller;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> domain;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> extension;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> logic;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> middleware;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> model;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> router;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> schedule;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> service;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Cluster</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">boot</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">register</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">routes</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">register_debug</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">debug_routes</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">spawn</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">schedule</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">job_scheduler</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">run_with</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">schedule</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">async_job_scheduler</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>examples/actix-app/src/controller/user.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">time</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Instant</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino_model</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">model_validation</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> user</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> validation</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">check_constraints</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        reject!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_name</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to_owned</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> fluent_args!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#98C379;">        &quot;name&quot;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">user_name</span></span>
<span class="line"><span style="color:#ABB2BF;">    ];</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_intro</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">translate</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;user-intro&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">args</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> json!</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#98C379;">        &quot;method&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request_method</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">as_ref</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;path&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request_path</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;user_intro&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">user_intro</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> locale</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">new_cookie</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;locale&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">(), </span><span style="color:#98C379;">&quot;en-US&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_cookie</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">locale</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_code</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">CREATED</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_param</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;id&quot;</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> db_query_start_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">fetch_by_id</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">user_id</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> db_query_duration</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> db_query_start_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsed</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">data_entry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">record_server_timing</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;db&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">db_query_duration</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><ul><li>examples/actix-app/src/middleware/access.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> actix_web</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    dev</span><span style="color:#ABB2BF;">::{forward_ready, </span><span style="color:#E5C07B;">Service</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ServiceResponse</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Transform</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">    Error</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    future</span><span style="color:#ABB2BF;">::{ready, </span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Ready</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">    pin</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Pin</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> UserSessionInitializer</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E5C07B;">Transform</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">for</span><span style="color:#E5C07B;"> UserSessionInitializer</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    S</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Service</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> ServiceResponse</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt;, </span><span style="color:#E5C07B;">Error</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#E5C07B;">    S</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;">: &#39;</span><span style="color:#E5C07B;">static</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> ServiceResponse</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Error</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> InitError</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> ();</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Transform</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> UserSessionMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Future</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Ready</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Transform</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">InitError</span><span style="color:#ABB2BF;">&gt;&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new_transform</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">service</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        ready</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">UserSessionMiddleware</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">service</span><span style="color:#ABB2BF;"> }))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> UserSessionMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">    service</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E5C07B;">Service</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">for</span><span style="color:#E5C07B;"> UserSessionMiddleware</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">S</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">where</span></span>
<span class="line"><span style="color:#E5C07B;">    S</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Service</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> ServiceResponse</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt;, </span><span style="color:#E5C07B;">Error</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#E5C07B;">    S</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;">: &#39;</span><span style="color:#E5C07B;">static</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> ServiceResponse</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Error</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Error</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Future</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Pin</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">dyn</span><span style="color:#E5C07B;"> Future</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Output</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt;&gt;&gt;&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    forward_ready!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">service</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> call</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">ServiceRequest</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> req</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Request</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_jwt_claims</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JwtClaims</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">shared_key</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#E5C07B;">            Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">claims</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> user_session</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> UserSession</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">&gt;::</span><span style="color:#61AFEF;">try_from_jwt_claims</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">claims</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session_id</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_session_id</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">                        user_session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_session_id</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session_id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#E06C75;">                    req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user_session</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                    return</span><span style="color:#E5C07B;"> Box</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">pin</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                        let</span><span style="color:#E06C75;"> message</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;401 Unauthorized: invalid JWT claims&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">                        let</span><span style="color:#E06C75;"> rejection</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Rejection</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">with_message</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">                        let</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rejection</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                        result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map_err</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">err</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> err</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                    });</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rejection</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#E5C07B;"> Box</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">pin</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                    let</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rejection</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">                    result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map_err</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">err</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> err</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> req</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> ServiceRequest</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> fut</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.service.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        Box</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">pin</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> move</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> fut</span><span style="color:#ABB2BF;">.</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#E5C07B;">            Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><ul><li>examples/actix-app/src/middleware/mod.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> access;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">crate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> access</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">UserSessionInitializer</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>examples/actix-app/src/model/tag.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> serde</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Deserialize</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Serialize</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino_derive</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">DecodeRow</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Model</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ModelAccessor</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ModelHooks</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Schema</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/// The `tag` model.</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span></span>
<span class="line"><span style="color:#E5C07B;">    Debug</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Clone</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Default</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Serialize</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Deserialize</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    DecodeRow</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Schema</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    ModelAccessor</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    ModelHooks</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Model</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#ABB2BF;">#[serde(default)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> Tag</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Basic fields.</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(primary_key, read_only, constructor </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Uuid::now_v7&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(not_null, comment </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Tag name&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(default_value </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Active&quot;</span><span style="color:#ABB2BF;">, index_type </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;hash&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    status</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    description</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Info fields.</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(not_null, index_type </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;hash&quot;</span><span style="color:#ABB2BF;">, comment </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Tag category&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    category</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(</span></span>
<span class="line"><span style="color:#ABB2BF;">        snapshot,</span></span>
<span class="line"><span style="color:#ABB2BF;">        reference </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Tag&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        fetch_as </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;parent_tag&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        comment </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;Optional parent tag&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    )]</span></span>
<span class="line"><span style="color:#E06C75;">    parent_id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Option</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Extensions.</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(reserved)]</span></span>
<span class="line"><span style="color:#E06C75;">    extra</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Revisions.</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(read_only, default_value </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;now&quot;</span><span style="color:#ABB2BF;">, index_type </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;btree&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    created_at</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[schema(default_value </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;now&quot;</span><span style="color:#ABB2BF;">, index_type </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;btree&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#E06C75;">    updated_at</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    version</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u64</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><ul><li>examples/actix-app/src/router/mod.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    controller</span><span style="color:#ABB2BF;">::{auth, file, stats, user},</span></span>
<span class="line"><span style="color:#ABB2BF;">    middleware,</span></span>
<span class="line"><span style="color:#E5C07B;">    model</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> actix_web</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::{get, post, scope, </span><span style="color:#E5C07B;">ServiceConfig</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">DefaultController</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">RouterConfigure</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino_model</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> routes</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Vec</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">RouterConfigure</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">    vec!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#E06C75;">        auth_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        file_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        user_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        tag_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> debug_routes</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Vec</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">RouterConfigure</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">    vec!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#E06C75;">        stats_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        user_debug_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        tag_debug_router</span><span style="color:#C678DD;"> as</span><span style="color:#E5C07B;"> RouterConfigure</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> auth_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/auth/login&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">login</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">service</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">        scope</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/auth&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/refresh&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">refresh</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/logout&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">logout</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">wrap</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">middleware</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">UserSessionInitializer</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> file_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">service</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">        scope</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/file&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/upload&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">upload</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/decrypt&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">decrypt</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">wrap</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">middleware</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">UserSessionInitializer</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> user_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/new&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">new</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/{id}/delete&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">soft_delete</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/{id}/update&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">update</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/{id}/view&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">view</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/list&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">list</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/import&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">import</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/export&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">export</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> tag_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/new&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">new</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/{id}/delete&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">soft_delete</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/{id}/update&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">update</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/{id}/view&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">view</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/list&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">list</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/tree&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">tree</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> stats_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/stats&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">stats</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> user_debug_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/schema&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">schema</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/definition&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">definition</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/mock&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">mock</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> tag_debug_router</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cfg</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> ServiceConfig</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    cfg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/schema&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">schema</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/definition&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">definition</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">route</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/tag/mock&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Tag</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">mock</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><ul><li>examples/actix-app/src/schedule/job.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino_model</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> every_15s</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> job_data</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_u64</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">() + </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;last_tick&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;job_id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> every_20s</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> job_data</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_u64</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">() + </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;last_tick&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;job_id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> every_hour</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Uuid</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">BoxFuture</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> counter</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> job_data</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_u64</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">() + </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">DateTime</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;last_tick&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">last_tick</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;job_id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">job_id</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E5C07B;">    Box</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">pin</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Query</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> columns</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [(</span><span style="color:#98C379;">&quot;*&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">), (</span><span style="color:#98C379;">&quot;roles&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">)];</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> map</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">count_many</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E06C75;">columns</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            job_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> map</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><ul><li>examples/actix-app/src/controller/auth.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino_model</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">JwtAuthService</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> login</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> current_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> DateTime</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> body</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Map</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_body</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">user_id</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">generate_token</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_updates</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> json!</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#98C379;">        &quot;status&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Active&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;last_login_at&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current_login_at&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">and_then</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">v</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_datetime</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;last_login_ip&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;current_login_ip&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;current_login_at&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">current_time</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;current_login_ip&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">client_ip</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#98C379;">        &quot;$inc&quot;</span><span style="color:#ABB2BF;">: { </span><span style="color:#98C379;">&quot;login_count&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> user_mutations</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> user_updates</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_map_opt</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap_or_default</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">update_by_id</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">user_id</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> user_mutations</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        reject!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;entry&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">snapshot</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> refresh</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> claims</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_jwt_claims</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JwtClaims</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">shared_key</span><span style="color:#ABB2BF;">())?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">refresh_token</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">claims</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> logout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_session</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">get_data</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">UserSession</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">&gt;&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">ok_or_else</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#61AFEF;"> warn!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;401 Unauthorized: the user session is invalid&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> mutations</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_entry</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;status&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;SignedOut&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> user_id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> user_session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">user_id</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">update_by_id</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user_id</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> mutations</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        reject!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">validation</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">data_entry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">snapshot</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><ul><li>examples/actix-app/src/controller/file.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">time</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Instant</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*, </span><span style="color:#E5C07B;">Cluster</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> upload</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> body</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">files</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_form_data</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&gt;().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> dir</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Cluster</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">shared_dir</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;uploads&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> expires</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> DateTime</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">() + </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">600</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> encryption_duration</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">ZERO</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> uploads</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Vec</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> file</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> files</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> access_key_id</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> AccessKeyId</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">        query</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;access_key_id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">access_key_id</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> secret_key</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> SecretAccessKey</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">access_key_id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> security_token</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#E5C07B;">            SecurityToken</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">try_new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">access_key_id</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">expires</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E06C75;">secret_key</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#E06C75;">        query</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;security_token&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">security_token</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> encryption_start_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">        file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">encrypt_with</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secret_key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_ref</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#E06C75;">        encryption_duration</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> encryption_start_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsed</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">file_name</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">            file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">write</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">dir</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#E06C75;">            query</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;file_name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> map</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">            map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;field_name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">field_name</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">            map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;file_name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">            map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;content_type&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">content_type</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">m</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> m</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_ref</span><span style="color:#ABB2BF;">()));</span></span>
<span class="line"><span style="color:#E06C75;">            map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;url&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/file/decrypt?{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_query_string</span><span style="color:#ABB2BF;">()));</span></span>
<span class="line"><span style="color:#E06C75;">            uploads</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    body</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">upsert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;files&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">uploads</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">record_server_timing</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;enc&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">encryption_duration</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_json_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">data_entry</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> decrypt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_query</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&gt;()?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> access_key_id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_access_key_id</span><span style="color:#ABB2BF;">()?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> secret_key</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> SecretAccessKey</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">access_key_id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> security_token</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> req</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_security_token</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secret_key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_ref</span><span style="color:#ABB2BF;">())?;</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#E06C75;"> security_token</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_expired</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        reject!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">forbidden</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;the security token has expired&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> query</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_str</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;file_name&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        reject!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;file_name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;it should be specified&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> file_path</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Cluster</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">shared_dir</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;uploads&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file_name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> file</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> NamedFile</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">try_from_local</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file_path</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> decryption_start_time</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decrypt_with</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">secret_key</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">extract</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> decryption_duration</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> decryption_start_time</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsed</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">record_server_timing</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;dec&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">None</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">decryption_duration</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send_file</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><ul><li>examples/actix-app/src/controller/stats.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> zino</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*, </span><span style="color:#E5C07B;">Cluster</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> index</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> res</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">context</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> stats</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> json!</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#98C379;">        &quot;method&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;path&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/stats&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;app_state_data&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Cluster</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">state_data</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> json!</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#98C379;">        &quot;title&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Stats&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;output&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">stats</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string_pretty</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;output.html&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>examples/actix-app/src/controller/mod.rs</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">pub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">crate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> auth;</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">crate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> file;</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">crate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> stats;</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">crate</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> user;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>examples/actix-app/templates/layout.html</li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;utf-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;{{ title }} | {{ APP_NAME }}&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">&gt;{% block content %}{% endblock content %}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>examples/actix-app/templates/output.html</li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{% extends &quot;layout.html&quot; %} {% block content %}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;output&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">code</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">pre</span><span style="color:#ABB2BF;">&gt;{{ output }}&lt;/</span><span style="color:#E06C75;">pre</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">code</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">{% endblock content %}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ã€Œç»“è¯­-ã€" tabindex="-1">ã€Œç»“è¯­ï¼šã€ <a class="header-anchor" href="#ã€Œç»“è¯­-ã€" aria-label="Permalink to &quot;ã€Œç»“è¯­ï¼šã€&quot;">â€‹</a></h3><p>é€šè¿‡æœ¬æ–‡çš„å¼•å¯¼ï¼Œä½ å·²ç»èƒ½å¤Ÿåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªåŸºæœ¬çš„ <code>Zino</code> åç«¯åº”ç”¨ã€‚<code>Zino</code> æ¡†æ¶çš„æ›´å¤šé«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µï¼Œç­‰å¾…ä½ å»æ¢ç´¢å’Œå‘ç°ã€‚Rust å’Œ <code>Zino</code> çš„ç»“åˆï¼Œæ— ç–‘å°†ä¸ºä½ çš„åç«¯å¼€å‘å¸¦æ¥é©å‘½æ€§çš„æ”¹å˜ã€‚</p><h2 id="pingora" tabindex="-1">Pingora <a class="header-anchor" href="#pingora" aria-label="Permalink to &quot;Pingora&quot;">â€‹</a></h2><p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://github.com/cloudflare/pingora" target="_blank" rel="noreferrer">https://github.com/cloudflare/pingora</a></p><p>Pingora æ˜¯ä¸€ä¸ª Rust æ¡†æ¶ï¼Œç”¨äºæ„å»ºå¿«é€Ÿã€å¯é å’Œå¯ç¼–ç¨‹çš„ç½‘ç»œç³»ç»Ÿã€‚</p><p>Pingora æ˜¯ç»è¿‡å®æˆ˜æµ‹è¯•çš„ï¼Œå› ä¸ºå®ƒåœ¨å‡ å¹´å¤šçš„æ—¶é—´é‡Œæ¯ç§’æœåŠ¡è¶…è¿‡ 4000 ä¸‡æ¬¡äº’è”ç½‘è¯·æ±‚ã€‚</p><p>Pingora åŠŸèƒ½äº®ç‚¹ï¼š</p><ul><li>å¼‚æ­¥ Rustï¼šå¿«é€Ÿå¯é </li><li>HTTP 1/2 ç«¯åˆ°ç«¯ä»£ç†</li><li>TLSï¼šOpenSSL æˆ– BoringSSL</li><li>gRPC å’Œ websocket ä»£ç†</li><li>ä¼˜é›…çš„é‡å¯</li><li>å¯å®šåˆ¶çš„è´Ÿè½½å¹³è¡¡å’Œæ•…éšœè½¬ç§»ç­–ç•¥</li><li>æ”¯æŒå„ç§å¯è§‚å¯Ÿæ€§å·¥å…·</li></ul><h2 id="tower" tabindex="-1">Tower <a class="header-anchor" href="#tower" aria-label="Permalink to &quot;Tower&quot;">â€‹</a></h2><p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://github.com/tower-rs/tower" target="_blank" rel="noreferrer">https://github.com/tower-rs/tower</a></p><p>Tower æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–å’Œå¯é‡ç”¨ç»„ä»¶åº“ï¼Œç”¨äºæ„å»ºå¥å£®çš„ç½‘ç»œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚</p><p>Tower çš„ç›®æ ‡æ˜¯å°½å¯èƒ½ç®€å•åœ°æ„å»ºå¥å£®çš„ç½‘ç»œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚å®ƒæ˜¯åè®®æ— å…³çš„ï¼Œæ˜¯å›´ç»•è¯·æ±‚/å“åº”æ¨¡å¼è®¾è®¡çš„ã€‚å¦‚æœä½ çš„åè®®å®Œå…¨åŸºäºæµï¼Œé‚£ä¹ˆ Tower å¯èƒ½ä¸é€‚åˆã€‚</p><p>Tower å°†ä¿æŒè‡³å°‘ 6 ä¸ªæœˆçš„æ»šåŠ¨ MSRV(æœ€ä½æ”¯æŒçš„ Rust ç‰ˆæœ¬)æ”¿ç­–ã€‚å½“å¢åŠ  MSRV æ—¶ï¼Œæ–°çš„ Rust ç‰ˆæœ¬å¿…é¡»è‡³å°‘åœ¨å…­ä¸ªæœˆå‰å‘å¸ƒã€‚</p><h2 id="poem-framework-ä»¥-rust-ç¼–ç¨‹è¯­è¨€æ‰“é€ çš„å…¨æ–¹ä½ä¸”æ˜“äºä¸Šæ‰‹çš„-web-æ¡†æ¶" tabindex="-1">Poem Frameworkï¼šä»¥ Rust ç¼–ç¨‹è¯­è¨€æ‰“é€ çš„å…¨æ–¹ä½ä¸”æ˜“äºä¸Šæ‰‹çš„ Web æ¡†æ¶ <a class="header-anchor" href="#poem-framework-ä»¥-rust-ç¼–ç¨‹è¯­è¨€æ‰“é€ çš„å…¨æ–¹ä½ä¸”æ˜“äºä¸Šæ‰‹çš„-web-æ¡†æ¶" aria-label="Permalink to &quot;Poem Frameworkï¼šä»¥ Rust ç¼–ç¨‹è¯­è¨€æ‰“é€ çš„å…¨æ–¹ä½ä¸”æ˜“äºä¸Šæ‰‹çš„ Web æ¡†æ¶&quot;">â€‹</a></h2><hr><p>ç¨‹åºçŠ¹å¦‚è¯—æ­Œï¼Œä¸ç»æ’°å†™ï¼Œä½•ä»¥æˆè¯—ã€‚ â€”â€” è¿ªç§‘æ–¯å½»</p><p>---è¯¥ä»“åº“åŒ…å«ä»¥ä¸‹ä¸»è¦ç»„ä»¶ï¼š</p><table><thead><tr><th style="text-align:left;">ç»„ä»¶</th><th style="text-align:left;">æè¿°</th><th style="text-align:left;">æ–‡æ¡£</th><th style="text-align:left;">æ›´æ–°æ—¥å¿—</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>poem</strong></td><td style="text-align:left;">Poem Web æ¡†æ¶</td><td style="text-align:left;"><strong>(README)</strong>[1]</td><td style="text-align:left;"><strong>(CHANGELOG)</strong>[2]</td></tr><tr><td style="text-align:left;"><strong>poem-lambda</strong></td><td style="text-align:left;">Poem ç”¨äº AWS Lambda</td><td style="text-align:left;"><strong>(README)</strong>[3]</td><td style="text-align:left;"><strong>(CHANGELOG)</strong>[4]</td></tr><tr><td style="text-align:left;"><strong>poem-openapi</strong></td><td style="text-align:left;">Poem Web çš„ OpenAPI æ”¯æŒ</td><td style="text-align:left;"><strong>(README)</strong>[5]</td><td style="text-align:left;"><strong>(CHANGELOG)</strong>[6]</td></tr></tbody></table><hr><p>ä»¥ä¸‹æ˜¯ç¤¾åŒºä½¿ç”¨æ¡ˆä¾‹ï¼š</p><table><thead><tr><th style="text-align:left;">ä»“åº“</th><th style="text-align:left;">æè¿°</th><th style="text-align:left;">æ–‡æ¡£</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>delicate</strong>[7]</td><td style="text-align:left;">ç”¨ Rust ç¼–å†™çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å¹³å°ã€‚</td><td style="text-align:left;"><strong>(README)</strong>[8]</td></tr><tr><td style="text-align:left;"><strong>databend</strong>[9]</td><td style="text-align:left;">ç”¨ Rust ç¼–å†™çš„äº‘åŸç”Ÿæ•°æ®ä»“åº“ã€‚</td><td style="text-align:left;"><strong>(ROADMAP)</strong>[10]</td></tr><tr><td style="text-align:left;"><strong>muse</strong>[11]</td><td style="text-align:left;">ç½‘æ˜“å†…éƒ¨è‰ºæœ¯èµ„æºå…±äº«å¹³å°ï¼Œåç«¯ä½¿ç”¨ Rust ç¼–å†™ã€‚</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>hik-proconnect</strong>[12]</td><td style="text-align:left;">åŸºäº AWS æŒç»­é›†æˆçš„å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²å¹³å°ã€‚Hikvision çš„ Hik-ProConnect é¡¹ç›®ã€‚</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>warpgate</strong>[13]</td><td style="text-align:left;">é€‚ç”¨äºä»»ä½• SSH å®¢æˆ·ç«¯çš„æ™ºèƒ½ SSH å ¡å’ä¸»æœºã€‚</td><td style="text-align:left;"><strong>(README)</strong>[14]</td></tr><tr><td style="text-align:left;"><strong>lust</strong>[15]</td><td style="text-align:left;">ä¸ºé«˜ååé‡å’Œç¼“å­˜è®¾è®¡çš„å¿«é€Ÿè‡ªåŠ¨ä¼˜åŒ–å›¾åƒæœåŠ¡å™¨ã€‚</td><td style="text-align:left;"><strong>(README)</strong>[16]</td></tr><tr><td style="text-align:left;"><strong>aptos</strong>[17]</td><td style="text-align:left;">æ„å»ºæœ€å®‰å…¨ã€æœ€å¯æ‰©å±•çš„ Layer 1 åŒºå—é“¾ã€‚</td><td style="text-align:left;"><strong>(WEBSITE)</strong>[18]</td></tr><tr><td style="text-align:left;"><strong>poem-casbin</strong>[19]</td><td style="text-align:left;">ç”¨äº Poem æ¡†æ¶çš„ Casbin è®¿é—®æ§åˆ¶ä¸­é—´ä»¶ã€‚</td><td style="text-align:left;"><strong>(WEBSITE)</strong>[20]</td></tr><tr><td style="text-align:left;"><strong>poem-grants</strong>[21]</td><td style="text-align:left;">ç”¨äºä¿æŠ¤ç«¯ç‚¹çš„æˆæƒæ‰©å±•ã€‚</td><td style="text-align:left;"><strong>(README)</strong>[22]</td></tr></tbody></table><p>è¿™ä¸ª Rust ç¼–ç¨‹è¯­è¨€çš„å…¨åŠŸèƒ½ä¸”æ˜“äºä½¿ç”¨çš„ Web æ¡†æ¶ï¼Œä¸ä»…æ‹¥æœ‰å¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿˜å…·å¤‡å‡ºè‰²çš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚æ­£å¦‚è¿ªç§‘æ–¯å½»æ‰€è¨€ï¼Œç¨‹åºå¦‚åŒè¯—æ­Œï¼Œéœ€è¦æˆ‘ä»¬ä¸€å­—ä¸€å¥åœ°ç²¾å¿ƒé›•ç¢ã€‚Poem Framework æ­£æ˜¯è¿™æ ·ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤ŸæŒ¥æ´’åˆ›æ„ã€æ„å»ºä¼˜é›… Web åº”ç”¨çš„å¹³å°ã€‚ ç‰¹æ€§</p><ul><li><p>Poem æ¡†æ¶å…¼å…·æ˜“ç”¨æ€§å’Œé«˜æ€§èƒ½ã€‚</p></li><li><p>å‡å°‘æ³›å‹çš„ä½¿ç”¨ï¼Œç®€åŒ–ä»£ç ç»“æ„ã€‚</p></li><li><p>å¿«é€Ÿä¸”çµæ´»çš„è·¯ç”±æœºåˆ¶ã€‚</p></li><li><p>å…¼å®¹ tower::Service å’Œ tower::Layerã€‚</p></li><li><p>ä½¿ç”¨ poem-openapi ç¼–å†™ç¬¦åˆ OAS3 è§„èŒƒçš„ APIï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€‚</p></li><li><p>ç»„ä»¶ç‰¹æ€§</p></li><li><ul><li>ä¸ºäº†é¿å…ç¼–è¯‘ä¸å¿…è¦çš„ä¾èµ–ï¼ŒPoem æ¡†æ¶é»˜è®¤å…³é—­äº†æŸäº›ç‰¹æ€§ï¼š</li></ul></li></ul><table><thead><tr><th style="text-align:left;">ç‰¹æ€§</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">server</td><td style="text-align:left;">å¼€å¯æœåŠ¡å™¨å’Œç›‘å¬å™¨ APIï¼ˆé»˜è®¤å¯ç”¨ï¼‰</td></tr><tr><td style="text-align:left;">compression</td><td style="text-align:left;">æ”¯æŒè§£å‹ç¼©è¯·æ±‚ä½“å’Œå‹ç¼©å“åº”ä½“</td></tr><tr><td style="text-align:left;">cookie</td><td style="text-align:left;">æ”¯æŒ Cookie</td></tr><tr><td style="text-align:left;">csrf</td><td style="text-align:left;">æ”¯æŒè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ä¿æŠ¤</td></tr><tr><td style="text-align:left;">multipart</td><td style="text-align:left;">æ”¯æŒå¤šéƒ¨åˆ†å†…å®¹ç±»å‹</td></tr><tr><td style="text-align:left;">native-tls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ native-tls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">openssl-tls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ openssl-tls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">opentelemetry</td><td style="text-align:left;">æ”¯æŒ opentelemetry</td></tr><tr><td style="text-align:left;">prometheus</td><td style="text-align:left;">æ”¯æŒ Prometheus</td></tr><tr><td style="text-align:left;">redis-session</td><td style="text-align:left;">æ”¯æŒ Redis ä¼šè¯</td></tr><tr><td style="text-align:left;">rustls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ rustls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">session</td><td style="text-align:left;">æ”¯æŒä¼šè¯ç®¡ç†</td></tr><tr><td style="text-align:left;">sse</td><td style="text-align:left;">æ”¯æŒæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆServer-Sent Events, SSEï¼‰</td></tr><tr><td style="text-align:left;">static-files</td><td style="text-align:left;">æ”¯æŒé™æ€æ–‡ä»¶ç«¯ç‚¹</td></tr><tr><td style="text-align:left;">tempfile</td><td style="text-align:left;">æ”¯æŒä¸´æ—¶æ–‡ä»¶</td></tr><tr><td style="text-align:left;">tower-compat</td><td style="text-align:left;">å…¼å®¹ tower::Layer å’Œ tower::Service çš„é€‚é…å™¨</td></tr><tr><td style="text-align:left;">websocket</td><td style="text-align:left;">æ”¯æŒ WebSocket</td></tr><tr><td style="text-align:left;">anyhow</td><td style="text-align:left;">é›†æˆ anyhow åº“</td></tr><tr><td style="text-align:left;">eyre06</td><td style="text-align:left;">é›†æˆ eyre åº“çš„ 0.6.x ç‰ˆæœ¬</td></tr><tr><td style="text-align:left;">i18n</td><td style="text-align:left;">æ”¯æŒå›½é™…åŒ–</td></tr><tr><td style="text-align:left;">acme-native-roots</td><td style="text-align:left;">æ”¯æŒ ACMEï¼ˆè‡ªåŠ¨è¯ä¹¦ç®¡ç†ç¯å¢ƒï¼‰</td></tr><tr><td style="text-align:left;">acme-webpki-roots</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ webpki TLS æ ¹è¯ä¹¦è€ŒéåŸç”Ÿ TLS æ ¹è¯ä¹¦çš„ ACME</td></tr><tr><td style="text-align:left;">tokio-metrics</td><td style="text-align:left;">é›†æˆ tokio-metrics åº“</td></tr><tr><td style="text-align:left;">embed</td><td style="text-align:left;">é›†æˆ rust-embed åº“</td></tr><tr><td style="text-align:left;">xml</td><td style="text-align:left;">é›†æˆ quick-xml åº“</td></tr><tr><td style="text-align:left;">yaml</td><td style="text-align:left;">é›†æˆ serde-yaml åº“ã€‚</td></tr></tbody></table><p>å®‰å…¨æ€§ æœ¬ crate ä½¿ç”¨ #![forbid(unsafe_code)] ç¡®ä¿æ‰€æœ‰åŠŸèƒ½å‡ä½¿ç”¨ 100% å®‰å…¨çš„ Rust å®ç°ã€‚</p><p>ç¤ºä¾‹</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{get, handler, </span><span style="color:#E5C07B;">listener</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">TcpListener</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Route</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> hello</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Path</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E06C75;">std</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">io</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Route</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/hello/:name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">    Server</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TcpListener</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;0.0.0.0:3000&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">      .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      .</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ›´å¤šç¤ºä¾‹å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚</p><p><strong>examples</strong>[23]</p><p>MSRV æœ¬ crate æ”¯æŒçš„æœ€ä½ Rust ç‰ˆæœ¬ä¸º 1.75.0ã€‚</p><p>å¿«é€Ÿå…¥é—¨</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{get, handler, </span><span style="color:#E5C07B;">listener</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">TcpListener</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IntoResponse</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Route</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Server</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> hello</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Path</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E06C75;">std</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">io</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Route</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/hello/:name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">    Server</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TcpListener</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;0.0.0.0:3000&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#C678DD;">await</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç«¯ç‚¹ ç«¯ç‚¹ç‰¹å¾ä»£è¡¨èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚çš„ç±»å‹ï¼Œå¹¶è¿”å› Result&lt;T: IntoResponse, Error&gt; ç±»å‹ã€‚</p><p>handler å®ç”¨äºå°†å‡½æ•°è½¬æ¢ä¸ºç«¯ç‚¹ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    error</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">NotFoundError</span><span style="color:#ABB2BF;">, handler, </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">TestClient</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Endpoint</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Result</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> return_str</span><span style="color:#ABB2BF;">() -&gt; &amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">    &quot;hello&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> return_err</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;&amp;&#39;</span><span style="color:#E5C07B;">static</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">NotFoundError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">NotFoundError</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> resp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> TestClient</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">return_str</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">resp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assert_status_is_ok</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">resp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assert_text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> resp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> TestClient</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">return_err</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">resp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assert_status</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">NOT_FOUND</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æå–å™¨ æå–å™¨ç”¨äºä» HTTP è¯·æ±‚ä¸­æå–ä¿¡æ¯ã€‚</p><p>Poem æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æå–å™¨ï¼Œç”¨äºä» HTTP è¯·æ±‚ä¸­æå–æ•°æ®ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œindex å‡½æ•°ä½¿ç”¨ 3 ä¸ªæå–å™¨æ¥æå–è¿œç¨‹åœ°å€ã€HTTP æ–¹æ³•å’Œ URIã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use poem::{</span></span>
<span class="line"><span>    handler,</span></span>
<span class="line"><span>    http::{Method, Uri},</span></span>
<span class="line"><span>    web::RemoteAddr,</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[handler]</span></span>
<span class="line"><span>fn index(remote_addr: &amp;RemoteAddr, method: Method, uri: &amp;Uri) {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæå–å™¨åœ¨å‘ç”Ÿé”™è¯¯æ—¶ä¼šè¿”å› 400 é”™è¯¯è¯·æ±‚ï¼Œä½†æœ‰æ—¶ä½ å¯èƒ½æƒ³è¦æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå› æ­¤ä½ å¯ä»¥è‡ªå·±å¤„ç†é”™è¯¯ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå½“ Query æå–å™¨å¤±è´¥æ—¶ï¼Œå®ƒå°†è¿”å› 500 å†…éƒ¨æœåŠ¡å™¨å“åº”å’Œé”™è¯¯åŸå› ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    error</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">ParseQueryError</span><span style="color:#ABB2BF;">, handler, </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Query</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IntoResponse</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Result</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> serde</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Deserialize</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Deserialize</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Params</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> index</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Query</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Params</span><span style="color:#ABB2BF;">&gt;&gt;) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> IntoResponse</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    match</span><span style="color:#E06C75;"> res</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Query</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">)) =&gt; </span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">.name.</span><span style="color:#61AFEF;">into_response</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#E5C07B;">        Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> err</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">ParseQueryError</span><span style="color:#ABB2BF;">&gt;() =&gt; </span><span style="color:#E5C07B;">Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">INTERNAL_SERVER_ERROR</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">())),</span></span>
<span class="line"><span style="color:#E5C07B;">        Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) =&gt; </span><span style="color:#E5C07B;">Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">è·¯ç”±</span></span>
<span class="line"><span style="color:#ABB2BF;">æœ‰ä¸‰ç§å¯ç”¨çš„è·¯ç”±æ–¹å¼ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">è·¯å¾„è·¯ç”±</span></span>
<span class="line"><span style="color:#ABB2BF;">åŸŸåè·¯ç”±</span></span>
<span class="line"><span style="color:#D19A66;">HTTP</span><span style="color:#ABB2BF;"> æ–¹æ³•è·¯ç”±</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">```</span><span style="color:#E06C75;">rust</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{get, handler, post, </span><span style="color:#E5C07B;">web</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Route</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> get_user</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> delete_user</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> create_user</span><span style="color:#ABB2BF;">() {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Route</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user/:id&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">get_user</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">delete_user</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/user&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">create_user</span><span style="color:#ABB2BF;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>å“åº” æ‰€æœ‰å¯è½¬æ¢ä¸º HTTP å“åº” Response çš„ç±»å‹éƒ½åº”å®ç° IntoResponseã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œstring_response å’Œ status_response å‡½æ•°è¿”å› String å’Œ StatusCode ç±»å‹ï¼Œå› ä¸º Poem å·²ä¸ºå®ƒä»¬å®ç°äº† IntoResponse traitã€‚</p><p>no_response å‡½æ•°ä¸è¿”å›å€¼ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒçš„è¿”å›ç±»å‹æ˜¯ ()ï¼Œè€Œ Poem ä¹Ÿä¸º () å®ç°äº† IntoResponseï¼Œå®ƒæ€»æ˜¯è¢«è½¬æ¢ä¸º 200 OKã€‚</p><p>result_response å‡½æ•°è¿”å› Result ç±»å‹ï¼Œè¿™æ„å‘³ç€å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> poem</span><span style="color:#ABB2BF;">::{handler, </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> string_response</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> status_response</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">StatusCode</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> no_response</span><span style="color:#ABB2BF;">() {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[handler]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> result_response</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">    todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>é”™è¯¯å¤„ç† ä»¥ä¸‹ç¤ºä¾‹åœ¨ NotFoundError å‘ç”Ÿæ—¶è¿”å›è‡ªå®šä¹‰å†…å®¹ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use poem::{</span></span>
<span class="line"><span>    error::NotFoundError, handler, http::StatusCode, EndpointExt, IntoResponse, Response, Route,</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[handler]</span></span>
<span class="line"><span>fn foo() {}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[handler]</span></span>
<span class="line"><span>fn bar() {}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let app =</span></span>
<span class="line"><span>    Route::new()</span></span>
<span class="line"><span>        .at(&quot;/foo&quot;, foo)</span></span>
<span class="line"><span>        .at(&quot;/bar&quot;, bar)</span></span>
<span class="line"><span>        .catch_error(|err: NotFoundError| async move {</span></span>
<span class="line"><span>            Response::builder()</span></span>
<span class="line"><span>                .status(StatusCode::NOT_FOUND)</span></span>
<span class="line"><span>                .body(&quot;custom not found&quot;)</span></span>
<span class="line"><span>        });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ä¸­é—´ä»¶ ä½ å¯ä»¥åœ¨ Endpoint ä¸Šè°ƒç”¨ with æ–¹æ³•æ¥å°†ä¸­é—´ä»¶åº”ç”¨åˆ°ç«¯ç‚¹ã€‚å®é™…ä¸Šï¼Œå®ƒä¼šå°†åŸå§‹ç«¯ç‚¹è½¬æ¢ä¸ºæ–°çš„ç«¯ç‚¹ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>use poem::{handler, middleware::Tracing, EndpointExt, Route};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[handler]</span></span>
<span class="line"><span>fn index() {}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let app = Route::new().at(&quot;/&quot;, index).with(Tracing);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸­é—´ä»¶ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ Middlewareã€‚</p><p>Crate ç‰¹æ€§ ä¸ºäº†é¿å…ç¼–è¯‘æœªä½¿ç”¨çš„ä¾èµ–ï¼ŒPoem é»˜è®¤å…³é—­äº†æŸäº›ç‰¹æ€§ï¼š</p><table><thead><tr><th style="text-align:left;">ç‰¹æ€§</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">server</td><td style="text-align:left;">æœåŠ¡å™¨å’Œç›‘å¬å™¨ APIï¼ˆé»˜è®¤å¯ç”¨ï¼‰</td></tr><tr><td style="text-align:left;">compression</td><td style="text-align:left;">æ”¯æŒè§£å‹ç¼©è¯·æ±‚ä½“å’Œå‹ç¼©å“åº”ä½“</td></tr><tr><td style="text-align:left;">cookie</td><td style="text-align:left;">æ”¯æŒ Cookie</td></tr><tr><td style="text-align:left;">csrf</td><td style="text-align:left;">æ”¯æŒè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ä¿æŠ¤</td></tr><tr><td style="text-align:left;">multipart</td><td style="text-align:left;">æ”¯æŒå¤šéƒ¨åˆ†</td></tr><tr><td style="text-align:left;">native-tls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ native-tls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">openssl-tls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ openssl-tls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">opentelemetry</td><td style="text-align:left;">æ”¯æŒ opentelemetry</td></tr><tr><td style="text-align:left;">prometheus</td><td style="text-align:left;">æ”¯æŒ Prometheus</td></tr><tr><td style="text-align:left;">redis-session</td><td style="text-align:left;">æ”¯æŒ Redis ä¼šè¯</td></tr><tr><td style="text-align:left;">rustls</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ rustls çš„ HTTP æœåŠ¡å™¨è¿‡ TLS</td></tr><tr><td style="text-align:left;">session</td><td style="text-align:left;">æ”¯æŒä¼šè¯</td></tr><tr><td style="text-align:left;">sse</td><td style="text-align:left;">æ”¯æŒæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰</td></tr><tr><td style="text-align:left;">tempfile</td><td style="text-align:left;">æ”¯æŒä¸´æ—¶æ–‡ä»¶</td></tr><tr><td style="text-align:left;">test</td><td style="text-align:left;">æµ‹è¯•ç«¯ç‚¹çš„å®ç”¨å·¥å…·ã€‚</td></tr><tr><td style="text-align:left;">tower-compat</td><td style="text-align:left;">é€‚é…å™¨ï¼Œç”¨äº tower::Layer å’Œ tower::Serviceã€‚</td></tr><tr><td style="text-align:left;">websocket</td><td style="text-align:left;">æ”¯æŒ WebSocket</td></tr><tr><td style="text-align:left;">anyhow</td><td style="text-align:left;">é›†æˆ anyhow crateã€‚</td></tr><tr><td style="text-align:left;">eyre06</td><td style="text-align:left;">é›†æˆ eyre crate çš„ 0.6.x ç‰ˆæœ¬ã€‚</td></tr><tr><td style="text-align:left;">i18n</td><td style="text-align:left;">æ”¯æŒå›½é™…åŒ–</td></tr><tr><td style="text-align:left;">acme-native-roots</td><td style="text-align:left;">æ”¯æŒ ACMEï¼ˆè‡ªåŠ¨è¯ä¹¦ç®¡ç†ç¯å¢ƒï¼‰</td></tr><tr><td style="text-align:left;">acme-webpki-roots</td><td style="text-align:left;">æ”¯æŒä½¿ç”¨ webpki TLS æ ¹è¯ä¹¦è€ŒéåŸç”Ÿ TLS æ ¹è¯ä¹¦çš„ ACME</td></tr><tr><td style="text-align:left;">tokio-metrics</td><td style="text-align:left;">é›†æˆ tokio-metrics crateã€‚</td></tr><tr><td style="text-align:left;">embed</td><td style="text-align:left;">é›†æˆ rust-embed crateã€‚</td></tr><tr><td style="text-align:left;">xml</td><td style="text-align:left;">é›†æˆ quick-xml crateã€‚</td></tr><tr><td style="text-align:left;">yaml</td><td style="text-align:left;">é›†æˆ serde-yaml crateã€‚</td></tr></tbody></table><p>é‡æ–°å¯¼å‡º</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>pub use endpoint::Endpoint;</span></span>
<span class="line"><span>pub use endpoint::EndpointExt;</span></span>
<span class="line"><span>pub use endpoint::IntoEndpoint;</span></span>
<span class="line"><span>pub use error::Error;</span></span>
<span class="line"><span>pub use error::Result;</span></span>
<span class="line"><span>pub use middleware::Middleware;</span></span>
<span class="line"><span>pub use web::FromRequest;</span></span>
<span class="line"><span>pub use web::IntoResponse;</span></span>
<span class="line"><span>pub use web::RequestBody;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ¨¡å—</p><ul><li>endpoint | ä¸ç«¯ç‚¹ç›¸å…³çš„ç±»å‹ã€‚</li><li>error | ä¸€äº›å¸¸è§çš„é”™è¯¯ç±»å‹ã€‚</li><li>http | é€šç”¨çš„å¸¸è§ HTTP ç±»å‹åº“ã€‚</li><li>i18n | å›½é™…åŒ–ç›¸å…³ç±»å‹ã€‚</li><li>listenerserver | å¸¸ç”¨çš„ç›‘å¬å™¨ã€‚</li><li>middleware | å¸¸ç”¨çš„ä¸­é—´ä»¶ã€‚</li><li>session | ä¼šè¯ç®¡ç†ã€‚</li><li>testtest | æµ‹è¯•ç«¯ç‚¹çš„å®ç”¨å·¥å…·ã€‚</li><li>web | å¸¸ç”¨ä½œæå–å™¨æˆ–å“åº”çš„ç±»å‹ã€‚ ç»“æ„ä½“</li><li>Body | è¯·æ±‚å’Œå“åº”çš„ä¸»ä½“å¯¹è±¡ã€‚</li><li>OnUpgrade | å¯èƒ½çš„ HTTP å‡çº§çš„ futureã€‚</li><li>PathPattern | å¯ä»¥ä»è¯·æ±‚ä¸­è·å–è·¯å¾„æ¨¡å¼çš„å®¹å™¨ã€‚</li><li>Request | è¡¨ç¤ºä¸€ä¸ª HTTP è¯·æ±‚ã€‚</li><li>RequestBuilder | ä¸€ä¸ªè¯·æ±‚æ„å»ºå™¨ã€‚</li><li>RequestParts | HTTP è¯·æ±‚çš„ç»„ä»¶éƒ¨åˆ†ã€‚</li><li>Response | è¡¨ç¤ºä¸€ä¸ª HTTP å“åº”ã€‚</li><li>ResponseBuilder | ä¸€ä¸ªå“åº”æ„å»ºå™¨ã€‚</li><li>ResponseParts | HTTP å“åº”çš„ç»„ä»¶éƒ¨åˆ†ã€‚</li><li>Route | è·¯ç”±å¯¹è±¡</li><li>RouteDomain | ä¸»æœºå¤´çš„è·¯ç”±å¯¹è±¡</li><li>RouteMethod | HTTP æ–¹æ³•çš„è·¯ç”±å¯¹è±¡</li><li>RouteScheme | è¯·æ±‚æ–¹æ¡ˆçš„è·¯ç”±å¯¹è±¡</li><li>Server | ä¸€ä¸ª HTTP æœåŠ¡å™¨ã€‚</li><li>Upgraded | ä¸€ä¸ªå‡çº§çš„ HTTP è¿æ¥ã€‚ æšä¸¾</li><li>Addr | ä¸€ä¸ªç½‘ç»œåœ°å€ã€‚ å‡½æ•°</li><li>connect | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().connect(ep)ã€‚</li><li>delete | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().delete(ep)ã€‚</li><li>get | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().get(ep)ã€‚</li><li>head | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().head(ep)ã€‚</li><li>options | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().options(ep)ã€‚</li><li>patch | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().patch(ep)ã€‚</li><li>post | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().post(ep)ã€‚</li><li>put | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().put(ep)ã€‚</li><li>trace | ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç±»ä¼¼äº RouteMethod::new().trace(ep)ã€‚ å±æ€§å®</li><li>handler | å°†å¼‚æ­¥å‡½æ•°åŒ…è£…ä¸ºç«¯ç‚¹ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™-4" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-4" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><p>[1] (README): <em>poem/README.md</em></p><p>[2] (CHANGELOG): <em>poem/CHANGELOG.md</em></p><p>[3] (README): <em>poem-lambda/README.md</em></p><p>[4] (CHANGELOG): <em>poem-lambda/CHANGELOG.md</em></p><p>[5] (README): <em>poem-openapi/README.md</em></p><p>[6] (CHANGELOG): <em>poem-openapi/CHANGELOG.md</em></p><p>[7] delicate: <em><a href="https://github.com/BinChengZhao/delicate" target="_blank" rel="noreferrer">https://github.com/BinChengZhao/delicate</a></em></p><p>[8] (README): <em><a href="https://delicate-rs.github.io/Roadmap.html" target="_blank" rel="noreferrer">https://delicate-rs.github.io/Roadmap.html</a></em></p><p>[9] databend: <em><a href="https://github.com/datafuselabs/databend" target="_blank" rel="noreferrer">https://github.com/datafuselabs/databend</a></em></p><p>[10] (ROADMAP): <em><a href="https://github.com/datafuselabs/databend/issues/746" target="_blank" rel="noreferrer">https://github.com/datafuselabs/databend/issues/746</a></em></p><p>[11] muse: <em><a href="https://leihuo.163.com/" target="_blank" rel="noreferrer">https://leihuo.163.com/</a></em></p><p>[12] hik-proconnect: <em><a href="https://www.hikvision.com/en/products/software/hik-proconnect/" target="_blank" rel="noreferrer">https://www.hikvision.com/en/products/software/hik-proconnect/</a></em></p><p>[13] warpgate: <em><a href="https://github.com/eugeny/warpgate" target="_blank" rel="noreferrer">https://github.com/eugeny/warpgate</a></em></p><p>[14] (README): <em><a href="https://github.com/warp-tech/warpgate/blob/main/README.md" target="_blank" rel="noreferrer">https://github.com/warp-tech/warpgate/blob/main/README.md</a></em></p><p>[15] lust: <em><a href="https://github.com/ChillFish8/lust" target="_blank" rel="noreferrer">https://github.com/ChillFish8/lust</a></em></p><p>[16] (README): <em><a href="https://github.com/ChillFish8/lust/blob/master/README.md" target="_blank" rel="noreferrer">https://github.com/ChillFish8/lust/blob/master/README.md</a></em></p><p>[17] aptos: <em><a href="https://github.com/aptos-labs/aptos-core" target="_blank" rel="noreferrer">https://github.com/aptos-labs/aptos-core</a></em></p><p>[18] (WEBSITE): <em><a href="https://aptoslabs.com/" target="_blank" rel="noreferrer">https://aptoslabs.com/</a></em></p><p>[19] poem-casbin: <em><a href="https://github.com/casbin-rs/poem-casbin" target="_blank" rel="noreferrer">https://github.com/casbin-rs/poem-casbin</a></em></p><p>[20] (WEBSITE): <em><a href="https://casbin.org/" target="_blank" rel="noreferrer">https://casbin.org/</a></em></p><p>[21] poem-grants: <em><a href="https://github.com/DDtKey/protect-endpoints/tree/main/poem-grants" target="_blank" rel="noreferrer">https://github.com/DDtKey/protect-endpoints/tree/main/poem-grants</a></em></p><p>[22] (README): <em><a href="https://github.com/DDtKey/protect-endpoints/blob/main/poem-grants/README.md" target="_blank" rel="noreferrer">https://github.com/DDtKey/protect-endpoints/blob/main/poem-grants/README.md</a></em></p><p>[23] examples: <em><a href="https://github.com/poem-web/poem/tree/master/examples" target="_blank" rel="noreferrer">https://github.com/poem-web/poem/tree/master/examples</a></em></p><h2 id="rust-ä¸-rouille-è½»èˆé£æ‰¬çš„-web-å¼€å‘æ–°çºªå…ƒ-â€”â€”-rust-web-å¾®æ¡†æ¶" tabindex="-1">Rust ä¸ Rouilleï¼šè½»èˆé£æ‰¬çš„ Web å¼€å‘æ–°çºªå…ƒ&quot;â€”â€” Rust Web å¾®æ¡†æ¶ <a class="header-anchor" href="#rust-ä¸-rouille-è½»èˆé£æ‰¬çš„-web-å¼€å‘æ–°çºªå…ƒ-â€”â€”-rust-web-å¾®æ¡†æ¶" aria-label="Permalink to &quot;Rust ä¸ Rouilleï¼šè½»èˆé£æ‰¬çš„ Web å¼€å‘æ–°çºªå…ƒ&quot;â€”â€” Rust Web å¾®æ¡†æ¶&quot;">â€‹</a></h2><p><strong>Githubåœ°å€</strong>ï¼š<a href="https://github.com/tomaka/rouille" target="_blank" rel="noreferrer">https://github.com/tomaka/rouille</a></p><blockquote><p><code>Rouille</code> æ˜¯ä¸€ä¸ªå¾®ç½‘ç»œæ¡†æ¶åº“ã€‚å®ƒåˆ›å»ºä¸€ä¸ªç›‘å¬å¥—æ¥å­—å¹¶è§£ææ¥è‡ªå®¢æˆ·ç«¯çš„ä¼ å…¥ <code>HTTP</code> è¯·æ±‚ï¼Œç„¶åå°†å¤„ç†è¯·æ±‚çš„å·¥ä½œäº¤åˆ°ä½ æ‰‹ä¸­ã€‚</p></blockquote><blockquote><p>â</p><p>å¦‚æœä½ ç†Ÿæ‚‰ <code>Rust</code>ï¼Œ<code>Rouille</code> è¢«è®¾è®¡ä¸ºç›´è§‚æ˜“ç”¨ã€‚ä¸ç±»ä¼¼ <code>Express</code> çš„æ¡†æ¶ä¸åŒï¼Œå®ƒä¸ä½¿ç”¨ä¸­é—´ä»¶ã€‚ç›¸åï¼Œä¸€åˆ‡éƒ½æ˜¯ä»¥çº¿æ€§æ–¹å¼å¤„ç†çš„ã€‚</p><p>â</p></blockquote><blockquote><p>â</p><p>ä¸ç½‘ç«™å¯†åˆ‡ç›¸å…³çš„æ¦‚å¿µï¼ˆå¦‚ <code>cookie</code>ã€<code>CGI</code>ã€è¡¨å•è¾“å…¥ç­‰ï¼‰éƒ½ç”± <code>Rouille</code> ç›´æ¥æ”¯æŒã€‚æ›´ä¸€èˆ¬çš„æ¦‚å¿µï¼ˆå¦‚æ•°æ®åº“å¤„ç†æˆ–æ¨¡æ¿ï¼‰åˆ™ä¸ç›´æ¥å¤„ç†ï¼Œå› ä¸ºå®ƒä»¬è¢«è®¤ä¸ºæ˜¯ä¸å¾®ç½‘ç»œæ¡†æ¶æ­£äº¤çš„ã€‚ç„¶è€Œï¼Œ<code>Rouille</code> çš„è®¾è®¡ä½¿å…¶æ˜“äºä¸ä»»ä½•ç¬¬ä¸‰æ–¹åº“ç»“åˆä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•èƒ¶åˆä»£ç ã€‚</p><p>â</p></blockquote><h3 id="å®‰è£…-rust" tabindex="-1">å®‰è£… Rust <a class="header-anchor" href="#å®‰è£…-rust" aria-label="Permalink to &quot;å®‰è£… Rust&quot;">â€‹</a></h3><ol><li><strong>ã€Œå®‰è£… Rust ç¼–è¯‘å™¨ã€</strong>ï¼šé¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… <code>Rust</code> ç¼–è¯‘å™¨ï¼Œè¿™å¯ä»¥é€šè¿‡ <code>Rust</code> çš„å®˜æ–¹ç½‘ç«™è·å–å®‰è£…æŒ‡å—ï¼Œæˆ–è€…ä½¿ç”¨åŒ…ç®¡ç†å™¨å¦‚ <code>curl</code> åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>rustc --version</code> å’Œ <code>cargo --version</code> æ¥æ£€æŸ¥ Rust ç¼–è¯‘å™¨å’ŒåŒ…ç®¡ç†å™¨æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><h3 id="å®‰è£…-rouille" tabindex="-1">å®‰è£… Rouille <a class="header-anchor" href="#å®‰è£…-rouille" aria-label="Permalink to &quot;å®‰è£… Rouille&quot;">â€‹</a></h3><ol><li><strong>ã€Œåˆ›å»ºæ–°çš„ Rust é¡¹ç›®ã€</strong>ï¼šä½¿ç”¨ Cargoï¼ˆRust çš„åŒ…ç®¡ç†å™¨ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®ï¼š</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo new my_rust_web_app</span></span>
<span class="line"><span>cd my_rust_web_app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li><strong>ã€Œæ·»åŠ  Rouille ä¾èµ–ã€</strong>ï¼šåœ¨é¡¹ç›®çš„ <code>Cargo.toml</code> æ–‡ä»¶ä¸­æ·»åŠ  Rouille ä½œä¸ºä¾èµ–é¡¹ã€‚æ‰“å¼€ <code>Cargo.toml</code> æ–‡ä»¶ï¼Œå¹¶åœ¨ <code>[dependencies]</code> éƒ¨åˆ†æ·»åŠ  Rouille çš„æ¡ç›®ï¼š</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>[dependencies]</span></span>
<span class="line"><span>rouille = &quot;x.y&quot; # è¯·å°† &quot;x.y&quot; æ›¿æ¢ä¸º Rouille çš„æœ€æ–°ç‰ˆæœ¬å·</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li><strong>ã€Œç¼–å†™ Web åº”ç”¨ä»£ç ã€</strong>ï¼šåœ¨ <code>src/main.rs</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥å¼€å§‹ç¼–å†™ä½¿ç”¨ Rouille çš„ Web åº”ç”¨ä»£ç ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„â€œHello, Worldâ€ç¤ºä¾‹ï¼š</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>extern crate rouille;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>fn main() {</span></span>
<span class="line"><span>   rouille::start_server(&quot;127.0.0.1:8080&quot;, move |request| {</span></span>
<span class="line"><span>       match request.get_path() {</span></span>
<span class="line"><span>           &quot;/&quot; =&gt; {</span></span>
<span class="line"><span>               let response = rouille::Response::text(&quot;Hello, World!&quot;);</span></span>
<span class="line"><span>               response</span></span>
<span class="line"><span>           },</span></span>
<span class="line"><span>           _ =&gt; {</span></span>
<span class="line"><span>               let mut not_found = rouille::Response::new(&quot;Not found&quot;);</span></span>
<span class="line"><span>               not_found.set_status(rouille::ResponseStatus::NotFound);</span></span>
<span class="line"><span>               not_found</span></span>
<span class="line"><span>           }</span></span>
<span class="line"><span>       }</span></span>
<span class="line"><span>   });</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="è¿è¡Œ-web-åº”ç”¨" tabindex="-1">è¿è¡Œ Web åº”ç”¨ <a class="header-anchor" href="#è¿è¡Œ-web-åº”ç”¨" aria-label="Permalink to &quot;è¿è¡Œ Web åº”ç”¨&quot;">â€‹</a></h3><ol><li><strong>ã€Œç¼–è¯‘å¹¶è¿è¡Œé¡¹ç›®ã€</strong>ï¼šåœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä½¿ç”¨ Cargo ç¼–è¯‘å¹¶è¿è¡Œä½ çš„ Rust Web åº”ç”¨ï¼š</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™å°†å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œç›‘å¬ 8080 ç«¯å£ã€‚</p><ol><li><strong>ã€Œè®¿é—®ä½ çš„ Web åº”ç”¨ã€</strong>ï¼šæ‰“å¼€ä½ çš„ç½‘ç»œæµè§ˆå™¨ï¼Œè®¿é—® <code>http://127.0.0.1:8080</code>ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°æ˜¾ç¤ºâ€œHello, World!â€çš„é¡µé¢ã€‚</li></ol><h3 id="é…ç½®-web-åº”ç”¨" tabindex="-1">é…ç½® Web åº”ç”¨ <a class="header-anchor" href="#é…ç½®-web-åº”ç”¨" aria-label="Permalink to &quot;é…ç½® Web åº”ç”¨&quot;">â€‹</a></h3><ol><li><strong>ã€Œè‡ªå®šä¹‰é…ç½®ã€</strong>ï¼šæ ¹æ®ä½ çš„éœ€æ±‚ï¼Œä½ å¯èƒ½éœ€è¦å¯¹ Rouille è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ¯”å¦‚è®¾ç½®é™æ€æ–‡ä»¶ç›®å½•ã€è·¯ç”±ã€ä¸­é—´ä»¶ç­‰ã€‚è¿™äº›é…ç½®é€šå¸¸åœ¨ <code>main.rs</code> æ–‡ä»¶ä¸­è¿›è¡Œã€‚</li><li><strong>ã€Œé˜…è¯»æ–‡æ¡£ã€</strong>ï¼šä¸ºäº†æ›´æ·±å…¥åœ°äº†è§£å¦‚ä½•ä½¿ç”¨ Rouilleï¼Œä½ å¯ä»¥è®¿é—®å®ƒçš„å®˜æ–¹æ–‡æ¡£ Rouille Docsï¼Œä»¥è·å–æ›´å¤šé«˜çº§ç”¨æ³•å’Œæœ€ä½³å®è·µã€‚</li></ol><h3 id="æ·±å…¥æ¢è®¨" tabindex="-1">æ·±å…¥æ¢è®¨ <a class="header-anchor" href="#æ·±å…¥æ¢è®¨" aria-label="Permalink to &quot;æ·±å…¥æ¢è®¨&quot;">â€‹</a></h3><h4 id="å¼€å§‹ä½¿ç”¨-1" tabindex="-1">å¼€å§‹ä½¿ç”¨ <a class="header-anchor" href="#å¼€å§‹ä½¿ç”¨-1" aria-label="Permalink to &quot;å¼€å§‹ä½¿ç”¨&quot;">â€‹</a></h4><p>å¦‚æœä½ å¯¹ HTTP çš„å·¥ä½œåŸç†æœ‰ä¸€èˆ¬äº†è§£ï¼Œæ–‡æ¡£ å’Œ æ–‡æ¡£é½å…¨çš„ç¤ºä¾‹ æ˜¯å¸®åŠ©ä½ å…¥é—¨çš„å¥½èµ„æºã€‚</p><h3 id="rouille-åº“æ¦‚è§ˆ" tabindex="-1">Rouille åº“æ¦‚è§ˆ <a class="header-anchor" href="#rouille-åº“æ¦‚è§ˆ" aria-label="Permalink to &quot;Rouille åº“æ¦‚è§ˆ&quot;">â€‹</a></h3><h4 id="å¼€å§‹ä½¿ç”¨-2" tabindex="-1">å¼€å§‹ä½¿ç”¨ <a class="header-anchor" href="#å¼€å§‹ä½¿ç”¨-2" aria-label="Permalink to &quot;å¼€å§‹ä½¿ç”¨&quot;">â€‹</a></h4><ul><li><strong>ã€Œåˆ›å»ºæœåŠ¡å™¨ã€</strong>ï¼šé€šè¿‡è°ƒç”¨<code>start_server</code>å‡½æ•°ç›‘å¬ç«¯å£ã€‚</li><li><strong>ã€Œå¤„ç†è¯·æ±‚ã€</strong>ï¼šå½“æ¥æ”¶åˆ° HTTP è¯·æ±‚æ—¶ï¼Œè°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„é—­åŒ…ï¼Œè¯¥é—­åŒ…å¿…é¡»è¿”å›ä¸€ä¸ª<code>Response</code>å¯¹è±¡ã€‚</li></ul><h4 id="è¯·æ±‚åˆ†æ" tabindex="-1">è¯·æ±‚åˆ†æ <a class="header-anchor" href="#è¯·æ±‚åˆ†æ" aria-label="Permalink to &quot;è¯·æ±‚åˆ†æ&quot;">â€‹</a></h4><ul><li><strong>ã€Œè¯·æ±‚å¯¹è±¡ã€</strong>ï¼šé—­åŒ…æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>Request</code>å¯¹è±¡ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ã€‚</li><li><strong>ã€Œè·¯ç”±ã€</strong>ï¼šä½¿ç”¨<code>router!</code>å®æ ¹æ® URL åˆ†æ´¾ä¸åŒä»£ç ã€‚</li><li><strong>ã€Œè¯·æ±‚ä½“åˆ†æã€</strong>ï¼šå¤„ç† JSON è¾“å…¥ã€è¡¨å•è¾“å…¥ç­‰ï¼ŒæŸ¥çœ‹<code>input</code>æ¨¡å—ã€‚</li></ul><h4 id="å“åº”è¿”å›" tabindex="-1">å“åº”è¿”å› <a class="header-anchor" href="#å“åº”è¿”å›" aria-label="Permalink to &quot;å“åº”è¿”å›&quot;">â€‹</a></h4><ul><li><strong>ã€Œè‡ªå®šä¹‰å“åº”ã€</strong>ï¼šè¿”å›<code>Response</code>å¯¹è±¡ï¼Œæ‰€æœ‰æˆå‘˜éƒ½æ˜¯å…¬å¼€çš„ï¼Œå¯ä»¥æŒ‰éœ€è‡ªå®šä¹‰ã€‚</li><li><strong>ã€Œé™æ€æ–‡ä»¶æœåŠ¡ã€</strong>ï¼šæŸ¥çœ‹<code>match_assets</code>å‡½æ•°ã€‚</li><li><strong>ã€Œå†…å®¹ç¼–ç ã€</strong>ï¼šåº”ç”¨å†…å®¹ç¼–ç ï¼ˆåŒ…æ‹¬ gzip æˆ– deflate å‹ç¼©ï¼‰ï¼ŒæŸ¥çœ‹<code>content_encoding</code>æ¨¡å—ã€‚</li></ul><h4 id="é‡å¯¼å‡º" tabindex="-1">é‡å¯¼å‡º <a class="header-anchor" href="#é‡å¯¼å‡º" aria-label="Permalink to &quot;é‡å¯¼å‡º&quot;">â€‹</a></h4><ul><li><code>percent_encoding</code>ï¼šç™¾åˆ†å·ç¼–ç ã€‚</li><li><code>url</code>ï¼šURL å¤„ç†ã€‚</li></ul><h4 id="æ¨¡å—-1" tabindex="-1">æ¨¡å— <a class="header-anchor" href="#æ¨¡å—-1" aria-label="Permalink to &quot;æ¨¡å—&quot;">â€‹</a></h4><ul><li><strong>ã€Œcgiã€</strong>ï¼šé€šè¿‡ CGI è®©å¤–éƒ¨è¿›ç¨‹å¤„ç†è¯·æ±‚ã€‚</li><li><strong>ã€Œcontent_encodingã€</strong>ï¼šå¯¹å“åº”åº”ç”¨å†…å®¹ç¼–ç ã€‚</li><li><strong>ã€Œinputã€</strong>ï¼šåˆ†æè¯·æ±‚çš„å¤´éƒ¨å’Œæ­£æ–‡ã€‚</li><li><strong>ã€Œproxyã€</strong>ï¼šå°†è¯·æ±‚è½¬å‘è‡³å¦ä¸€ä¸ª HTTP æœåŠ¡å™¨ã€‚</li><li><strong>ã€Œsessionã€</strong>ï¼šä¼šè¯å¤„ç†ã€‚</li><li><strong>ã€Œwebsocketã€</strong>ï¼šWebsocket æ”¯æŒã€‚</li></ul><h4 id="å®" tabindex="-1">å® <a class="header-anchor" href="#å®" aria-label="Permalink to &quot;å®&quot;">â€‹</a></h4><ul><li><strong>ã€Œacceptã€</strong>ï¼šæ ¹æ®<code>Accept</code>å¤´å€¼åˆ†æ´¾ã€‚</li><li><strong>ã€Œassert_or_400ã€</strong>ï¼šæ¡ä»¶ä¸æˆç«‹æ—¶è¿”å› 400 å“åº”ã€‚</li><li><strong>ã€Œfind_routeã€</strong>ï¼šç›´åˆ°æ‰¾åˆ°é 404 çš„é”™è¯¯ç ã€‚</li><li><strong>ã€Œpost_inputã€</strong>ï¼šè§£æ HTML è¡¨å•è¾“å…¥ã€‚</li><li><strong>ã€Œrouterã€</strong>ï¼šè·¯ç”±åŒ¹é…è¡¨è¾¾å¼ã€‚</li><li><strong>ã€Œtry_or_400ã€</strong>ï¼šè¡¨è¾¾å¼é”™è¯¯æ—¶è¿”å› 400 å“åº”ã€‚</li><li><strong>ã€Œtry_or_404ã€</strong>ï¼šè¡¨è¾¾å¼é”™è¯¯æ—¶è¿”å› 404 å“åº”ã€‚</li></ul><h4 id="ç»“æ„ä½“-1" tabindex="-1">ç»“æ„ä½“ <a class="header-anchor" href="#ç»“æ„ä½“-1" aria-label="Permalink to &quot;ç»“æ„ä½“&quot;">â€‹</a></h4><ul><li><strong>ã€ŒHeadersIterã€</strong>ï¼šè¯·æ±‚ä¸­å¤´éƒ¨åˆ—è¡¨çš„è¿­ä»£å™¨ã€‚</li><li><strong>ã€ŒRequestã€</strong>ï¼šå¿…é¡»å“åº”çš„è¯·æ±‚ã€‚</li><li><strong>ã€ŒRequestBodyã€</strong>ï¼šæä¾›è¯·æ±‚æ­£æ–‡çš„è®¿é—®ã€‚</li><li><strong>ã€ŒResponseã€</strong>ï¼šåŒ…å«å“åº”åŸå‹ã€‚</li><li><strong>ã€ŒResponseBodyã€</strong>ï¼šè¡¨ç¤ºå“åº”æ­£æ–‡çš„ä¸é€æ˜ç±»å‹ã€‚</li><li><strong>ã€ŒServerã€</strong>ï¼šç›‘å¬æœåŠ¡å™¨ã€‚</li></ul><h4 id="å¸¸é‡" tabindex="-1">å¸¸é‡ <a class="header-anchor" href="#å¸¸é‡" aria-label="Permalink to &quot;å¸¸é‡&quot;">â€‹</a></h4><ul><li><strong>ã€ŒDEFAULT_ENCODE_SETã€</strong>ï¼šé»˜è®¤ç¼–ç é›†ã€‚</li></ul><h4 id="ç‰¹å¾-traits" tabindex="-1">ç‰¹å¾ï¼ˆTraitsï¼‰ <a class="header-anchor" href="#ç‰¹å¾-traits" aria-label="Permalink to &quot;ç‰¹å¾ï¼ˆTraitsï¼‰&quot;">â€‹</a></h4><ul><li><strong>ã€ŒReadWriteã€</strong>ï¼šèšåˆ<code>Read</code>å’Œ<code>Write</code>ç‰¹å¾çš„è™šæ‹Ÿç‰¹å¾ã€‚</li><li><strong>ã€ŒUpgradeã€</strong>ï¼šå¯ä»¥æ¥ç®¡åŸå§‹è¿æ¥åˆ°å®¢æˆ·ç«¯æ•°æ®çš„å¯¹è±¡ç‰¹å¾ã€‚</li></ul><h4 id="å‡½æ•°" tabindex="-1">å‡½æ•° <a class="header-anchor" href="#å‡½æ•°" aria-label="Permalink to &quot;å‡½æ•°&quot;">â€‹</a></h4><ul><li><strong>ã€Œextension_to_mimeã€</strong>ï¼šæ ¹æ®æ–‡ä»¶æ‰©å±•åè¿”å› MIME ç±»å‹ï¼Œå¦‚æœæ‰©å±•åæœªçŸ¥åˆ™è¿”å›<code>application/octet-stream</code>ã€‚</li><li><strong>ã€Œlogã€</strong>ï¼šä¸ºæ¯ä¸ªè¯·æ±‚å‘ç»™å®šçš„å†™å…¥å™¨æ·»åŠ æ—¥å¿—æ¡ç›®ã€‚</li><li><strong>ã€Œlog_customã€</strong>ï¼šå¤„ç†è¯·æ±‚åè°ƒç”¨è‡ªå®šä¹‰æ—¥å¿—å‡½æ•°ã€‚</li><li><strong>ã€Œmatch_assetsã€</strong>ï¼šåœ¨è·¯å¾„ä¸­æœç´¢åŒ¹é…ç»™å®šè¯·æ±‚çš„æ–‡ä»¶ã€‚å¦‚æœæ‰¾åˆ°æ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªå¯ä»¥æä¾›è¯¥æ–‡ä»¶çš„<code>Response</code>ï¼›å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å› 404 å“åº”ã€‚</li><li><strong>ã€Œstart_serverã€</strong>ï¼šå¯åŠ¨æœåŠ¡å™¨å¹¶ä½¿ç”¨ç»™å®šçš„è¯·æ±‚å¤„ç†å™¨ã€‚</li><li><strong>ã€Œstart_server_with_poolã€</strong>ï¼šä¸<code>start_server</code>ç›¸åŒï¼Œä½†ä½¿ç”¨æŒ‡å®šå¤§å°çš„<code>ThreadPool</code>ã€‚</li></ul><p>é€šè¿‡ä»¥ä¸Šæ ¼å¼ï¼Œå¯ä»¥æ¸…æ™°åœ°å±•ç¤º Rouille åº“çš„ä¸»è¦åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ã€‚</p><h3 id="ä»£ç å®æˆ˜" tabindex="-1">ä»£ç å®æˆ˜ <a class="header-anchor" href="#ä»£ç å®æˆ˜" aria-label="Permalink to &quot;ä»£ç å®æˆ˜&quot;">â€‹</a></h3><h4 id="æ¡ˆä¾‹-1-ä½ å¥½ä¸–ç•Œ" tabindex="-1">æ¡ˆä¾‹ 1 ä½ å¥½ä¸–ç•Œ <a class="header-anchor" href="#æ¡ˆä¾‹-1-ä½ å¥½ä¸–ç•Œ" aria-label="Permalink to &quot;æ¡ˆä¾‹ 1 ä½ å¥½ä¸–ç•Œ&quot;">â€‹</a></h4><p>examples/hello-world.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#![allow(unreachable_code)] </span><span style="color:#7F848E;font-style:italic;">// å…è®¸ä¸å¯è¾¾ä»£ç </span></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use] </span><span style="color:#7F848E;font-style:italic;">// å®å¯¼å…¥</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille; </span><span style="color:#7F848E;font-style:italic;">// å¯¼å…¥ rouille åº“</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // `start_server` å‡½æ•°åœ¨ç»™å®šåœ°å€ä¸Šæ°¸ä¹…ç›‘å¬ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ä¼ é€’ç»™ `start_server` çš„é—­åŒ…å°†ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚è°ƒç”¨ä¸€æ¬¡ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å½“æœ‰å¤šä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œå°†å¹¶å‘å¤šæ¬¡è°ƒç”¨ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è¿™é‡Œå¼€å§‹è¯·æ±‚çš„å®é™…å¤„ç†ç¨‹åºã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // `router!` å®ä¸ Rust æ ¸å¿ƒåº“ä¸­çš„ `match` è¡¨è¾¾å¼éå¸¸ç›¸ä¼¼ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å®æ¥å—è¯·æ±‚ä½œä¸ºå‚æ•°ï¼Œå¹¶è·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…è¯·æ±‚çš„å—ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // æ¯ä¸ªå¯èƒ½çš„å—æ„å»ºä¸€ä¸ª `Response` å¯¹è±¡ã€‚å°±åƒ Rust ä¸­çš„å¤§å¤šæ•°äº‹ç‰©ä¸€æ ·ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // `router!` å®æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶å€¼æ˜¯ç”±è¢«è°ƒç”¨å—æ„å»ºçš„ `Response`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ç”±äº `router!` æ˜¯è¿™ä¸ªé—­åŒ…çš„æœ€åä¸€éƒ¨åˆ†ä»£ç ï¼Œ`Response` éšåè¢«ä¼ é€’å› `start_server` å‡½æ•°å¹¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">        router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœè¯·æ±‚çš„ URL æ˜¯ `/`ï¼Œæˆ‘ä»¬è·³è½¬åˆ°è¿™é‡Œã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™ä¸ªå—æ„å»ºä¸€ä¸ªé‡å®šå‘åˆ° `/hello/world` çš„ `Response` å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">redirect_302</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/hello/world&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">hello</span><span style="color:#ABB2BF;">/</span><span style="color:#E06C75;">world</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœè¯·æ±‚çš„ URL æ˜¯ `/hello/world`ï¼Œæˆ‘ä»¬è·³è½¬åˆ°è¿™é‡Œã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æ„å»ºä¸€ä¸ªåŒ…å« &quot;hello world&quot; æ–‡æœ¬çš„ `Response` å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello world&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">panic</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœè¯·æ±‚çš„ URL æ˜¯ `/panic`ï¼Œæˆ‘ä»¬è·³è½¬åˆ°è¿™é‡Œã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™ä¸ªå—ä¼š panicã€‚å¹¸è¿çš„æ˜¯ï¼ŒRouille ä¼šè‡ªåŠ¨æ•è· panic å¹¶å‘é€ä¸€ä¸ª 500 é”™è¯¯æ¶ˆæ¯å›å®¢æˆ·ç«¯ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™é˜²æ­¢äº†æœåŠ¡å™¨æ„å¤–å…³é—­ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                panic!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Oops!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/{</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">}) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœè¯·æ±‚çš„ URL æ˜¯ä¾‹å¦‚ `/5`ï¼Œæˆ‘ä»¬è·³è½¬åˆ°è¿™é‡Œã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // `router!` å®å°†å°è¯•å°†æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ `5`ï¼‰è§£æä¸º `u32`ã€‚å¦‚æœè§£æå¤±è´¥ï¼ˆä¾‹å¦‚å¦‚æœ URL æ˜¯ `/hello`ï¼‰ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // åˆ™ä¸è°ƒç”¨è¿™ä¸ªå—ï¼Œ`router!` å®ç»§ç»­å¯»æ‰¾å¦ä¸€ä¸ªå—ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;u32 {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä¸ºäº†ç¤ºä¾‹ï¼Œæˆ‘ä»¬è¿”å›ä¸€ä¸ªå¸¦æœ‰ 400 çŠ¶æ€ç çš„ç©ºå“åº”ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_400</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/{</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">}) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœè¯·æ±‚çš„ URL æ˜¯ä¾‹å¦‚ `/foo`ï¼Œæˆ‘ä»¬è·³è½¬åˆ°è¿™é‡Œã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™ä¸ªè·¯ç”±ä¸å‰ä¸€ä¸ªç±»ä¼¼ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬æœ‰ä¸€ä¸ª `String`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è§£æä¸º `String` æ°¸è¿œä¸ä¼šå¤±è´¥ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;String {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æ„å»ºä¸€ä¸ªåŒ…å« &quot;hello, &quot; åé¢è·Ÿç€ `id` å€¼çš„ `Response` å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello, {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœæ²¡æœ‰å…¶ä»–å—åŒ¹é…è¯·æ±‚ï¼Œåˆ™è°ƒç”¨æ­¤ä»£ç å—ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬è¿”å›ä¸€ä¸ªå¸¦æœ‰ 404 çŠ¶æ€ç çš„ç©ºå“åº”ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">            _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><h4 id="æ¡ˆä¾‹-2-ç™»å½•ä¼šè¯å¤„ç†" tabindex="-1">æ¡ˆä¾‹ 2 ç™»å½•ä¼šè¯å¤„ç† <a class="header-anchor" href="#æ¡ˆä¾‹-2-ç™»å½•ä¼šè¯å¤„ç†" aria-label="Permalink to &quot;æ¡ˆä¾‹ 2 ç™»å½•ä¼šè¯å¤„ç†&quot;">â€‹</a></h4><p>examples/login-session.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#![allow(unreachable_code)]</span></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">collections</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::io;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">sync</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Mutex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¯¥ç»“æ„ä½“åŒ…å«äº†æˆ‘ä»¬å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šå…³äºæ¯ä¸ªå®¢æˆ·ç«¯çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> SessionData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    login</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºå¸¦æœ‰ç®€å•ç™»å½•è¡¨å•çš„ç½‘ç«™ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç®€çŸ­æ¶ˆæ¯ï¼Œä»¥ä¾¿äººä»¬ä¸å¿…é˜…è¯»æºä»£ç ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„å…¶ä»–æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä¸ºäº†ç¤ºä¾‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†æŠŠä¼šè¯æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å“ˆå¸Œæ˜ å°„ä¸­ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯å¦‚æœç¨‹åºé‡æ–°å¯åŠ¨ï¼ˆä¾‹å¦‚å› ä¸ºæ›´æ–°ï¼‰ï¼Œæ‰€æœ‰ä¼šè¯éƒ½ä¼šè¢«æ¸…é™¤ï¼Œå¹¶ä¸”å¦‚æœæ‚¨å¯åŠ¨äº†ç›¸åŒåº”ç”¨ç¨‹åºçš„å¤šä¸ªè¿›ç¨‹ï¼ˆä¾‹å¦‚ä¸ºäº†è´Ÿè½½å‡è¡¡ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬å°†ä¸ä¼šå…±äº«ä¼šè¯ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å› æ­¤ï¼Œåœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæ‚¨åº”è¯¥å°†å¯èƒ½å°†å­˜å‚¨ä¼šè¯åœ¨æŸç§æ•°æ®åº“ä¸­ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬ä¸ºæ¯ä¸ªä¼šè¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œä»¥åŠä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼Œå®ƒå°†æ¯ä¸ªä¼šè¯ ID ä¸æ•°æ®å…³è”èµ·æ¥ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> sessions_storage</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Mutex</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">SessionData</span><span style="color:#ABB2BF;">&gt;&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Mutex</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">io</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">stdout</span><span style="color:#ABB2BF;">(), </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬è°ƒç”¨ `session::session` ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤æ ‡è¯†ç¬¦é€šè¿‡è‡ªåŠ¨æ·»åŠ åˆ°å“åº”ä¸­çš„ cookie è¿›è¡Œè·Ÿè¸ªã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å‡½æ•°çš„å‚æ•°æ˜¯ cookie çš„åç§°ï¼ˆè¿™é‡Œä¸º &quot;SID&quot;ï¼‰å’Œä¼šè¯çš„æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼ˆè¿™é‡Œä¸ºä¸€å°æ—¶ï¼‰ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">            rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">session</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">session</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;SID&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3600</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">session</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœå®¢æˆ·ç«¯å·²ç»æœ‰æ¥è‡ªå…ˆå‰è¯·æ±‚çš„æ ‡è¯†ç¬¦ï¼Œæˆ‘ä»¬å°è¯•åŠ è½½ç°æœ‰çš„ä¼šè¯æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬æˆåŠŸåœ°ä» `sessions_storage` åŠ è½½æ•°æ®ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æˆ‘ä»¬ä¼šåˆ¶ä½œæ•°æ®çš„å‰¯æœ¬ï¼Œä»¥é¿å…é”å®šä¼šè¯å¤ªé•¿æ—¶é—´ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å› æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª `Option&lt;SessionData&gt;`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> session_data</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> if</span><span style="color:#E06C75;"> session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">client_has_sid</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> sessions_storage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">id</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#E5C07B;">                        Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                        None</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                    None</span></span>
<span class="line"><span style="color:#ABB2BF;">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä½¿ç”¨å•ç‹¬çš„å‡½æ•°å®é™…å¤„ç†è¯·æ±‚ï¼Œä»¥æé«˜å¯è¯»æ€§ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æˆ‘ä»¬ä¼ é€’ `Option&lt;SessionData&gt;` çš„å¯å˜å¼•ç”¨ï¼Œä»¥ä¾¿å‡½æ•°å¯ä»¥è‡ªç”±ä¿®æ”¹å®ƒã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> handle_route</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> session_data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ç”±äºå¯¹ `handle_route` çš„å‡½æ•°è°ƒç”¨å¯ä»¥ä¿®æ”¹ä¼šè¯æ•°æ®ï¼Œæˆ‘ä»¬åœ¨å¿…è¦æ—¶å¿…é¡»å°†å…¶å­˜å‚¨å› `sessions_storage`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">d</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> session_data</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    sessions_storage</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">id</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to_owned</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">d</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#E06C75;"> session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">client_has_sid</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // å¦‚æœ `handle_route` æ¸…é™¤äº† `Option` çš„å†…å®¹ï¼Œæˆ‘ä»¬ä»å­˜å‚¨ä¸­åˆ é™¤ä¼šè¯ã€‚è¿™åªåœ¨å®¢æˆ·ç«¯å·²ç»æœ‰æ ‡è¯†ç¬¦æ—¶æ‰æ‰§è¡Œï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // å¦åˆ™è°ƒç”¨ `session.id()` å°†åˆ†é…ä¸€ä¸ªã€‚</span></span>
<span class="line"><span style="color:#E06C75;">                    sessions_storage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">id</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // åœ¨æ•´ä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­ï¼Œ`sessions_storage` äº’æ–¥é”ä»…çŸ­æš‚é”å®šäº†ä¸¤æ¬¡ã€‚è¿™å¯¹æ€§èƒ½å½±å“ä¸å¤§ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">                response</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯çœŸæ­£å¤„ç†è·¯ç”±çš„å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// `session_data` å‚æ•°ä¿å­˜äº†æˆ‘ä»¬å¯¹å®¢æˆ·ç«¯çš„äº†è§£ã€‚æ­¤å‡½æ•°çš„ä¸»ä½“å¯ä»¥ä¿®æ”¹å®ƒã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬è®¾è®¡çš„ `session_data` é€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µï¼Œä½†å¹¶éæ‰€æœ‰æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è·Ÿè¸ªç”¨æˆ·è®¿é—®çš„é¡µé¢ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½ åº”è¯¥ä»¥å¦ä¸€ç§æ–¹å¼è®¾è®¡å®ƒï¼Œå¦åˆ™æŸäº›è¯·æ±‚çš„æ•°æ®å°†è¦†ç›–å…¶ä»–è¯·æ±‚çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> handle_route</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">session_data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Option</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">SessionData</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // é¦–å…ˆæˆ‘ä»¬å¤„ç†æ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•éƒ½å¯ä»¥è®¿é—®ä¸”å§‹ç»ˆç›¸åŒçš„è·¯ç”±ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">POST</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">login</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å½“ç”¨æˆ·æƒ³è¦ç™»å½•æ—¶è°ƒç”¨æ­¤è·¯ç”±ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºäº†æ£€ç´¢ç”¨æˆ·é€šè¿‡ `&lt;form&gt;` å‘é€ç»™æˆ‘ä»¬çš„å†…å®¹ï¼Œæˆ‘ä»¬ä½¿ç”¨ `post_input!` å®ã€‚æ­¤å®è¿”å›ä¸€ä¸ªé”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœç¼ºå°‘æŸä¸ªå­—æ®µï¼‰ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å› æ­¤æˆ‘ä»¬ä½¿ç”¨ `try_or_400!` å®æ¥å¤„ç†ä»»ä½•å¯èƒ½çš„é”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœå®æˆåŠŸï¼Œ`data` æ˜¯ä¸€ä¸ªç»“æ„ä½“çš„å®ä¾‹ï¼Œè¯¥ç»“æ„ä½“ä¸ºæˆ‘ä»¬åœ¨å®ä¸­æŒ‡ç¤ºçš„æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªæˆå‘˜ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> try_or_400!</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">post_input!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">                login</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                password</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            }));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¯¹äºè¿™ä¸ªç¤ºä¾‹ï¼Œåªæ˜¯ä¸€ä¸ªå°çš„è°ƒè¯•æ¶ˆæ¯ã€‚åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨æ—¥å¿—ä¸­è¾“å‡ºæŸäº›å†…å®¹ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å°è¯•ä½¿ç”¨ç™»å½• {:?} å’Œå¯†ç  {:?} ç™»å½•&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.login, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.password);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰ä»¥å­—æ¯ &#39;b&#39; å¼€å¤´çš„ç™»å½•å°è¯•éƒ½æˆåŠŸã€‚å½“ç„¶ï¼Œåœ¨çœŸå®çš„ç½‘ç«™ä¸Šï¼Œæ‚¨åº”è¯¥ä»¥é€‚å½“çš„æ–¹å¼æ£€æŸ¥å‡­æ®ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">.password.</span><span style="color:#61AFEF;">starts_with</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;b&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // é€šè¿‡å†™å…¥ `session_data` çš„å†…å®¹æ¥ç™»å½•ç”¨æˆ·ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™é‡Œæœ‰ä¸€ä¸ªè½»å¾®çš„è­¦å‘Šï¼šåœ¨è¿™ä¸ªæ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å†…å­˜ä¸­å­˜å‚¨ç”¨æˆ·æä¾›ç»™æˆ‘ä»¬çš„æ•°æ®ã€‚è¿™äº›æ•°æ®ä¸å¯ä¿¡ï¼Œå¯èƒ½åŒ…å«ä»»ä½•å†…å®¹ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // åŒ…æ‹¬ XSS æ”»å‡»çš„å°è¯•ã€‚å°†ç”¨æˆ·æä¾›çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­å¹¶æ²¡æœ‰é”™ï¼Œä½†æˆ‘ä»¬å¿…é¡»æ³¨æ„ä¸è¦å°†å…¶è§£é‡Šä¸º HTML æ•°æ®ï¼Œä¾‹å¦‚ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">                *</span><span style="color:#E06C75;">session_data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">SessionData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">login</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.login });</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">redirect_303</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æˆ‘ä»¬è¿”å›ä¸€ä¸ªè™šæ‹Ÿå“åº”ä»¥è¡¨ç¤ºç™»å½•å¤±è´¥ã€‚åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨æŸç§ HTML æ¨¡æ¿åŒ–æŠ€æœ¯ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;é”™è¯¯çš„ç™»å½•/å¯†ç &quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">POST</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">logout</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å½“ç”¨æˆ·æƒ³è¦æ³¨é”€æ—¶è°ƒç”¨æ­¤è·¯ç”±ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬é€šè¿‡ç®€å•åœ°æ¸…é™¤ `session_data` çš„å†…å®¹æ¥æ³¨é”€ï¼Œè¿™å°†åˆ é™¤ä¼šè¯ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">            *</span><span style="color:#E06C75;">session_data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> None</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬è¿”å›ä¸€ä¸ªè™šæ‹Ÿå“åº”ä»¥æŒ‡ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆã€‚åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨æŸç§ HTML æ¨¡æ¿åŒ–æŠ€æœ¯ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            return</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">r#&quot;æ³¨é”€æˆåŠŸã€‚</span></span>
<span class="line"><span style="color:#98C379;">                                     &lt;a href=&quot;/&quot;&gt;ç‚¹å‡»è¿™é‡Œè¿”å›é¦–é¡µ&lt;/a&gt;&quot;#</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        _</span><span style="color:#ABB2BF;"> =&gt; ()</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç°åœ¨æˆ‘ä»¬å·²ç»å¤„ç†äº†åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å¯ä»¥è®¿é—®çš„æ‰€æœ‰è·¯ç”±ï¼Œæˆ‘ä»¬åœ¨ç»§ç»­ä¹‹å‰æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">session_data</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> session_data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">as_ref</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å·²ç™»å½•ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">        handle_route_logged_in</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">session_data</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // æœªç™»å½•ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">        router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿æ¥åˆ°æ ¹ç›®å½•æ—¶æ˜¾ç¤ºç™»å½•è¡¨å•ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¯·æ³¨æ„ï¼Œåœ¨çœŸå®ç½‘ç«™ä¸­ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨æŸç§æ¨¡æ¿åŒ–ç³»ç»Ÿï¼Œæˆ–è€…è‡³å°‘ä»æ–‡ä»¶ä¸­åŠ è½½ HTMLã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">r#&quot;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;æç¤ºï¼šåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰ä»¥å­—æ¯ &#39;b&#39;ï¼ˆå°å†™ï¼‰å¼€å¤´çš„å¯†ç éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;form action=&quot;/login&quot; method=&quot;POST&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;input type=&quot;text&quot; name=&quot;login&quot; placeholder=&quot;ç™»å½•&quot; /&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;å¯†ç &quot; /&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;button type=&quot;submit&quot;&gt;æäº¤ï¼&lt;/button&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/form&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;æˆ–è€…æ‚¨å¯ä»¥å°è¯• &lt;a href=&quot;/private&quot;&gt;ç›´æ¥è¿›å…¥ç§äººåŒºåŸŸ&lt;/a&gt;ï¼Œä½†å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œæ‚¨å°†è¢«é‡å®šå‘å›è¿™é‡Œã€‚&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                &quot;#</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">            _</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœç”¨æˆ·å°è¯•è®¿é—®ä»»ä½•å…¶ä»–è·¯ç”±ï¼Œå°†ä»–ä»¬é‡å®šå‘åˆ°ç™»å½•è¡¨å•ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // æ‚¨å¯èƒ½ä¼šæƒ³çŸ¥é“ï¼šå¦‚æœæˆ‘æƒ³è®©æˆ‘ç½‘ç«™çš„æŸäº›éƒ¨åˆ†å…¬å¼€ï¼Œè€Œå…¶ä»–éƒ¨åˆ†ç§å¯†ï¼Œæˆ‘åº”è¯¥æŠŠæ‰€æœ‰å…¬å¼€è·¯ç”±éƒ½æ”¾åœ¨è¿™é‡Œå—ï¼Ÿç­”æ¡ˆæ˜¯ä¸ã€‚è¿™ä¸ªç¤ºä¾‹çš„ç»“æ„é€‚ç”¨äºä¸€ä¸ªå®Œå…¨ç§å¯†çš„ç½‘ç«™ã€‚ä¸è¦çŠ¹è±«ï¼Œä»¥ä¸åŒçš„æ–¹å¼æ„å»ºå®ƒï¼Œä¾‹å¦‚é€šè¿‡æ‹¥æœ‰ä¸€ä¸ªåªä¸“é—¨å¤„ç†å…¬å¼€è·¯ç”±çš„å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">redirect_303</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ­¤å‡½æ•°å¤„ç†ä»…åœ¨ç”¨æˆ·ç™»å½•åæ‰èƒ½è®¿é—®çš„è·¯ç”±ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> handle_route_logged_in</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_session_data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">SessionData</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ˜¾ç¤ºä¸€äº›é—®å€™è¯­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè™šæ‹Ÿå“åº”ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">            Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">r#&quot;æ‚¨ç°åœ¨å·²ç™»å½•ã€‚å¦‚æœæ‚¨å…³é—­æ ‡ç­¾é¡µç„¶åå†æ¬¡æ‰“å¼€ï¼Œæ‚¨ä»ç„¶ä¼šä¿æŒç™»å½•çŠ¶æ€ã€‚&lt;br /&gt;</span></span>
<span class="line"><span style="color:#98C379;">                              &lt;a href=&quot;/private&quot;&gt;ç‚¹å‡»è¿™é‡Œè¿›å…¥ç§äººåŒºåŸŸ&lt;/a&gt;</span></span>
<span class="line"><span style="color:#98C379;">                              &lt;form action=&quot;/logout&quot; method=&quot;POST&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">                              &lt;button&gt;æ³¨é”€&lt;/button&gt;&lt;/form&gt;&quot;#</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">private</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±åœ¨è¿™é‡Œæ˜¯ä¸ºäº†è¯æ˜å®¢æˆ·ç«¯åªæœ‰åœ¨æˆåŠŸç™»å½•åæ‰èƒ½è¿›å…¥ `/private`ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">            Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">r#&quot;æ‚¨åœ¨ç§äººåŒºåŸŸï¼&lt;a href=&quot;/&quot;&gt;è¿”å›&lt;/a&gt;.&quot;#</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br></div></div><h4 id="æ¡ˆä¾‹-3-æ•°æ®åº“" tabindex="-1">æ¡ˆä¾‹ 3 æ•°æ®åº“ <a class="header-anchor" href="#æ¡ˆä¾‹-3-æ•°æ®åº“" aria-label="Permalink to &quot;æ¡ˆä¾‹ 3 æ•°æ®åº“&quot;">â€‹</a></h4><p>examples/database.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> postgres;</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> serde;</span></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> serde_derive;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">sync</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Mutex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> postgres</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Client</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">NoTls</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Transaction</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å½“å®¢æˆ·ç«¯æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œå¦‚ä½•è¿æ¥åˆ°æ•°æ®åº“å¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ­¤ç¤ºä¾‹ä¸­åˆ›å»ºçš„æœåŠ¡å™¨ä½¿ç”¨ REST APIã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æˆ‘ä»¬é¦–å…ˆå°è¯•è¿æ¥åˆ°æ•°æ®åº“ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿æ¥å‘¨å›´åŒ…è£…äº†ä¸€ä¸ª `Mutex`ã€‚ç”±äºè¯·æ±‚å¤„ç†å™¨å¯ä»¥å¹¶è¡Œå¤šæ¬¡è°ƒç”¨ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æˆ‘ä»¬åœ¨å…¶ä¸­ä½¿ç”¨çš„ä»»ä½•å†…å®¹éƒ½å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒPostgreSQL è¿æ¥ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªäº’æ–¥é”æ¥ä½¿å…¶çº¿ç¨‹å®‰å…¨ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å¦‚æœä¸åŒ…è£…äº’æ–¥é”ï¼Œå½“æˆ‘ä»¬å°è¯•åœ¨ä¼ é€’ç»™ `start_server` çš„é—­åŒ…ä¸­ä½¿ç”¨ `db` å˜é‡æ—¶ï¼Œå°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> db</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> db</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Client</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">connect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;postgres://test:test@localhost/test&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">NoTls</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        Mutex</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è¿æ¥æ•°æ®åº“å¤±è´¥&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä¸ºäº†ç¤ºä¾‹çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€äº›åˆå§‹åŒ–ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æœ‰ä¸€ä¸ªè¿ç§»ç³»ç»Ÿã€‚è¿™è¶…å‡ºäº† rouille çš„èŒƒå›´ã€‚</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> sql</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;CREATE TABLE IF NOT EXISTS notes (</span></span>
<span class="line"><span style="color:#98C379;">                    id SERIAL PRIMARY KEY,</span></span>
<span class="line"><span style="color:#98C379;">                    content TEXT NOT NULL</span></span>
<span class="line"><span style="color:#98C379;">                   );&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">        db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">, &amp;[])</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç®€çŸ­æ¶ˆæ¯ï¼Œä»¥ä¾¿äººä»¬ä¸å¿…é˜…è¯»æºä»£ç ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰å…¶ä»–ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„ä»»ä½•æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç°åœ¨æœåŠ¡å™¨å¼€å§‹ç›‘å¬ã€‚`move` å…³é”®å­—å°†ç¡®ä¿æˆ‘ä»¬å°† `db` å˜é‡ç§»åŠ¨åˆ°é—­åŒ…ä¸­ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å¦‚æœè¿™é‡Œä¸æ”¾ `move` å°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™é‡Œä¸éœ€è¦ `move`ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒRust è¿˜ä¸å¤Ÿæ™ºèƒ½ï¼Œæ— æ³•ç†è§£æ•°æ®åº“åœ¨æˆ‘ä»¬è¿˜ä½¿ç”¨å®ƒçš„æ—¶å€™ä¸èƒ½è¢«é”€æ¯ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ç”±äºæˆ‘ä»¬å°†æ•°æ®åº“è¿æ¥åŒ…è£…åœ¨ `Mutex` å‘¨å›´ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨å‰åœ¨è¿™é‡Œé”å®šå®ƒã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è¿™å°†ä¸ºæˆ‘ä»¬å¤„ç†æ­¤è¯·æ±‚æ—¶æä¾›å¯¹æ•°æ®åº“è¿æ¥çš„ç‹¬å è®¿é—®æƒã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€å¦‚æœåœ¨å¦ä¸€ä¸ªè¯·æ±‚æ­£åœ¨å¤„ç†æ—¶å‘å‡ºè¯·æ±‚ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ç¬¬äºŒä¸ªè¯·æ±‚å°†ä¸å¾—ä¸ç­‰å¾…ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åˆ›å»ºå¤šä¸ªè¿æ¥è€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä½¿æ¯ä¸ªè¯·æ±‚ä½¿ç”¨ä¸åŒçš„è¿æ¥ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // æ­¤å¤–ï¼Œå¦‚æœåœ¨é”å®š `Mutex` æ—¶å‘ç”Ÿ panicï¼Œåˆ™æ•°æ®åº“è¿æ¥å¯èƒ½ä¼šå¤„äºæŸåçŠ¶æ€ï¼Œä¸‹æ¬¡é”å®šäº’æ–¥é”æ—¶å¯èƒ½ä¼š panicã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è¿™æ˜¯ä½¿ç”¨å¤šä¸ªè¿æ¥çš„å¦ä¸€ä¸ªå¥½ç†ç”±ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> db</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lock</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œä»¥ä¾¿å¦‚æœåœ¨å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿ panicï¼Œå¯¹æ•°æ®åº“æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½å°†å›æ»šã€‚</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> db</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">transaction</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬åœ¨å•ç‹¬çš„å‡½æ•°ä¸­å¤„ç†è¯·æ±‚ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> note_routes</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> db</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦‚æœå“åº”æˆåŠŸï¼Œæˆ‘ä»¬åœ¨è¿”å›å‰æäº¤äº‹åŠ¡ã€‚åªæœ‰åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæ•°æ®æ‰çœŸæ­£å†™å…¥æ•°æ®åº“ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#E06C75;"> response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">            db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        response</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¿™ä¸ªå‡½æ•°å®é™…ä¸Šå¤„ç†è¯·æ±‚ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> note_routes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Transaction</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºäº†ç¤ºä¾‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬åªåœ¨ `/` ä¸Šæ”¾äº†ä¸€ä¸ªè™šæ‹Ÿè·¯ç”±ï¼Œä»¥ä¾¿æ‚¨å¦‚æœç”¨æµè§ˆå™¨è¿æ¥åˆ°æœåŠ¡å™¨å¯ä»¥çœ‹åˆ°ä¸€äº›ä¸œè¥¿ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">            Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ‚¨å¥½ï¼å¾ˆé—æ†¾è¿™é‡Œæ²¡æœ‰å¯çœ‹çš„å†…å®¹ã€‚&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">notes</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±è¿”å›ç¬”è®°åˆ—è¡¨ã€‚æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢å¹¶å°†å…¶è¾“å‡ºä¸º JSONã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            #[derive(</span><span style="color:#E5C07B;">Serialize</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">            struct</span><span style="color:#E5C07B;"> Elem</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> out</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Vec</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢å¹¶éå†è¡Œï¼Œå°†æ¯è¡Œå†™å…¥ `out`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            for</span><span style="color:#E06C75;"> row</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> &amp;</span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;SELECT id FROM notes&quot;</span><span style="color:#ABB2BF;">, &amp;[]).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                out</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Elem</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/note/{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">) });</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">out</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">note</span><span style="color:#ABB2BF;">/{</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">}) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±è¿”å›ç¬”è®°çš„å†…å®¹ï¼Œå¦‚æœå®ƒå­˜åœ¨ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç æœ‰ç‚¹ä¸äººæ€§åŒ–ï¼Œä½†è¿™ä¸»è¦æ˜¯æ•°æ®åº“å®¢æˆ·ç«¯åº“çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯ rouille æœ¬èº«ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªå˜é‡æ¥æ¥æ”¶ç¬”è®°çš„å†…å®¹ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> content</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Option</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> None</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ç„¶åæ‰§è¡ŒæŸ¥è¯¢å¹¶å†™å…¥ `content`ã€‚å¦‚æœ SQL è¯­å¥æœ‰è¯¯ï¼Œè¿™è¡Œä»£ç åªä¼š panicã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            for</span><span style="color:#E06C75;"> row</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> &amp;</span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;SELECT content FROM notes WHERE id = $1&quot;</span><span style="color:#ABB2BF;">, &amp;[&amp;</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">]).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">                content</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœåˆ°è¿™ä¸€ç‚¹ `content` ä»ç„¶ä¸ºç©ºï¼Œè¿™æ„å‘³ç€ç¬”è®°åœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬è¿”å›å†…å®¹ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            match</span><span style="color:#E06C75;"> content</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">) =&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                None</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">PUT</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">note</span><span style="color:#ABB2BF;">/{</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">}) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±ä¿®æ”¹ç°æœ‰ç¬”è®°çš„å†…å®¹ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬é¦–å…ˆè¯»å– HTTP è¯·æ±‚çš„æ­£æ–‡åˆ°ä¸€ä¸ª `String`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> try_or_400!</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">plain_text_body</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¹¶ç”¨æŸ¥è¯¢å†™å…¥å†…å®¹ã€‚å¦‚æœ SQL è¯­å¥æœ‰è¯¯ï¼Œè¿™è¡Œä»£ç åªä¼š panicã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> updated</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;UPDATE notes SET content = $2 WHERE id = $1&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                                     &amp;[&amp;</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">]).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬æ ¹æ®ä¿®æ”¹çš„è¡Œæ•°æ¥ç¡®å®šç¬”è®°æ˜¯å¦å­˜åœ¨ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#E06C75;"> updated</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç¬”è®°å·²æ›´æ–°&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">POST</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">note</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±åˆ›å»ºä¸€ä¸ªæ–°ç¬”è®°ï¼Œå…¶åˆå§‹å†…å®¹ä¸ºæ­£æ–‡ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æˆ‘ä»¬é¦–å…ˆè¯»å– HTTP è¯·æ±‚çš„æ­£æ–‡åˆ°ä¸€ä¸ª `String`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> try_or_400!</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">plain_text_body</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªå˜é‡æ¥æ¥æ”¶å†…å®¹ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Option</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> None</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ç„¶åæ‰§è¡ŒæŸ¥è¯¢å¹¶å†™å…¥ `content`ã€‚å¦‚æœ SQL è¯­å¥æœ‰è¯¯ï¼Œè¿™è¡Œä»£ç åªä¼š panicã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            for</span><span style="color:#E06C75;"> row</span><span style="color:#C678DD;"> in</span><span style="color:#ABB2BF;"> &amp;</span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;INSERT INTO notes(content) VALUES ($1) RETURNING id&quot;</span><span style="color:#ABB2BF;">, &amp;[&amp;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">]).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">                id</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç¬”è®°å·²åˆ›å»º&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">            response</span><span style="color:#ABB2BF;">.status_code </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> 201</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">            response</span><span style="color:#ABB2BF;">.headers.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">((</span><span style="color:#98C379;">&quot;Location&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">(), </span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/note/{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">()));</span></span>
<span class="line"><span style="color:#E06C75;">            response</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#D19A66;">DELETE</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">note</span><span style="color:#ABB2BF;">/{</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">}) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // æ­¤è·¯ç”±åˆ é™¤ç¬”è®°ã€‚å¦‚æœ SQL è¯­å¥æœ‰è¯¯ï¼Œè¿™è¡Œä»£ç åªä¼š panicã€‚</span></span>
<span class="line"><span style="color:#E06C75;">            db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;DELETE FROM notes WHERE id = $1&quot;</span><span style="color:#ABB2BF;">, &amp;[&amp;</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">]).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">            Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦‚æœå…¶ä»–å—å‡æœªåŒ¹é…è¯·æ±‚ï¼Œè¿”å› 404 å“åº”ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">        _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br></div></div><h4 id="æ¡ˆä¾‹-4-websocket-é€šä¿¡" tabindex="-1">æ¡ˆä¾‹ 4 websocket é€šä¿¡ <a class="header-anchor" href="#æ¡ˆä¾‹-4-websocket-é€šä¿¡" aria-label="Permalink to &quot;æ¡ˆä¾‹ 4 websocket é€šä¿¡&quot;">â€‹</a></h4><p>examples/websocket.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::thread;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::websocket;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ rouille ä¸ WebSocketsã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç®€çŸ­æ¶ˆæ¯ï¼Œä»¥ä¾¿äººä»¬ä¸å¿…é˜…è¯»æºä»£ç ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„å…¶ä»–æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // `/` è·¯ç”±è¾“å‡ºä¸€ä¸ª HTML å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥å°è¯• WebSocketsã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¯·æ³¨æ„ï¼Œåœ¨çœŸå®ç½‘ç«™ä¸­ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨æŸç§æ¨¡æ¿åŒ–ç³»ç»Ÿï¼Œæˆ–è€…è‡³å°‘ä»æ–‡ä»¶ä¸­åŠ è½½ HTMLã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&lt;script type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">text/javascript</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    var socket = new WebSocket(</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">ws://localhost:8000/ws</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">, </span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">echo</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">);</span></span>
<span class="line"><span style="color:#98C379;">                    function send(data) {</span></span>
<span class="line"><span style="color:#98C379;">                        socket.send(data);</span></span>
<span class="line"><span style="color:#98C379;">                    }</span></span>
<span class="line"><span style="color:#98C379;">                    socket.onmessage = function(event) {</span></span>
<span class="line"><span style="color:#98C379;">                        document.getElementById(&#39;result&#39;).innerHTML += event.data + &#39;&lt;br /&gt;&#39;;</span></span>
<span class="line"><span style="color:#98C379;">                    }</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/script&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;æœ¬ç¤ºä¾‹ä¼šå°†æ‚¨å‘é€ç»™æœåŠ¡å™¨çš„æ‰€æœ‰å†…å®¹å‘é€å›æ¥ã€‚&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;&lt;form onsubmit=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">send(document.getElementById(&#39;msg&#39;).value); return false;</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;input type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">text</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;"> id=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">msg</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;"> /&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;button type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">submit</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;å‘é€&lt;/button&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/form&gt;&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;å·²æ¥æ”¶: &lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p id=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">result</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;&lt;/p&gt;&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">ws</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™æ˜¯ WebSockets è·¯ç”±ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä¸ºäº†å¼€å§‹ä½¿ç”¨ WebSocketsï¼Œæˆ‘ä»¬è°ƒç”¨ `websocket::start`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰è¯·æ±‚ WebSocketsï¼Œè¯¥å‡½æ•°å°†è¿”å›é”™è¯¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ `try_or_400!` å®å‘å®¢æˆ·ç«¯è¿”å›é”™è¯¯ 400ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¯¥å‡½æ•°è¿”å›ä½œä¸º `start_server` å‡½æ•°ä¸€éƒ¨åˆ†è¦å‘é€å›çš„å“åº”ï¼Œä»¥åŠä¸€ä¸ª `websocket` å˜é‡ï¼Œç±»å‹ä¸º `Receiver&lt;Websocket&gt;`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä¸€æ—¦å“åº”å·²ç»å‘é€å›å®¢æˆ·ç«¯ï¼Œ`Receiver` å°†ç”± rouille ç”¨ä»£è¡¨ WebSocket çš„ `Websocket` å¯¹è±¡å¡«å……ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">websocket</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> try_or_400!</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;echo&quot;</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ç”±äº Rust ä¸­ I/O çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª WebSocket å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                thread</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">spawn</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> ||</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // è¿™è¡Œä»£ç å°†é˜»å¡ï¼Œç›´åˆ°ä¸Šé¢çš„ `response` å·²ç»è¿”å›ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                    let</span><span style="color:#E06C75;"> ws</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">recv</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // æˆ‘ä»¬ä½¿ç”¨å•ç‹¬çš„å‡½æ•°ä»¥æé«˜å¯è¯»æ€§ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                    websocket_handling_thread</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ws</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">                response</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // é»˜è®¤çš„ 404 è·¯ç”±ï¼Œä¸æ‰€æœ‰ç¤ºä¾‹ç›¸åŒã€‚</span></span>
<span class="line"><span style="color:#E06C75;">            _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œçš„å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> websocket_handling_thread</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Websocket</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æˆ‘ä»¬ç­‰å¾… WebSocket ä¸­çš„ä¸€æ¡æ–°æ¶ˆæ¯ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">    while</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœæ¶ˆæ¯æ˜¯æ–‡æœ¬ï¼Œä½¿ç”¨ `send_text` å°†å…¶å‘é€å›å»ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä» WebSocket æ¥æ”¶åˆ° {:?} &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send_text</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Binary</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä» WebSocket æ¥æ”¶åˆ°äºŒè¿›åˆ¶æ•°æ®&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h4 id="æ¡ˆä¾‹-5-åå‘ä»£ç†" tabindex="-1">æ¡ˆä¾‹ 5 åå‘ä»£ç† <a class="header-anchor" href="#æ¡ˆä¾‹-5-åå‘ä»£ç†" aria-label="Permalink to &quot;æ¡ˆä¾‹ 5 åå‘ä»£ç†&quot;">â€‹</a></h4><p>examples/reverse-proxy.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::thread;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::websocket;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ rouille ä¸ WebSocketsã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç®€çŸ­æ¶ˆæ¯ï¼Œä»¥ä¾¿äººä»¬ä¸å¿…é˜…è¯»æºä»£ç ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„å…¶ä»–æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        router!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // `/` è·¯ç”±è¾“å‡ºä¸€ä¸ª HTML å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥å°è¯• WebSocketsã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¯·æ³¨æ„ï¼Œåœ¨çœŸå®ç½‘ç«™ä¸­ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨æŸç§æ¨¡æ¿åŒ–ç³»ç»Ÿï¼Œæˆ–è€…è‡³å°‘ä»æ–‡ä»¶ä¸­åŠ è½½ HTMLã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&lt;script type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">text/javascript</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    var socket = new WebSocket(</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">ws://localhost:8000/ws</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">, </span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">echo</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">);</span></span>
<span class="line"><span style="color:#98C379;">                    function send(data) {</span></span>
<span class="line"><span style="color:#98C379;">                        socket.send(data);</span></span>
<span class="line"><span style="color:#98C379;">                    }</span></span>
<span class="line"><span style="color:#98C379;">                    socket.onmessage = function(event) {</span></span>
<span class="line"><span style="color:#98C379;">                        document.getElementById(&#39;result&#39;).innerHTML += event.data + &#39;&lt;br /&gt;&#39;;</span></span>
<span class="line"><span style="color:#98C379;">                    }</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/script&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;æœ¬ç¤ºä¾‹ä¼šå°†æ‚¨å‘é€ç»™æœåŠ¡å™¨çš„æ‰€æœ‰å†…å®¹å‘é€å›æ¥ã€‚&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;&lt;form onsubmit=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">send(document.getElementById(&#39;msg&#39;).value); return false;</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;input type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">text</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;"> id=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">msg</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;"> /&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;button type=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">submit</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;å‘é€&lt;/button&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/form&gt;&lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p&gt;å·²æ¥æ”¶: &lt;/p&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;p id=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">result</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;&lt;/p&gt;&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            (</span><span style="color:#D19A66;">GET</span><span style="color:#ABB2BF;">) (/</span><span style="color:#E06C75;">ws</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¿™æ˜¯ WebSockets è·¯ç”±ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä¸ºäº†å¼€å§‹ä½¿ç”¨ WebSocketsï¼Œæˆ‘ä»¬è°ƒç”¨ `websocket::start`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰è¯·æ±‚ WebSocketsï¼Œè¯¥å‡½æ•°å°†è¿”å›é”™è¯¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ `try_or_400!` å®å‘å®¢æˆ·ç«¯è¿”å›é”™è¯¯ 400ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                //</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // è¯¥å‡½æ•°è¿”å›ä½œä¸º `start_server` å‡½æ•°ä¸€éƒ¨åˆ†è¦å‘é€å›çš„å“åº”ï¼Œä»¥åŠä¸€ä¸ª `websocket` å˜é‡ï¼Œç±»å‹ä¸º `Receiver&lt;Websocket&gt;`ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ä¸€æ—¦å“åº”å·²ç»å‘é€å›å®¢æˆ·ç«¯ï¼Œ`Receiver` å°†ç”± rouille ç”¨ä»£è¡¨ WebSocket çš„ `Websocket` å¯¹è±¡å¡«å……ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">websocket</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> try_or_400!</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Some</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;echo&quot;</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // ç”±äº Rust ä¸­ I/O çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª WebSocket å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">                thread</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">spawn</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> ||</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // è¿™è¡Œä»£ç å°†é˜»å¡ï¼Œç›´åˆ°ä¸Šé¢çš„ `response` å·²ç»è¿”å›ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">                    let</span><span style="color:#E06C75;"> ws</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">recv</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // æˆ‘ä»¬ä½¿ç”¨å•ç‹¬çš„å‡½æ•°ä»¥æé«˜å¯è¯»æ€§ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                    websocket_handling_thread</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ws</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">                response</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // é»˜è®¤çš„ 404 è·¯ç”±ï¼Œä¸æ‰€æœ‰ç¤ºä¾‹ç›¸åŒã€‚</span></span>
<span class="line"><span style="color:#E06C75;">            _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty_404</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œçš„å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> websocket_handling_thread</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Websocket</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æˆ‘ä»¬ç­‰å¾… WebSocket ä¸­çš„ä¸€æ¡æ–°æ¶ˆæ¯ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">    while</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // å¦‚æœæ¶ˆæ¯æ˜¯æ–‡æœ¬ï¼Œä½¿ç”¨ `send_text` å°†å…¶å‘é€å›å»ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä» WebSocket æ¥æ”¶åˆ° {:?} &quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                websocket</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">send_text</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">txt</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            websocket</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Binary</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">                println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä» WebSocket æ¥æ”¶åˆ°äºŒè¿›åˆ¶æ•°æ®&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h4 id="æ¡ˆä¾‹-6-é™æ€æ–‡ä»¶" tabindex="-1">æ¡ˆä¾‹ 6 é™æ€æ–‡ä»¶ <a class="header-anchor" href="#æ¡ˆä¾‹-6-é™æ€æ–‡ä»¶" aria-label="Permalink to &quot;æ¡ˆä¾‹ 6 é™æ€æ–‡ä»¶&quot;">â€‹</a></h4><p>examples/static-files.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ rouille æœåŠ¡é™æ€æ–‡ä»¶ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„å…¶ä»–æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // `match_assets` å‡½æ•°å°è¯•æ‰¾åˆ°ä¸€ä¸ªåç§°ä¸è¯·æ±‚ URL ç›¸å¯¹åº”çš„æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ç¬¬äºŒä¸ªå‚æ•° (`&quot;.&quot;`) æŒ‡æ˜äº†è¦æŸ¥æ‰¾çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºäº†é¿å…æ½œåœ¨çš„å®‰å…¨å¨èƒï¼Œ`match_assets` æ°¸è¿œä¸ä¼šè¿”å›è¯¥ç›®å½•ä¹‹å¤–çš„ä»»ä½•æ–‡ä»¶ï¼Œå³ä½¿ URL æ˜¯ä¾‹å¦‚ `/../../foo.txt`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">match_assets</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœæ‰¾åˆ°æ–‡ä»¶ï¼Œ`match_assets` å‡½æ•°å°†è¿”å›ä¸€ä¸ªå¸¦æœ‰ 200 çŠ¶æ€ç å’Œæ–‡ä»¶å†…å®¹çš„å“åº”ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœæœªæ‰¾åˆ°æ–‡ä»¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªç©ºçš„ 404 å“åº”ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // è¿™é‡Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å“åº”ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#E06C75;"> response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#E06C75;"> response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦‚æœæ²¡æœ‰é™æ€æ–‡ä»¶ä¸è¯·æ±‚ URL åŒ¹é…ï¼Œåˆ™ä¼šåˆ°è¾¾ä»£ç çš„è¿™ä¸€ç‚¹ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // åœ¨ä¸€ä¸ªçœŸå®ç½‘ç«™ä¸­ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨è¿™é‡ŒæœåŠ¡éé™æ€æ–‡ä»¶ï¼ˆä¾‹å¦‚ä½¿ç”¨ `router!` å®ï¼‰ï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬åªè¿”å›ä¸€ä¸ª 404 å“åº”ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">        Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">            &quot;404 é”™è¯¯ã€‚å°è¯• &lt;a href=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">/README.md</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;README.md&lt;/a&gt; æˆ– \</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;a href=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">/src/lib.rs</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;src/lib.rs&lt;/a&gt; ä½œä¸ºç¤ºä¾‹ã€‚&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_status_code</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="æ¡ˆä¾‹-7-php" tabindex="-1">æ¡ˆä¾‹ 7 PHP <a class="header-anchor" href="#æ¡ˆä¾‹-7-php" aria-label="Permalink to &quot;æ¡ˆä¾‹ 7 PHP&quot;">â€‹</a></h4><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">cgi</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">CgiRun</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Command</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // TODO: æ·»åŠ æ—¥å¿—è®°å½•</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> cmd</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Command</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;php-cgi&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">        cmd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arg</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-n&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// ä¸ä½¿ç”¨ php.ini æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">        cmd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">env</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;SCRIPT_FILENAME&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;examples/php-test.php&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨çš„ PHP è„šæœ¬ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">        cmd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">env</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;REDIRECT_STATUS&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¿™æ˜¯å¿…è¦çš„ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">        cmd</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">start_cgi</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>examples/php-test.php</li></ul><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">php </span><span style="color:#56B6C2;">echo</span><span style="color:#98C379;"> &quot;hello world&quot;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="æ¡ˆä¾‹-8" tabindex="-1">æ¡ˆä¾‹ 8 <a class="header-anchor" href="#æ¡ˆä¾‹-8" aria-label="Permalink to &quot;æ¡ˆä¾‹ 8&quot;">â€‹</a></h4><p>examples/static-files.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç‰ˆæƒæ‰€æœ‰ (c) 2016 Rouille å¼€å‘è€…</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ ¹æ® Apache è®¸å¯è¯ï¼Œç‰ˆæœ¬ 2.0 è®¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-APACHE æˆ– http://www.apache.org/licenses/LICENSE-2.0&gt; æˆ– MIT è®¸å¯è¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// &lt;LICENSE-MIT æˆ– http://opensource.org/licenses/MIT&gt;ï¼Œæ‚¨å¯é€‰æ‹©å…¶ä¸€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é¡¹ç›®ä¸­æºå¸¦æ­¤ç±»é€šçŸ¥çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤éæ ¹æ®è¿™äº›æ¡æ¬¾ï¼Œå¦åˆ™ä¸å¾—è¢«å¤åˆ¶ã€ä¿®æ”¹æˆ–åˆ†å‘ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> rouille;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æœ¬ä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ rouille æœåŠ¡é™æ€æ–‡ä»¶ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¯·æ³¨æ„ï¼Œåƒæ‰€æœ‰ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…åœ¨ `localhost` ä¸Šç›‘å¬ï¼Œå› æ­¤æ‚¨æ— æ³•ä»è‡ªå·±çš„æœºå™¨ä»¥å¤–çš„å…¶ä»–æœºå™¨è®¿é—®æ­¤æœåŠ¡å™¨ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç°åœ¨æ­£åœ¨ç›‘å¬ localhost:8000&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">start_server</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;localhost:8000&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">request</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // `match_assets` å‡½æ•°å°è¯•æ‰¾åˆ°ä¸€ä¸ªåç§°ä¸è¯·æ±‚ URL ç›¸å¯¹åº”çš„æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ç¬¬äºŒä¸ªå‚æ•° (`&quot;.&quot;`) æŒ‡æ˜äº†è¦æŸ¥æ‰¾çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // ä¸ºäº†é¿å…æ½œåœ¨çš„å®‰å…¨å¨èƒï¼Œ`match_assets` æ°¸è¿œä¸ä¼šè¿”å›è¯¥ç›®å½•ä¹‹å¤–çš„ä»»ä½•æ–‡ä»¶ï¼Œå³ä½¿ URL æ˜¯ä¾‹å¦‚ `/../../foo.txt`ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            let</span><span style="color:#E06C75;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rouille</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">match_assets</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœæ‰¾åˆ°æ–‡ä»¶ï¼Œ`match_assets` å‡½æ•°å°†è¿”å›ä¸€ä¸ªå¸¦æœ‰ 200 çŠ¶æ€ç å’Œæ–‡ä»¶å†…å®¹çš„å“åº”ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å¦‚æœæœªæ‰¾åˆ°æ–‡ä»¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªç©ºçš„ 404 å“åº”ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // è¿™é‡Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å“åº”ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#E06C75;"> response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">is_success</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#E06C75;"> response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å¦‚æœæ²¡æœ‰é™æ€æ–‡ä»¶ä¸è¯·æ±‚ URL åŒ¹é…ï¼Œåˆ™ä¼šåˆ°è¾¾ä»£ç çš„è¿™ä¸€ç‚¹ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // åœ¨ä¸€ä¸ªçœŸå®ç½‘ç«™ä¸­ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨è¿™é‡ŒæœåŠ¡éé™æ€æ–‡ä»¶ï¼ˆä¾‹å¦‚ä½¿ç”¨ `router!` å®ï¼‰ï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬åªè¿”å›ä¸€ä¸ª 404 å“åº”ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">        Response</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">html</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">            &quot;404 é”™è¯¯ã€‚å°è¯• &lt;a href=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">/README.md</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;README.md&lt;/a&gt; æˆ– \</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;a href=</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">/src/lib.rs</span><span style="color:#56B6C2;">\&quot;</span><span style="color:#98C379;">&gt;src/lib.rs&lt;/a&gt; ä½œä¸ºç¤ºä¾‹ã€‚&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_status_code</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="å¸¸è§é—®é¢˜è§£ç­”" tabindex="-1">å¸¸è§é—®é¢˜è§£ç­” <a class="header-anchor" href="#å¸¸è§é—®é¢˜è§£ç­”" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜è§£ç­”&quot;">â€‹</a></h3><h4 id="æ€§èƒ½å¦‚ä½•" tabindex="-1">æ€§èƒ½å¦‚ä½•ï¼Ÿ <a class="header-anchor" href="#æ€§èƒ½å¦‚ä½•" aria-label="Permalink to &quot;æ€§èƒ½å¦‚ä½•ï¼Ÿ&quot;">â€‹</a></h4><p>Rust ä¸­çš„å¼‚æ­¥ I/Oã€ç»¿çº¿ç¨‹ã€åç¨‹ç­‰ä»ç„¶éå¸¸ä¸æˆç†Ÿã€‚</p><p>Rouille åº“åªæ˜¯å¿½ç•¥äº†è¿™ç§ä¼˜åŒ–ï¼Œä¸“æ³¨äºæä¾›æ˜“äºä½¿ç”¨çš„åŒæ­¥ APIï¼Œå…¶ä¸­æ¯ä¸ªè¯·æ±‚éƒ½åœ¨å…¶è‡ªå·±çš„ä¸“ç”¨çº¿ç¨‹ä¸­å¤„ç†ã€‚</p><p>å³ä½¿ rouille æœ¬èº«æ˜¯å¼‚æ­¥çš„ï¼Œä½ ä¹Ÿéœ€è¦å¼‚æ­¥æ•°æ®åº“å®¢æˆ·ç«¯å’Œå¼‚æ­¥æ–‡ä»¶åŠ è½½æ‰èƒ½åˆ©ç”¨å®ƒã€‚ç›®å‰ Rust ç”Ÿæ€ç³»ç»Ÿä¸­è¿˜æ²¡æœ‰è¿™æ ·çš„åº“ã€‚</p><p>ä¸€æ—¦å¼‚æ­¥ I/O è¢«è§£å†³ï¼ŒRouille å°†ï¼ˆå¸Œæœ›æ˜¯é€æ˜åœ°ï¼‰æ›´æ–°ä»¥è€ƒè™‘å®ƒã€‚</p><h4 id="ä½†å®ƒå¿«å—" tabindex="-1">ä½†å®ƒå¿«å—ï¼Ÿ <a class="header-anchor" href="#ä½†å®ƒå¿«å—" aria-label="Permalink to &quot;ä½†å®ƒå¿«å—ï¼Ÿ&quot;">â€‹</a></h4><p>åœ¨ä½œè€…çš„æ—§ Linux æœºå™¨ä¸Šï¼Œä½¿ç”¨ <code>wrk -t 4 -c 4</code> è¿›è¡Œçš„ä¸€äº›åŸºæœ¬åŸºå‡†æµ‹è¯•æ˜¾ç¤ºäº†ä»¥ä¸‹ç»“æœï¼š</p><ul><li>Rouille çš„ hello-world ç¤ºä¾‹æ¯ç§’çº¦ 22k è¯·æ±‚ã€‚</li><li>Node.js ä¸­çš„ hello worldï¼ˆä½¿ç”¨ <code>http.createServer</code>ï¼‰æ¯ç§’çº¦ 14k è¯·æ±‚ã€‚</li><li>tokio-minihttp çš„ hello-world ç¤ºä¾‹ï¼ˆæ®ç§°æ˜¯ç›®å‰å­˜åœ¨çš„æœ€å¿«çš„ HTTP æœåŠ¡å™¨ï¼‰æ¯ç§’çº¦ 77k è¯·æ±‚ã€‚</li><li>hyper çš„ hello ç¤ºä¾‹ï¼ˆä¹Ÿä½¿ç”¨å¸¦æœ‰ mio çš„å¼‚æ­¥ I/Oï¼‰æ¯ç§’çº¦ 53k è¯·æ±‚ã€‚</li><li>Go ä¸­çš„ hello world æ¯ç§’çº¦ 51k è¯·æ±‚ã€‚</li><li>Nginx çš„é»˜è®¤å®‰è£…æ¯ç§’çº¦ 39k è¯·æ±‚ã€‚</li></ul><p>è™½ç„¶ä¸æ˜¯æœ€å¿«çš„ï¼Œä½† rouille å…·æœ‰ <strong>åˆç†çš„</strong> æ€§èƒ½ã€‚åœ¨æ‰€æœ‰è¿™äº›ç¤ºä¾‹ä¸­ï¼Œrouille æ˜¯å”¯ä¸€ä½¿ç”¨åŒæ­¥ I/O çš„ã€‚</p><h4 id="æ˜¯å¦æœ‰ç”¨äºæ•°æ®åº“è¿æ¥ã€æ¨¡æ¿ç­‰åŠŸèƒ½çš„æ’ä»¶" tabindex="-1">æ˜¯å¦æœ‰ç”¨äºæ•°æ®åº“è¿æ¥ã€æ¨¡æ¿ç­‰åŠŸèƒ½çš„æ’ä»¶ï¼Ÿ <a class="header-anchor" href="#æ˜¯å¦æœ‰ç”¨äºæ•°æ®åº“è¿æ¥ã€æ¨¡æ¿ç­‰åŠŸèƒ½çš„æ’ä»¶" aria-label="Permalink to &quot;æ˜¯å¦æœ‰ç”¨äºæ•°æ®åº“è¿æ¥ã€æ¨¡æ¿ç­‰åŠŸèƒ½çš„æ’ä»¶ï¼Ÿ&quot;">â€‹</a></h4><p>å°†æ•°æ®åº“æˆ–æ¨¡æ¿é›†æˆåˆ°ä½ ç”¨ rouille ç¼–å†™çš„ Web æœåŠ¡å™¨ä¸­åº”è¯¥æ˜¯å¾®ä¸è¶³é“çš„ã€‚æ­¤å¤–ï¼Œæ’ä»¶éœ€è¦ç»´æŠ¤ï¼Œå¹¶å€¾å‘äºé€ æˆä¾èµ–åœ°ç‹±ã€‚ä½œè€…è®¤ä¸ºï¼Œé€šå¸¸ä¸ä½¿ç”¨æ’ä»¶æ›´å¥½ã€‚</p><h4 id="ä½†æˆ‘ä¹ æƒ¯äº†ç±»ä¼¼-express-çš„æ¡†æ¶" tabindex="-1">ä½†æˆ‘ä¹ æƒ¯äº†ç±»ä¼¼ Express çš„æ¡†æ¶ï¼ <a class="header-anchor" href="#ä½†æˆ‘ä¹ æƒ¯äº†ç±»ä¼¼-express-çš„æ¡†æ¶" aria-label="Permalink to &quot;ä½†æˆ‘ä¹ æƒ¯äº†ç±»ä¼¼ Express çš„æ¡†æ¶ï¼&quot;">â€‹</a></h4><p>ä¸è¦è¿™æ ·åšï¼šï¼ˆä¼ªä»£ç ï¼‰</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>server.add_middleware(function() {</span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 1</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server.add_middleware(function() {</span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 2</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server.add_middleware(function() {</span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 3</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨ rouille ä¸­ï¼Œä½ åªéœ€å®Œå…¨æ‰‹åŠ¨å¤„ç†æ¯ä¸ªè¯·æ±‚ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>// åœ¨è¿™é‡Œåˆå§‹åŒ–ä¸€åˆ‡</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rouille::start_server(..., move |request| {</span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    // ä¸­é—´ä»¶ 3</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>éšç€æˆ‘ä»¬å¯¹ Rust å’Œ Rouille çš„æ¢ç´¢å‘Šä¸€æ®µè½ï¼Œæ˜¯æ—¶å€™ä¸ºè¿™æ®µæ—…ç¨‹ç”»ä¸Šä¸€ä¸ªåœ†æ»¡çš„å¥å·äº†ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…æ­å¼€äº† Rust è¯­è¨€åœ¨ Web å¼€å‘é¢†åŸŸçš„ç¥ç§˜é¢çº±ï¼Œè¿˜æ·±å…¥ä½“éªŒäº† Rouille æ¡†æ¶çš„è½»å·§ä¸å¼ºå¤§ã€‚</p><h4 id="ç»“è¯­-å¯èˆª-æ¢ç´¢æœªçŸ¥çš„-web-å¼€å‘å®‡å®™" tabindex="-1">ç»“è¯­ï¼šå¯èˆªï¼Œæ¢ç´¢æœªçŸ¥çš„ <code>Web</code> å¼€å‘å®‡å®™ <a class="header-anchor" href="#ç»“è¯­-å¯èˆª-æ¢ç´¢æœªçŸ¥çš„-web-å¼€å‘å®‡å®™" aria-label="Permalink to &quot;ç»“è¯­ï¼šå¯èˆªï¼Œæ¢ç´¢æœªçŸ¥çš„ `Web` å¼€å‘å®‡å®™&quot;">â€‹</a></h4><p>åœ¨ç¼–ç¨‹çš„æ˜Ÿè¾°å¤§æµ·ä¸­ï¼Œ<code>Rust</code> å’Œ <code>Rouille</code> å°±åƒæ˜¯ä¸€è‰˜è£…å¤‡ç²¾è‰¯çš„èˆªèˆ¹ï¼Œå®ƒä»¬å°†å¸¦ä½ ç©¿è¶Šæ€§èƒ½çš„æ¿€æµï¼Œç»•è¿‡å®‰å…¨çš„æš—ç¤ï¼Œæœ€ç»ˆæŠµè¾¾é«˜æ•ˆã€å®‰å…¨ä¸”å¯é çš„ Web å¼€å‘å½¼å²¸ã€‚ç°åœ¨ï¼Œå½“ä½ ç«™åœ¨è¿™è‰˜èˆªèˆ¹çš„ç”²æ¿ä¸Šï¼Œå‡†å¤‡æ‰¬å¸†èµ·èˆªæ—¶ï¼Œè¯·è®°å¾—ï¼š</p><ul><li><strong>ã€Œå‹‡äºæ¢ç´¢ã€</strong>ï¼šæ¯ä¸€ä¸ªæ–°çš„æ¡†æ¶å’Œè¯­è¨€éƒ½æ˜¯æ¢ç´¢ç¼–ç¨‹ä¸–ç•Œçš„ä¸€æ‰‡çª—ï¼Œä¸è¦å®³æ€•æœªçŸ¥ï¼Œå‹‡äºæ¢ç´¢ï¼Œä½ ä¼šå‘ç°æ›´å¤šç¼–ç¨‹ä¹‹ç¾ã€‚</li><li><strong>ã€ŒæŒç»­å­¦ä¹ ã€</strong>ï¼šæŠ€æœ¯çš„ä¸–ç•Œæ—¥æ–°æœˆå¼‚ï¼ŒæŒç»­å­¦ä¹ æ˜¯ä¿æŒç«äº‰åŠ›çš„å…³é”®ã€‚æ— è®ºæ˜¯ Rust çš„æ·±å…¥æŒæ¡ï¼Œè¿˜æ˜¯å¯¹ Rouille çš„ç†Ÿç»ƒè¿ç”¨ï¼Œéƒ½éœ€è¦ä½ ä¸æ–­åœ°å­¦ä¹ å’Œå®è·µã€‚</li><li><strong>ã€Œäº«å—è¿‡ç¨‹ã€</strong>ï¼šç¼–ç¨‹ä¸ä»…ä»…æ˜¯å·¥ä½œï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ç§åˆ›é€ å’Œè¡¨è¾¾çš„æ–¹å¼ã€‚äº«å—ç¼–ç çš„è¿‡ç¨‹ï¼Œè®©æ¯ä¸€æ¬¡é”®ç›˜çš„æ•²å‡»éƒ½å……æ»¡ä¹è¶£å’Œæˆå°±æ„Ÿã€‚</li></ul><p>æœ€åï¼Œä¸è¦å¿˜è®°ï¼Œæ— è®ºä½ åœ¨ Rust å’Œ Rouille çš„èˆªç¨‹ä¸­é‡åˆ°ä½•ç§é£æµªï¼Œéƒ½æœ‰ä¸€ç¾¤çƒ­æƒ…çš„ç¤¾åŒºæˆå‘˜å’Œä¸°å¯Œçš„åœ¨çº¿èµ„æºä½œä¸ºä½ çš„ç¯å¡”å’Œé¿é£æ¸¯ã€‚</p><p>ç°åœ¨ï¼Œè°ƒæ•´å¥½ä½ çš„èˆªå‘ï¼Œæ‰¬èµ·ä½ çš„å¸†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¯èˆªï¼Œæ¢ç´¢é‚£ç‰‡å±äº Web å¼€å‘è€…çš„æœªçŸ¥å®‡å®™ã€‚æ„¿ä½ çš„æ—…ç¨‹å……æ»¡å‘ç°ï¼Œä½ çš„ä»£ç å……æ»¡å…‰èŠ’ï¼Œä½ çš„åº”ç”¨ï¼Œå¦‚åŒæ˜Ÿè¾°èˆ¬ç’€ç’¨ã€‚</p><h2 id="rocket-åå°æ¡†æ¶" tabindex="-1">Rocketï¼šåå°æ¡†æ¶ <a class="header-anchor" href="#rocket-åå°æ¡†æ¶" aria-label="Permalink to &quot;Rocketï¼šåå°æ¡†æ¶&quot;">â€‹</a></h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493780&amp;idx=1&amp;sn=be8acca1de467433e7fd5f90c5f770d1&amp;chksm=c0e76683f790ef9559af946cf4bf8b75081c0cf91131ca5f8f1d82a4ffc1f2468eddc8a789f0&amp;scene=21#wechat_redirect" target="_blank" rel="noreferrer">Rust åå°æ¡†æ¶ Rocket ç«ç®­ä¹‹æ—…ï¼šæ‰“é€ æœªæ¥ Web åº”ç”¨çš„ç»ˆææŒ‡å—(ä¸€) (qq.com)</a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493821&amp;idx=1&amp;sn=ea06b798dc85d38afdcae82f4044ca2c&amp;chksm=c0e766aaf790efbc144f337f453830504e6d5bc18dbadcdbb32fe2a96e5263ac84c9158f6a5c&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">Rust åå°æ¡†æ¶ Rocket ä¹‹ Responders å“åº”ä½“ï¼šæ‰“é€ æœªæ¥ Web åº”ç”¨çš„ç»ˆææŒ‡å—(äºŒ) (qq.com)</a></p><p>Rocket æ˜¯ Rust çš„ Web æ¡†æ¶ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æŠŠRocketæƒ³è±¡æˆä¸€ä¸ªæ›´çµæ´»ã€æ›´å‹å¥½çš„Railsã€Flaskã€Bottleå’ŒYesodæ··åˆä½“ã€‚æˆ‘ä»¬æ›´æ„¿æ„å°†ç«ç®­è§†ä¸ºæ–°äº‹ç‰©ã€‚Rocket æ—¨åœ¨å¿«é€Ÿã€ç®€å•å’Œçµæ´»ï¼ŒåŒæ—¶å°½å¯èƒ½æä¾›æœ‰ä¿è¯çš„å®‰å…¨æ€§ã€‚é‡è¦çš„æ˜¯ï¼ŒRocket è¿˜æ—¨åœ¨å˜å¾—æœ‰è¶£ï¼Œå®ƒé€šè¿‡ç¡®ä¿æ‚¨ç¼–å†™å°½å¯èƒ½å°‘çš„ä»£ç æ¥å®Œæˆä»»åŠ¡æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><p>Rocket æä¾›äº†ä½¿ç”¨ Rust æ„å»º Web æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºçš„åŸè¯­ï¼šRocket æä¾›è·¯ç”±ã€è¯·æ±‚é¢„å¤„ç†å’Œå“åº”åå¤„ç†ã€‚æ‚¨çš„åº”ç”¨ç¨‹åºä»£ç æŒ‡ç¤º Rocket è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†çš„å†…å®¹ï¼Œå¹¶å¡«è¡¥é¢„å¤„ç†å’Œåå¤„ç†ä¹‹é—´çš„ç©ºç™½ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#[get(&quot;/world&quot;)]              // &lt;- route attribute</span></span>
<span class="line"><span>fn world() -&gt; &amp;&#39;static str {  // &lt;- request handler</span></span>
<span class="line"><span>    &quot;hello, world!&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œåªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä»»æ„æ•°é‡çš„å‚æ•°å¹¶è¿”å›ä»»æ„ç±»å‹ã€‚è¦åŒ¹é…çš„å‚æ•°åŒ…æ‹¬é™æ€è·¯å¾„ã€åŠ¨æ€è·¯å¾„ã€è·¯å¾„æ®µã€è¡¨å•ã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€è¯·æ±‚æ ¼å¼è¯´æ˜ç¬¦å’Œæ­£æ–‡æ•°æ®ã€‚Rocket ä½¿ç”¨å±æ€§ï¼ˆçœ‹èµ·æ¥åƒå…¶ä»–è¯­è¨€ä¸­çš„å‡½æ•°è£…é¥°å™¨ï¼‰æ¥ç®€åŒ–å£°æ˜è·¯ç”±ã€‚è·¯ç”±æ˜¯é€šè¿‡æ³¨é‡Šå‡½æ•°ï¼ˆå¤„ç†ç¨‹åºï¼‰æ¥å£°æ˜çš„ï¼Œå…¶ä¸­åŒ…å«è¦åŒ¹é…çš„å‚æ•°é›†ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rocket::build().mount(&quot;/hello&quot;, routes![world]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼Œé€šè¿‡mountæ–¹æ³•ï¼Œå®ƒå°†è·¯ç”±å’Œå¤„ç†ç¨‹åºç»„è£…åœ¨ä¸€èµ·ï¼Œå®ƒæŒ‚è½½ä¹‹åï¼Œrocketæ¥æ”¶åˆ°è¯·æ±‚åï¼Œå°±å¯ä»¥å°†è¯·æ±‚è·¯ç”±åˆ°å¤„ç†ç¨‹åºã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#[launch]</span></span>
<span class="line"><span>fn rocket() -&gt; _ {</span></span>
<span class="line"><span>    rocket::build().mount(&quot;/hello&quot;, routes![world])</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨rocketæŒ‚è½½è·¯ç”±ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œå‘å°„äº†ï¼Œå®ƒå‘å°„æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸Šé¢çš„ä¾‹å­æ˜¯å®ƒæ¨èçš„å‘å°„æ–¹å¼ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªå‡½æ•°æ¥è®¾ç½®å¼‚æ­¥è¿è¡Œæ—¶å’Œå¯åŠ¨webæœåŠ¡ã€‚</p><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿåªéœ€è¦ç¼–å†™å¤„ç†ç¨‹åºï¼Œç„¶åæŒ‰ç…§æ ¼å¼è¿›è¡ŒæŒ‚è½½ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œå‘å°„äº†ã€‚å…¶å®ï¼Œå®ƒè¿˜æœ‰å¾ˆå¤šçš„åŠŸèƒ½ï¼Œä½ å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£rocket.rsã€‚</p><p>ä½ åœ¨ä½¿ç”¨å®ƒä¹‹é—´ï¼Œå»ºè®®å…ˆæµè§ˆä¸‹å®ƒçš„æ–‡æ¡£ä»‹ç»ï¼Œç„¶åè¿è¡Œå®ƒçš„exampleä¸‹çš„ä¾‹å­ã€‚å®˜æ–¹çš„æ–‡æ¡£å½“å‰æ˜¯0.5-rcï¼Œä¸Šé¢æ‰€åˆ—å‡ºçš„ä¾‹å­å’Œè¯´æ˜éƒ½æ˜¯åŸºäºè¿™ä¸ªç‰ˆæœ¬çš„ã€‚</p><p>æˆ‘åœ¨æœ¬åœ°è¿è¡Œrocket demoæ—¶ï¼Œå‘ç°çº¿ä¸Šçš„ç‰ˆæœ¬æ˜¯0.4.11ï¼Œå®ƒçš„ä¾‹å­å’Œè¯´æ˜ä¸0.5-rcæœ‰äº›è®¸çš„å·®å¼‚ï¼Œæˆ‘åœ¨ä½¿ç”¨0.4.11ç‰ˆæœ¬æ—¶ï¼Œå‘ç°åœ¨windows 10ä¸‹ç¼–è¯‘ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>error: failed to run custom build command for `pear_codegen v0.1.5`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Caused by:</span></span>
<span class="line"><span>  process didn&#39;t exit successfully: `D:\workspace\rust-workspace\rocket-demo\target\debug\build\pear_codegen-57c49e3ab9feb78c\build-script-build` (exit code: 101)</span></span>
<span class="line"><span>  --- stderr</span></span>
<span class="line"><span>  Error: Pear requires a &#39;dev&#39; or &#39;nightly&#39; version of rustc.</span></span>
<span class="line"><span>  Installed version: 1.70.0 (2023-05-31)</span></span>
<span class="line"><span>  Minimum required:  1.31.0-nightly (2018-10-05)</span></span>
<span class="line"><span>  thread &#39;main&#39; panicked at &#39;Aborting compilation due to incompatible compiler.&#39;, C:\Users\DEV\.cargo\registry\src\mirrors.ustc.edu.cn-61ef6e0cd06fb9b8\pear_codegen-0.1.5\build.rs:24:13</span></span>
<span class="line"><span>  note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</span></span>
<span class="line"><span>warning: build failed, waiting for other jobs to finish...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æœç´¢ä¹‹åï¼ŒGitHubçš„è§£å†³æ–¹æ³•æ˜¯è¿è¡Œcargo updateï¼Œç„¶åå†æ¬¡è¿è¡Œï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰å®é™…æµ‹è¯•ï¼Œå› ä¸ºæˆ‘å‘ç°ä½¿ç”¨0.5-rcçš„ç‰ˆæœ¬çš„rocketï¼Œåœ¨å†™æ³•ä¸Šæ¯”è¾ƒç®€ç»ƒã€‚å°±å°†ä¾èµ–ç›´æ¥åˆ‡æ¢åˆ°0.5-rcã€‚</p><p>åœ¨[dependencies]ä¸­åŠ å…¥ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rocket = &quot;=0.5.0-rc.3&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æºæ–‡ä»¶main.rså¦‚ä¸‹ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#[macro_use] extern crate rocket;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[get(&quot;/&quot;)]</span></span>
<span class="line"><span>fn hello() -&gt; &amp;&#39;static str {</span></span>
<span class="line"><span>    &quot;Hello, world!&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#[launch]</span></span>
<span class="line"><span>fn rocket() -&gt; _ {</span></span>
<span class="line"><span>    rocket::build().mount(&quot;/&quot;, routes![hello])</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å¯ä»¥è¿è¡Œï¼Œè¿è¡Œåè¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Configured</span><span style="color:#98C379;"> for</span><span style="color:#98C379;"> debug.</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">address:</span><span style="color:#D19A66;"> 127.0.0.1</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">port:</span><span style="color:#D19A66;"> 8000</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">workers:</span><span style="color:#D19A66;"> 4</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">max</span><span style="color:#98C379;"> blocking</span><span style="color:#98C379;"> threads:</span><span style="color:#D19A66;"> 512</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">ident:</span><span style="color:#98C379;"> Rocket</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">IP</span><span style="color:#98C379;"> header:</span><span style="color:#98C379;"> X-Real-IP</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">limits:</span><span style="color:#98C379;"> bytes</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 8KiB,</span><span style="color:#98C379;"> data-form</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 2MiB,</span><span style="color:#98C379;"> file</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 1MiB,</span><span style="color:#98C379;"> form</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 32KiB,</span><span style="color:#98C379;"> json</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 1MiB,</span><span style="color:#98C379;"> msgpack</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 1MiB,</span><span style="color:#98C379;"> string</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 8KiB</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">temp</span><span style="color:#98C379;"> dir:</span><span style="color:#98C379;"> C:</span><span style="color:#56B6C2;">\U</span><span style="color:#98C379;">sers</span><span style="color:#56B6C2;">\D</span><span style="color:#98C379;">EV</span><span style="color:#56B6C2;">\A</span><span style="color:#98C379;">ppData</span><span style="color:#56B6C2;">\L</span><span style="color:#98C379;">ocal</span><span style="color:#56B6C2;">\T</span><span style="color:#98C379;">emp</span><span style="color:#56B6C2;">\</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#98C379;">http/2:</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">keep-alive:</span><span style="color:#98C379;"> 5s</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">tls:</span><span style="color:#98C379;"> disabled</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">shutdown:</span><span style="color:#98C379;"> ctrlc</span><span style="color:#98C379;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#98C379;">,</span><span style="color:#98C379;"> force</span><span style="color:#98C379;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#98C379;">,</span><span style="color:#98C379;"> grace</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 2s,</span><span style="color:#98C379;"> mercy</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> 3s</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">log</span><span style="color:#98C379;"> level:</span><span style="color:#98C379;"> normal</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">cli</span><span style="color:#98C379;"> colors:</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#61AFEF;">Routes:</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; (</span><span style="color:#61AFEF;">hello</span><span style="color:#ABB2BF;">) </span><span style="color:#61AFEF;">GET</span><span style="color:#98C379;"> /</span></span>
<span class="line"><span style="color:#61AFEF;">Fairings:</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">Shield</span><span style="color:#ABB2BF;"> (liftoff, </span><span style="color:#98C379;">response,</span><span style="color:#98C379;"> singleton</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">Shield:</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">X-Content-Type-Options:</span><span style="color:#98C379;"> nosniff</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">Permissions-Policy:</span><span style="color:#98C379;"> interest-cohort=</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;&gt; </span><span style="color:#61AFEF;">X-Frame-Options:</span><span style="color:#98C379;"> SAMEORIGIN</span></span>
<span class="line"><span style="color:#61AFEF;">Rocket</span><span style="color:#98C379;"> has</span><span style="color:#98C379;"> launched</span><span style="color:#98C379;"> from</span><span style="color:#98C379;"> http://127.0.0.1:8000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>æˆ‘ç”¨è¿‡axumï¼Œåœ¨å‘½ä»¤è¡Œè¾“å‡ºè¿™å—ï¼Œè¿˜æ˜¯è§‰å¾—rocketæ¯”è¾ƒå¥½ä¸€ç‚¹ï¼Œè¾“å‡ºçš„ä¿¡æ¯å¾ˆè¯¦ç»†ã€‚å…¶å®ƒçš„è¿˜æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œå¾…æˆ‘äº†è§£ä¹‹åï¼Œåœ¨å…¶å®ƒçš„æ–‡ç« è¿›è¡Œä»‹ç»ã€‚ç½‘ä¸Šçš„è§‚ç‚¹ï¼Œrocketæ€§èƒ½ç›¸æ¯”è¾ƒäºaxumã€warpç­‰ç¨å¾®å·®ç‚¹ï¼Œæˆ‘ä¸ªäººè§‰å¾—å®ƒåœ¨è¾…åŠ©è¿™å—æ¯”è¾ƒå¼ºï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œè¾“å‡ºã€åŠŸèƒ½æ¨¡å—ç­‰æ–¹é¢ã€‚æœŸå¾…0.5ç‰ˆæœ¬çš„ç¨³å®šç‰ˆå‘å¸ƒã€‚</p><h2 id="æŒæ¡-sauronã€æ•™ç¨‹ã€‘-ç”¨-rust-æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„-web-åº”ç”¨-ç®€åŒ–ç¼–ç -ä¸“æ³¨ä¸šåŠ¡é€»è¾‘" tabindex="-1">æŒæ¡ Sauronã€æ•™ç¨‹ã€‘ï¼šç”¨ Rust æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„ Web åº”ç”¨ï¼Œç®€åŒ–ç¼–ç ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘ <a class="header-anchor" href="#æŒæ¡-sauronã€æ•™ç¨‹ã€‘-ç”¨-rust-æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„-web-åº”ç”¨-ç®€åŒ–ç¼–ç -ä¸“æ³¨ä¸šåŠ¡é€»è¾‘" aria-label="Permalink to &quot;æŒæ¡ Sauronã€æ•™ç¨‹ã€‘ï¼šç”¨ Rust æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„ Web åº”ç”¨ï¼Œç®€åŒ–ç¼–ç ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘&quot;">â€‹</a></h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247494230&amp;idx=1&amp;sn=e1deed931f55a1f0d21e0d4eaeff25cb&amp;chksm=c0e76441f790ed579acc629cca14f1b624a594f1b6aa94010c4668e7000a57cb7d8b6ac0abac&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">æŒæ¡ Sauronã€æ•™ç¨‹ã€‘ï¼šç”¨ Rust æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„ Web åº”ç”¨ï¼Œç®€åŒ–ç¼–ç ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘ (qq.com)</a></p><h2 id="èŠä¸€èŠä½¿ç”¨rustè¿›è¡Œwebå¼€å‘çš„ç»†èŠ‚" tabindex="-1">èŠä¸€èŠä½¿ç”¨Rustè¿›è¡ŒWebå¼€å‘çš„ç»†èŠ‚ <a class="header-anchor" href="#èŠä¸€èŠä½¿ç”¨rustè¿›è¡Œwebå¼€å‘çš„ç»†èŠ‚" aria-label="Permalink to &quot;èŠä¸€èŠä½¿ç”¨Rustè¿›è¡ŒWebå¼€å‘çš„ç»†èŠ‚&quot;">â€‹</a></h2><p><a href="https://mp.weixin.qq.com/s/kDxIJEy9kfvvRXEZCzVI7Q" target="_blank" rel="noreferrer">èŠä¸€èŠä½¿ç”¨Rustè¿›è¡ŒWebå¼€å‘çš„ç»†èŠ‚ (qq.com)</a></p><h1 id="web-å‰ç«¯ç•Œé¢æ„å»º" tabindex="-1">Web å‰ç«¯ç•Œé¢æ„å»º <a class="header-anchor" href="#web-å‰ç«¯ç•Œé¢æ„å»º" aria-label="Permalink to &quot;Web å‰ç«¯ç•Œé¢æ„å»º&quot;">â€‹</a></h1><h2 id="kobold-ç®€æ´å£°æ˜å¼çš„-web-ç•Œé¢æ„å»ºå·¥å…·åº“" tabindex="-1">Koboldï¼š ç®€æ´å£°æ˜å¼çš„ Web ç•Œé¢æ„å»ºå·¥å…·åº“ <a class="header-anchor" href="#kobold-ç®€æ´å£°æ˜å¼çš„-web-ç•Œé¢æ„å»ºå·¥å…·åº“" aria-label="Permalink to &quot;Koboldï¼š ç®€æ´å£°æ˜å¼çš„ Web ç•Œé¢æ„å»ºå·¥å…·åº“&quot;">â€‹</a></h2><p>æ–‡æ¡£ï¼š<a href="https://docs.rs/kobold/latest/kobold/" target="_blank" rel="noreferrer">https://docs.rs/kobold/latest/kobold/</a></p><ul><li>å£°æ˜æ€§<a href="https://docs.rs/kobold/latest/kobold/macro.view.html" target="_blank" rel="noreferrer"><code>è§†å›¾ï¼</code></a> å®ï¼Œå®ƒä½¿ç”¨ HTML é£æ ¼çš„è¯­æ³•å’Œå¯é€‰çš„ç»“æŸæ ‡è®°ã€‚</li><li>å…·æœ‰å¯é€‰å‚æ•°çš„åŠŸèƒ½<a href="https://docs.rs/kobold/latest/kobold/attr.component.html" target="_blank" rel="noreferrer">ç»„ä»¶</a>ã€‚</li><li>çŠ¶æ€ç®¡ç†å’Œäº‹ä»¶å¤„ç†ã€‚</li><li>é«˜æ€§èƒ½å’Œ Rust ç”Ÿæ€ç³»ç»Ÿä¸­å§‹ç»ˆä¿æŒæœ€ä½çš„ Wasm å ç”¨ç©ºé—´ã€‚</li></ul><p>æ•™ç¨‹ï¼š<a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493858&amp;idx=1&amp;sn=a7d094714c2691bd1f954909369f731a" target="_blank" rel="noreferrer">Rust Kobold æ•™ç¨‹ï¼š ç®€æ´å£°æ˜å¼çš„ Web ç•Œé¢æ„å»ºå·¥å…· (qq.com)</a></p><h2 id="rust-dom-æ¡†æ¶-dominator-æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„-dom-æ¡†æ¶ä¹‹ä¸€" tabindex="-1">Rust DOM æ¡†æ¶ï¼šDominator æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„ DOM æ¡†æ¶ä¹‹ä¸€ <a class="header-anchor" href="#rust-dom-æ¡†æ¶-dominator-æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„-dom-æ¡†æ¶ä¹‹ä¸€" aria-label="Permalink to &quot;Rust DOM æ¡†æ¶ï¼šDominator æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„ DOM æ¡†æ¶ä¹‹ä¸€&quot;">â€‹</a></h2><h3 id="æ¦‚è¿°" tabindex="-1">æ¦‚è¿° <a class="header-anchor" href="#æ¦‚è¿°" aria-label="Permalink to &quot;æ¦‚è¿°&quot;">â€‹</a></h3><p>é¡¹ç›®åœ°å€</p><p><code>Dominator</code> æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„ <code>DOM</code> æ¡†æ¶ä¹‹ä¸€ï¼ˆå®ƒå’Œ <code>Inferno</code> ä¸€æ ·å¿«ï¼‰ã€‚</p><p>å®ƒä¸ä½¿ç”¨ VDOMï¼Œè€Œæ˜¯ä½¿ç”¨åŸå§‹çš„ DOM èŠ‚ç‚¹ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚å®ƒç´§è´´åº•å±‚ï¼Œå‡ ä¹æ²¡æœ‰å¼€é”€ï¼šæ‰€æœ‰æ“ä½œéƒ½å†…è”åˆ°åŸå§‹çš„ DOM æ“ä½œä¸Šã€‚</p><p>å³ä½¿åœ¨éå¸¸å¤§çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå®ƒä¹Ÿèƒ½éå¸¸å¥½åœ°æ‰©å±•ï¼Œå› ä¸ºæ›´æ–°å§‹ç»ˆæ˜¯ O(1)æ—¶é—´ï¼Œæ— è®ºä½ çš„åº”ç”¨ç¨‹åºæœ‰å¤šå¤§æˆ–åµŒå¥—æœ‰å¤šæ·±ã€‚</p><p>å®ƒå…·æœ‰æ–¹ä¾¿çš„é«˜çº§å£°æ˜å¼ <code>API</code>ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äº <code>React</code> ç»„ä»¶ï¼Œä½†ä¸“ä¸º Rust å’Œ FRP ä¿¡å·è®¾è®¡ã€‚</p><p>å®ƒé€šå¸¸åŠŸèƒ½é½å…¨ï¼Œå°½ç®¡éšç€æ—¶é—´çš„æ¨ç§»å¯èƒ½ä¼šæ·»åŠ æ›´å¤šçš„ä¾¿åˆ©æ–¹æ³•ã€‚</p><p>å®ƒç›¸å½“ç¨³å®šï¼šç ´åæ€§å˜æ›´éå¸¸ç½•è§ï¼Œå¹¶ä½¿ç”¨æ­£å¸¸çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ç³»ç»Ÿè¿›è¡Œå¤„ç†ã€‚</p><p>æˆ‘åœ¨å¤šä¸ªå¤§å‹åº”ç”¨ç¨‹åºä¸­æˆåŠŸä½¿ç”¨äº† <code>Dominator</code>ï¼Œå®ƒçš„æ€§èƒ½è¡¨ç°éå¸¸å‡ºè‰²ã€‚</p><h3 id="è¿è¡Œç¤ºä¾‹" tabindex="-1">è¿è¡Œç¤ºä¾‹ <a class="header-anchor" href="#è¿è¡Œç¤ºä¾‹" aria-label="Permalink to &quot;è¿è¡Œç¤ºä¾‹&quot;">â€‹</a></h3><p>åªéœ€æ‰§è¡Œ <code>yarn</code>ï¼Œç„¶åæ‰§è¡Œ <code>yarn start</code>ï¼ˆç¼–è¯‘ä¾èµ–é¡¹éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼‰</p><h4 id="åŠ¨ç”»é¡¹ç›®" tabindex="-1">åŠ¨ç”»é¡¹ç›® <a class="header-anchor" href="#åŠ¨ç”»é¡¹ç›®" aria-label="Permalink to &quot;åŠ¨ç”»é¡¹ç›®&quot;">â€‹</a></h4><p>å·¥ç¨‹ç›®å½•ç»“æ„</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cd examples/animation</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/640-1714731117954-329.BrHBfh1G.webp" alt="å›¾ç‰‡"></p><h5 id="rollup-config-js" tabindex="-1">rollup.config.js <a class="header-anchor" href="#rollup-config-js" aria-label="Permalink to &quot;rollup.config.js&quot;">â€‹</a></h5><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>import rust from &quot;@wasm-tool/rollup-plugin-rust&quot;;</span></span>
<span class="line"><span>import serve from &quot;rollup-plugin-serve&quot;;</span></span>
<span class="line"><span>import livereload from &quot;rollup-plugin-livereload&quot;;</span></span>
<span class="line"><span>import { terser } from &quot;rollup-plugin-terser&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const is_watch = !!process.env.ROLLUP_WATCH;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default {</span></span>
<span class="line"><span>    input: {</span></span>
<span class="line"><span>        index: &quot;./Cargo.toml&quot;,</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    output: {</span></span>
<span class="line"><span>        dir: &quot;dist/js&quot;,</span></span>
<span class="line"><span>        format: &quot;iife&quot;,</span></span>
<span class="line"><span>        sourcemap: true,</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    plugins: [</span></span>
<span class="line"><span>        rust({</span></span>
<span class="line"><span>            serverPath: &quot;js/&quot;,</span></span>
<span class="line"><span>        }),</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        is_watch &amp;&amp; serve({</span></span>
<span class="line"><span>            contentBase: &quot;dist&quot;,</span></span>
<span class="line"><span>            open: true,</span></span>
<span class="line"><span>        }),</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        is_watch &amp;&amp; livereload(&quot;dist&quot;),</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        !is_watch &amp;&amp; terser(),</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h5 id="package-json" tabindex="-1">package.json <a class="header-anchor" href="#package-json" aria-label="Permalink to &quot;package.json&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;private&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Pauan &lt;pauanyu+github@pm.me&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;animation&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;0.1.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;build&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;rimraf dist/js &amp;&amp; rollup --bundleConfigAsCjs --config&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;watch&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;rimraf dist/js &amp;&amp; rollup --bundleConfigAsCjs --config --watch&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;@wasm-tool/rollup-plugin-rust&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^2.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;rimraf&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;rollup&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.21.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;rollup-plugin-livereload&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^2.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;rollup-plugin-serve&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^2.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;rollup-plugin-terser&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^7.0.2&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>examples/animation/Cargo.toml</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">package</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#98C379;">name = &quot;animation&quot;</span></span>
<span class="line"><span style="color:#98C379;">version = &quot;0.1.0&quot;</span></span>
<span class="line"><span style="color:#98C379;">description = &quot;Animation demo using dominator&quot;</span></span>
<span class="line"><span style="color:#98C379;">authors = [&quot;Pauan &lt;pauanyu+github@pm.me&gt;&quot;]</span></span>
<span class="line"><span style="color:#98C379;">categories = [&quot;wasm&quot;]</span></span>
<span class="line"><span style="color:#98C379;">readme = &quot;README.md&quot;</span></span>
<span class="line"><span style="color:#98C379;">license = &quot;MIT&quot;</span></span>
<span class="line"><span style="color:#98C379;">edition = &quot;2018&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">workspace</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#98C379;">console_error_panic_hook = &quot;0.1.6&quot;</span></span>
<span class="line"><span style="color:#98C379;">dominator = &quot;0.5.18&quot;</span></span>
<span class="line"><span style="color:#98C379;">wasm-bindgen = &quot;0.2.74&quot;</span></span>
<span class="line"><span style="color:#98C379;">futures = &quot;0.3.15&quot;</span></span>
<span class="line"><span style="color:#98C379;">futures-signals = &quot;0.3.20&quot;</span></span>
<span class="line"><span style="color:#98C379;">gloo-timers = { version = &quot;0.2.1&quot;, features = [&quot;futures&quot;] }</span></span>
<span class="line"><span style="color:#98C379;">once_cell = &quot;1.7.2&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">dependencies.web-sys</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#98C379;">version = &quot;0.3.51&quot;</span></span>
<span class="line"><span style="color:#98C379;">features = [</span></span>
<span class="line"><span style="color:#98C379;">    &quot;console&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>examples/animation/src/lib.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> wasm_bindgen</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">sync</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> once_cell</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">sync</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Lazy</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">stream</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">StreamExt</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures_signals</span><span style="color:#ABB2BF;">::map_ref;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures_signals</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">signal</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Mutable</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">SignalExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> futures_signals</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">signal_vec</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">MutableVec</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> gloo_timers</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">future</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IntervalStream</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> dominator</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Dom</span><span style="color:#ABB2BF;">, html, clone, events, class};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> dominator</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">traits</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">AnimatedSignalVec</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> dominator</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">animation</span><span style="color:#ABB2BF;">::{easing, </span><span style="color:#E5C07B;">Percentage</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MutableAnimation</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AnimatedMapBroadcaster</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Bar</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    wave_animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableAnimation</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    hover_animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableAnimation</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Bar</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Arc</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            color</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            wave_animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableAnimation</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3000.0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">            hover_animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableAnimation</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">300.0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Bar</span><span style="color:#ABB2BF;">&gt;, </span><span style="color:#E06C75;">insert_animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">AnimatedMapBroadcaster</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Dom</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        static</span><span style="color:#D19A66;"> CLASS</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Lazy</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Lazy</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#61AFEF;"> class!</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;border-radius&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;10px&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;position&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;relative&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;border-style&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;solid&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;border-width&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;5px&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> low</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">f64</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> bar</span><span style="color:#ABB2BF;">.color </span><span style="color:#C678DD;">as</span><span style="color:#E5C07B;"> f64</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> high</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">f64</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.color + </span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#E5C07B;"> f64</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">        html!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(&amp;*</span><span style="color:#D19A66;">CLASS</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">future</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">for_each</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">f64</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_f64</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // Automatically cycles back and forth between 0 and 1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // This creates a wave effect</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#E06C75;"> t</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0.0</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">animate_to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Percentage</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#E06C75;"> t</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 1.0</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">animate_to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Percentage</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">                async</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;">            })))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // Animation when hovering over the Bar</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">event</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">events</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">MouseEnter</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                bar</span><span style="color:#ABB2BF;">.hover_animation.</span><span style="color:#61AFEF;">animate_to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Percentage</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            }))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">event</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">events</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">MouseLeave</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                bar</span><span style="color:#ABB2BF;">.hover_animation.</span><span style="color:#61AFEF;">animate_to</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Percentage</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            }))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // These will animate when the Bar is inserted/removed</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;left&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">insert_animation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">none_if</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">)))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}px&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;height&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">map_ref!</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> insert</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> insert_animation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">                let</span><span style="color:#E06C75;"> hover</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> bar</span><span style="color:#ABB2BF;">.hover_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">)) =&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // Animate the height between 5px and 15px when hovering</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // But if the Bar is being inserted/removed then it will interpolate to 0px</span></span>
<span class="line"><span style="color:#E5C07B;">                Some</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}px&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">insert</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">hover</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">15.0</span><span style="color:#ABB2BF;">))))</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;border-width&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">insert_animation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">none_if</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">)))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}px&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // These will animate in a continuous wave-like pattern</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;width&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}px&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">167.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">500.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;margin-left&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Some</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}px&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;background-color&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span></span>
<span class="line"><span style="color:#E5C07B;">                    Some</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hsl({}, {}%, {}%)&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">low</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">high</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style_signal</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;border-color&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">.wave_animation.</span><span style="color:#61AFEF;">signal</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> easing</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">in_out</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">t</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">easing</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">cubic</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">t</span><span style="color:#56B6C2;">|</span></span>
<span class="line"><span style="color:#E5C07B;">                    Some</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hsl({}, {}%, {}%)&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">high</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">low</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">                        t</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">range_inclusive</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">)))))</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    current_color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Mutable</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#E06C75;">    bars</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableVec</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Bar</span><span style="color:#ABB2BF;">&gt;&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Arc</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            current_color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Mutable</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E06C75;">            bars</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">MutableVec</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new_color</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // Cycles through the color hue spectrum</span></span>
<span class="line"><span style="color:#E5C07B;">        self</span><span style="color:#ABB2BF;">.current_color.</span><span style="color:#61AFEF;">replace_with</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">x</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> (*</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;"> + </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) % </span><span style="color:#D19A66;">360</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new_bar</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> lock</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.bars.</span><span style="color:#61AFEF;">lock_mut</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // Limits the number of bars to 40</span></span>
<span class="line"><span style="color:#C678DD;">        if</span><span style="color:#E06C75;"> lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">len</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&gt;=</span><span style="color:#D19A66;"> 40</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        lock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push_cloned</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bar</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">new_color</span><span style="color:#ABB2BF;">()));</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> render_bars</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Dom</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        html!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">children_signal_vec</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">.bars.</span><span style="color:#61AFEF;">signal_vec_cloned</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // Animates the Bar for 2000ms when inserting/removing</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">animated_map</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2000.0</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">animation</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Bar</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">animation</span><span style="color:#ABB2BF;">)))</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Arc</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Dom</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        static</span><span style="color:#D19A66;"> CLASS</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Lazy</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Lazy</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">||</span><span style="color:#61AFEF;"> class!</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;display&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;flex&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">style</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;flex-direction&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;row&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">        html!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(&amp;*</span><span style="color:#D19A66;">CLASS</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // Inserts a new colored bar every 500ms</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">future</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">IntervalStream</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">for_each</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">clone!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">new_bar</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">                async</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;">            })))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">children</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // Renders the bars twice, both columns will always be perfectly in sync</span></span>
<span class="line"><span style="color:#E5C07B;">                Self</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">render_bars</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#E5C07B;">                Self</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">render_bars</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ])</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[wasm_bindgen(start)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main_js</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">JsValue</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">    #[cfg(debug_assertions)]</span></span>
<span class="line"><span style="color:#E5C07B;">    console_error_panic_hook</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">set_once</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">    dominator</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">append_dom</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">dominator</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br></div></div><p>examples/animation/.gitignore</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>node_modules</span></span>
<span class="line"><span>/dist/js</span></span>
<span class="line"><span>/target</span></span>
<span class="line"><span>/wasm-pack.log</span></span>
<span class="line"><span>/yarn-error.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>examples/animation/dist/index.html</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;rust-dominator â€¢ Animation&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;js/index.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å®‰è£…æŒ‡å— è¿è¡Œ <code>yarn install</code> ä»¥å®‰è£…é¡¹ç›®ä¾èµ–ã€‚</p><p>å¼€å‘æ„å»ºæ­¥éª¤ æ‰§è¡Œ <code>yarn watch</code> æ¥æ„å»ºé¡¹ç›®å¹¶è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚ å½“ä½ è¿›è¡Œæ›´æ”¹æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚</p><p>ç”Ÿäº§æ„å»ºæ­¥éª¤ è¿è¡Œ <code>yarn build</code> æ¥æ„å»ºé¡¹ç›®ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ <code>dist</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><h3 id="å¼‚æ­¥é¡¹ç›®" tabindex="-1">å¼‚æ­¥é¡¹ç›® <a class="header-anchor" href="#å¼‚æ­¥é¡¹ç›®" aria-label="Permalink to &quot;å¼‚æ­¥é¡¹ç›®&quot;">â€‹</a></h3><p><img src="/ProgramLearnNotes/assets/640-1714731117954-330.H1sy5L_Z.webp" alt="å›¾ç‰‡"></p><h3 id="ç¤¾åŒº" tabindex="-1">ç¤¾åŒº <a class="header-anchor" href="#ç¤¾åŒº" aria-label="Permalink to &quot;ç¤¾åŒº&quot;">â€‹</a></h3><p>ä»–ä»¬æœ‰ä¸€ä¸ª <code>Disxxd</code> æœåŠ¡å™¨ã€‚å¦‚æœ‰ä»»ä½•å…³äº <code>Dominator</code> çš„é—®é¢˜ï¼Œè¯·éšæ—¶åœ¨é‚£é‡Œæé—®ã€‚</p><h1 id="æ¨¡æ¿å¼•æ“-1" tabindex="-1">æ¨¡æ¿å¼•æ“ <a class="header-anchor" href="#æ¨¡æ¿å¼•æ“-1" aria-label="Permalink to &quot;æ¨¡æ¿å¼•æ“&quot;">â€‹</a></h1><h2 id="askama-æ¨¡æ¿å¼•æ“" tabindex="-1">Askama æ¨¡æ¿å¼•æ“ <a class="header-anchor" href="#askama-æ¨¡æ¿å¼•æ“" aria-label="Permalink to &quot;Askama æ¨¡æ¿å¼•æ“&quot;">â€‹</a></h2><p>æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/AOpX3l1qsoXJo7XIjWCP2Q" target="_blank" rel="noreferrer">Askama æ¨¡æ¿å¼•æ“ï¼šRust å¼€å‘è€…çš„æ–°å‹æ¨¡æ¿å¼•æ“å·¥å…·ã€æ•™ç¨‹ã€‘ (qq.com)</a></p><h3 id="reference-1" tabindex="-1">Reference <a class="header-anchor" href="#reference-1" aria-label="Permalink to &quot;Reference&quot;">â€‹</a></h3><p>[1] Jinja:<a href="https://jinja.palletsprojects.com/" target="_blank" rel="noreferrer">https://jinja.palletsprojects.com/</a></p><p>[2] å®˜æ–¹æ–‡æ¡£:<a href="https://djc.github.io/askama/" target="_blank" rel="noreferrer">https://djc.github.io/askama/</a></p><p>[3] Armin Ronacher:<a href="http://lucumr.pocoo.org/" target="_blank" rel="noreferrer">http://lucumr.pocoo.org/</a></p><p>[4] é—®é¢˜è·Ÿè¸ªå™¨:<a href="https://github.com/djc/askama/issues" target="_blank" rel="noreferrer">https://github.com/djc/askama/issues</a></p><p>[5] æ¨ç‰¹:<a href="https://twitter.com/djco/" target="_blank" rel="noreferrer">https://twitter.com/djco/</a></p><p>[6] Patreon:<a href="https://www.patreon.com/dochtman" target="_blank" rel="noreferrer">https://www.patreon.com/dochtman</a></p><p>[7] æœ€ä½³æ€§èƒ½:<a href="https://github.com/djc/template-benchmarks-rs" target="_blank" rel="noreferrer">https://github.com/djc/template-benchmarks-rs</a></p><p>[8] JetBrains äº§å“:<a href="https://plugins.jetbrains.com/plugin/16591-askama-template-support" target="_blank" rel="noreferrer">https://plugins.jetbrains.com/plugin/16591-askama-template-support</a></p><p>[9] é›†æˆ:./integrations.md</p><p>[10] æ¨¡æ¿è¯­æ³•:template_syntax.md</p><p>[11] Jinja:<a href="http://jinja.pocoo.org/" target="_blank" rel="noreferrer">http://jinja.pocoo.org/</a></p><p>[12] Twig:<a href="http://twig.sensiolabs.org/" target="_blank" rel="noreferrer">http://twig.sensiolabs.org/</a></p><p>[13] Tera:<a href="https://github.com/Keats/tera" target="_blank" rel="noreferrer">https://github.com/Keats/tera</a></p><p>[14] dependencies éƒ¨åˆ†:<a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html" target="_blank" rel="noreferrer">https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html</a></p><p>[15] <code>Serialize</code>:<a href="https://docs.rs/serde/1./serde/trait.Serialize.html" target="_blank" rel="noreferrer">https://docs.rs/serde/1./serde/trait.Serialize.html</a>*</p><p>[16] <code>askama_rocket::Template</code>:<a href="https://docs.rs/askama_rocket" target="_blank" rel="noreferrer">https://docs.rs/askama_rocket</a></p><p>[17] ç¤ºä¾‹:<a href="https://github.com/djc/askama/blob/main/askama_rocket/tests/basic.rs" target="_blank" rel="noreferrer">https://github.com/djc/askama/blob/main/askama_rocket/tests/basic.rs</a></p><p>[18] <code>askama_actix::Template</code>:<a href="https://docs.rs/askama_actix" target="_blank" rel="noreferrer">https://docs.rs/askama_actix</a></p><p>[19] ç¤ºä¾‹:<a href="https://github.com/djc/askama/blob/main/askama_actix/tests/basic.rs" target="_blank" rel="noreferrer">https://github.com/djc/askama/blob/main/askama_actix/tests/basic.rs</a></p><p>[20] <code>askama_axum::Template</code>:<a href="https://docs.rs/askama_axum" target="_blank" rel="noreferrer">https://docs.rs/askama_axum</a></p><p>[21] ç¤ºä¾‹:<a href="https://github.com/djc/askama/blob/main/askama_axum/tests/basic.rs" target="_blank" rel="noreferrer">https://github.com/djc/askama/blob/main/askama_axum/tests/basic.rs</a></p><p>[22] <code>askama_warp::Template</code>:<a href="https://docs.rs/askama_warp" target="_blank" rel="noreferrer">https://docs.rs/askama_warp</a></p><p>[23] ç¤ºä¾‹:<a href="https://github.com/djc/askama/blob/main/askama_warp/tests/warp.rs" target="_blank" rel="noreferrer">https://github.com/djc/askama/blob/main/askama_warp/tests/warp.rs</a></p><p>[24] è¿‡æ»¤å™¨æ–‡æ¡£:filters.md</p><p>[25] é…ç½®æ–‡ä»¶:configuration.md</p><p>[26] è¿™é‡Œ:#ç©ºç™½ç¬¦æ§åˆ¶</p><p>[27] OWASP è½¬ä¹‰å»ºè®®:<a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html#output-encoding-for-html-contexts" target="_blank" rel="noreferrer">https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html#output-encoding-for-html-contexts</a></p><p>[28] render in place:<a href="https://github.com/djc/askama/blob/main/testing/tests/render_in_place.rs" target="_blank" rel="noreferrer">https://github.com/djc/askama/blob/main/testing/tests/render_in_place.rs</a></p><h1 id="å…¨æ ˆæ¡†æ¶" tabindex="-1">å…¨æ ˆæ¡†æ¶ <a class="header-anchor" href="#å…¨æ ˆæ¡†æ¶" aria-label="Permalink to &quot;å…¨æ ˆæ¡†æ¶&quot;">â€‹</a></h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247494055&amp;idx=1&amp;sn=515465b9c0218464ee32b03404e34d43&amp;chksm=c0e767b0f790eea60a722ab773a3d05e8a1bc2d76e10a72dbbdc7ea0fa622630117d093a16af&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">MoonZoon æ•™ç¨‹ï¼šä¸€ä¸ª Rust å…¨æ ˆæ¡†æ¶ï¼Œâ€œæˆ‘ä»¬ä¸æƒ³å› ä¸ºæ•°ç™¾ä¸‡ä¸å¿…è¦çš„æŠ€æœ¯å¾®å†³ç­–è€Œæµªè´¹æ—¶é—´å’Œé‡‘é’±ã€‚â€ã€è€—è¡€æ•´ç†ã€‘ (qq.com)</a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493898&amp;idx=1&amp;sn=08f76fc6262825f438a430c6c95794c7&amp;chksm=c0e7671df790ee0bb218ac52c0cc9a38fb0e9ba44080a5de3fd85a474569f9dc515ac5d0801d&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">Leptos æ¡†æ¶æ·±åº¦è§£æï¼šç”± Rust è¯­è¨€æ‰“é€ çš„å…¨æ ˆ Web æ¡†æ¶ï¼Œç”¨ Rust æ‰“é€ é«˜æ•ˆã€å£°æ˜å¼çš„ Web åº”ç”¨ä¸–ç•Œ (qq.com)</a></p><h1 id="çº¿ç¨‹åº“" tabindex="-1">çº¿ç¨‹åº“ <a class="header-anchor" href="#çº¿ç¨‹åº“" aria-label="Permalink to &quot;çº¿ç¨‹åº“&quot;">â€‹</a></h1><h2 id="governor-ç”¨äºè°ƒèŠ‚æ•°æ®æµåŠ¨çš„åº“" tabindex="-1">governor - ç”¨äºè°ƒèŠ‚æ•°æ®æµåŠ¨çš„åº“ <a class="header-anchor" href="#governor-ç”¨äºè°ƒèŠ‚æ•°æ®æµåŠ¨çš„åº“" aria-label="Permalink to &quot;governor - ç”¨äºè°ƒèŠ‚æ•°æ®æµåŠ¨çš„åº“&quot;">â€‹</a></h2><p>githubåœ°å€ï¼š<a href="https://github.com/boinkor-net/governor" target="_blank" rel="noreferrer">https://github.com/boinkor-net/governor</a></p><p>è¿™ä¸ªåº“æ˜¯Rustç¨‹åºä¸­ç”¨äºé€Ÿç‡é™åˆ¶ï¼Œå®ƒä½¿ç”¨é€šç”¨å•å…ƒé€Ÿç‡ç®—æ³•å®ç°ã€‚</p><p>å®ƒçš„ç›®çš„æ˜¯å¸®åŠ©ä½ çš„ç¨‹åºäº†è§£å®ƒåº”è¯¥ç»™å¤–éƒ¨æœåŠ¡å¸¦æ¥å¤šå¤§çš„å‹åŠ›ï¼Œå¹¶ä¸”ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå…è®¸ä½ çš„æœåŠ¡è°ƒèŠ‚å®ƒä»¬ä»ç”¨æˆ·é‚£é‡Œæ‰¿æ‹…çš„å‹åŠ›ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå®ƒçš„åŠŸèƒ½å°±åƒæ ‡å¿—æ€§çš„è’¸æ±½è°ƒé€Ÿå™¨ã€‚</p><p>è¯¥crateä¸­çš„é€Ÿç‡é™åˆ¶ç®—æ³•ä½¿ç”¨é€šç”¨å•å…ƒé€Ÿç‡ç®—æ³•(GCRA)å®ç°ã€‚GCRAåœ¨åŠŸèƒ½ä¸Šç­‰åŒäºæ¼æ¡¶ç®—æ³•ï¼Œä½†ä¸å¤§å¤šæ•°æ¼æ¡¶ç®—æ³•å®ç°ç›¸æ¯”æœ‰ä¸€äº›ä¼˜åŠ¿ï¼š</p><ul><li>ä¸éœ€è¦åå°â€œæ»´â€è¿‡ç¨‹æ¥ä¿æŒå¯¹æ¡¶çš„ç»´æŠ¤</li><li>æ¯å½“æœ‰è¯·æ±‚è¿›å…¥æ—¶ï¼Œå®ƒéƒ½ä¼šä»¥çº³ç§’çº§æŒç»­æ›´æ–°çŠ¶æ€ã€‚</li><li>å®ƒå°†å…¶çŠ¶æ€ä¿å­˜åœ¨å•ä¸ªAtomicU64æ•´æ•°ä¸­</li></ul><p>è¿™é‡Œä½¿ç”¨çš„é€Ÿç‡é™åˆ¶çŠ¶æ€ä¸å ç”¨å¤ªå¤šå†…å­˜(åªæœ‰64ä½!)ï¼Œå¹¶ä¸”é€šè¿‡compare-and-swapæ“ä½œåœ¨çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹æ›´æ–°ã€‚ä¸ä½¿ç”¨äº’æ–¥é”çš„ratelimit_meterå®ç°ç›¸æ¯”ï¼Œå®ƒåœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨æ—¶å¹³å‡å¿«10å€ã€‚</p><h2 id="smol-rustè¯­è¨€ä¸­çš„è½»é‡çº§å¼‚æ­¥è¿è¡Œæ—¶" tabindex="-1">Smolï¼šRustè¯­è¨€ä¸­çš„è½»é‡çº§å¼‚æ­¥è¿è¡Œæ—¶ <a class="header-anchor" href="#smol-rustè¯­è¨€ä¸­çš„è½»é‡çº§å¼‚æ­¥è¿è¡Œæ—¶" aria-label="Permalink to &quot;Smolï¼šRustè¯­è¨€ä¸­çš„è½»é‡çº§å¼‚æ­¥è¿è¡Œæ—¶&quot;">â€‹</a></h2><p>ä»¥å…¶å°å·§ã€å¿«é€Ÿå’Œç°ä»£åŒ–çš„ç‰¹ç‚¹ï¼Œåœ¨Rustå¼‚æ­¥è¿è¡Œæ—¶é¢†åŸŸç‹¬æ ‘ä¸€å¸œã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Smolçš„è®¾è®¡ç†å¿µã€æ ¸å¿ƒåŠŸèƒ½ä»¥åŠå¦‚ä½•åœ¨Rusté¡¹ç›®ä¸­ä½¿ç”¨Smolæ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</p><h3 id="smolçš„è®¾è®¡å“²å­¦" tabindex="-1">Smolçš„è®¾è®¡å“²å­¦ <a class="header-anchor" href="#smolçš„è®¾è®¡å“²å­¦" aria-label="Permalink to &quot;Smolçš„è®¾è®¡å“²å­¦&quot;">â€‹</a></h3><p>åœ¨å¼‚æ­¥ç¼–ç¨‹çš„ä¸–ç•Œä¸­ï¼Œæ•ˆç‡å’Œæ˜“ç”¨æ€§æ˜¯è¡¡é‡ä¸€ä¸ªè¿è¡Œæ—¶å¥½åçš„å…³é”®æ ‡å‡†ã€‚Smolæ­£æ˜¯åŸºäºè¿™æ ·çš„ç†å¿µè¯ç”Ÿçš„ã€‚å®ƒæ—¨åœ¨æä¾›ä¸€ä¸ªæ—¢å°å·§åˆå¿«é€Ÿçš„å¼‚æ­¥runtimeï¼Œé€šè¿‡å°½é‡å‡å°‘APIçš„æ•°é‡å’Œå¤æ‚åº¦ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¹¶æœ‰æ•ˆåœ°æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚</p><h3 id="smolæ ¸å¿ƒåŠŸèƒ½" tabindex="-1">Smolæ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#smolæ ¸å¿ƒåŠŸèƒ½" aria-label="Permalink to &quot;Smolæ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><p>SmolåŸºäºRustçš„<code>async-std</code>å’Œ<code>tokio</code>æ„å»ºï¼Œæä¾›äº†ä¸€å¥—ç®€æ´è€Œå¼ºå¤§çš„APIæ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚</p><ol><li><strong>åˆ›å»ºå¼‚æ­¥å‡½æ•°</strong>ï¼šSmolå…è®¸å¼€å‘è€…ä»¥æœ€å°‘çš„ä»£ç è¡Œæ•°åˆ›å»ºå¼‚æ­¥å‡½æ•°ã€‚</li><li><strong>ç­‰å¾…Future</strong>ï¼šé€šè¿‡Smolï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾ç­‰å¾…ä¸€ä¸ªfutureçš„å®Œæˆã€‚</li><li><strong>åˆ›å»ºå®šæ—¶å™¨</strong>ï¼šæä¾›äº†åˆ›å»ºå®šæ—¶å™¨çš„ç®€æ´APIï¼Œæ–¹ä¾¿åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æ‰§è¡Œå®šæ—¶æ“ä½œã€‚</li><li><strong>é«˜æ•ˆçš„è°ƒåº¦</strong>ï¼šå¾—ç›Šäºå…¶ä¼˜è¶Šçš„è°ƒåº¦èƒ½åŠ›ï¼ŒSmolèƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†å’Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</li></ol><h3 id="åœ¨rustä¸­ä½¿ç”¨smol" tabindex="-1">åœ¨Rustä¸­ä½¿ç”¨Smol <a class="header-anchor" href="#åœ¨rustä¸­ä½¿ç”¨smol" aria-label="Permalink to &quot;åœ¨Rustä¸­ä½¿ç”¨Smol&quot;">â€‹</a></h3><p>è¦åœ¨Rusté¡¹ç›®ä¸­ä½¿ç”¨Smolï¼Œé¦–å…ˆéœ€è¦å°†å®ƒæ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–ä¸­ã€‚åœ¨Cargo.tomlæ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>[dependencies]</span></span>
<span class="line"><span>smol = &quot;ç‰ˆæœ¬å·&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¯·åœ¨<code>ç‰ˆæœ¬å·</code>å¤„å¡«å†™æœ€æ–°æˆ–é€‚åˆé¡¹ç›®éœ€è¦çš„smolç‰ˆæœ¬ã€‚</p><h4 id="åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•°" tabindex="-1">åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•° <a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•°" aria-label="Permalink to &quot;åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•°&quot;">â€‹</a></h4><p>è¿™é‡Œï¼Œæˆ‘ä»¬å±•ç¤ºå¦‚ä½•ä½¿ç”¨Smolåˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•°ï¼Œå¹¶ç­‰å¾…å®ƒå®Œæˆã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å¼•å…¥smolåŒ…</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> smol</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Timer</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">time</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸€ä¸ªç®€å•çš„å¼‚æ­¥å‡½æ•°ï¼Œå°†åœ¨æŒ‡å®šæ—¶é—´åå®Œæˆ</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> delay</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">duration</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    Timer</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">after</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">duration</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä½¿ç”¨smolçš„block_onæ¥è¿è¡Œå¼‚æ­¥ä»£ç å—</span></span>
<span class="line"><span style="color:#E5C07B;">    smol</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">block_on</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è°ƒç”¨delayå‡½æ•°ï¼Œå¹¶ç­‰å¾…2ç§’</span></span>
<span class="line"><span style="color:#61AFEF;">        delay</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2ç§’åï¼Œå»¶æ—¶å®Œæˆï¼&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="smolçš„æ‰©å±•å’Œå®é™…åº”ç”¨" tabindex="-1">Smolçš„æ‰©å±•å’Œå®é™…åº”ç”¨ <a class="header-anchor" href="#smolçš„æ‰©å±•å’Œå®é™…åº”ç”¨" aria-label="Permalink to &quot;Smolçš„æ‰©å±•å’Œå®é™…åº”ç”¨&quot;">â€‹</a></h3><p>ç”±äºå…¶è½»é‡å’Œé«˜æ•ˆçš„ç‰¹æ€§ï¼ŒSmolä¸ä»…é€‚ç”¨äºå°å‹é¡¹ç›®ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸­å‘æŒ¥å·¨å¤§ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ç”¨äºæ„å»ºé«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡å™¨ã€å¾®æœåŠ¡ä»¥åŠIoTè®¾å¤‡çš„å¼‚æ­¥åº”ç”¨ç­‰ã€‚</p><h3 id="ç»“è¯­-2" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­-2" aria-label="Permalink to &quot;ç»“è¯­&quot;">â€‹</a></h3><p>Smolä»¥å…¶ä¼˜é›…å’Œç®€æ´çš„è®¾è®¡ï¼Œåœ¨Rustçš„å¼‚æ­¥ç¼–ç¨‹ç”Ÿæ€ä¸­å æ®äº†ä¸€å¸­ä¹‹åœ°ã€‚å®ƒé€šè¿‡æä¾›æœ€å°è€Œä¸°å¯Œçš„APIï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾åœ°ç¼–å†™é«˜æ•ˆçš„å¼‚æ­¥ä»£ç ã€‚æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„Rustç¨‹åºå‘˜ï¼ŒSmoléƒ½æ˜¯å®ç°å¼‚æ­¥ç¼–ç¨‹çš„ä¼˜ç§€é€‰æ‹©ã€‚éšç€Rustç”Ÿæ€çš„ä¸æ–­å£®å¤§ï¼ŒSmolåŠå…¶èƒŒåçš„æ€æƒ³æ— ç–‘ä¼šç»§ç»­æ¿€åŠ±å’Œå½±å“æœªæ¥çš„å¼‚æ­¥è¿è¡Œæ—¶è®¾è®¡ã€‚</p><h1 id="gui" tabindex="-1">GUI <a class="header-anchor" href="#gui" aria-label="Permalink to &quot;GUI&quot;">â€‹</a></h1><h2 id="slint" tabindex="-1">Slint <a class="header-anchor" href="#slint" aria-label="Permalink to &quot;Slint&quot;">â€‹</a></h2><p><a href="https://mp.weixin.qq.com/s/IABJvefYj43NjWXZL87Nkg" target="_blank" rel="noreferrer">å›½äº§ä½æˆæœ¬å•ç‰‡æœºä¸­è¿è¡ŒRust GUI (qq.com)</a></p><p>Slint æ˜¯ä¸€ä¸ªå£°æ˜æ€§ GUI å·¥å…·åŒ…ï¼Œç”¨äºä¸º Rustã€C++ æˆ– JavaScript åº”ç”¨ç¨‹åºæ„å»ºæœ¬æœºç”¨æˆ·ç•Œé¢ã€‚</p><h3 id="slint-èµ„æ–™" tabindex="-1">Slint èµ„æ–™ <a class="header-anchor" href="#slint-èµ„æ–™" aria-label="Permalink to &quot;Slint èµ„æ–™&quot;">â€‹</a></h3><ul><li>æŒ‡å—ï¼š<a href="https://slint-ui.com/releases/1.0.2/docs/slint/index.html" target="_blank" rel="noreferrer">https://slint-ui.com/releases/1.0.2/docs/slint/index.html</a></li><li>æ–‡æ¡£ï¼š<a href="https://slint-ui.com/releases/1.0.2/docs/rust/slint" target="_blank" rel="noreferrer">https://slint-ui.com/releases/1.0.2/docs/rust/slint</a></li><li>ä»“åº“ï¼š<a href="https://github.com/slint-ui/slint" target="_blank" rel="noreferrer">https://github.com/slint-ui/slint</a></li><li>æ¨¡æ¿ï¼š<a href="https://github.com/slint-ui/slint-rust-template" target="_blank" rel="noreferrer">https://github.com/slint-ui/slint-rust-template</a></li><li>ç¤ºä¾‹ï¼š<a href="https://github.com/slint-ui/slint/tree/master/examples" target="_blank" rel="noreferrer">https://github.com/slint-ui/slint/tree/master/examples</a></li><li>æ•™ç¨‹ï¼š<a href="https://slint-ui.com/releases/1.0.2/docs/tutorial/rust" target="_blank" rel="noreferrer">https://slint-ui.com/releases/1.0.2/docs/tutorial/rust</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTgxNzg3OQ==&amp;mid=2247484143&amp;idx=1&amp;sn=903c65961459daee860bffd5c99602e5&amp;chksm=cfce0c61f8c94b764529048bb02ccd66bcf26c9fdc74c7b63599f380c5a52412d641bf5918c4&amp;scene=132&amp;exptype=timeline_recommend_article_extendread_samebiz&amp;show_related_article=1&amp;subscene=0&amp;scene=132#wechat_redirect" target="_blank" rel="noreferrer">Rust å¼€å‘ æ¢ç´¢ Slint UI 1.5 å®‰å“ (qq.com)</a></li></ul><p><a href="https://mp.weixin.qq.com/s/ZmnG4Cu4R5C45vzcv9catQ" target="_blank" rel="noreferrer">Rust UI æ¡†æ¶ï¼šç”¨ Rust å’Œ Slint åˆ¶ä½œä¸€ä¸ªç®€æ˜“è®¡ç®—å™¨ï¼ˆLive codingï¼‰ (qq.com)</a></p><p><a href="https://slint.dev/blog/announcing-slint-1.0" target="_blank" rel="noreferrer">Slint 1.0ï¼šä¸‹ä¸€ä»£åŸç”Ÿ GUI å·¥å…·åŒ…æˆç†Ÿ â€” Slint åšå®¢</a></p><h2 id="dioxus-é€‚ç”¨äº-webã€æ¡Œé¢ã€ç§»åŠ¨è®¾å¤‡ç­‰çš„å…¨æ ˆ-gui-åº“ã€‚" tabindex="-1">Dioxusï¼šé€‚ç”¨äº Webã€æ¡Œé¢ã€ç§»åŠ¨è®¾å¤‡ç­‰çš„å…¨æ ˆ GUI åº“ã€‚ <a class="header-anchor" href="#dioxus-é€‚ç”¨äº-webã€æ¡Œé¢ã€ç§»åŠ¨è®¾å¤‡ç­‰çš„å…¨æ ˆ-gui-åº“ã€‚" aria-label="Permalink to &quot;Dioxusï¼šé€‚ç”¨äº Webã€æ¡Œé¢ã€ç§»åŠ¨è®¾å¤‡ç­‰çš„å…¨æ ˆ GUI åº“ã€‚&quot;">â€‹</a></h2><ul><li>GitHubï¼š<a href="https://github.com/dioxuslabs/dioxus" target="_blank" rel="noreferrer">https://github.com/dioxuslabs/dioxus</a></li><li>å®˜ç½‘ï¼š<a href="https://dioxuslabs.com/" target="_blank" rel="noreferrer">https://dioxuslabs.com/</a></li></ul><h3 id="ä»€ä¹ˆæ˜¯-dioxus" tabindex="-1">ä»€ä¹ˆæ˜¯ Dioxus ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-dioxus" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Dioxus ï¼Ÿ&quot;">â€‹</a></h3><p>Dioxus æ˜¯ä¸€ä¸ªä½¿ç”¨ Rust ç¼–ç¨‹è¯­è¨€æ„å»ºçš„è·¨å¹³å°ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰æ¡†æ¶ã€‚å®ƒå—åˆ°æµè¡Œçš„ React åº“çš„å¯å‘ï¼Œä¸“æ³¨äºä¸ºå¼€å‘è€…æä¾›ä¸€ç§ä¼˜é›…ã€é«˜æ•ˆä¸”ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„ç¼–ç¨‹ä½“éªŒã€‚Dioxus æ—¨åœ¨å…è®¸å¼€å‘è€…ä½¿ç”¨å•ä¸€çš„ä»£ç åº“æ¥åˆ›å»ºè¿è¡Œåœ¨æ¡Œé¢ã€Webã€ç§»åŠ¨è®¾å¤‡ç­‰å¤šä¸ªå¹³å°ä¸Šçš„åº”ç”¨ç¨‹åºï¼Œéå¸¸å¥½ç”¨ã€‚</p><h3 id="dioxus-æ¡†æ¶çš„ç‹¬ç‰¹çš„ç‰¹æ€§" tabindex="-1">Dioxus æ¡†æ¶çš„ç‹¬ç‰¹çš„ç‰¹æ€§ <a class="header-anchor" href="#dioxus-æ¡†æ¶çš„ç‹¬ç‰¹çš„ç‰¹æ€§" aria-label="Permalink to &quot;Dioxus æ¡†æ¶çš„ç‹¬ç‰¹çš„ç‰¹æ€§&quot;">â€‹</a></h3><ul><li><strong>è·¨å¹³å°å…¼å®¹æ€§</strong>ï¼šDioxus æ”¯æŒå¤šç§å¹³å°ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ¡Œé¢ã€Webã€ç§»åŠ¨è®¾å¤‡ç­‰ã€‚</li><li><strong>åŸºäº Rust çš„æ€§èƒ½å’Œå®‰å…¨æ€§</strong>ï¼šåˆ©ç”¨ Rust è¯­è¨€çš„ä¼˜åŠ¿ï¼ŒDioxus æä¾›äº†é«˜æ€§èƒ½å’Œå†…å­˜å®‰å…¨çš„ UI å¼€å‘ä½“éªŒã€‚</li><li><strong>React é£æ ¼çš„ API è®¾è®¡</strong>ï¼šDioxus çš„ä½œè€…æœ€åˆæ˜¯æŒ‰ç…§ React è®¾è®¡çš„è¿™ä¸ªæ¡†æ¶ï¼Œå†…éƒ¨å®ç°å’Œ API é£æ ¼éƒ½æ˜¯ä¸¥æ ¼æŒ‰ç…§ React Style åˆ¶ä½œçš„ï¼Œå°½ç®¡åç»­æœ‰æ‰€å˜åŠ¨ä»¥æ›´å¥½åœ°é€‚åº” Rust è¯­è¨€çš„ç‰¹æ€§ã€‚</li><li><strong>å£°æ˜å¼ UI ç¼–ç¨‹</strong>ï¼šä½œä¸ºä¸€ä¸ªå£°æ˜å¼æ¡†æ¶ï¼ŒDioxus å…è®¸å¼€å‘è€…é€šè¿‡ç®€å•å£°æ˜æ¥è®¾è®¡ UIï¼Œè€Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†å…ƒç´ ã€‚</li><li><strong>å¼‚æ­¥ç¼–ç¨‹æ”¯æŒ</strong>ï¼šDioxus æä¾›äº† UseFuture Hooksï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾å¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚ç­‰ã€‚</li><li><strong>è·¯ç”±å™¨æ”¯æŒ</strong>ï¼šDioxus å†…ç½®äº†è·¯ç”±å™¨æ”¯æŒï¼Œå…è®¸å¼€å‘è€…åœ¨åº”ç”¨ç¨‹åºä¸­è½»æ¾å®ç°ä¸åŒé¡µé¢çš„å¯¼èˆªå’ŒçŠ¶æ€ç®¡ç†ã€‚</li></ul><h3 id="æ”¯æŒçš„å¹³å°" tabindex="-1">æ”¯æŒçš„å¹³å° <a class="header-anchor" href="#æ”¯æŒçš„å¹³å°" aria-label="Permalink to &quot;æ”¯æŒçš„å¹³å°&quot;">â€‹</a></h3><p>ç›®å‰å·²ç»æ”¯æŒçš„å¹³å°ä¹Ÿæ˜¯éå¸¸ä¸°å¯Œäº†ï¼ŒåŒ…æ‹¬ç½‘ç«™é¡¹ç›®ã€æ¡Œé¢åº”ç”¨ã€ç§»åŠ¨ç«¯åº”ç”¨åŠç»ˆç«¯ç¨‹åºç­‰ï¼Œæ›´å¤šè¯¦ç»†å¯ä»¥ç›´æ¥åˆ°å®˜ç½‘æŸ¥é˜…ã€‚</p><h3 id="é€‰æ‹©-dioxus-çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" tabindex="-1">é€‰æ‹© Dioxus çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#é€‰æ‹©-dioxus-çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;é€‰æ‹© Dioxus çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h3><ul><li><strong>å¼€å‘è€…å‹å¥½çš„å·¥å…·æ”¯æŒ</strong>ï¼šDioxus æä¾›äº†è‡ªåŠ¨æ ¼å¼åŒ–çš„ RSX ä»£ç ï¼Œè¿™ç§æ ¼å¼æ˜¯ Dioxus çš„ä¸“æœ‰æ ‡è®°è¯­è¨€ï¼Œç”¨äºå£°æ˜å¼åœ°ç¼–å†™ UI ä»£ç ã€‚æ­¤å¤–ï¼ŒDioxus è¿˜æœ‰ VSCode æ’ä»¶ï¼Œè¿›ä¸€æ­¥æé«˜äº†å¼€å‘æ•ˆç‡å’Œä½“éªŒã€‚</li><li><strong>çƒ­åŠ è½½å’Œè·¨å¹³å°æ”¯æŒ</strong>ï¼šDioxus æ”¯æŒçƒ­åŠ è½½åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥åœ¨ä¸é‡å¯åº”ç”¨çš„æƒ…å†µä¸‹å®æ—¶æŸ¥çœ‹ä»£ç æ›´æ”¹çš„æ•ˆæœã€‚è¿™ä¸€ç‰¹æ€§ä¸ä»…é€‚ç”¨äºæ¡Œé¢ç¨‹åºï¼Œä¹Ÿé€‚ç”¨äºç½‘é¡µç¨‹åºï¼Œæå¤§åœ°æå‡äº†å¼€å‘æµç¨‹çš„ä¾¿æ·æ€§ã€‚</li><li><strong>å…¨é¢ä¸”è¯¦å°½çš„æ–‡æ¡£</strong>ï¼šDioxus éå¸¸é‡è§†æ–‡æ¡£çš„å®Œå–„ï¼Œæä¾›äº†å…¨é¢çš„å¼€å‘æŒ‡å—å’Œå¯¹æ‰€æœ‰ HTML å…ƒç´ çš„è¯¦å°½æ–‡æ¡£æ”¯æŒï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¹¶æœ‰æ•ˆè§£å†³é—®é¢˜ã€‚</li><li><strong>å¯æ‰©å±•æ€§å’Œçµæ´»æ€§</strong>ï¼šDioxus çš„è®¾è®¡å…è®¸å¼€å‘è€…è½»æ¾æ„å»ºæ–°çš„æ¸²æŸ“å™¨ï¼Œé€šè¿‡å®ç°ä¸€ä¸ªç®€å•çš„ä¼˜åŒ–å †æ ˆæœºï¼Œå¯ä»¥æ‰©å±•æ¡†æ¶çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œå¼€å‘è€…è¿˜å¯ä»¥æ„å»ºå¹¶åˆ†äº«è‡ªå·±çš„ç»„ä»¶ä»£ç ï¼Œå¢åŠ äº†æ¡†æ¶çš„å¯å®šåˆ¶æ€§ã€‚</li></ul><h2 id="druid" tabindex="-1">Druid <a class="header-anchor" href="#druid" aria-label="Permalink to &quot;Druid&quot;">â€‹</a></h2><ul><li>GitHubï¼š<a href="https://github.com/linebender/druid" target="_blank" rel="noreferrer">https://github.com/linebender/druid</a></li><li><a href="https://linebender.org/druid/" target="_blank" rel="noreferrer">https://linebender.org/druid/</a></li><li><a href="https://github.com/linebender/druid/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer">https://github.com/linebender/druid/blob/master/CHANGELOG.md</a></li><li><a href="https://raphlinus.github.io/rust/gui/2022/05/07/ui-architecture.html" target="_blank" rel="noreferrer">https://raphlinus.github.io/rust/gui/2022/05/07/ui-architecture.html</a></li></ul><p>åˆ«ç”¨äº†ï¼ŒåŸå› ï¼š<a href="https://mp.weixin.qq.com/s/JOzdbfcKAOqcVAWnWSYKdA" target="_blank" rel="noreferrer">Rust åŸç”Ÿ UI æ¡†æ¶ Druid è¢«å–Šç»ˆæ­¢äº†ï¼Œå¹¶å®£å¸ƒ xilem æ‰æ˜¯æœªæ¥ï¼ (qq.com)</a></p><h3 id="druid-æ¡†æ¶æ¦‚è¿°" tabindex="-1">Druid æ¡†æ¶æ¦‚è¿° <a class="header-anchor" href="#druid-æ¡†æ¶æ¦‚è¿°" aria-label="Permalink to &quot;Druid æ¡†æ¶æ¦‚è¿°&quot;">â€‹</a></h3><p>Druid é‡‡ç”¨ç±»ä¼¼äº React çš„å“åº”å¼æ¨¡å‹ï¼Œä½¿å¾—æ•°æ®å’Œ UI ä¹‹é—´å¯ä»¥ä¿æŒåŒæ­¥æ›´æ–°ã€‚ä½†æ˜¯ Druid è¿˜æ‹¥æœ‰è‡ªå·±ç‹¬ç‰¹çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å¼¹æ€§ç›’å­å¸ƒå±€ï¼ˆflexboxï¼‰çš„æ ·å¼è®¾è®¡ã€æ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†æœºåˆ¶ã€‚Druid åŠ›æ±‚æä¾›å¹³å°åŸç”Ÿçš„å¤–è§‚å’Œæ„Ÿè§‰ï¼Œå®ƒé€šè¿‡ä½¿ç”¨åº•å±‚å¹³å°è‡ªå·±çš„æ§ä»¶å®ç°è¿™ä¸€ç‚¹ã€‚å½“å‰çš„ Druid æ”¯æŒèŒƒå›´åŒ…æ‹¬ Windowsã€macOSã€Linux ä»¥åŠ Redox ç­‰å¤šä¸ªå¹³å°ã€‚</p><h3 id="druid-çš„æ ¸å¿ƒç‰¹æ€§" tabindex="-1">Druid çš„æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#druid-çš„æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;Druid çš„æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><p>Druid çš„æ ¸å¿ƒç‰¹æ€§ä¸»è¦ä½“ç°åœ¨ï¼š</p><ol><li><strong>å¹³å°åŸç”Ÿå¤–è§‚å’Œæ„Ÿè§‰</strong>ï¼šä½¿ç”¨å¹³å°è‡ªå·±çš„æ§ä»¶ï¼Œä¸ºä¸åŒçš„æ“ä½œç³»ç»Ÿå¹³å°æä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒã€‚</li><li><strong>å“åº”å¼æ•°æ®æ¨¡å‹</strong>ï¼šä½¿ç”¨ Rust çš„ç±»å‹ç³»ç»Ÿæ¥ç®€åŒ–æ•°æ®ä¸ UI é—´çš„åŒæ­¥ã€‚</li><li><strong>çµæ´»çš„å¸ƒå±€ç³»ç»Ÿ</strong>ï¼šåŸºäº flexbox æ¨¡å‹ï¼Œå¯ä»¥è½»æ¾åœ°è®¾è®¡å“åº”å¼å¸ƒå±€ã€‚</li><li><strong>æ•°æ®ç»‘å®š</strong>ï¼šå…è®¸ç»‘å®šåº”ç”¨ç¨‹åºä¸­çš„æ•°æ®ï¼Œä½¿å¾—æ•°æ®æ›´æ–°æ—¶èƒ½å¤Ÿè‡ªåŠ¨åæ˜ åˆ°ç•Œé¢ä¸Šã€‚</li><li><strong>äº‹ä»¶å¤„ç†</strong>ï¼šæä¾›å¼ºå¤§çš„äº‹ä»¶å¤„ç†ç³»ç»Ÿï¼Œèƒ½å¤Ÿçµæ´»åº”å¯¹ç”¨æˆ·æ“ä½œå’Œå†…éƒ¨äº‹ä»¶ã€‚</li></ol><h3 id="å®‰è£…-druid" tabindex="-1">å®‰è£… Druid <a class="header-anchor" href="#å®‰è£…-druid" aria-label="Permalink to &quot;å®‰è£… Druid&quot;">â€‹</a></h3><p>å®‰è£… Druid å‰ï¼Œéœ€è¦ä¿è¯ Rust å¼€å‘ç¯å¢ƒå·²ç»è¢«æ­£ç¡®å®‰è£…ã€‚Druid å¯ä»¥é€šè¿‡ Rust çš„åŒ…ç®¡ç†å·¥å…· Cargo è½»æ¾å®‰è£…ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#61AFEF;">druid</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.7.0&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‘é¡¹ç›®çš„<code>Cargo.toml</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸Šè¿°ä¾èµ–å¹¶ä¿å­˜åï¼Œè¿è¡Œ<code>cargo build</code>å‘½ä»¤æ¥å®‰è£… Druid åŠå…¶ä¾èµ–åº“ã€‚</p><h3 id="åˆ›å»ºä¸€ä¸ªç®€å•çš„-druid-åº”ç”¨" tabindex="-1">åˆ›å»ºä¸€ä¸ªç®€å•çš„ Druid åº”ç”¨ <a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªç®€å•çš„-druid-åº”ç”¨" aria-label="Permalink to &quot;åˆ›å»ºä¸€ä¸ªç®€å•çš„ Druid åº”ç”¨&quot;">â€‹</a></h3><h4 id="step-1-ä¸»è¦æ•°æ®ç»“æ„å®šä¹‰" tabindex="-1">Step 1: ä¸»è¦æ•°æ®ç»“æ„å®šä¹‰ <a class="header-anchor" href="#step-1-ä¸»è¦æ•°æ®ç»“æ„å®šä¹‰" aria-label="Permalink to &quot;Step 1: ä¸»è¦æ•°æ®ç»“æ„å®šä¹‰&quot;">â€‹</a></h4><p>åœ¨åˆ›å»º GUI åº”ç”¨æ—¶ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰åº”ç”¨çš„ä¸»è¦æ•°æ®ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°†ä¼šä½œä¸ºæ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†çš„åŸºç¡€ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> AppState</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    value</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">u32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Default</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppState</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> default</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        AppState</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="step-2-æ„å»º-ui-ç•Œé¢" tabindex="-1">Step 2: æ„å»º UI ç•Œé¢ <a class="header-anchor" href="#step-2-æ„å»º-ui-ç•Œé¢" aria-label="Permalink to &quot;Step 2: æ„å»º UI ç•Œé¢&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ„å»º GUI çš„å¸ƒå±€å’Œæ§ä»¶ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> build_ui</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Widget</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">AppState</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä½¿ç”¨Flexæ„å»ºä¸€ä¸ªç®€å•çš„å‚ç›´å¸ƒå±€</span></span>
<span class="line"><span style="color:#E5C07B;">    Flex</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">column</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_child</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Increment&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">on_click</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_ctx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> AppState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_env</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            data</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">with_child</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">AppState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_env</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">Env</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Value: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">.value)))</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŒ…å«æŒ‰é’®å’Œæ ‡ç­¾çš„ç®€å•å‚ç›´å¸ƒå±€ã€‚æŒ‰é’®è¢«ç»‘å®šäº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œæ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå¯¼è‡´<code>AppState</code>ä¸­çš„<code>value</code>å¢åŠ  1ã€‚</p><h4 id="step-3-è¿è¡Œåº”ç”¨" tabindex="-1">Step 3: è¿è¡Œåº”ç”¨ <a class="header-anchor" href="#step-3-è¿è¡Œåº”ç”¨" aria-label="Permalink to &quot;Step 3: è¿è¡Œåº”ç”¨&quot;">â€‹</a></h4><p>æœ€åï¼Œæˆ‘ä»¬åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨<code>AppLauncher</code>æ¥å¯åŠ¨å¹¶è¿è¡Œåº”ç”¨ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    AppLauncher</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">with_window</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowDesc</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">build_ui</span><span style="color:#ABB2BF;">()))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">use_simple_logger</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">launch</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppState</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to launch application&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„ Druid åº”ç”¨çš„åˆ›å»ºæ–¹å¼ã€‚å®Œæ•´çš„åº”ç”¨å°†åŒ…å«æ›´å¤šçš„å¸ƒå±€ã€æ§ä»¶ä»¥åŠäº‹ä»¶å¤„ç†ã€‚</p><h3 id="æ‰©å±•åŠŸèƒ½-è‡ªå®šä¹‰æ§ä»¶ä¸ä¸»é¢˜" tabindex="-1">æ‰©å±•åŠŸèƒ½ï¼šè‡ªå®šä¹‰æ§ä»¶ä¸ä¸»é¢˜ <a class="header-anchor" href="#æ‰©å±•åŠŸèƒ½-è‡ªå®šä¹‰æ§ä»¶ä¸ä¸»é¢˜" aria-label="Permalink to &quot;æ‰©å±•åŠŸèƒ½ï¼šè‡ªå®šä¹‰æ§ä»¶ä¸ä¸»é¢˜&quot;">â€‹</a></h3><p>Druid ä¸ä»…é™äºå†…ç½®æ§ä»¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶ä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚æ­¤å¤–ï¼Œé€šè¿‡ä¿®æ”¹æ§ä»¶çš„<code>Env</code>ç¯å¢ƒï¼Œè¿˜å¯ä»¥å¯¹æ§ä»¶çš„ä¸»é¢˜è¿›è¡Œè‡ªå®šä¹‰ï¼Œä»¥åŒ¹é…åº”ç”¨ç¨‹åºçš„é£æ ¼éœ€æ±‚ã€‚</p><h3 id="ç»“è®º" tabindex="-1">ç»“è®º <a class="header-anchor" href="#ç»“è®º" aria-label="Permalink to &quot;ç»“è®º&quot;">â€‹</a></h3><p>Druid æ¡†æ¶æ˜¯ Rust è¯­è¨€ä¸­ç”¨äºåˆ›å»º GUI åº”ç”¨çš„æœ‰åŠ›å·¥å…·ã€‚å®ƒçš„è®¾è®¡ç†å¿µã€çµæ´»çš„å¸ƒå±€åŠäº‹ä»¶å¤„ç†æœºåˆ¶ä¸ºå¼€å‘å¯Œæœ‰å“åº”æ€§å’ŒåŸç”Ÿä½“éªŒçš„åº”ç”¨ç¨‹åºæä¾›äº†åšå®çš„åŸºç¡€ã€‚å¯¹äºé‚£äº›æ¢ç´¢ Rust å¹¶æ„¿æ„å°è¯•æ–°æ–¹æ³•çš„ GUI å¼€å‘è€…æ¥è¯´ï¼ŒDruid æ— ç–‘æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„é€‰æ‹©ã€‚</p><h2 id="gtk4-rs" tabindex="-1">GTK4-RS <a class="header-anchor" href="#gtk4-rs" aria-label="Permalink to &quot;GTK4-RS&quot;">â€‹</a></h2><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/gtk-rs/gtk4-rs" target="_blank" rel="noreferrer">gtk-rs/gtk4-rsï¼šGTK 4 çš„ Rust ç»‘å®š (github.com)</a></p><h2 id="frui-å¼€å‘è€…å‹å¥½çš„-gui-æ¡†æ¶" tabindex="-1">Fruiï¼šå¼€å‘è€…å‹å¥½çš„ GUI æ¡†æ¶ <a class="header-anchor" href="#frui-å¼€å‘è€…å‹å¥½çš„-gui-æ¡†æ¶" aria-label="Permalink to &quot;Fruiï¼šå¼€å‘è€…å‹å¥½çš„ GUI æ¡†æ¶&quot;">â€‹</a></h2><h3 id="å‰è¨€-2" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€-2" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h3><p>Frui æ˜¯ä¸€ä¸ªå¯¹å¼€å‘è€…ç›¸å½“å‹å¥½çš„ UI æ¡†æ¶ï¼Œå®ƒä½¿å¾—å¼€å‘è€…æ„å»ºç”¨æˆ·ç•Œé¢å˜å¾—ç®€å•ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šå— Flutter å¯å‘ã€ç”¨çº¯ Rust å†™çš„ UI æ¡†æ¶ã€‚å¦‚æœä½ äº†è§£ Flutterï¼Œæˆ–è€… Vue/React çš„è¯ï¼Œå­¦ä¹ è¿™äº›ä¸œè¥¿å°†ä¼šå˜å¾—å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯å¦‚æœä½ å¹¶ä¸äº†è§£ï¼Œè¿˜æ˜¯å»ºè®®ä½ å»å­¦ä¹ åŸºç¡€å†…å®¹ï¼Œå¹¶ä¸”æ¨èä¸€æœ¬ä¹¦ã€ŠFlutter å®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹ï¼Œè¯»è€…å¯ä»¥åœ¨ Github ä¸Šè‡ªè¡Œæœç´¢ã€‚æœ¬æœŸå†…å®¹è¿˜æ˜¯è€è§„çŸ©ï¼Œå†™ä¸ª Counter çš„ Demo æ¥çœ‹çœ‹ã€‚</p><blockquote><p>ç”±äº Frui ç°åœ¨åˆšå‘è¡Œç¬¬ä¸€ç‰ˆï¼Œæ‰€ä»¥è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œæœ¬æœŸå†…å®¹ä¸»è¦ä½“éªŒå…¶ç¼–ç æ–¹å¼ã€‚</p></blockquote><h3 id="ä¸€ã€æ–°å»ºé¡¹ç›®" tabindex="-1">ä¸€ã€æ–°å»ºé¡¹ç›® <a class="header-anchor" href="#ä¸€ã€æ–°å»ºé¡¹ç›®" aria-label="Permalink to &quot;ä¸€ã€æ–°å»ºé¡¹ç›®&quot;">â€‹</a></h3><h4 id="_1-åˆ›å»ºé¡¹ç›®-1" tabindex="-1">1. åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_1-åˆ›å»ºé¡¹ç›®-1" aria-label="Permalink to &quot;1. åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>è¿™é‡Œä¾æ—§è¿˜æ˜¯æˆ‘ä»¬çš„è€è§„çŸ©ï¼Œåˆ›å»ºä¸€ä¸ª Counter çš„ Demo é¡¹ç›®ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo new gui_frui_001</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-å¯¼å…¥-idea" tabindex="-1">2. å¯¼å…¥ idea <a class="header-anchor" href="#_2-å¯¼å…¥-idea" aria-label="Permalink to &quot;2. å¯¼å…¥ idea&quot;">â€‹</a></h4><p>ä½¿ç”¨ idea æ‰“å¼€åˆšæ‰åˆ›å»ºçš„é¡¹ç›®</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_cafc4c4b05104dbeb9c37579f724cc96.n75ve3Z1.png" alt="image"></p><h4 id="_3-å¼•å…¥ä¾èµ–" tabindex="-1">3. å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_3-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;3. å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨<code>Cargo.toml</code>ä¸­å¯¼å…¥ä¾èµ–</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>frui = &quot;0.0.1&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_0c0ec569f18b484d8715279401ec3109.BtPP-Xpe.png" alt="image"></p><h4 id="_4-æ‰§è¡Œæ¡ˆä¾‹ä»£ç " tabindex="-1">4. æ‰§è¡Œæ¡ˆä¾‹ä»£ç  <a class="header-anchor" href="#_4-æ‰§è¡Œæ¡ˆä¾‹ä»£ç " aria-label="Permalink to &quot;4. æ‰§è¡Œæ¡ˆä¾‹ä»£ç &quot;">â€‹</a></h4><p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°<code>main.rs</code></p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#![feature(min_specialization)]</span></span>
<span class="line"><span style="color:#ABB2BF;">#![feature(type_alias_impl_trait)]</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> frui</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">ViewWidget</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> ViewWidget</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> App</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt;(&amp;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Center</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">child</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Hello, World!&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    run_app</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶å idea å°±ä¼šæŠ¥é”™</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_c8773e15111b4fbfaae5542c9bba415b.WPVr9hP1.png" alt="image"></p><p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯ç¨³å®šç‰ˆçš„ Rustï¼Œå› æ­¤ä¸€äº›ç‰¹æ€§æ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥è¦å®‰è£… nightly ç‰ˆæœ¬çš„ Rustï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹ä»£ç </p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rustup toolchain install nightly</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_9fc03509a1f64e94864b2c7155def447.CTCeAOTN.png" alt="image">ç„¶ååˆ—å‡ºå½“å‰ Rust çš„ç‰ˆæœ¬</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rustup toolchain list</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_10f29acf5c4d4b9fa420e2fe23b2d92c.ClwSLsan.png" alt="image">ç°åœ¨æ¿€æ´»<code>nightly</code>ç‰ˆæœ¬çš„ç¼–è¯‘å™¨</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rustup default nightly</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_3a0c269acdac4968966d9fe080e49584.CXNdAOGC.png" alt="image">æ¥ä¸‹æ¥å»é¡¹ç›®ç›®å½•è¦†ç›–é…ç½®æ–‡ä»¶</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>rustup override set nightly</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_5867227816b344eaa63ac5d583050c70.RjFsvzRZ.png" alt="image">æ­¤æ—¶ idea è¿˜ä¼šæç¤ºé”™è¯¯çš„ï¼Œè¿™æ˜¯å› ä¸º nightly æ²¡æœ‰æºç ï¼Œæ’ä»¶é»˜è®¤ç”¨çš„ stable çš„æºç ï¼Œæ‰€ä»¥æ£€æŸ¥è¯­æ³•å‡ºé”™äº†ï¼Œä¸å¿…ç®¡ä»–ï¼Œç›´æ¥è¿è¡Œ</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_79cb6b1223ee4df7886b78403b5b0552.Dt5PoNuj.png" alt="image"></p><p>å¦‚æœä½ ä¹Ÿè¿è¡Œäº†ä¸‹é¢çš„çª—å£ï¼Œè¯´æ˜ä½ å·²ç»é…ç½®æˆåŠŸäº†ã€‚<img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_f4ee5aae601b48c9bc6e58241a296303.19oIrp3H.png" alt="image"></p><h3 id="äºŒã€å®ç°è®¡æ•°å™¨-demo" tabindex="-1">äºŒã€å®ç°è®¡æ•°å™¨ Demo <a class="header-anchor" href="#äºŒã€å®ç°è®¡æ•°å™¨-demo" aria-label="Permalink to &quot;äºŒã€å®ç°è®¡æ•°å™¨ Demo&quot;">â€‹</a></h3><h4 id="_1-å¯¼å…¥èµ„æº" tabindex="-1">1.å¯¼å…¥èµ„æº <a class="header-anchor" href="#_1-å¯¼å…¥èµ„æº" aria-label="Permalink to &quot;1.å¯¼å…¥èµ„æº&quot;">â€‹</a></h4><p>åœ¨å®ç° Counter Demo ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥æ¡†æ¶æ‰€éœ€è¦çš„èµ„æºï¼Œæˆ‘å‘ç°å…¶æ¡†æ¶å¹¶æœªæ‰“åŒ… UI ç›¸å…³çš„èµ„æºï¼Œè¦æ˜¯å’Œ Flutter é‚£æ ·å¯ä»¥ç›´æ¥ç”¨ Material çš„ UI å°±å¤ªå¥½äº†ï¼Œæˆ‘è§‰å¾—ä»¥åå¯èƒ½ä¼šå‡ºç±»ä¼¼çš„ã€‚</p><p>é¦–å…ˆéœ€è¦ä» Github ä¸Šçš„<code>frui-main\examples</code>å¤åˆ¶å‡º<code>misc</code>æ–‡ä»¶å¤¹åˆ°æˆ‘ä»¬é¡¹ç›®çš„ç›®å½•æ¥ï¼Œ</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_d4f5d43561924a4b899122898d7ad5ab.Dxoc6qfJ.png" alt="image"></p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_ababcddf24b547c1882d72ca9c6a4ecb.C6CkRZTr.png" alt="image">å¯ä»¥çœ‹åˆ°è¿™ä¸ªç‰ˆæœ¬ç›®å‰åªæä¾›äº†æŒ‰é’®å’Œå¼€å…³ï¼Œè¿˜æœ‰ Stateï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ¡†æ¶ç›¸å…³çš„å†…å®¹éƒ½å·²ç»å¯¼å…¥å®Œæ¯•ã€‚</p><h4 id="_2-ç¼–å†™çª—å£ä»£ç " tabindex="-1">2.ç¼–å†™çª—å£ä»£ç  <a class="header-anchor" href="#_2-ç¼–å†™çª—å£ä»£ç " aria-label="Permalink to &quot;2.ç¼–å†™çª—å£ä»£ç &quot;">â€‹</a></h4><p>Frui çš„ä»£ç å’Œ Flutter æ˜¯é«˜åº¦ç›¸ä¼¼çš„ï¼Œä»ç¼–å†™çª—å£ä»£ç è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥ã€‚é¦–å…ˆè¦åšçš„å°±æ˜¯å…ˆå®šä¹‰çª—å£ Stateï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† CrabCounterï¼Œå¹¶ä¸”å®ç° WidgetStateï¼Œå¹¶ä¸”ç»™ä¸€ä¸ªæ•´æ•°å‹çš„ Stateï¼Œç‰¹åˆ«é‡è¦çš„æ˜¯ä¸€å®šè¦å†™ create_state æ–¹æ³•ï¼Œåˆå§‹åŒ– Stateã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>#[derive(ViewWidget)]</span></span>
<span class="line"><span>struct CrabCounter;</span></span>
<span class="line"><span>impl WidgetState for CrabCounter {</span></span>
<span class="line"><span>    type State = isize;</span></span>
<span class="line"><span>    fn create_state(&amp;self) -&gt; Self::State { 0 }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ¥ä¸‹æ¥å°±æ˜¯è¦ç¼–å†™çª—å£ï¼Œå®ç°çª—å£é€»è¾‘ã€‚åœ¨è¿™é‡Œç»™ Crab Counter å®ç°äº† ViewWidget ç‰¹è´¨ï¼Œå…¶å¿…é¡»è¦å®ç°ä¸€ä¸ª build æ–¹æ³•ï¼Œè¿”å›æ„å»ºçš„çª—å£ï¼Œå…¶ä»£ç å¦‚ä¸‹</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> ViewWidget</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> CrabCounter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt;(&amp;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Column</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">space_between</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">60.0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">main_axis_size</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainAxisSize</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Max</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">cross_axis_size</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CrossAxisSize</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Max</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">main_axis_alignment</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainAxisAlignment</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">cross_axis_alignment</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CrossAxisAlignment</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">children</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">                Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{} ğŸ¦€&quot;</span><span style="color:#ABB2BF;">, *</span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">()))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">weight</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">FontWeight</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">BOLD</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                Row</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">space_between</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">children</span><span style="color:#ABB2BF;">((</span></span>
<span class="line"><span style="color:#E5C07B;">                        Button</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                            label</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;+&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">.),</span></span>
<span class="line"><span style="color:#E06C75;">                            on_click</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> *</span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state_mut</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                        },</span></span>
<span class="line"><span style="color:#E5C07B;">                        Button</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                            label</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">.),</span></span>
<span class="line"><span style="color:#E06C75;">                            on_click</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> *</span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state_mut</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">-=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                        },</span></span>
<span class="line"><span style="color:#ABB2BF;">                    )),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ))</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ä»¥ä¸Šä»£ç çš„å¸ƒå±€æ˜¯è¿™ä¸ªæ ·å­çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_3ff8e6cd1f8241ee92dc95ca5f4e9708.CY21TpY2.png" alt="image">è¦æ³¨æ„çš„æ˜¯ï¼ŒButton è‡³å°‘éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒ‰é’®çš„æ ‡ç­¾â€”â€”Textï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ Imageï¼Œç›®å‰å¹¶ä¸æ¸…æ¥šå®ƒæ˜¯å¦æœ‰è¿™ä¸ªç»„ä»¶äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯æŒ‰å®˜æ–¹çš„æ¥ï¼Œç›´æ¥ç”¨ Textï¼›ä¸€ä¸ªæ˜¯ç‚¹å‡»çš„å›è°ƒå‡½æ•°ï¼Œ</p><h4 id="_3-è¿è¡Œæ•ˆæœ" tabindex="-1">3. è¿è¡Œæ•ˆæœ <a class="header-anchor" href="#_3-è¿è¡Œæ•ˆæœ" aria-label="Permalink to &quot;3. è¿è¡Œæ•ˆæœ&quot;">â€‹</a></h4><p>æ­¤æ—¶æˆ‘ä»¬è¿è¡Œ Counter ç¨‹åºï¼Œå¦‚æœè¿è¡Œæ²¡æœ‰é”™è¯¯ï¼Œé‚£åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_e9c9176020544a9895f7110ca6efb42e.XfrvmKAr.png" alt="image">ä¸Šé¢çš„ Text éƒ¨åˆ†ï¼Œå·¦è¾¹æ˜¯è®¡æ¬¡çš„æ•°å­—ï¼Œå³è¾¹æ˜¯ Rust çš„å‰ç¥¥ç‰© ğŸ¦€ï¼Œä¸‹é¢æ˜¯ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ª+ï¼Œä¸€ä¸ª-</p><p>Rust çš„å‰ç¥¥ç‰©æ˜¯ ğŸ¦€ï¼Œè€Œéå›¾ä¸­ç™½è‰²çš„æ ·å­ï¼Œå®˜æ–¹ç»™å‡ºçš„è¿è¡Œç»“æœåº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_e5a546a4ea374156a64520ad87225e04.CxtktnkD.png" alt="image">Rust æ˜¯æ”¯æŒè¿™ç§æ–‡æœ¬çš„ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¡¨ç°å‡ºæ¥å’Œå®˜æ–¹ç»™çš„æ¡ˆä¾‹æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h3 id="æ€»ç»“-4" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-4" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>æœ¬æœŸå­¦ä¹ äº†å¦ä¸€ä¸ªç”±çº¯ Rust å†™çš„ UI æ¡†æ¶â€”â€”Fruiï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹å¼€å‘è€…ç›¸å½“å‹å¥½çš„æ¡†æ¶ï¼Œå€Ÿé‰´äº Flutterï¼Œå¯æƒœæ˜¯åˆšèµ·æ­¥çš„æ¡†æ¶ï¼Œç›¸ä¿¡å…¶åœ¨ä»¥åçš„å‘å±•è‚¯å®šä¼šå˜å¾—æ›´å¥½ã€‚</p><p>Frui æ¡†æ¶çš„è·¯å­æ˜¯å­¦ä¹  Flutter çš„ï¼Œå…¶ä»£ç ä¹Ÿæ˜¯é«˜åº¦ç›¸ä¼¼ï¼Œä»£ç ä¹Ÿå®¹æ˜“ç†è§£ï¼Œç¡®å®åšåˆ°äº†å¯¹å¼€å‘äººå‘˜å‹å¥½ï¼Œè¿™æ˜¯éå¸¸å€¼å¾—è‚¯å®šçš„ï¼Œå­¦ä¹ è¿‡ Flutter çš„äººç”šè‡³å¯ä»¥ç›´æ¥è¿ç§»è¿‡æ¥ï¼Œä¸éœ€è¦å­¦ä¹ å¤ªå¤šçš„å†…å®¹ï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬ã€‚ä½†æ˜¯è¯¥é¡¹ç›®è¿˜å¤„åœ¨åˆšå¼€å§‹é˜¶æ®µï¼Œæˆ‘è§‰å¾—å¯ä»¥å…³æ³¨ä¸€æ‰‹ï¼Œè¯¥æ¡†æ¶å¦‚æœåšå®Œï¼Œå¯èƒ½æ˜¯ Rust çš„ä¸»æµæ¡†æ¶ã€‚æ­¤å¤–ï¼Œè¿™ä¸ª Counter è¿˜ä¸æ”¯æŒç‚¹å…³é—­æŒ‰é’®æ¥å…³é—­çª—å£ï¼Œæˆ‘è§‰å¾—è¿™å¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰å®ç°å…³é—­æŒ‰é’®çš„ä»£ç å¯¼è‡´çš„ï¼Œåç»­éšç€è¯¥é¡¹ç›®çš„å‘å±•ï¼Œä¼šè¡¥é½è¿™éƒ¨åˆ†å†…å®¹ã€‚</p><p>æ¯”è¾ƒèµ·ä¸ŠæœŸçš„ UI æ¡†æ¶â€”â€”Icedï¼Œå…¶æ¶æ„æ€æƒ³ä¸ Flutter ä¹Ÿæ˜¯é«˜åº¦ç›¸ä¼¼ï¼Œä¸ Frui ä¸åŒçš„æ˜¯ï¼ŒIced ä¸»è¦å€ŸåŠ©äºä¸€ä¸ª Sandboxï¼Œä½†æ˜¯å…¶ç¼–ç¨‹æ‰‹æ³•æ˜¯å¯¹å¼€å‘è€…æ¯”è¾ƒæœ‰å¥½çš„ã€‚åœ¨æˆ‘çš„ä½“éªŒä¸­ï¼Œä¸»è¦é‡åˆ°çš„æ˜¯æ–‡æ¡£ç‰ˆæœ¬é”™ä¹±ï¼Œä¸æ”¯æŒä¸­æ–‡ï¼Œæ‰€ä»¥å¯¼è‡´ä½“éªŒå¾ˆå·®ã€‚æˆ‘åœ¨åˆ«çš„åšä¸»ä¸‹é¢çœ‹åˆ° Iced æ˜¯æ”¯æŒä¸­æ–‡çš„ï¼Œä½†æ˜¯æˆ‘åŠ ä¸­æ–‡å°±ä¹±ç ï¼Œç›®å‰è¿˜ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆé—®é¢˜ã€‚</p><h4 id="å®Œæ•´ä»£ç -1" tabindex="-1">å®Œæ•´ä»£ç  <a class="header-anchor" href="#å®Œæ•´ä»£ç -1" aria-label="Permalink to &quot;å®Œæ•´ä»£ç &quot;">â€‹</a></h4><p>counter çš„å®Œæ•´ä»£ç </p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> frui</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rand</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Rng</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/// This widget will display a different number every time its state is lost.</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">ViewWidget</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> RandomState</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> WidgetState</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> RandomState</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> State</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> usize</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> create_state</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">&gt;(&amp;&#39;</span><span style="color:#E5C07B;">a</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        rand</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">thread_rng</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">gen</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> ViewWidget</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> RandomState</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt;(&amp;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">state</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/// This widget will display a different number every time it gets rebuilt.</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">ViewWidget</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> ChangesOnRebuild</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> ViewWidget</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> ChangesOnRebuild</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt;(&amp;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt;) -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">w</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">rand</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">thread_rng</span><span style="color:#ABB2BF;">().</span><span style="color:#C678DD;">gen</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">usize</span><span style="color:#ABB2BF;">&gt;().</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>æ­¤å¤„é™„ä¸Š Flutter çš„ Counter ä»£ç ï¼Œè¯»è€…å¯è§‚å¯Ÿå…¶å¼‚åŒï¼Œè‡³äº Flutter åšå¼€å‘çš„å¥½å¤„ï¼Œåªæœ‰å½“è¯»è€…çœŸæ­£å»ç”¨çš„æ—¶å€™æ‰ä¼šä½“ä¼šåˆ°äº†ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">class</span><span style="color:#E5C07B;"> MyHomePage</span><span style="color:#E06C75;"> extends</span><span style="color:#E5C07B;"> StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#D19A66;"> MyHomePage</span><span style="color:#ABB2BF;">({</span><span style="color:#E5C07B;">Key</span><span style="color:#ABB2BF;">? </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">required</span><span style="color:#E06C75;"> this</span><span style="color:#ABB2BF;">.title}) : </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  final</span><span style="color:#E5C07B;"> String</span><span style="color:#E06C75;"> title</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  @</span><span style="color:#C678DD;">override</span></span>
<span class="line"><span style="color:#E5C07B;">  State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">MyHomePage</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#61AFEF;">_MyHomePageState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E06C75;">class</span><span style="color:#E5C07B;"> _MyHomePageState</span><span style="color:#E06C75;"> extends</span><span style="color:#E5C07B;"> State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">MyHomePage</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">  int</span><span style="color:#E06C75;"> _counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  void</span><span style="color:#61AFEF;"> _incrementCounter</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#E06C75;">      _counter</span><span style="color:#ABB2BF;">++;</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  @</span><span style="color:#C678DD;">override</span></span>
<span class="line"><span style="color:#E5C07B;">  Widget</span><span style="color:#61AFEF;"> build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#61AFEF;"> Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      appBar: </span><span style="color:#61AFEF;">AppBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">        title</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">widget</span><span style="color:#ABB2BF;">.title),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#E06C75;">      body</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">        child</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">Column</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">          mainAxisAlignment: </span><span style="color:#E5C07B;">MainAxisAlignment</span><span style="color:#ABB2BF;">.center,</span></span>
<span class="line"><span style="color:#E06C75;">          children</span><span style="color:#ABB2BF;">: &lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&gt;[</span></span>
<span class="line"><span style="color:#C678DD;">            const</span><span style="color:#61AFEF;"> Text</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">              &#39;ç‚¹å‡»æŒ‰é’®çš„æ¬¡æ•°:&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#61AFEF;">            Text</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">              &#39;$_counter&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">              style</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Theme</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">).textTheme.headline4,</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">          ],</span></span>
<span class="line"><span style="color:#ABB2BF;">        ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      floatingActionButton: </span><span style="color:#61AFEF;">FloatingActionButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        onPressed: _incrementCounter,</span></span>
<span class="line"><span style="color:#E06C75;">        tooltip</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;Increment&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        child</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.add),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="iced-rust-åŸç”Ÿè·¨å¹³å°-gui-æ¡†æ¶" tabindex="-1">icedï¼šrust åŸç”Ÿè·¨å¹³å° GUI æ¡†æ¶ <a class="header-anchor" href="#iced-rust-åŸç”Ÿè·¨å¹³å°-gui-æ¡†æ¶" aria-label="Permalink to &quot;icedï¼šrust åŸç”Ÿè·¨å¹³å° GUI æ¡†æ¶&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/iced-rs/iced" target="_blank" rel="noreferrer">https://github.com/iced-rs/iced</a></p><p>å®˜ç½‘ï¼š<a href="https://iced.rs/" target="_blank" rel="noreferrer">https://iced.rs/</a></p><p>å­¦ä¹ ï¼š</p><p><a href="https://blog.csdn.net/weixin_47754149/article/details/127271805" target="_blank" rel="noreferrer">ã€ä¸€èµ·å­¦ Rust | æ¡†æ¶ç¯‡ | iced æ¡†æ¶ã€‘rust åŸç”Ÿè·¨å¹³å° GUI æ¡†æ¶â€”â€”iced<em>iced rust</em>å¹¿é¾™å®‡çš„åšå®¢-CSDN åšå®¢</a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjYxNTY3Mg==&amp;mid=2247493651&amp;idx=1&amp;sn=7e42f46ab501898ad72eec3e2e024314&amp;chksm=c0e76604f790ef123329fee9f37473b66506d0c3f3b1e69f84e77d2b5de91928814db9037df5&amp;cur_album_id=3386270396001402881&amp;scene=190#rd" target="_blank" rel="noreferrer">å†°ï¼ˆIcedï¼‰æ•™ç¨‹ â€”â€” ä¸€æ¬¾é¢å‘ Rust çš„è·¨å¹³å° GUI åº“ (qq.com)</a></p><h3 id="ä»‹ç»" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h3><ul><li><p>ç”±äºå…¶å¤šåŠŸèƒ½æ€§ï¼Œè¯¥ iced åº“æ˜¯æœ€å—æ¬¢è¿çš„ Rust åº“ä¹‹ä¸€ã€‚å°½ç®¡è¯¥åº“å·²åœ¨è®¸å¤šé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä½†å®ƒéå¸¸ä¸ç¨³å®šå¹¶ä¸”å‘å±•è¿…é€Ÿã€‚æ‚¨å¯ä»¥æ±‚åŠ©äºä½¿ç”¨è¾ƒæ—§çš„ç‰ˆæœ¬ï¼Œå› ä¸ºä¸»åˆ†æ”¯ä¸æ–­å˜åŒ–ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å¯èƒ½ä¼šå¾ˆæ˜‚è´µã€‚</p></li><li><p>iced æ˜¯ä¸€ä¸ªä¸æ¸²æŸ“å™¨æ— å…³çš„ã€åŒ…å«ç”µæ± çš„ã€ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„è·¨å¹³å° Rust åº“ï¼Œç”¨äºæ„å»º GUI å’Œå‰ç«¯ï¼Œå…¶çµæ„Ÿæ¥è‡ª Elm æ¶æ„ã€‚è¯¥ iced åº“æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ååº”å¼ç¼–ç¨‹æ¨¡å‹ï¼Œå…·æœ‰å¯¹å¼‚æ­¥æ“ä½œå’Œè‡ªå®šä¹‰å°éƒ¨ä»¶çš„ä¸€æµæ”¯æŒã€‚</p></li><li><p>ä½¿ç”¨è¯¥åº“æ„å»ºçš„ GUI åº”ç”¨ç¨‹åº iced å¯ä»¥åœ¨å…·æœ‰å“åº”å¼å¸ƒå±€çš„ Windowsã€macOSã€Linux å’Œ Webï¼ˆä½¿ç”¨ DOMï¼‰ä¸Šè¿è¡Œã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œiced å°†åº”ç”¨ç¨‹åºåˆ†ä¸ºå››ä¸ªæ¦‚å¿µï¼š</p></li><li><p>Stateï¼šç”¨äºåº”ç”¨ç¨‹åºçš„çŠ¶æ€</p></li><li><p>æ¶ˆæ¯ï¼šç”¨äºæ¶ˆæ¯å’Œäº‹ä»¶</p></li><li><p>è§†å›¾é€»è¾‘ï¼šç”¨äºå°†çŠ¶æ€æ˜¾ç¤ºä¸ºç”¨æˆ·äº¤äº’çš„å°éƒ¨ä»¶</p></li><li><p>æ›´æ–°é€»è¾‘ï¼šç”¨äºæ›´æ–°çŠ¶æ€å’Œä¸æ¶ˆæ¯äº¤äº’</p></li><li><p>æ‚¨å¯ä»¥è½»æ¾åœ°å¼€å§‹ä½¿ç”¨ Iced åº“ç”¨äºå‰ç«¯ Web åº”ç”¨ç¨‹åºã€‚è¯¥è¿‡ç¨‹ç±»ä¼¼äºæ„å»º GUI åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ iced æ–‡æ¡£ä»¥äº†è§£æœ‰å…³è¯¥è½¯ä»¶åŒ…çš„æ›´å¤šä¿¡æ¯ã€‚</p></li></ul><h3 id="å‰è¨€-3" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€-3" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h3><p>å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œç»å¯¹ä¸å¯ä»¥æŠ›å¼ƒè¯¥ç¼–ç¨‹è¯­è¨€çš„åº”ç”¨ã€‚åœ¨å­¦ä¹ å…¶ä»–ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œä¾‹å¦‚ C++ï¼Œåªå­¦ä¹ è¯­æ³•ï¼Œæ•°æ®ç»“æ„ä¸ç®—æ³•æ˜¯ç›¸å½“æ¯ç‡¥çš„ï¼Œè¿™å°±å¾ˆè€ƒè™‘ä¸€ä¸ªäººçš„æ¯…åŠ›äº†ã€‚æ­¤æ—¶æœ€å¥½çš„åŠæ³•å°±æ˜¯è®©å­¦ä¹ å˜å¾—æœ‰è¶£èµ·æ¥ï¼Œåœ¨æˆ‘å­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘çš„å…´è¶£ä¹‹æºå°±æ˜¯æƒ³è¦åšå‡º Windows ä¸Šåä¸½çš„çª—å£ï¼Œæ¥æé«˜è‡ªå·±çš„å­¦ä¹ å’Œå·¥ä½œæ•ˆç‡ï¼Œä¸ºæ­¤æˆ‘å­¦ä¹ è¿‡ QTï¼ŒMFCï¼Œè¿™äº›æ¡†æ¶éƒ½æŒºå¥½ï¼Œç¡®å®å®ç°äº†æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œä½†æ˜¯å¼€å‘è¾ƒä¸ºç¹çï¼Œåæ¥æˆ‘åˆå­¦ä¹  qt pythonï¼Œç¡®å®å¼€å‘å˜å¾—å¾ˆæ–¹ä¾¿äº†ï¼Œä½†æ˜¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼Œå°±æ˜¯æ‰“åŒ…ä¸æ–¹ä¾¿ï¼Œä¸ºæ­¤ï¼Œæˆ‘åœ¨è¿™ä¸ªè·¯ä¸Šç»å†äº†æ›²æŠ˜çš„æ¢ç´¢ã€‚</p><p>æ­¤æ—¶å­¦ä¹  Rust ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¦æƒ³æå‡è‡ªå·±çš„å­¦ä¹ åŠ›ï¼Œå°±è¦æ‰¾åˆ°å…¶ä¸­æ„Ÿå…´è¶£çš„ç‚¹ï¼Œå¯¹äº Rustï¼Œæˆ‘å¾ˆæƒ³åˆ©ç”¨ Rust çš„ä¼˜åŠ¿æ¥å®ç° Windows çš„çª—å£ï¼Œä¹Ÿæ‰¾è¿‡ç›¸å…³çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ Rust çš„ qtï¼Œä½†æ˜¯å®ƒæ¯”è¾ƒç¹çï¼Œåœ¨åé¢çš„æ–‡ç« ä¼šä»‹ç»åˆ°ï¼›è¿˜æœ‰ä½¿ç”¨ Rust ä½œä¸ºåç«¯çš„è·¨å¹³å° ui æ¡†æ¶ Tauri UIï¼Œä»–çš„æ€è·¯æ›´åƒæ˜¯ Electron è¿™ç§çš„ï¼Œå‰ç«¯ä½¿ç”¨ html+css å¸ƒå±€ï¼Œç„¶ååç«¯ä½¿ç”¨ Rustï¼Œå†æ‰“åŒ…å¥½ appï¼Œå…¶ä½¿ç”¨æ–¹å¼åœ¨æœ¬ç³»åˆ—æ–‡ç« åé¢ä¹Ÿä¼šä»‹ç»ï¼›è¿˜æœ‰å°±æ˜¯æœ¬æœŸæ–‡ç« è¦ä»‹ç»çš„ Icedï¼Œå®ƒæ›´åƒæ˜¯ Rust çš„ flutterï¼ŒåŸºäº Elm å®ç°çš„è·¨å¹³å° GUI æ¡†æ¶ã€‚</p><p>Iced æ˜¯ä¸€ä¸ªæˆ‘è¾ƒä¸ºæ„Ÿå…´è¶£çš„ GUI æ¡†æ¶ï¼Œå…¶å¼€å‘æ–¹å¼å¯¹æˆ‘æˆ‘è¿™ç§å­¦ä¹ äº† Vue çš„äººæ¥è¯´ç›¸å½“å‹å¥½ï¼Œä¸”é…å’Œ Rust çš„ç‰¹ç‚¹ï¼Œå·²ç»æ˜¯å¾ˆèˆ’æœäº†ã€‚æ­¤å¤–å®ƒé¢œå€¼ä¹ŸæŒºé«˜ï¼Œè¿™å°±æ˜¯æˆ‘å­¦ä¹ å®ƒçš„ç†ç”±ã€‚</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_eb9afa313e524c0ab0562260a82cba37.BomcHssd.png" alt="image"></p><h3 id="iced-çš„ç‰¹ç‚¹" tabindex="-1">Iced çš„ç‰¹ç‚¹ <a class="header-anchor" href="#iced-çš„ç‰¹ç‚¹" aria-label="Permalink to &quot;Iced çš„ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li>ç®€å•æ˜“ç”¨ï¼Œæœ‰ä¸€ç³»åˆ—å†…ç½® API</li><li>ç±»å‹å®‰å…¨ï¼Œæœ‰ä¸€å¥—äº¤äº’ç¼–ç¨‹æ¨¡å‹</li><li>è·¨å¹³å°ï¼ˆæ”¯æŒ Windowsï¼ŒMacï¼ŒLinux å’Œ Webï¼‰</li><li>å“åº”å¼å¸ƒå±€</li><li>åŸºäº widgets</li><li>æ”¯æŒè‡ªå®šä¹‰ widgets</li><li>è¿˜æœ‰å…¶ä»–ç‰¹æ€§ï¼Œå»ºè®®å» Github æŸ¥çœ‹</li></ul><h3 id="ä¸€ã€æ­å»ºé¡¹ç›®" tabindex="-1">ä¸€ã€æ­å»ºé¡¹ç›® <a class="header-anchor" href="#ä¸€ã€æ­å»ºé¡¹ç›®" aria-label="Permalink to &quot;ä¸€ã€æ­å»ºé¡¹ç›®&quot;">â€‹</a></h3><h4 id="_1-æ­£å¸¸åˆ›å»ºé¡¹ç›®" tabindex="-1">1. æ­£å¸¸åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_1-æ­£å¸¸åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;1. æ­£å¸¸åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> new</span><span style="color:#98C379;"> gui_iced_001</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-å¯¼å…¥-idea-1" tabindex="-1">2. å¯¼å…¥ idea <a class="header-anchor" href="#_2-å¯¼å…¥-idea-1" aria-label="Permalink to &quot;2. å¯¼å…¥ idea&quot;">â€‹</a></h4><p>ä½¿ç”¨ idea å¯¼å…¥é¡¹ç›®</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_1b6fdeeb2f6046e7bb0ec10651954c79.BIFIzL_o.png" alt="image"></p><h4 id="_3-å¼•å…¥ä¾èµ–-1" tabindex="-1">3. å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_3-å¼•å…¥ä¾èµ–-1" aria-label="Permalink to &quot;3. å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>æ‰“å¼€ Cargo.tomlï¼Œç„¶ååœ¨ä¾èµ–å‡ºå†™å…¥</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>iced = &quot;0.4&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p><code>æ³¨æ„ï¼š</code>æœ¬äººç”¨çš„æ˜¯ 2021 ä»¥åçš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ ä¸æ˜¯ï¼Œå»ºè®®å»å®˜ç½‘å­¦ä¹ å¯¹åº”çš„å¤„ç†ç­–ç•¥ï¼Œè¿™é‡Œä¸è§£é‡Šã€‚</p></blockquote><p>æ­¤æ—¶æ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_a8407846d1134ceab1577389028e2f95.DU2Jr4uk.png" alt="image">åˆ°æ­¤ä¸ºæ­¢ï¼Œé¡¹ç›®å°±æ­å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å†™æˆ‘ä»¬çš„ demo äº†ã€‚</p><h3 id="äºŒã€ç¼–å†™-demo" tabindex="-1">äºŒã€ç¼–å†™ demo <a class="header-anchor" href="#äºŒã€ç¼–å†™-demo" aria-label="Permalink to &quot;äºŒã€ç¼–å†™ demo&quot;">â€‹</a></h3><p>åœ¨ Github ä¸Šæ˜¯æœ‰å¾ˆå¤š Iced çš„ä¾‹å­çš„ï¼Œå…¶ä¸­æœ€ç»å…¸ï¼Œä¹Ÿæ˜¯å®˜ç½‘å”¯ä¸€å†™ä¸Šå»çš„ä¾‹å­å°±æ˜¯ Counter è®¡æ•°å™¨ï¼Œå› ä»è¿™é‡Œå°±å®ç° Counter çš„ demoã€‚è™½ç„¶è¯´è¿™ä¸ªå¾ˆç®€å•ï¼Œä½†æ˜¯å…¶ä¸­å‘å¾ˆå¤šï¼Œå¥½ä¸å®¹æ˜“æ‰å†™å‡ºè¿™ä¸ª demoï¼Œå°±è¯´ä¸¤ä¸ªæ¯”è¾ƒå‘çš„åœ°æ–¹æŠŠï¼Œè¿™ä¸ªæ¡†æ¶è¡Œå’Œåˆ—ä¸åˆ†ï¼Œä¾‹å­ä¸­ä»£ç å¤ªè¿‡è€æ—§ï¼Œéƒ½æ˜¯æˆ‘ä¸€æ­¥ä¸€æ­¥æ¢ç´¢å‡ºæ¥çš„ã€‚</p><blockquote><p>ä»¥ä¸‹å†…å®¹ä¸å®˜ç½‘ä¼šæœ‰è¾ƒå¤§çš„å·®åˆ«ï¼Œå®˜ç½‘çš„è¿è¡Œä¸äº†ï¼Œè¯·æ³¨æ„ç”„åˆ«ã€‚</p></blockquote><h4 id="_1-ç¼–å†™-state" tabindex="-1">1. ç¼–å†™ State <a class="header-anchor" href="#_1-ç¼–å†™-state" aria-label="Permalink to &quot;1. ç¼–å†™ State&quot;">â€‹</a></h4><p>é¦–å…ˆä¸ºç¨‹åºç¼–å†™ä¸€ä¸ª Stateï¼Œè¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µåœ¨å­¦ä¹  Vue å’Œ React æˆ–è€… Flutter çš„æ—¶å€™å¿…ç„¶ä¼šç”¨åˆ°ï¼Œè¿™é‡Œæš‚æ—¶ä¸åšè§£é‡Šï¼Œç›´æ¥ç»™å‡ºä»£ç </p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    value</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // The local state of the two buttons</span></span>
<span class="line"><span style="color:#E06C75;">    increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™é‡Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“<code>Counter </code>ï¼Œè¿™ä¸ªç»“æ„ä½“å°±å½“ä½œæˆ‘ä»¬çª—å£çš„ Stateï¼Œå…¶æˆå‘˜<code>value</code>ä»£è¡¨è®¡æ•°å™¨è®¡æ•°çš„æ•°å€¼ï¼Œ<code>increment_button</code>å’Œ<code>decrement_button</code>æ˜¯ä¸¤ä¸ªæŒ‰é’®+å’Œ-çš„ stateã€‚</p><h4 id="_2-å®šä¹‰æ¶ˆæ¯ç±»å‹" tabindex="-1">2. å®šä¹‰æ¶ˆæ¯ç±»å‹ <a class="header-anchor" href="#_2-å®šä¹‰æ¶ˆæ¯ç±»å‹" aria-label="Permalink to &quot;2. å®šä¹‰æ¶ˆæ¯ç±»å‹&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥å°±æ˜¯å®šä¹‰ç¨‹åºä¸­ç”¨åˆ°çš„æ¶ˆæ¯ç±»å‹ï¼Œç¨‹åºä¸­çš„äº¤äº’æ˜¯é€šè¿‡ä¿¡å·æ¥è¿›è¡Œçš„ï¼Œè¿™ç‚¹ Qt å°±åšçš„å¾ˆå¥½ï¼Œå¦‚æœä½ å­¦ä¹ è¿‡ qt æˆ–è€…å‰ç«¯çš„ Vue ç­‰æ¡†æ¶ï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    IncrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    DecrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªæ¶ˆæ¯ï¼Œä¸€ä¸ªæ˜¯<code>IncrementPressed</code>ï¼Œä»£è¡¨+æŒ‰é’®è¢«ç‚¹å‡»ï¼Œä¸€ä¸ªæ˜¯<code>DecrementPressed</code>ï¼Œä»£è¡¨-æŒ‰é’®è¢«ç‚¹å‡»ã€‚</p><h4 id="_3-ç¼–å†™è§†å›¾é€»è¾‘" tabindex="-1">3. ç¼–å†™è§†å›¾é€»è¾‘ <a class="header-anchor" href="#_3-ç¼–å†™è§†å›¾é€»è¾‘" aria-label="Permalink to &quot;3. ç¼–å†™è§†å›¾é€»è¾‘&quot;">â€‹</a></h4><p>è¿™é‡Œå®˜æ–¹ç»™å‡ºçš„ä¾‹å­æ˜¯ç›´æ¥ä¸º Counter å®ç° view å’Œ updateï¼Œä½†æ˜¯ç»è¿‡æˆ‘çš„æ¢ç´¢ï¼Œæ˜¯ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ã€‚</p><p>Iced ç¨‹åºè¿è¡Œï¼Œéœ€è¦å®ç° Application æˆ–è€… Sandboxï¼Œè¿™ä¿©æ˜¯ä»€ä¹ˆæ„æ€ç°åœ¨å…ˆä¸ç®¡ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯ Sandboxï¼Œå› ä¸ºå…¶è¶³å¤Ÿçš„ç®€å•ã€‚</p><p>ä¸€ä¸ªç©ºçš„ Sandbox åº”è¯¥æ˜¯è¿™æ ·çš„</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Sandbox</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Message</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> ();</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> title</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> update</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">        todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">&lt;&#39;</span><span style="color:#E5C07B;">_</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">        todo!</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>è¿™é‡Œä»ä¸Šåˆ°ä¸‹å¼€å§‹ä»‹ç»</p><h5 id="message" tabindex="-1">Message <a class="header-anchor" href="#message" aria-label="Permalink to &quot;Message&quot;">â€‹</a></h5><p>ä»£è¡¨çš„æ˜¯å½“å‰çª—å£çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦ä¼ å…¥å®šä¹‰å¥½çš„æ¶ˆæ¯æšä¸¾ï¼Œå°±æ¯”å¦‚è¯´è¿™é‡Œæ—¶ç”¨æ³•åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œ</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    IncrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    DecrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ....</span></span>
<span class="line"><span style="color:#C678DD;">type</span><span style="color:#E5C07B;"> Message</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="new" tabindex="-1">new <a class="header-anchor" href="#new" aria-label="Permalink to &quot;new&quot;">â€‹</a></h5><p>è¿™é‡Œå’Œé€šå¸¸ç¼–å†™ä»£ç ä¸€æ ·ï¼Œéœ€è¦è¿”å›è‡ªèº«å®ä¾‹ï¼Œå°±ä¸åšè¿‡å¤šè§£é‡Šäº†</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Self</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">() }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="title" tabindex="-1">title <a class="header-anchor" href="#title" aria-label="Permalink to &quot;title&quot;">â€‹</a></h5><p>è§åçŸ¥ä¹‰ï¼Œè¿™é‡Œå°±æ˜¯è¦è¿”å›å½“å‰çª—å£çš„åå­—</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> title</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        String</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Counter - Iced&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="update" tabindex="-1">update <a class="header-anchor" href="#update" aria-label="Permalink to &quot;update&quot;">â€‹</a></h5><p>è¿™é‡Œæ—¶å¤„ç†çª—å£çš„æ¶ˆæ¯é€»è¾‘ï¼Œæœ¬çª—å£å¤„ç†ä¸¤ä¸ªæ¶ˆæ¯ï¼Œä¸€ä¸ªæ˜¯<code>IncrementPressed</code>ï¼Œä»£è¡¨+æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå¦‚æœè¢«ç‚¹å‡»äº†ï¼ŒState çš„ Value å°±+1ï¼Œä¸€ä¸ªæ˜¯<code>DecrementPressed</code>ï¼Œä»£è¡¨-æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå¦‚æœè¢«ç‚¹å‡»äº†ï¼ŒState çš„ Value å°±-1ã€‚è¿™é‡Œå¤„ç†ç›¸å½“ç®€å•ï¼Œå¹¶æœªè€ƒè™‘è¾¹ç•Œå€¼ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> update</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">-=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="view" tabindex="-1">view <a class="header-anchor" href="#view" aria-label="Permalink to &quot;view&quot;">â€‹</a></h5><p>è¿™é‡Œè¦è¿”å›çª—å£çš„å¸ƒå±€ï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯è¦æ„å»ºè¿™ä¸ªçª—å£ï¼Œè¿™é‡Œ Counter çš„çª—å£ä»£ç å¦‚ä¸‹</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Column</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Row</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.increment_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;+&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.decrement_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">align_items</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Alignment</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨çš„æ—¶é“¾å¼è°ƒç”¨ï¼Œä¸€å±‚å¥—ä¸€å±‚ï¼Œå…¶ä»£ç å’Œ flutter ç‰¹åˆ«çš„ç›¸ä¼¼ï¼Œå¦‚æœä½ å­¦ä¹ è¿‡ flutterï¼Œé‚£å¿…ç„¶éå¸¸ç†Ÿæ‚‰ï¼Œè¿™é‡Œæˆ‘ç”»ä¸€ä¸ªå›¾ï¼Œæ¥è§£é‡Šè¿™æ®µä»£ç ï¼Œé¦–å…ˆç”± Column å°†çª—å£åˆ†ä¸ºä¸¤è¡Œï¼Œå…¶å¸ƒå±€å’Œçº¢æ¡†æ˜¯ä¸€è‡´çš„ï¼Œä¸Šä¸‹ä¸¤è¡Œ</p><blockquote><p><code>æ³¨æ„ï¼š</code>è¿™ä¸ªæ¡†æ¶è¡Œå’Œåˆ—å‚»å‚»åˆ†ä¸æ¸…ï¼ŒColumn æ˜¯åˆ—çš„æ„æ€ï¼Œåœ¨è¿™ä¸ªæ¡†æ¶é‡Œé¢æ˜¯è¡Œçš„æ„æ€ã€‚</p></blockquote><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_760b571e6ad34cbdbe97d1f43061fff4.CMu1Jc0O.png" alt="image">ç¬¬ä¸€è¡Œï¼Œåªæ·»åŠ äº†ä¸ª Text ç»„ä»¶ï¼Œå¹¶ä¸”ç»™åˆå§‹å€¼<code>Counter</code>ï¼Œè¿™é‡ŒåŸæœ¬æ˜¯æ‰“ç®—ä½¿ç”¨ä¸­æ–‡<code>è®¡æ•°å™¨</code>çš„ï¼Œå¥ˆä½•è¿™ç©æ„å„¿ä¸æ”¯æŒä¸­æ–‡</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Column</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç¬¬äºŒè¡Œï¼Œå…¶ä¸­æ·»åŠ äº†ä¸ª Row ç»„ä»¶(<code>åˆ—</code>ç»„ä»¶)ï¼Œå¹¶ä¸”åŠ å…¥äº†ä¸‰ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ä¸¤ä¸ª Buttonï¼Œå°±æ˜¯+å’Œ-æŒ‰é’®ï¼Œä¸€ä¸ª Text ç»„ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºå½“å‰ Value</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//...</span></span>
<span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Row</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.increment_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;+&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.decrement_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ‰€ä»¥æ­¤æ—¶çš„çª—å£å¸ƒå±€åº”è¯¥æ˜¯è¿™æ ·çš„</p><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_52f99c63c73743eca9949b4be11b6521.CJwW9_3E.png" alt="image"></p><h4 id="_4-ç¼–å†™-main-å‡½æ•°" tabindex="-1">4. ç¼–å†™ main å‡½æ•° <a class="header-anchor" href="#_4-ç¼–å†™-main-å‡½æ•°" aria-label="Permalink to &quot;4. ç¼–å†™ main å‡½æ•°&quot;">â€‹</a></h4><p>å†™å¥½çš„çª—å£æ˜¯æ— æ³•è‡ªåŠ¨è¿è¡Œçš„ï¼Œéœ€è¦å¯åŠ¨æ‰å¯ä»¥ï¼Œé€šå¸¸åœ¨ main å‡½æ•°ä¸­å¯åŠ¨çª—å£ï¼Œåœ¨è¿™é‡Œä¼šå˜å¾—ç®€å•èµ·æ¥ï¼Œè¿™é‡Œç›´æ¥è´´ä¸Šä»£ç </p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">iced</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Counter</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯åŠ¨çª—å£åªè¦è°ƒç”¨çª—å£çš„ run æ–¹æ³•å°±å¥½äº†ï¼Œå…¶ä¸­ä¼ å…¥ Settingsï¼Œç”¨æ¥è®¾ç½®çª—å£çš„åˆå§‹çŠ¶æ€ï¼Œè¿™é‡Œç›´æ¥ç”¨é»˜è®¤çŠ¶æ€äº†ï¼Œå¦‚æœåç»­è¿˜è¦è¿›å…¥æ·±å…¥ï¼Œè¿™é‡Œä¼šä¸“é—¨å‡ºä¸€æœŸæ¥è¿›è¡Œè®²è§£ã€‚</p><h3 id="ä¸‰ã€è¿è¡Œæ•ˆæœ" tabindex="-1">ä¸‰ã€è¿è¡Œæ•ˆæœ <a class="header-anchor" href="#ä¸‰ã€è¿è¡Œæ•ˆæœ" aria-label="Permalink to &quot;ä¸‰ã€è¿è¡Œæ•ˆæœ&quot;">â€‹</a></h3><p>æ­¤æ—¶æˆ‘ä»¬è¿è¡Œå½“å‰å†™å¥½çš„ demo</p><blockquote><p><code>æ³¨æ„ï¼š</code>å®Œæ•´ä»£ç æ”¾åœ¨æ–‡ç« æœ«å°¾ï¼Œå¦‚æœä½ æ‡’å¾—æ•²ä»£ç ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ã€‚</p></blockquote><p><img src="/ProgramLearnNotes/assets/urc4jn6zkhw3i_1c7d3e1529b64e05a455140af4bee5e0.zp-svNu0.gif" alt="image"></p><h3 id="æ€»ç»“-5" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-5" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>æœ¬æœŸä¸ºå¤§å®¶ä»‹ç»äº† Rust çš„ GUI æ¡†æ¶ Icedï¼Œç»è¿‡æˆ‘çš„æ¢ç´¢ï¼Œç»ˆäºæ˜¯å°† Counter Demo æ­å»ºèµ·æ¥ã€‚ç»è¿‡æˆ‘çš„ä½“éªŒï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªæ¡†æ¶å…¶å®å¹¶æ²¡æœ‰æˆ‘æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¥½ï¼Œå®ƒç¡®å®æ˜¯ Rust çš„åŸç”Ÿ GUI æ¡†æ¶ï¼Œä¹Ÿç¡®å®æœ‰ä»–è¯´çš„é‚£äº›ç‰¹ç‚¹ï¼Œç¡®å®æœ‰é¢œå€¼ï¼Œä½†æ˜¯å®ƒæœ‰ä¸ªæœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸æ”¯æŒä¸­æ–‡ï¼Œè€Œä¸”è¡Œå’Œåˆ—å‚»å‚»åˆ†ä¸æ¸…ï¼Œå®˜æ–¹æ–‡æ¡£å¤ªè¿‡è€æ—§ï¼Œæ‰€ä»¥æ­å»º demo æµç¨‹å°±å˜å¾—å¾ˆå¤æ‚ï¼Œå¯¹å¼€å‘ä¸æ˜¯å¾ˆå‹å¥½ï¼Œå”¯ä¸€å€¼å¾—ä¸€è¯´çš„å°±æ˜¯è¿™ä¸ªä»£ç ï¼Œç¡®å®æ˜¯èˆ’æœäº†ä¸å°‘ï¼Œè¿™æ˜¯å…¶ä»– UI æ¡†æ¶æ‰€æ— æ³•æ¯”çš„ä¸Šçš„ï¼Œè¿™ç‚¹å€¼å¾—èµåŒï¼Œå¸Œæœ›ä»¥åè¿™ä¸ªæ¡†æ¶æˆ–è€…åç»§è€…èƒ½è§£å†³è¿™äº›é—®é¢˜ï¼ŒRust çš„ UI æ‰èƒ½å¼ºå¤§èµ·æ¥ã€‚</p><h3 id="å®Œæ•´ä»£ç -2" tabindex="-1">å®Œæ•´ä»£ç  <a class="header-anchor" href="#å®Œæ•´ä»£ç -2" aria-label="Permalink to &quot;å®Œæ•´ä»£ç &quot;">â€‹</a></h3><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> iced</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Alignment</span><span style="color:#ABB2BF;">, button, </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Column</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Row</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Sandbox</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">iced</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Counter</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    value</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // The local state of the two buttons</span></span>
<span class="line"><span style="color:#E06C75;">    increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    IncrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    DecrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Sandbox</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Message</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Self</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">(), </span><span style="color:#E06C75;">decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">() }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> title</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        String</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Counter - Iced&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> update</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">-=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Column</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Counter&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">            Row</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.increment_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;+&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.decrement_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Length</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Fill</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">align_items</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Alignment</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>åœ¨ Rust ç¤¾åŒºä¸­ï¼ŒIced æ˜¯å€¼å¾—å…³æ³¨çš„è·¨å¹³å° GUI (å›¾å½¢ç”¨æˆ·ç•Œé¢) åº“ä¹‹ä¸€ã€‚ç”± <code>iced-rs</code> å›¢é˜Ÿå¼€å‘ï¼ŒIced çš„è®¾è®¡çµæ„Ÿæ¥æºäº Elm è¯­è¨€ï¼Œå®ƒä»¥ç®€æ´æ€§å’Œç±»å‹å®‰å…¨æ€§ä¸ºç‰¹è‰²ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨ä¸”åŠŸèƒ½ä¸°å¯Œçš„ GUI å¼€å‘ä½“éªŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Icedï¼Œå¹¶æä¾›è¯¦å°½çš„ç¤ºä¾‹å’Œæ•™å­¦ï¼Œå¸Œæœ›å¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸ªåº“ã€‚</p><h3 id="iced-çš„æ ¸å¿ƒç‰¹æ€§" tabindex="-1">Iced çš„æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#iced-çš„æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;Iced çš„æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><p>Iced ä¸“æ³¨äºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š</p><ul><li><strong>ç®€æ´æ˜“ç”¨çš„ API</strong>ï¼šæä¾›äº†ä¸€å¥—ç»“æ„æ¸…æ™°çš„ APIï¼Œä¾¿äºå¿«é€Ÿä¸Šæ‰‹å’Œå¼€å‘ã€‚</li><li><strong>ç±»å‹å®‰å…¨çš„ååº”å¼ç¼–ç¨‹æ¨¡å‹</strong>ï¼šåˆ©ç”¨ Rust å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿï¼Œç¡®ä¿äº†ä»£ç çš„å®‰å…¨æ€§ã€‚</li><li><strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šåŒæ—¶æ”¯æŒ Windows, macOS, Linux, ä»¥åŠ Web å¹³å°ã€‚</li><li><strong>å“åº”å¼å¸ƒå±€</strong>ï¼šæ˜“äºåˆ›å»ºçµæ´»ä¸”è‡ªé€‚åº”çš„ç”¨æˆ·ç•Œé¢ã€‚</li><li><strong>å†…ç½®æ§ä»¶</strong>ï¼šåŒ…å«ä¸°å¯Œçš„é¢„åˆ¶æ§ä»¶ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚</li><li><strong>è‡ªå®šä¹‰æ§ä»¶æ”¯æŒ</strong>ï¼šå…è®¸å¼€å‘è€…æ ¹æ®éœ€æ±‚åˆ›å»ºå®šåˆ¶çš„æ§ä»¶ã€‚</li><li><strong>è°ƒè¯•å åŠ å±‚</strong>ï¼šå†…ç½®æ€§èƒ½åº¦é‡å·¥å…·ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œæ€§èƒ½è°ƒè¯•ã€‚</li></ul><h3 id="ä½¿ç”¨-iced-æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª-rust-åº”ç”¨" tabindex="-1">ä½¿ç”¨ Iced æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Rust åº”ç”¨ <a class="header-anchor" href="#ä½¿ç”¨-iced-æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª-rust-åº”ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨ Iced æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Rust åº”ç”¨&quot;">â€‹</a></h3><p>è¦å¼€å§‹ä½¿ç”¨ Iced æ„å»º GUI åº”ç”¨ï¼Œä½ éœ€è¦é¦–å…ˆç¡®ä¿ Rust çš„å¼€å‘ç¯å¢ƒå·²ç»æ­å»ºå¥½ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€æ­¥æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨æ¥å±•ç¤º Iced çš„ç”¨æ³•ã€‚</p><h4 id="ç¬¬ä¸€æ­¥-åˆ›å»ºé¡¹ç›®å¹¶æ·»åŠ ä¾èµ–" tabindex="-1">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®å¹¶æ·»åŠ ä¾èµ– <a class="header-anchor" href="#ç¬¬ä¸€æ­¥-åˆ›å»ºé¡¹ç›®å¹¶æ·»åŠ ä¾èµ–" aria-label="Permalink to &quot;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®å¹¶æ·»åŠ ä¾èµ–&quot;">â€‹</a></h4><p>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> new</span><span style="color:#98C379;"> my_iced_app</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#98C379;"> my_iced_app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç„¶åï¼Œæ‰“å¼€ <code>Cargo.toml</code> æ–‡ä»¶ï¼Œæ·»åŠ  Iced åº“ä½œä¸ºä¾èµ–ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">iced</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.4&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="ç¬¬äºŒæ­¥-ç¼–è¾‘-main-rs" tabindex="-1">ç¬¬äºŒæ­¥ï¼šç¼–è¾‘ main.rs <a class="header-anchor" href="#ç¬¬äºŒæ­¥-ç¼–è¾‘-main-rs" aria-label="Permalink to &quot;ç¬¬äºŒæ­¥ï¼šç¼–è¾‘ main.rs&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç¼–å†™åº”ç”¨çš„ä¸»é€»è¾‘ã€‚ç¼–è¾‘ <code>src/main.rs</code> æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹ä»£ç ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> iced</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Application</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Column</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Command</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Sandbox</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">iced</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Counter</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    value</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    IncrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    DecrementPressed</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Sandbox</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Message</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Message</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Counter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            increment_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#E06C75;">            decrement_button</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> title</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        String</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Iced Counter Example&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> update</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Command</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">        match</span><span style="color:#E06C75;"> message</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">            Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value </span><span style="color:#56B6C2;">-=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#E5C07B;">        Command</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">none</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Column</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.increment_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Increment&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">IncrementPressed</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.decrement_button, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Decrement&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DecrementPressed</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.value.</span><span style="color:#61AFEF;">to_string</span><span style="color:#ABB2BF;">()))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h4 id="ç¬¬ä¸‰æ­¥-è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª-iced-åº”ç”¨" tabindex="-1">ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Iced åº”ç”¨ <a class="header-anchor" href="#ç¬¬ä¸‰æ­¥-è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª-iced-åº”ç”¨" aria-label="Permalink to &quot;ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Iced åº”ç”¨&quot;">â€‹</a></h4><p>ä¿å­˜ <code>main.rs</code> æ–‡ä»¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¼–è¯‘å¹¶å¯åŠ¨ GUI åº”ç”¨ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åº”ç”¨å¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ç•Œé¢ï¼Œç•Œé¢ä¸Šæœ‰â€œIncrementâ€å’Œâ€œDecrementâ€ä¸¤ä¸ªæŒ‰é’®ç”¨äºå¢å‡è®¡æ•°å€¼ã€‚</p><h3 id="æ‰©å±•-åˆ›å»ºå“åº”å¼å¸ƒå±€å’Œè‡ªå®šä¹‰æ§ä»¶" tabindex="-1">æ‰©å±•ï¼šåˆ›å»ºå“åº”å¼å¸ƒå±€å’Œè‡ªå®šä¹‰æ§ä»¶ <a class="header-anchor" href="#æ‰©å±•-åˆ›å»ºå“åº”å¼å¸ƒå±€å’Œè‡ªå®šä¹‰æ§ä»¶" aria-label="Permalink to &quot;æ‰©å±•ï¼šåˆ›å»ºå“åº”å¼å¸ƒå±€å’Œè‡ªå®šä¹‰æ§ä»¶&quot;">â€‹</a></h3><p>Iced ä¸ä»…é™äºåˆ›å»ºåŸºç¡€çš„æ§ä»¶å’Œå¸ƒå±€ï¼Œä½ è¿˜å¯ä»¥åˆ©ç”¨å“åº”å¼å¸ƒå±€åˆ›å»ºå¤æ‚ä¸”è‡ªé€‚åº”çš„ç•Œé¢ã€‚æ­¤å¤–ï¼Œè‡ªå®šä¹‰æ§ä»¶å¯ä»¥è®©ä½ çš„åº”ç”¨æ›´åŠ å¸å¼•äººï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè‡ªå®šä¹‰æ§ä»¶çš„ä¾‹å­ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> iced</span><span style="color:#ABB2BF;">::{button, </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Column</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Command</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Sandbox</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Settings</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ä½ çš„è‡ªå®šä¹‰æ§ä»¶</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> MyCustomWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ§ä»¶å†…éƒ¨çš„çŠ¶æ€å’Œå±æ€§</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®ç°è‡ªå®šä¹‰æ§ä»¶çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> MyCustomWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ›å»ºæ§ä»¶çš„æ–°å®ä¾‹</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // åˆå§‹åŒ–æ§ä»¶çŠ¶æ€</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å®ç°æ§ä»¶çš„æ¸²æŸ“é€»è¾‘</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> view</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Element</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Message</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è¿”å› Element ç±»å‹çš„ GUI è¡¨ç¤º</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åç»­ç±»ä¼¼äº Counter ç¤ºä¾‹çš„ç»“æ„å’Œå®ç°é€»è¾‘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>MyCustomWidget</code> æ§ä»¶ï¼Œå¹¶ä¸ºå®ƒå®ç°äº†åŸºç¡€çš„æ„å»ºå’Œæ¸²æŸ“é€»è¾‘ã€‚è¿™å°±æ˜¯ Iced çµæ´»æ€§çš„ä¸€ç§ä½“ç°ï¼Œå…è®¸ä½ æ ¹æ®å…·ä½“çš„åº”ç”¨éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚</p><h3 id="ç»“è¯­-3" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­-3" aria-label="Permalink to &quot;ç»“è¯­&quot;">â€‹</a></h3><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ åº”è¯¥å¯¹ Iced æœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚Iced ä»¥å…¶ç®€æ´çš„ APIã€å¼ºç±»å‹è®¾è®¡å’Œè·¨å¹³å°ç‰¹æ€§ï¼Œä¸º Rust GUI å¼€å‘æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰å¸å¼•åŠ›çš„é€‰é¡¹ã€‚ä½ è¿˜å¯ä»¥åœ¨å®ƒçš„ GitHub é¡µé¢ä¸Šæ‰¾åˆ°æ›´å¤šçš„ä¿¡æ¯ã€æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œä»¥åŠå¦‚ä½•ä¸ºè¿™ä¸ªå¼€æºé¡¹ç›®åšå‡ºè´¡çŒ®ã€‚</p><h2 id="xilem" tabindex="-1">Xilem <a class="header-anchor" href="#xilem" aria-label="Permalink to &quot;Xilem&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/linebender/xilem" target="_blank" rel="noreferrer">https://github.com/linebender/xilem</a></p><h2 id="relm" tabindex="-1">relm <a class="header-anchor" href="#relm" aria-label="Permalink to &quot;relm&quot;">â€‹</a></h2><p>relm</p><ul><li><p>relm æ˜¯ä¸€ä¸ªåŸºäº GTK çš„å¼‚æ­¥ GUI åº“ï¼Œæœ€åˆç”¨ Rust ç¼–å†™ã€‚å®ƒå—åˆ° Elm æ¶æ„çš„å¯å‘ï¼Œæ—¨åœ¨ç®€åŒ– GTK åº“çš„ä½¿ç”¨å¹¶æä¾›ç±»ä¼¼ Elm çš„ä½“éªŒã€‚</p></li><li><p>ä¸ GTK åº“ä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ relm æ„å»ºè·¨å¹³å° GUIã€‚</p></li><li><p><a href="https://github.com/antoyo/relm" target="_blank" rel="noreferrer">antoyo/relm: Idiomatic, GTK+-based, GUI library, inspired by Elm, written in Rust (github.com)</a></p></li><li><p>æ‚¨éœ€è¦æœ‰ä½¿ç”¨ GTK åº“çš„ç»éªŒæ‰èƒ½ä½¿ç”¨ relm å¹¶å……åˆ†åˆ©ç”¨è¯¥åº“ã€‚</p></li><li><p>è¦ä½¿ç”¨ relmï¼Œæ‚¨éœ€è¦åœ¨æ–‡ä»¶ä¸­å°† gtk å’Œ relm åº“æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–é¡¹ä¸­ Cargo.tomlã€‚æ‚¨è¿˜éœ€è¦ gtk å®‰è£…è¯¥åº“ã€‚</p></li><li><p>[dependencies]gtk = &quot;0.9.0&quot;relm = &quot;0.20.0&quot;relm-derive = &quot;0.20.0&quot;</p></li><li><p>æ‚¨è¿˜å¿…é¡»å°† gtk æ¿æ¡ç®±ä¸ relm æ¿æ¡ç®±ä¸€èµ·å¯¼å…¥ã€‚</p></li><li><p>use relm::{connect, Relm, Update, Widget};use gtk::prelude::*;use gtk::{Window, Inhibit,a WindowType};use relm_derive::Msg;</p></li><li><p>Rust ç¤¾åŒºæ„Ÿè°¢ relm æä¾›çš„å…¶ä»– Rust åº“ï¼ˆå¦‚ Yewã€Seed å’Œ icedï¼‰æä¾›çš„ç±»ä¼¼ Elm çš„ä½“éªŒã€‚è¯¥ relm åº“å¤„äº beta é˜¶æ®µï¼Œå°šæœªç»è¿‡é€‚å½“çš„æµ‹è¯•ï¼Œå¹¶ä¸”æ­£åœ¨è¿…é€Ÿå˜åŒ–ã€‚è¯è™½å¦‚æ­¤ï¼Œæ‚¨å¯èƒ½è¿˜ä¸æƒ³åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒã€‚</p></li></ul><p>ä½¿ç”¨<code>relm</code>æ„å»ºè·¨å¹³å°çš„ GUI åº”ç”¨ã€‚</p><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰çš„è®¾è®¡ä¸å®ç°æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚éšç€ Rust ç¼–ç¨‹è¯­è¨€çš„å´›èµ·ï¼Œå…¶å®‰å…¨æ€§ã€æ€§èƒ½å’Œå¹¶å‘ç‰¹æ€§ä½¿å…¶æˆä¸ºå¼€å‘é«˜è´¨é‡ GUI åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚<code>relm</code>æ¡†æ¶ï¼Œä½œä¸º Rust ç”Ÿæ€ä¸­çš„ä¸€å‘˜ï¼Œæä¾›äº†ä¸€ç§å£°æ˜å¼ã€äº‹ä»¶é©±åŠ¨çš„æ–¹æ³•æ¥æ„å»º GUIï¼Œæœ¬æ–‡å°†æ·±å…¥æ¢ç©¶<code>relm</code>çš„è®¾è®¡ç†å¿µã€ç‰¹æ€§ä»¥åŠåº”ç”¨å®ä¾‹ï¼Œä¸ºå¹¿å¤§ Rust çˆ±å¥½è€…å¼€å¯æ„å»ºè·¨å¹³å° GUI åº”ç”¨çš„æ–°ç¯‡ç« ã€‚</p><h3 id="relm-æ¡†æ¶æ¦‚è§ˆ" tabindex="-1">relm æ¡†æ¶æ¦‚è§ˆ <a class="header-anchor" href="#relm-æ¡†æ¶æ¦‚è§ˆ" aria-label="Permalink to &quot;relm æ¡†æ¶æ¦‚è§ˆ&quot;">â€‹</a></h3><p><code>relm</code>æ˜¯ä¸€ä¸ªç”¨äº Rust è¯­è¨€çš„ GUI æ¡†æ¶ï¼Œå®ƒåŸºäº<code>gtk-rs</code>åº“ï¼ˆGTK+3 çš„ Rust ç»‘å®šï¼‰ï¼Œå…è®¸å¼€å‘è€…åˆ›å»ºè·¨å¹³å°çš„ GUI åº”ç”¨ç¨‹åºã€‚<code>relm</code>åˆ©ç”¨ Rust çš„å®‰å…¨å¹¶å‘ç‰¹æ€§ã€Futures ç­‰ç°ä»£ç¼–ç¨‹ç†å¿µï¼Œé€šè¿‡ Model-View-Updateï¼ˆMVUï¼‰æ¶æ„ï¼Œå®ç°äº†é«˜æ•ˆã€ç®€æ´çš„ä»£ç å®è·µï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾æ„å»ºå¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚</p><h3 id="ç‰¹æ€§è§£æ" tabindex="-1">ç‰¹æ€§è§£æ <a class="header-anchor" href="#ç‰¹æ€§è§£æ" aria-label="Permalink to &quot;ç‰¹æ€§è§£æ&quot;">â€‹</a></h3><h4 id="å¼‚æ­¥æ”¯æŒä¸-futures" tabindex="-1">å¼‚æ­¥æ”¯æŒä¸ Futures <a class="header-anchor" href="#å¼‚æ­¥æ”¯æŒä¸-futures" aria-label="Permalink to &quot;å¼‚æ­¥æ”¯æŒä¸ Futures&quot;">â€‹</a></h4><p><code>relm</code>å°†å¼‚æ­¥ç¼–ç¨‹è§†ä¸ºå…¶æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œä½¿ç”¨ Futures æ¥å¤„ç†è€—æ—¶ä»»åŠ¡å’Œå¹¶å‘ï¼Œè¿™ä¸ä»…æé«˜äº†åº”ç”¨çš„å“åº”æ€§ï¼Œä¹Ÿä½¿å¾—ç¼–å†™å¤æ‚çš„å¼‚æ­¥é€»è¾‘å˜å¾—ç®€å•è€Œç›´è§‚ã€‚</p><h4 id="åŸºäºåå­—çš„å°éƒ¨ä»¶æ ‡è¯†" tabindex="-1">åŸºäºåå­—çš„å°éƒ¨ä»¶æ ‡è¯† <a class="header-anchor" href="#åŸºäºåå­—çš„å°éƒ¨ä»¶æ ‡è¯†" aria-label="Permalink to &quot;åŸºäºåå­—çš„å°éƒ¨ä»¶æ ‡è¯†&quot;">â€‹</a></h4><p>åœ¨å¾ˆå¤š GUI æ¡†æ¶ä¸­ï¼Œå¯¹å°éƒ¨ä»¶çš„å¼•ç”¨é€šå¸¸é€šè¿‡ç±»ä¼¼<code>Arc&lt;Mutex&lt;&gt;&gt;</code>çš„æ–¹å¼è¿›è¡Œã€‚è€Œ<code>relm</code>æä¾›äº†ä¸€ç§æ›´ç®€å•ã€æ›´ Rust é£æ ¼çš„æ–¹å¼ï¼Œå³é€šè¿‡åç§°ç›´æ¥æ ‡è¯†å°éƒ¨ä»¶ï¼Œç®€åŒ–äº†ä»£ç å¹¶æé«˜äº†å¯è¯»æ€§ã€‚</p><h4 id="model-view-update-mvu-æ¶æ„" tabindex="-1">Model-View-Updateï¼ˆMVUï¼‰æ¶æ„ <a class="header-anchor" href="#model-view-update-mvu-æ¶æ„" aria-label="Permalink to &quot;Model-View-Updateï¼ˆMVUï¼‰æ¶æ„&quot;">â€‹</a></h4><p>MVU æ¶æ„æ˜¯<code>relm</code>çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹ç‚¹ï¼Œå®ƒæ˜æ™°åœ°å°†åº”ç”¨åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰å’Œæ›´æ–°ï¼ˆUpdateï¼‰ï¼Œä½¿å¾—åº”ç”¨çŠ¶æ€çš„ç®¡ç†å˜å¾—æ¸…æ™°ï¼Œç•Œé¢ä¸é€»è¾‘çš„åˆ†ç¦»ä¹Ÿæ›´ä¸ºå½»åº•ã€‚</p><h3 id="å®ä¾‹æ¼”ç¤º" tabindex="-1">å®ä¾‹æ¼”ç¤º <a class="header-anchor" href="#å®ä¾‹æ¼”ç¤º" aria-label="Permalink to &quot;å®ä¾‹æ¼”ç¤º&quot;">â€‹</a></h3><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£<code>relm</code>æ¡†æ¶çš„åº”ç”¨ï¼Œè®©æˆ‘ä»¬æ¥æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºã€‚å‡è®¾æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª TODO åˆ—è¡¨åº”ç”¨ï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨<code>relm</code>æ¥å®ç°çš„åŸºæœ¬æ­¥éª¤ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> relm;</span></span>
<span class="line"><span style="color:#ABB2BF;">#[macro_use]</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> relm_derive;</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> gtk;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> relm</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Relm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> gtk</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> gtk</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Window</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">WindowType</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Msg</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> Msg</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Add</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Quit</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> Model</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åœ¨è¿™é‡Œå®šä¹‰æ¨¡å‹</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> Win</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç•Œé¢å…ƒç´ å®šä¹‰</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Widget</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> Win</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Model</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Model</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> ModelParam</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> ();</span></span>
<span class="line"><span style="color:#C678DD;">    type</span><span style="color:#E5C07B;"> Msg</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Msg</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆå§‹åŒ–æ¨¡å‹ã€ç•Œé¢ç­‰</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">    Win</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">(()).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Win::run failed&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>åœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>Win</code>ç»“æ„ä½“æ¥ä»£è¡¨æˆ‘ä»¬çš„åº”ç”¨çª—å£ï¼Œä»¥åŠä¸€ä¸ª<code>Msg</code>æšä¸¾æ¥å®šä¹‰å¯èƒ½çš„æ¶ˆæ¯ï¼ˆäº‹ä»¶ï¼‰ã€‚æˆ‘ä»¬é€šè¿‡å®ç°<code>Widget</code> trait æ¥å®šä¹‰åº”ç”¨çš„æ¨¡å‹ã€è§†å›¾å’Œæ›´æ–°é€»è¾‘ã€‚</p><h3 id="ç»“è®º-1" tabindex="-1">ç»“è®º <a class="header-anchor" href="#ç»“è®º-1" aria-label="Permalink to &quot;ç»“è®º&quot;">â€‹</a></h3><p><code>relm</code>æ¡†æ¶æä¾›äº†ä¸€ç§é«˜æ•ˆã€ç®€æ´çš„æ–¹æ³•æ¥æ„å»º Rust GUI åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›è¿½æ±‚å®‰å…¨æ€§å’Œé«˜æ€§èƒ½çš„é¡¹ç›®ã€‚é€šè¿‡å…¶å¼‚æ­¥ç‰¹æ€§ã€åŸºäºåå­—çš„å°éƒ¨ä»¶æ ‡è¯†ä»¥åŠ MVU æ¶æ„ï¼Œ<code>relm</code>èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ›´åŠ æ–¹ä¾¿åœ°æ„å»ºå¤æ‚çš„äº¤äº’å¼ç•Œé¢ã€‚éšç€ Rust ç”Ÿæ€çš„ä¸æ–­æˆç†Ÿï¼Œ<code>relm</code>æ— ç–‘æ˜¯æ„å»ºè·¨å¹³å° GUI åº”ç”¨çš„ä¸€ä¸ªæœ‰åŠ›å€™é€‰ã€‚</p><h2 id="egui" tabindex="-1">egui <a class="header-anchor" href="#egui" aria-label="Permalink to &quot;egui&quot;">â€‹</a></h2><ul><li><p>è¯¥ egui åº“æ˜¯ä¸€ä¸ªå³æ—¶æ¨¡å¼ã€æ˜“äºä½¿ç”¨ã€å¯ç§»æ¤çš„åº“ï¼Œç”¨äºåœ¨ Rust ä¸­æ„å»ºåœ¨ Webã€è®¡ç®—æœºå’Œæ¸¸æˆå¼•æ“ï¼ˆå¼€å‘ä¸­ï¼‰ä¸Šè¿è¡Œçš„ GUIã€‚å®ƒçš„ç›®æ ‡æ˜¯æˆä¸ºåœ¨ Rust ä¸­æ„å»º Web åº”ç”¨ç¨‹åºçš„æœ€ç®€å•çš„åº“ã€‚</p></li><li><p>è¯¥ egui åº“æ—¨åœ¨ä¸ºæ„å»º GUI æä¾›å®‰å…¨ã€å“åº”è¿…é€Ÿã€å‹å¥½ä¸”å¯ç§»æ¤çš„ä½“éªŒï¼Œè€Œæ— éœ€å›è°ƒå’Œæœ€å°ä¾èµ–ã€‚æŸ¥çœ‹ egui çš„å®˜æ–¹æ–‡æ¡£ä»¥äº†è§£å¦‚ä½•ä½¿ç”¨å®ƒæ¥åˆ¶ä½œè·¨å¹³å°çš„ GUIã€‚</p></li><li><p>è¯¥ egui åº“æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼Œå¦‚æœæ‚¨è¶³å¤Ÿå‹‡æ•¢ï¼Œæ‚¨å¯ä»¥åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒã€‚åº“çš„ç‰¹å®šéƒ¨åˆ† egui å·²å‡†å¤‡å¥½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Œå› ä¸ºè¾ƒæ–°çš„ç‰ˆæœ¬å®¹æ˜“å‘ç”Ÿé‡å¤§æ›´æ”¹ã€‚</p></li></ul><h2 id="native-windows-gui" tabindex="-1">native-windows-gui <a class="header-anchor" href="#native-windows-gui" aria-label="Permalink to &quot;native-windows-gui&quot;">â€‹</a></h2><h2 id="azul-é€‚ç”¨äº-rustã€c-å’Œ-c-çš„æ¡Œé¢guiæ¡†æ¶" tabindex="-1">Azulï¼šé€‚ç”¨äº Rustã€C å’Œ C++çš„æ¡Œé¢GUIæ¡†æ¶ <a class="header-anchor" href="#azul-é€‚ç”¨äº-rustã€c-å’Œ-c-çš„æ¡Œé¢guiæ¡†æ¶" aria-label="Permalink to &quot;Azulï¼šé€‚ç”¨äº Rustã€C å’Œ C++çš„æ¡Œé¢GUIæ¡†æ¶&quot;">â€‹</a></h2><p>Azul â€”â€” Rust å’Œ C++ ç¼–å†™çš„æ¡Œé¢ GUI æ¡†æ¶</p><p>GitHubï¼š<a href="https://github.com/fschutt/azul" target="_blank" rel="noreferrer">fschutt/azulï¼šæ¡Œé¢ GUI æ¡†æ¶ (github.com)</a></p><h3 id="ä»‹ç»-1" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»-1" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h3><ul><li><p><a href="https://www.oschina.net/p/azul-gui" target="_blank" rel="noreferrer">https://www.oschina.net/p/azul-gui</a></p></li><li><p>Azul æ¡†æ¶æ˜¯ä¸€ä¸ªååº”å¼ GUI åº“ï¼Œç”¨äºåœ¨ Rustã€C å’Œ C++ ä¸­æ„å»ºæ¡Œé¢ GUIã€‚å®ƒç”± WebRender æä¾›æ”¯æŒï¼Œæ˜¯ä¸€ç§æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œç±»ä¼¼äº HTML å’Œ CSSã€‚ç”±äº Azul åˆ©ç”¨ WebRenderï¼Œå®ƒæä¾›äº†æ¸å˜ã€æ¡†é˜´å½±ã€è¾¹æ¡†æ ·å¼å’Œ CSS å˜æ¢ç­‰åŠŸèƒ½ã€‚</p></li><li><p>Azul æ¡†æ¶è¿˜æä¾›äº†è®¸å¤šå†…ç½®å°éƒ¨ä»¶ã€æ¯ç§’è¶…è¿‡ 60 å¸§çš„åŠ¨ç”»ã€è·¨å¹³å°åŸç”Ÿå¯¹è¯ã€SVG è§£æã€é€šè¿‡å…±äº«åº“çš„åŠ¨æ€é“¾æ¥ä»¥åŠ HTML åˆ° Rust çš„çƒ­é‡è½½ç¼–è¯‘ã€‚</p></li><li><p>è¦å¼€å§‹ä½¿ç”¨ Azul æ¡†æ¶ï¼Œè¯·å°†å…¶æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–é¡¹ä¸­ï¼š</p></li><li><p>[dependencies]azul = &quot;1.0.0-alpha&quot;</p></li><li><p>ç„¶åå°† crates å¯¼å…¥æ‚¨çš„é¡¹ç›®å¹¶ä½¿ç”¨å®ƒä»¬ï¼š</p></li><li><p><code>use azul::prelude::*;use azul::widgets::{button::Button, label::Label};</code></p></li><li><p>Azul æ¡†æ¶æ–‡æ¡£é½å…¨ï¼Œå¯å¸®åŠ©æ‚¨å¼€å§‹æ„å»º GUIã€‚</p></li><li><p>Azul æ¡†æ¶é‡‡ç”¨ä¸åŒçš„ GUI å¼€å‘æ–¹æ³•ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥æ¡†æ¶å·²ç”¨äº 200 å¤šä¸ª Rust é¡¹ç›®ã€‚Azul æ¡†æ¶æ˜¯åŠŸèƒ½æ€§çš„ï¼Œæ ¹æ®æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒã€‚</p></li><li><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/fschutt/azul" target="_blank" rel="noreferrer">https://github.com/fschutt/azul</a></p></li></ul><h2 id="vgtk" tabindex="-1">vgtk <a class="header-anchor" href="#vgtk" aria-label="Permalink to &quot;vgtk&quot;">â€‹</a></h2><p>Rust å®ç°çš„æ¡Œé¢ UI æ¡†æ¶</p><ul><li><p>ä»‹ç»ï¼š<a href="https://www.oschina.net/p/vgtk" target="_blank" rel="noreferrer">https://www.oschina.net/p/vgtk</a></p></li><li><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/bodil/vgtk" target="_blank" rel="noreferrer">https://github.com/bodil/vgtk</a></p></li></ul><h2 id="gtk-rs" tabindex="-1">gtk-rs <a class="header-anchor" href="#gtk-rs" aria-label="Permalink to &quot;gtk-rs&quot;">â€‹</a></h2><h3 id="ä»‹ç»-2" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»-2" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h3><ul><li><p>GTK åº“åœ¨å¼€å‘è€…ç¤¾åŒºä¸­å¾ˆå—æ¬¢è¿ã€‚è®¸å¤šæµè¡Œçš„ Linux GUI åº”ç”¨ç¨‹åºä½¿ç”¨ GTK åº“å’Œ GNOME å †æ ˆã€‚è¯¥ gtk-rs åº“åªæ˜¯ä¼—å¤šå¯ç”¨äºç”Ÿäº§çš„ Rust GUI åº“ä¹‹ä¸€ï¼Œå·²åœ¨ 500 å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p></li><li><p>GTK æ˜¯ç”± GNOME é¡¹ç›®å¼€å‘çš„æµè¡Œçš„è·¨å¹³å°ã€é¢å‘å¯¹è±¡çš„å°éƒ¨ä»¶å·¥å…·åŒ…ã€‚å®ƒç”¨äºæ„å»ºå¯åœ¨ Unixã€Windows å’Œ macOS ç³»ç»Ÿä¸Šä»¥å¤šç§è¯­è¨€ï¼ˆä» Python åˆ° JavaScriptã€C å’Œ Rustï¼‰è¿è¡Œçš„ä¾¿æºå¼ GUI åº”ç”¨ç¨‹åºã€‚</p></li><li><p>GTK é¡¹ç›®æœ‰å„ç§ç‰ˆæœ¬ï¼Œä¾‹å¦‚ GTK 3ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰æ›´æ”¹å’Œå‡çº§ã€‚</p></li><li><p>è¯¥ gtk-rs é¡¹ç›®ä¸ºåŸºäº GNOME å †æ ˆçš„åº“ï¼ˆå¦‚ GTK 3 å’Œ GTK 4 åº“ï¼‰æä¾›å®‰å…¨çš„ Rust ç»‘å®šã€‚å’Œåº“åˆ†åˆ«æä¾› GTK 3 å’Œ GTK 4 åŠŸèƒ½ gtk3-rs ã€‚gtk4-rs</p></li><li><p>è¦å¼€å§‹ä½¿ç”¨è¿™äº› gtk-rs åº“ï¼Œæ‚¨éœ€è¦ Rust å·¥å…·é“¾å’Œ GTK åº“ã€‚åˆ›å»ºé¡¹ç›®åï¼Œå°†åº“æ·»åŠ åˆ° Cargo.tomlGTK 4 crate æ–‡ä»¶ä¸­çš„ä¾èµ–é¡¹ä¸­ï¼š</p></li><li version="" class="XX," package=""><p>gtk =</p></li><li><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ macOS æˆ– Linuxï¼Œè¯·ä½¿ç”¨ brew åŒ…ç®¡ç†å™¨å®‰è£… GTK 4 åº“ï¼š</p></li><li><p>brew install gtk4</p></li><li><p>æŸ¥çœ‹è¿™äº›é¡µé¢ä»¥è·å–æœ‰å…³å„ç§ Linux å‘è¡Œç‰ˆå’Œ Windows çš„å®‰è£…è¯´æ˜ã€‚</p></li><li><p>å®‰è£… gtk4 å¹¶å°†å…¶æ·»åŠ åˆ°ä¾èµ–é¡¹åï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·å¯¼å…¥ crateï¼š</p></li><li><p>use gtk::prelude::*;use gtk::Application;</p></li><li><p>gtk-rs è¿™æœ¬ä¹¦æ˜¯å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¯¥åº“åœ¨ Rust ä¸­æ„å»º GUI çš„å¥½èµ„æºã€‚</p></li></ul><h3 id="ç½‘ç«™" tabindex="-1">ç½‘ç«™ <a class="header-anchor" href="#ç½‘ç«™" aria-label="Permalink to &quot;ç½‘ç«™&quot;">â€‹</a></h3><p>å®˜ç½‘ï¼š<a href="https://gtk-rs.org/" target="_blank" rel="noreferrer">Unlocking the GNOME stack for Rust â€“ gtk-rs</a></p><p>GitHub å¼€æº</p><ul><li><p><a href="https://github.com/fltk-rs/fltk-rs" target="_blank" rel="noreferrer">fltk-rs/fltk-rs: Rust bindings for the FLTK GUI library. (github.com)</a></p></li><li><p><a href="https://github.com/gtk-rs/gtk4-rs" target="_blank" rel="noreferrer">gtk-rs/gtk4-rs: Rust bindings of GTK 4 (github.com)</a></p></li><li><p><a href="https://github.com/gtk-rs/gtk" target="_blank" rel="noreferrer">gtk-rs/gtk: DEPRECATED, use https://github.com/gtk-rs/gtk3-rs repository instead!</a></p></li></ul><h2 id="fltk-rs" tabindex="-1">fltk-rs <a class="header-anchor" href="#fltk-rs" aria-label="Permalink to &quot;fltk-rs&quot;">â€‹</a></h2><p>ä¹¦ç±åœ°å€ï¼š<a href="https://fltk.flatig.vip/" target="_blank" rel="noreferrer">å¼€å§‹ - fltk book (flatig.vip)</a></p><h3 id="ä»‹ç»-3" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»-3" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h3><ul><li><p>æ ¹æ®è®¸å¤šå…¶ä»–å¼€å‘äººå‘˜çš„è¯´æ³•ï¼Œä½¿ç”¨è¯¥ fltk-rs åº“æ¯” C++ åº“æ›´ç›´æ¥ã€‚</p></li><li><p>FLTKï¼ˆFast Light Toolkitï¼‰æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€è·¨å¹³å°æ”¯æŒçš„ç”¨äºæ„å»º GUI çš„å·¥å…·åŒ…ã€‚FLTK åœ¨ Windowsã€macOS å’Œ UNIX ç³»ç»Ÿä¸Šå—æ”¯æŒï¼Œæœ€åˆæ˜¯ä¸º C++ æ„å»ºçš„ã€‚å¦‚æœæ‚¨ä½¿ç”¨ FLTK å·¥å…·åŒ…åˆ›å»º GUI åº”ç”¨ç¨‹åºï¼Œåˆ™è¯¥åº”ç”¨ç¨‹åºåœ¨æ‰€æœ‰å—æ”¯æŒçš„æ“ä½œç³»ç»Ÿä¸Šçœ‹èµ·æ¥éƒ½ä¸€æ ·ã€‚</p></li><li><p>è¯¥ fltk-rs åº“ä¸º FLTK å·¥å…·åŒ…æä¾› Rust ç»‘å®šã€‚crate æ”¯æŒæ—§æ¶æ„ï¼Œfltk-rs æœ‰ 80 å¤šä¸ªå¯å®šåˆ¶çš„å°éƒ¨ä»¶å’Œè¶…è¿‡å››ä¸ªæ”¯æŒçš„ä¸»é¢˜æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ GTK æ–¹æ¡ˆã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ cratefltk-theme è¿›è¡Œæ›´å¤šè‡ªå®šä¹‰ã€‚</p></li><li><p>è¯¥ fltk-rs åº“å¯ä»¥é€šè¿‡ä¸€æ¬¡æ‰§è¡Œå¿«é€Ÿå®‰è£…ã€æ„å»ºã€å¯åŠ¨å’Œè¿è¡Œã€‚å¼€å§‹ä½¿ç”¨ fltk-rscrate å¾ˆå®¹æ˜“â€”â€”æ‚¨æ‰€è¦åšçš„å°±æ˜¯å°†é¡¹ç›®ä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„ Cargo.toml æ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£…åº“ã€‚</p></li><li><p>fltk å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ macOS æˆ– Linux è®¡ç®—æœºï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ­¤ brew å‘½ä»¤å®‰è£…åº“ï¼š</p></li><li><p>brew install fltk</p></li><li><p>æ‚¨å¯ä»¥åœ¨é“¾æ¥é¡µé¢ä¸Šæ‰¾åˆ°ä¸ºå…¶ä»–æ“ä½œç³»ç»Ÿå®‰è£…åº“çš„è¯´æ˜ã€‚fltk å°†é¡¹ç›®ä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„ Cargo.toml æ–‡ä»¶ä¸­ï¼š</p></li><li version="" class="^13," features=""><p>[dependencies]fltk =</p></li><li><p>æ·»åŠ é¡¹ç›®å¹¶å®‰è£… fltk åº“åï¼Œæ‚¨å¯ä»¥å°† crate å¯¼å…¥åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼š</p></li><li><p>use fltk::{app, button::Button, frame::Frame, prelude::*, window::Window};</p></li><li><p>æŸ¥çœ‹ fltk-rs æ–‡æ¡£ä»¥è¯¦ç»†äº†è§£å…¶åŠŸèƒ½å’Œç”¨é€”ã€‚</p></li></ul><h2 id="frui" tabindex="-1">Frui <a class="header-anchor" href="#frui" aria-label="Permalink to &quot;Frui&quot;">â€‹</a></h2><h3 id="ä»‹ç»-4" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»-4" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h3><p>Frui æ˜¯ä¸€ä¸ªå¼€å‘è€…å‹å¥½çš„ UI æ¡†æ¶ï¼Œå®ƒä½¿æ„å»ºç”¨æˆ·ç•Œé¢å˜å¾—ç®€å•è€Œå¯Œæœ‰æˆæ•ˆã€‚å®ƒçš„çµæ„Ÿæ¥è‡ªäº Flutter æ¶æ„</p><h3 id="ç½‘å€" tabindex="-1">ç½‘å€ <a class="header-anchor" href="#ç½‘å€" aria-label="Permalink to &quot;ç½‘å€&quot;">â€‹</a></h3><p>GitHubï¼š<a href="https://github.com/fruiframework/frui" target="_blank" rel="noreferrer">https://github.com/fruiframework/frui</a></p><h3 id="æ•™ç¨‹" tabindex="-1">æ•™ç¨‹ <a class="header-anchor" href="#æ•™ç¨‹" aria-label="Permalink to &quot;æ•™ç¨‹&quot;">â€‹</a></h3><ul><li><a href="https://blog.csdn.net/weixin_47754149/article/details/127396748" target="_blank" rel="noreferrer">ã€ä¸€èµ·å­¦ Rust | æ¡†æ¶ç¯‡ | Frui æ¡†æ¶ã€‘rust ä¸€ä¸ªå¯¹å¼€å‘è€…å‹å¥½çš„ GUI æ¡†æ¶â€”â€”Frui<em>rust æ¡†æ¶</em>å¹¿é¾™å®‡çš„åšå®¢-CSDN åšå®¢</a></li></ul><h2 id="tauri" tabindex="-1">Tauri <a class="header-anchor" href="#tauri" aria-label="Permalink to &quot;Tauri&quot;">â€‹</a></h2><p>å®˜ç½‘æ–‡æ¡£ï¼š<a href="https://tauri.app/zh/v1/guides/getting-started/setup/" target="_blank" rel="noreferrer">å¿«é€Ÿå¼€å§‹ | Tauri Apps</a></p><h2 id="freya-åŸç”Ÿ-gui-é«˜æ€§èƒ½ä¸”å†…å­˜å ç”¨ä½" tabindex="-1">Freyaï¼šåŸç”Ÿ GUIï¼Œé«˜æ€§èƒ½ä¸”å†…å­˜å ç”¨ä½ <a class="header-anchor" href="#freya-åŸç”Ÿ-gui-é«˜æ€§èƒ½ä¸”å†…å­˜å ç”¨ä½" aria-label="Permalink to &quot;Freyaï¼šåŸç”Ÿ GUIï¼Œé«˜æ€§èƒ½ä¸”å†…å­˜å ç”¨ä½&quot;">â€‹</a></h2><ul><li>GitHubï¼š<a href="https://github.com/marc2332/freya" target="_blank" rel="noreferrer">https://github.com/marc2332/freya</a></li><li>å®˜ç½‘ï¼š<a href="https://freyaui.dev/" target="_blank" rel="noreferrer">https://freyaui.dev/</a></li></ul><p>ç”± ğŸ§¬ Dioxus å’Œ ğŸ¨ Skia æä¾›æ”¯æŒçš„ ğŸ¦€ Rust è·¨å¹³å° GUI åº“ã€‚</p><p>Freya è¿˜æ˜¯æ¯”è¾ƒå¹´è½»ï¼Œå±äºæ­£åœ¨å¼€å‘ä¸­é˜¶æ®µï¼Œä¼ä¸šè¿˜æ˜¯æ— æ³•ç”¨äºç”Ÿäº§çš„ï¼Œä½†ä¸å¦¨å®³æˆ‘ä»¬å­¦ä¹ åŠäº†è§£å®ƒï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒï¼</p><p><img src="/ProgramLearnNotes/assets/image-20240511163056796.ColbPLRW.png" alt="image-20240511163056796"></p><h3 id="freya-ä»‹ç»" tabindex="-1">Freya ä»‹ç» <a class="header-anchor" href="#freya-ä»‹ç»" aria-label="Permalink to &quot;Freya ä»‹ç»&quot;">â€‹</a></h3><p>Freya å®ƒæ˜¯ä¸€ä¸ªå®éªŒæ€§çš„é¡¹ç›®ï¼Œç”± Dioxus å’Œ Skia æä¾›æ”¯æŒçš„ï¼Œå…è®¸å¼€å‘è€…åœ¨ Windowsã€macOS å’Œ Linux ä¸Šåˆ›å»ºè·¨å¹³å°çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚Freya çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€å•ã€ç›´è§‚çš„æ–¹å¼æ¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼ŒåŒæ—¶ä¿æŒé«˜æ€§èƒ½å’Œè·¨å¹³å°å…¼å®¹æ€§ã€‚</p><h4 id="freya-ç‰¹ç‚¹" tabindex="-1">Freya ç‰¹ç‚¹ <a class="header-anchor" href="#freya-ç‰¹ç‚¹" aria-label="Permalink to &quot;Freya ç‰¹ç‚¹&quot;">â€‹</a></h4><ul><li><strong>åŸºäº Dioxus å’Œ Skia</strong>ï¼šFreya å»ºç«‹åœ¨ Dioxus è¿™ä¸ª UI åº“ä¹‹ä¸Šï¼Œå¹¶ä¸”ä½¿ç”¨äº† Skia å›¾å½¢å¼•æ“ï¼Œè¿™ä¸ºå®ƒæä¾›äº†å¼ºå¤§çš„å›¾å½¢æ¸²æŸ“èƒ½åŠ›ã€‚</li><li><strong>å†…ç½®ç»„ä»¶</strong>ï¼šå¦‚æŒ‰é’®ã€æ»šåŠ¨è§†å›¾ã€å¼€å…³ç­‰ã€‚</li><li><strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šå¯ä»¥åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬ Windowsã€macOS å’Œ Linuxã€‚</li><li><strong>ä¸­é—´ä»¶æ”¯æŒ</strong>ï¼šFreya æ”¯æŒä¸­é—´ä»¶ï¼Œè¿™å¯¹äºæ„å»ºç”Ÿäº§å°±ç»ªçš„ Web æ¡†æ¶æ˜¯ä¸€ä¸ªå…³é”®è¦æ±‚ã€‚</li><li><strong>çƒ­é‡è½½æ”¯æŒ</strong>ï¼šDioxus çš„çƒ­é‡è½½æ”¯æŒä¸º Freya æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´åŠ é«˜æ•ˆåœ°æ„å»ºå’Œæµ‹è¯•è·¨å¹³å°çš„ Rust åŸç”Ÿ GUI åº”ç”¨ç¨‹åºã€‚</li></ul><h3 id="freya-å¿«é€Ÿä½¿ç”¨" tabindex="-1">Freya å¿«é€Ÿä½¿ç”¨ <a class="header-anchor" href="#freya-å¿«é€Ÿä½¿ç”¨" aria-label="Permalink to &quot;Freya å¿«é€Ÿä½¿ç”¨&quot;">â€‹</a></h3><p>éœ€è¦æ·»åŠ  Freya å’Œ Dioxus ä½œä¸ºä¾èµ–é¡¹ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>freya = &quot;0.2&quot;</span></span>
<span class="line"><span>dioxus = { version = &quot;0.5&quot;, features = [&quot;macro&quot;, &quot;hooks&quot;], default-features = false }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="freya-æœªæ¥æ–¹å‘" tabindex="-1">Freya æœªæ¥æ–¹å‘ <a class="header-anchor" href="#freya-æœªæ¥æ–¹å‘" aria-label="Permalink to &quot;Freya æœªæ¥æ–¹å‘&quot;">â€‹</a></h3><p>Freya ç›®æ ‡è‡´åŠ›äºæˆä¸ºä¸€ä¸ªé«˜æ€§èƒ½ã€èµ„æºç»æµçš„ Rust GUI å·¥å…·åŒ…ï¼Œæ—¨åœ¨æä¾›å“è¶Šçš„å¼€å‘è€…ä½“éªŒï¼Œå®ç°å¹¿æ³›çš„è·¨å¹³å°å…¼å®¹æ€§ï¼Œç¡®ä¿å…¨é¢çš„è¾…åŠ©åŠŸèƒ½æ”¯æŒï¼Œæ‰“é€ å¼ºå¤§çš„æµ‹è¯•å·¥å…·é›†ï¼Œå¹¶æ„å»ºä¸€ä¸ªä¸°å¯Œã€çµæ´»çš„ç»„ä»¶ä¸é’©å­ç”Ÿæ€ç³»ç»Ÿã€‚</p><ul><li>é«˜æ€§èƒ½ä¸”å†…å­˜å ç”¨ä½</li><li>è·¨å¹³å°æ”¯æŒ</li><li>æœ‰ç”¨ä¸”å¯æ‰©å±•çš„ç»„ä»¶å’ŒæŒ‚é’©</li><li>æœ‰ç”¨çš„æµ‹è¯• API</li><li>æä¾›è‰¯å¥½çš„å¼€å‘è€…ä½“éªŒ</li></ul><h2 id="vizia-ä¸€ä¸ªç”¨äº-rust-ç¼–ç¨‹è¯­è¨€çš„å£°æ˜å¼æ¡Œé¢-gui-æ¡†æ¶" tabindex="-1">Viziaï¼šä¸€ä¸ªç”¨äº Rust ç¼–ç¨‹è¯­è¨€çš„å£°æ˜å¼æ¡Œé¢ GUI æ¡†æ¶ <a class="header-anchor" href="#vizia-ä¸€ä¸ªç”¨äº-rust-ç¼–ç¨‹è¯­è¨€çš„å£°æ˜å¼æ¡Œé¢-gui-æ¡†æ¶" aria-label="Permalink to &quot;Viziaï¼šä¸€ä¸ªç”¨äº Rust ç¼–ç¨‹è¯­è¨€çš„å£°æ˜å¼æ¡Œé¢ GUI æ¡†æ¶&quot;">â€‹</a></h2><p>ä¸€ä¸ªç”¨äº Rust ç¼–ç¨‹è¯­è¨€çš„å£°æ˜å¼æ¡Œé¢ GUI æ¡†æ¶ã€‚</p><p>ä¹¦ç±ï¼š</p><p>æ–‡æ¡£ï¼š</p><p>æ¼”ç¤ºï¼š</p><p>Discordï¼š</p><h3 id="ç‰¹æ€§" tabindex="-1">ç‰¹æ€§ <a class="header-anchor" href="#ç‰¹æ€§" aria-label="Permalink to &quot;ç‰¹æ€§&quot;">â€‹</a></h3><ul><li><h4 id="ã€Œè·¨å¹³å°-windowsã€linuxã€macos-ã€" tabindex="-1">ã€Œè·¨å¹³å°ï¼ˆWindowsã€Linuxã€MacOSï¼‰ã€ <a class="header-anchor" href="#ã€Œè·¨å¹³å°-windowsã€linuxã€macos-ã€" aria-label="Permalink to &quot;ã€Œè·¨å¹³å°ï¼ˆWindowsã€Linuxã€MacOSï¼‰ã€&quot;">â€‹</a></h4><p>æ„å»ºåœ¨ Windowsã€Mac å’Œ Linux ä¸Šå¤–è§‚å’Œè¡Œä¸ºç›¸åŒçš„æ¡Œé¢åº”ç”¨ç¨‹åºã€‚</p></li><li><h4 id="ã€Œå£°æ˜å¼ã€" tabindex="-1">ã€Œå£°æ˜å¼ã€ <a class="header-anchor" href="#ã€Œå£°æ˜å¼ã€" aria-label="Permalink to &quot;ã€Œå£°æ˜å¼ã€&quot;">â€‹</a></h4><p>ç”¨çº¯ Rust ç¼–å†™ GUI ä»£ç ï¼ˆæ— éœ€ DSL å®ï¼‰ã€‚</p></li><li><h4 id="ã€Œå“åº”å¼ã€" tabindex="-1">ã€Œå“åº”å¼ã€ <a class="header-anchor" href="#ã€Œå“åº”å¼ã€" aria-label="Permalink to &quot;ã€Œå“åº”å¼ã€&quot;">â€‹</a></h4><p>è§†å›¾æ´¾ç”Ÿè‡ªåº”ç”¨ç¨‹åºçŠ¶æ€ã€‚æ›´æ”¹çŠ¶æ€ï¼Œç»‘å®šåˆ°å®ƒçš„è§†å›¾å°†è‡ªåŠ¨æ›´æ–°ã€‚</p></li><li><h4 id="ã€Œçµæ´»å¸ƒå±€ã€" tabindex="-1">ã€Œçµæ´»å¸ƒå±€ã€ <a class="header-anchor" href="#ã€Œçµæ´»å¸ƒå±€ã€" aria-label="Permalink to &quot;ã€Œçµæ´»å¸ƒå±€ã€&quot;">â€‹</a></h4><p>åˆ›å»ºé€‚åº”å¤§å°å˜åŒ–çš„çµæ´»å¸ƒå±€ã€‚ç”± morphorm[1] æä¾›æ”¯æŒã€‚</p></li><li><h4 id="ã€Œå¼ºå¤§çš„æ ·å¼è®¾è®¡ã€" tabindex="-1">ã€Œå¼ºå¤§çš„æ ·å¼è®¾è®¡ã€ <a class="header-anchor" href="#ã€Œå¼ºå¤§çš„æ ·å¼è®¾è®¡ã€" aria-label="Permalink to &quot;ã€Œå¼ºå¤§çš„æ ·å¼è®¾è®¡ã€&quot;">â€‹</a></h4><p>åˆ©ç”¨æ”¯æŒçƒ­é‡è½½çš„ CSS å®Œå…¨è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„æ ·å¼ã€‚</p></li><li><h4 id="ã€ŒåŠ¨ç”»ã€" tabindex="-1">ã€ŒåŠ¨ç”»ã€ <a class="header-anchor" href="#ã€ŒåŠ¨ç”»ã€" aria-label="Permalink to &quot;ã€ŒåŠ¨ç”»ã€&quot;">â€‹</a></h4><p>é€šè¿‡å¯åŠ¨ç”»çš„æ ·å¼å±æ€§ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ ©æ ©å¦‚ç”Ÿã€‚</p></li><li><h4 id="ã€Œå†…ç½®è§†å›¾å’Œä¸»é¢˜ã€" tabindex="-1">ã€Œå†…ç½®è§†å›¾å’Œä¸»é¢˜ã€ <a class="header-anchor" href="#ã€Œå†…ç½®è§†å›¾å’Œä¸»é¢˜ã€" aria-label="Permalink to &quot;ã€Œå†…ç½®è§†å›¾å’Œä¸»é¢˜ã€&quot;">â€‹</a></h4><p>ä½¿ç”¨è¶…è¿‡ 25 ä¸ªç°æˆçš„è§†å›¾ä»¥åŠä¸¤ä¸ªå†…ç½®ä¸»é¢˜ï¼ˆæµ…è‰²å’Œæ·±è‰²ï¼‰å¿«é€Ÿå¼€å§‹ã€‚åŒ…æ‹¬ 4250+ å›¾æ ‡ï¼Œç”± Tabler Icons[2] æä¾›ã€‚</p></li><li><h4 id="ã€Œæ— éšœç¢æ€§ã€" tabindex="-1">ã€Œæ— éšœç¢æ€§ã€ <a class="header-anchor" href="#ã€Œæ— éšœç¢æ€§ã€" aria-label="Permalink to &quot;ã€Œæ— éšœç¢æ€§ã€&quot;">â€‹</a></h4><p>ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¢«è¾…åŠ©æŠ€æœ¯è®¿é—®ï¼Œå¦‚å±å¹•é˜…è¯»å™¨ï¼Œç”± accesskit[3] æä¾›æ”¯æŒã€‚</p></li><li><h4 id="ã€Œæœ¬åœ°åŒ–ã€" tabindex="-1">ã€Œæœ¬åœ°åŒ–ã€ <a class="header-anchor" href="#ã€Œæœ¬åœ°åŒ–ã€" aria-label="Permalink to &quot;ã€Œæœ¬åœ°åŒ–ã€&quot;">â€‹</a></h4><p>ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºé€‚åº”ä¸åŒçš„åœ°åŒºï¼ŒåŒ…æ‹¬ä½¿ç”¨ fluent[4] ç¿»è¯‘æ–‡æœ¬ã€‚</p></li><li><h4 id="ã€Œgpu-åŠ é€Ÿæ¸²æŸ“ã€" tabindex="-1">ã€ŒGPU åŠ é€Ÿæ¸²æŸ“ã€ <a class="header-anchor" href="#ã€Œgpu-åŠ é€Ÿæ¸²æŸ“ã€" aria-label="Permalink to &quot;ã€ŒGPU åŠ é€Ÿæ¸²æŸ“ã€&quot;">â€‹</a></h4><p>Vizia åˆ©ç”¨ GPU è¿›è¡Œå¿«é€Ÿå›¾å½¢æ›´æ–°ï¼Œç”± femtovg[5] æä¾›æ”¯æŒã€‚</p></li><li><h4 id="ã€ŒéŸ³é¢‘æ’ä»¶å¼€å‘ã€" tabindex="-1">ã€ŒéŸ³é¢‘æ’ä»¶å¼€å‘ã€ <a class="header-anchor" href="#ã€ŒéŸ³é¢‘æ’ä»¶å¼€å‘ã€" aria-label="Permalink to &quot;ã€ŒéŸ³é¢‘æ’ä»¶å¼€å‘ã€&quot;">â€‹</a></h4><p>Vizia ä¸ºéŸ³é¢‘æ’ä»¶å¼€å‘æä¾›äº†ä¸€ä¸ªæ›¿ä»£çš„ baseview[6] çª—å£åç«¯ï¼Œä¾‹å¦‚ä¸ nih-plug[7] æ¡†æ¶ä¸€èµ·ä½¿ç”¨ã€‚</p></li></ul><h3 id="å¿«é€Ÿä¸€è§ˆ" tabindex="-1">å¿«é€Ÿä¸€è§ˆ <a class="header-anchor" href="#å¿«é€Ÿä¸€è§ˆ" aria-label="Permalink to &quot;å¿«é€Ÿä¸€è§ˆ&quot;">â€‹</a></h3><p>ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ <code>cargo run --example counter</code> è¿è¡Œã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ä¸€äº›æ¨¡å‹æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    count</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰äº‹ä»¶ä»¥æ›´æ”¹æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> AppEvent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    Increment</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æè¿°å¦‚ä½•æ ¹æ®äº‹ä»¶æ›´æ”¹æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Model</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> event</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> EventContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">app_event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> match</span><span style="color:#E06C75;"> app_event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Increment</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.count </span><span style="color:#56B6C2;">+=</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åº</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å°†æ¨¡å‹æ•°æ®æ„å»ºåˆ°æ ‘ä¸­</span></span>
<span class="line"><span style="color:#E5C07B;">        AppData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> }.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // å£°æ˜ç»„æˆ UI çš„è§†å›¾</span></span>
<span class="line"><span style="color:#E5C07B;">        HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å£°æ˜ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒå‘å‡ºä¸€ä¸ªäº‹ä»¶</span></span>
<span class="line"><span style="color:#E5C07B;">            Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;å¢åŠ &quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">              .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Increment</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // å£°æ˜ä¸€ä¸ªæ ‡ç­¾ï¼Œå®ƒç»‘å®šåˆ°æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ›´æ”¹æ—¶æ›´æ–°</span></span>
<span class="line"><span style="color:#E5C07B;">            Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))  </span><span style="color:#7F848E;font-style:italic;">// åº”ç”¨æ ·å¼å’Œå¸ƒå±€ä¿®é¥°ç¬¦</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">col_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;è®¡æ•°å™¨&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// é…ç½®çª—å£å±æ€§</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">inner_size</span><span style="color:#ABB2BF;">((</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p><img src="/ProgramLearnNotes/assets/640-489498.y0yqzrv0.webp" alt="å›¾ç‰‡"></p><h3 id="å­¦ä¹ " tabindex="-1">å­¦ä¹  <a class="header-anchor" href="#å­¦ä¹ " aria-label="Permalink to &quot;å­¦ä¹ &quot;">â€‹</a></h3><h4 id="ä¹¦ç±" tabindex="-1">ä¹¦ç± <a class="header-anchor" href="#ä¹¦ç±" aria-label="Permalink to &quot;ä¹¦ç±&quot;">â€‹</a></h4><p>Vizia çš„å¿«é€Ÿå…¥é—¨æŒ‡å—å¯åœ¨ è¿™é‡Œ[8] æ‰¾åˆ°ã€‚</p><h4 id="æ–‡æ¡£" tabindex="-1">æ–‡æ¡£ <a class="header-anchor" href="#æ–‡æ¡£" aria-label="Permalink to &quot;æ–‡æ¡£&quot;">â€‹</a></h4><p>è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æ–‡æ¡£å¯åœ¨ è¿™é‡Œ[9] æ‰¾åˆ°ã€‚</p><h4 id="ç¤ºä¾‹-6" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-6" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h4><p>ä»“åº“ä¸­åŒ…å«äº†ä¸€ä¸ª ç¤ºä¾‹[10] åˆ—è¡¨ã€‚</p><p>ä½¿ç”¨ winit[11]ï¼ˆé»˜è®¤ï¼‰çª—å£åç«¯è¿è¡Œç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">cargo</span><span style="color:#E06C75;"> run</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">release</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">example</span><span style="color:#E06C75;"> example_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="baseview" tabindex="-1">Baseview <a class="header-anchor" href="#baseview" aria-label="Permalink to &quot;Baseview&quot;">â€‹</a></h4><p>ä½¿ç”¨ baseview[12] çª—å£åç«¯è¿è¡Œç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">cargo</span><span style="color:#E06C75;"> run</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">release</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">example</span><span style="color:#E06C75;"> example_name</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">no</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">features</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">features</span><span style="color:#E06C75;"> baseview</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="web" tabindex="-1">Web <a class="header-anchor" href="#web" aria-label="Permalink to &quot;Web&quot;">â€‹</a></h4><p>è¦ä½œä¸º Web åº”ç”¨ç¨‹åºè¿è¡Œç¤ºä¾‹ï¼Œé¦–å…ˆç¡®ä¿å·²å®‰è£… <code>wasm32-unknown-unknown</code> å·¥å…·é“¾ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">rustup</span><span style="color:#E06C75;"> target</span><span style="color:#E06C75;"> add</span><span style="color:#E06C75;"> wasm32</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">unknown</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">unknown</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">cargo</span><span style="color:#E06C75;"> run</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">wasm</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">release</span><span style="color:#ABB2BF;"> --</span><span style="color:#E06C75;">example</span><span style="color:#E06C75;"> example_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>â</p><p>**ã€Œæ³¨æ„ã€**ä¸€äº›ç¤ºä¾‹ä¸ Web ç›®æ ‡ä¸å…¼å®¹ï¼Œå¦‚æœåœ¨ç½‘ç»œä¸Šè¿è¡Œï¼Œå°†ä¼šæ•…æ„å´©æºƒã€‚</p><p>â</p></blockquote><h3 id="vizia-æ¡†æ¶çš„åŠ¨ç”»åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„-å®ƒå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“" tabindex="-1">Vizia æ¡†æ¶çš„åŠ¨ç”»åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ <a class="header-anchor" href="#vizia-æ¡†æ¶çš„åŠ¨ç”»åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„-å®ƒå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“" aria-label="Permalink to &quot;Vizia æ¡†æ¶çš„åŠ¨ç”»åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ&quot;">â€‹</a></h3><p>Vizia æ¡†æ¶çš„åŠ¨ç”»åŠŸèƒ½æ˜¯é€šè¿‡å…¶å£°æ˜å¼ GUI æ¶æ„å®ç°çš„ï¼Œå…è®¸å¼€å‘è€…ä»¥ä¸€ç§ç®€æ´è€Œç›´è§‚çš„æ–¹å¼æ¥å®šä¹‰å’Œæ§åˆ¶åŠ¨ç”»ã€‚åœ¨ Vizia ä¸­ï¼ŒåŠ¨ç”»é€šå¸¸æ˜¯é€šè¿‡ç»‘å®šåˆ°åº”ç”¨ç¨‹åºçŠ¶æ€çš„è§†å›¾æ¥å®ç°çš„ã€‚å½“åº”ç”¨ç¨‹åºçš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸è¯¥çŠ¶æ€ç›¸å…³è”çš„è§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè¿™ç§çŠ¶æ€çš„å˜åŒ–å¯ä»¥è¢«ç”¨æ¥è§¦å‘åŠ¨ç”»æ•ˆæœã€‚</p><p>ä»¥ä¸‹æ˜¯ Vizia åŠ¨ç”»åŠŸèƒ½çš„å®ç°æ–¹å¼å’Œå¯¹æ€§èƒ½å½±å“çš„ä¸€äº›è¦ç‚¹ï¼š</p><ol><li><strong>ã€Œå£°æ˜å¼åŠ¨ç”»ã€</strong>ï¼šå¼€å‘è€…å¯ä»¥ä½¿ç”¨å£°æ˜å¼çš„æ–¹æ³•æ¥å®šä¹‰åŠ¨ç”»ï¼Œè¿™æ„å‘³ç€åŠ¨ç”»æ˜¯é€šè¿‡æè¿°è§†å›¾çŠ¶æ€çš„å˜åŒ–æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å‘½ä»¤å¼çš„è„šæœ¬ã€‚</li><li><strong>ã€ŒçŠ¶æ€é©±åŠ¨ã€</strong>ï¼šåŠ¨ç”»é€šå¸¸æ˜¯å¯¹çŠ¶æ€å˜åŒ–çš„å“åº”ã€‚å½“åº”ç”¨ç¨‹åºçš„çŠ¶æ€æ›´æ–°æ—¶ï¼ŒVizia å¯ä»¥è‡ªåŠ¨åœ°åœ¨è§†å›¾ä¹‹é—´è¿›è¡Œè¿‡æ¸¡ï¼Œåˆ›å»ºå¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚</li><li><strong>ã€ŒCSS æ ·å¼åŠ¨ç”»ã€</strong>ï¼šVizia æ”¯æŒä½¿ç”¨ CSS æ¥å®šä¹‰åŠ¨ç”»ï¼Œè¿™å…è®¸å¼€å‘è€…åˆ©ç”¨ç†Ÿæ‚‰çš„ CSS è¯­æ³•æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚</li><li><strong>ã€Œæ€§èƒ½ä¼˜åŒ–ã€</strong>ï¼šVizia ä½¿ç”¨ GPU åŠ é€Ÿæ¸²æŸ“ï¼Œè¿™æ„å‘³ç€åŠ¨ç”»å’Œå›¾å½¢æ›´æ–°å¯ä»¥åˆ©ç”¨ GPU çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li><li><strong>ã€Œç»†ç²’åº¦æ§åˆ¶ã€</strong>ï¼šå¼€å‘è€…å¯ä»¥å¯¹åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€å»¶è¿Ÿã€è¿­ä»£æ¬¡æ•°ç­‰è¿›è¡Œç»†ç²’åº¦æ§åˆ¶ï¼Œè¿™æœ‰åŠ©äºä¼˜åŒ–åŠ¨ç”»çš„æ€§èƒ½å’Œèµ„æºä½¿ç”¨ã€‚</li><li><strong>ã€ŒåŠ¨ç”»æ€§èƒ½æƒè¡¡ã€</strong>ï¼šè™½ç„¶åŠ¨ç”»å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼Œä½†å¤æ‚çš„åŠ¨ç”»å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ï¼Œå°¤å…¶æ˜¯åœ¨èµ„æºå—é™çš„è®¾å¤‡ä¸Šã€‚Vizia æä¾›äº†å·¥å…·å’Œæ§åˆ¶ï¼Œä»¥ä¾¿å¼€å‘è€…å¯ä»¥åœ¨åŠ¨ç”»æ•ˆæœå’Œæ€§èƒ½ä¹‹é—´åšå‡ºæƒè¡¡ã€‚</li><li><strong>ã€Œçƒ­é‡è½½ã€</strong>ï¼šVizia æ”¯æŒ CSS çš„çƒ­é‡è½½ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥åœ¨ä¸é‡å¯åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹æ›´æ”¹æ ·å¼å’ŒåŠ¨ç”»ï¼Œè¿™æœ‰åŠ©äºå¿«é€Ÿè¿­ä»£å’Œä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ã€‚</li><li><strong>ã€Œå†…ç½®è§†å›¾å’Œä¸»é¢˜ã€</strong>ï¼šVizia æä¾›äº†ä¸€ç»„å†…ç½®çš„è§†å›¾å’Œä¸»é¢˜ï¼Œè¿™äº›è§†å›¾å’Œä¸»é¢˜å¯èƒ½å·²ç»åŒ…å«äº†ä¼˜åŒ–çš„åŠ¨ç”»æ•ˆæœï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å®ç°é«˜æ€§èƒ½çš„åŠ¨ç”»ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒVizia çš„åŠ¨ç”»åŠŸèƒ½æ—¨åœ¨æä¾›å¼ºå¤§çš„åŠ¨ç”»èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒå¯¹æ€§èƒ½çš„ç²¾ç»†æ§åˆ¶ã€‚é€šè¿‡åˆ©ç”¨ GPU åŠ é€Ÿå’Œå£°æ˜å¼çš„çŠ¶æ€ç®¡ç†ï¼ŒVizia èƒ½å¤Ÿåœ¨ä¸è¿‡åº¦ç‰ºç‰²æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸ºæ¡Œé¢åº”ç”¨ç¨‹åºå¸¦æ¥ç”ŸåŠ¨çš„åŠ¨ç”»æ•ˆæœã€‚</p><h3 id="åœ¨-vizia-æ¡†æ¶ä¸­-å¦‚ä½•ä½¿ç”¨-css-æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœ" tabindex="-1">åœ¨ Vizia æ¡†æ¶ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ CSS æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Ÿ <a class="header-anchor" href="#åœ¨-vizia-æ¡†æ¶ä¸­-å¦‚ä½•ä½¿ç”¨-css-æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœ" aria-label="Permalink to &quot;åœ¨ Vizia æ¡†æ¶ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ CSS æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Ÿ&quot;">â€‹</a></h3><p>åœ¨ Vizia æ¡†æ¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ CSS æ¥åˆ›å»ºå¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼Œå› ä¸º Vizia æ”¯æŒå°† CSS æ ·å¼åº”ç”¨äº GUI ç»„ä»¶ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åˆ©ç”¨ CSS çš„å¼ºå¤§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºè¿‡æ¸¡ï¼ˆtransitionsï¼‰ã€å˜æ¢ï¼ˆtransformsï¼‰ã€å…³é”®å¸§åŠ¨ç”»ï¼ˆkeyframe animationsï¼‰ç­‰ï¼Œæ¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ åŠ¨ç”»æ•ˆæœã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ CSS åœ¨ Vizia ä¸­åˆ›å»ºåŠ¨ç”»çš„åŸºæœ¬æ–¹æ³•ï¼š</p><p><strong>ã€Œè¿‡æ¸¡ï¼ˆTransitionsï¼‰ã€</strong>ï¼š ä½¿ç”¨ CSS çš„ <code>transition</code> å±æ€§ï¼Œä½ å¯ä»¥åœ¨è§†å›¾çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶åˆ›å»ºå¹³æ»‘çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¯¹æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²æˆ–è§†å›¾çš„ä½ç½®å˜åŒ–æ·»åŠ è¿‡æ¸¡æ•ˆæœã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">.button {</span></span>
<span class="line"><span style="color:#E06C75;">  background</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">blue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  transition</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">background</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">color</span><span style="color:#D19A66;"> 0.</span><span style="color:#ABB2BF;">3s </span><span style="color:#E06C75;">ease</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">.button:</span><span style="color:#E06C75;">hover</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  background</span><span style="color:#ABB2BF;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">green</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ã€Œå˜æ¢ï¼ˆTransformsï¼‰ã€</strong>ï¼š CSS çš„ <code>transform</code> å±æ€§å¯ä»¥ç”¨æ¥ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾æˆ–å€¾æ–œè§†å›¾ã€‚è¿™äº›å˜æ¢ä¹Ÿå¯ä»¥é€šè¿‡è¿‡æ¸¡æ¥åŠ¨ç”»åŒ–ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#C678DD;">box</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  transform</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">rotate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">0deg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">  transition</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">transform</span><span style="color:#D19A66;"> 0.</span><span style="color:#ABB2BF;">5s;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#C678DD;">box</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">hover</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  transform</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">rotate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">360deg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ã€Œå…³é”®å¸§åŠ¨ç”»ï¼ˆKeyframe Animationsï¼‰ã€</strong>ï¼š é€šè¿‡å®šä¹‰å…³é”®å¸§ï¼Œä½ å¯ä»¥åˆ›å»ºæ›´å¤æ‚çš„åŠ¨ç”»è·¯å¾„å’Œæ•ˆæœã€‚å…³é”®å¸§åŠ¨ç”»å¯ä»¥æ§åˆ¶åŠ¨ç”»çš„æ¯ä¸ªé˜¶æ®µï¼Œéå¸¸çµæ´»ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E06C75;">keyframes</span><span style="color:#E06C75;"> example</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#D19A66;">  0</span><span style="color:#ABB2BF;">% { </span><span style="color:#E06C75;">transform</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">translateX</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); }</span></span>
<span class="line"><span style="color:#D19A66;">  50</span><span style="color:#ABB2BF;">% { </span><span style="color:#E06C75;">transform</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">translateX</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">100px</span><span style="color:#ABB2BF;">); }</span></span>
<span class="line"><span style="color:#D19A66;">  100</span><span style="color:#ABB2BF;">% { </span><span style="color:#E06C75;">transform</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">translateX</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">.</span><span style="color:#C678DD;">box</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">example</span><span style="color:#E06C75;"> 5s</span><span style="color:#E06C75;"> infinite</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>ã€ŒåŠ¨ç”»ï¼ˆAnimationsï¼‰ã€</strong>ï¼š CSS çš„ <code>animation</code> å±æ€§æ˜¯ä¸€ä¸ªç®€å†™å±æ€§ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªå£°æ˜ä¸­è®¾ç½®å¤šä¸ªåŠ¨ç”»å±æ€§ï¼ŒåŒ…æ‹¬åç§°ã€æŒç»­æ—¶é—´ã€è¿­ä»£æ¬¡æ•°ç­‰ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">.animated-</span><span style="color:#C678DD;">box</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  animation</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">example</span><span style="color:#E06C75;"> 5s</span><span style="color:#E06C75;"> infinite</span><span style="color:#E06C75;"> alternate</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol><li><strong>ã€Œå“åº”å¼åŠ¨ç”»ã€</strong>ï¼š Vizia çš„åŠ¨ç”»å¯ä»¥å“åº”åº”ç”¨ç¨‹åºçš„çŠ¶æ€å˜åŒ–ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åˆ›å»ºåŸºäºæ•°æ®å˜åŒ–çš„åŠ¨ç”»ï¼Œä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’æˆ–æ•°æ®æ›´æ–°æ—¶ã€‚</li><li><strong>ã€Œæ€§èƒ½è€ƒè™‘ã€</strong>ï¼š è™½ç„¶ CSS åŠ¨ç”»éå¸¸å¼ºå¤§ï¼Œä½†ä¹Ÿéœ€è¦è€ƒè™‘æ€§èƒ½ã€‚å¤æ‚çš„åŠ¨ç”»æˆ–è¿‡å¤šçš„åŠ¨ç”»å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨æ›´æ–°é¢‘ç¹çš„è§†å›¾ä¸Šã€‚å› æ­¤ï¼Œåˆç†ä½¿ç”¨åŠ¨ç”»ï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–ã€‚</li><li><strong>ã€Œçƒ­é‡è½½ã€</strong>ï¼š Vizia æ”¯æŒ CSS çš„çƒ­é‡è½½ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ›´æ”¹ CSS æ ·å¼å’ŒåŠ¨ç”»ï¼Œè€Œæ— éœ€é‡å¯åº”ç”¨ç¨‹åºï¼Œè¿™æœ‰åŠ©äºå¿«é€Ÿå¼€å‘å’Œè¿­ä»£ã€‚</li></ol><p>é€šè¿‡ç»“åˆ Vizia çš„å£°æ˜å¼ GUI æ¶æ„å’Œ CSS çš„åŠ¨ç”»åŠŸèƒ½ï¼Œä½ å¯ä»¥åˆ›å»ºå‡ºæ—¢ç¾è§‚åˆå…·æœ‰è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„åŠ¨ç”»æ•ˆæœã€‚</p><h4 id="ä»£ç ç¤ºä¾‹" tabindex="-1">ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h4><blockquote><p>â</p><p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ã€‚å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå¼€å§‹ç¼–ç¨‹å·¥ä½œ</p><p>â</p></blockquote><p>examples/animation.rs</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> STYLE</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> r#&quot;</span></span>
<span class="line"><span style="color:#98C379;">    @keyframes slidein {</span></span>
<span class="line"><span style="color:#98C379;">        0% {</span></span>
<span class="line"><span style="color:#98C379;">            left: 0px;</span></span>
<span class="line"><span style="color:#98C379;">        }</span></span>
<span class="line"><span style="color:#98C379;">        50% {</span></span>
<span class="line"><span style="color:#98C379;">            left: 50px;</span></span>
<span class="line"><span style="color:#98C379;">        }</span></span>
<span class="line"><span style="color:#98C379;">        100% {</span></span>
<span class="line"><span style="color:#98C379;">            left: 200px;</span></span>
<span class="line"><span style="color:#98C379;">        }</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"><span style="color:#98C379;">&quot;#</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_stylesheet</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">STYLE</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to add stylesheet&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> animation</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> AnimationBuilder</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">keyframe</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0.0</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scale</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">keyframe</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> key</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scale</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;2.5&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> anim_id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_animation</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">animation</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">red</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">id</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;elem&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Play 1&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">play_animation_for</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;slidein&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;elem&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#E5C07B;">        Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Play 2&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> |</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">play_animation_for</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">anim_id</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;elem&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li>å›¾è¡¨ç¤ºä¾‹</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> STYLE</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> r#&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    label {</span></span>
<span class="line"><span style="color:#98C379;">        width: 110px;</span></span>
<span class="line"><span style="color:#98C379;">        height: 30px;</span></span>
<span class="line"><span style="color:#98C379;">        border-width: 1px;</span></span>
<span class="line"><span style="color:#98C379;">        border-color: #505050;</span></span>
<span class="line"><span style="color:#98C379;">        child-top: 1s;</span></span>
<span class="line"><span style="color:#98C379;">        child-bottom: 1s;</span></span>
<span class="line"><span style="color:#98C379;">        child-left: 5px;</span></span>
<span class="line"><span style="color:#98C379;">        text-wrap: false;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .default {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: default;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .crosshair {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: crosshair;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .hand {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: hand;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .arrow {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: arrow;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .move {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: move;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .text {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: text;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .wait {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: wait;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .help {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: help;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .progress {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: progress;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .not-allowed {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: not-allowed;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .context-menu {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: context-menu;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .cell {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: cell;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .vertical-text {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: vertical-text;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .alias {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: alias;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .copy {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: copy;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .no-drop {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: no-drop;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .grab {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: grab;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .grabbing {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: grabbing;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .all-scroll {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: all-scroll;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .zoom-in {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: zoom-in;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .zoom-out {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: zoom-out;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .e-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: e-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .n-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: n-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .ne-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: ne-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .nw-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: nw-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .s-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: s-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .se-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: se-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .sw-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: sw-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .w-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: w-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .ew-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: ew-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .ns-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: ns-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .nesw-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: nesw-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .nwse-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: nwse-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .col-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: col-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .row-resize {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: row-resize;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"><span style="color:#98C379;">    .none {</span></span>
<span class="line"><span style="color:#98C379;">        cursor: none;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"><span style="color:#98C379;">&quot;#</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_stylesheet</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">STYLE</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to add stylesheet&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            VStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Default&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;default&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Crosshair&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;crosshair&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Hand&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hand&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Arrow&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;arrow&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Move&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;move&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Text&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Wait&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;wait&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Help&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;help&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Progress&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;progress&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NotAllowed&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;not-allowed&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ContextMenu&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;context-menu&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Cell&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;cell&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">row_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            VStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;VerticalText&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;vertical-text&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Alias&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;alias&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Copy&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;copy&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NoDrop&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;no-drop&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Grab&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;grab&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Grabbing&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;grabbing&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;AllScroll&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;all-scroll&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ZoomIn&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;zoom-in&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ZoomOut&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;zoom-out&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;EResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;e-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;n-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NeResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ne-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">row_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            VStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NwResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;nw-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;SResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;s-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;SeResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;se-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;SwResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sw-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;WResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;w-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;EwResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ew-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NsResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ns-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NeswResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;nesw-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;NwseResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;nwse-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ColResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;col-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;RowResize&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;row-resize&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;None&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;none&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">row_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Cursor Icon&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">inner_size</span><span style="color:#ABB2BF;">((</span><span style="color:#D19A66;">800</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">600</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br></div></div><ul><li>è‡ªå®šä¹‰è§†å›¾</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::vg;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> CustomView</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Color</span><span style="color:#ABB2BF;">&gt;&gt; {</span></span>
<span class="line"><span style="color:#E06C75;">    color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Color</span><span style="color:#ABB2BF;">&gt;&gt; </span><span style="color:#E5C07B;">CustomView</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Handle</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Self</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">        Self</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;This is a custom view!&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // Redraw when lensed data changes</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;">mut</span><span style="color:#E06C75;"> handle</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> handle</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">needs_redraw</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Color</span><span style="color:#ABB2BF;">&gt;&gt; </span><span style="color:#E5C07B;">View</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> CustomView</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">L</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> draw</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> DrawContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">canvas</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Canvas</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> col</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.color.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> bounds</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bounds</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> vg</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Path</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">        path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">rect</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bounds</span><span style="color:#ABB2BF;">.x, </span><span style="color:#E06C75;">bounds</span><span style="color:#ABB2BF;">.y, </span><span style="color:#E06C75;">bounds</span><span style="color:#ABB2BF;">.w, </span><span style="color:#E06C75;">bounds</span><span style="color:#ABB2BF;">.h);</span></span>
<span class="line"><span style="color:#E06C75;">        canvas</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fill_path</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E5C07B;">vg</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Paint</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">color</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">col</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into</span><span style="color:#ABB2BF;">()));</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Model</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> event</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_cx</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> EventContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">app_event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> match</span><span style="color:#E06C75;"> app_event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetColor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">col</span><span style="color:#ABB2BF;">) =&gt; </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.color </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> *</span><span style="color:#E06C75;">col</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> AppEvent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    SetColor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        AppData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">red</span><span style="color:#ABB2BF;">() }.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        CustomView</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">        Slider</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">c</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">r</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">as</span><span style="color:#E5C07B;"> f32</span><span style="color:#ABB2BF;"> / </span><span style="color:#D19A66;">255.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">on_changing</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetColor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">rgb</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;"> * </span><span style="color:#D19A66;">255.0</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">as</span><span style="color:#E5C07B;"> u8</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)))</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><ul><li>æ‹–æ‹½ç¤ºä¾‹</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> helpers;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> helpers</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        ExamplePage</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">vertical</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">red</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">on_drag</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">ex</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_drop_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">current</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">                Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">green</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">on_drag</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#56B6C2;">                    |</span><span style="color:#E06C75;">ex</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                        ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_drop_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">current</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">                    },</span></span>
<span class="line"><span style="color:#ABB2BF;">                );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">                Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50.0</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">blue</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">on_drag</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">ex</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_drop_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">current</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">col_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Color</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">beige</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">on_drop</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">ex</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> DropData</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">Id</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                        let</span><span style="color:#E06C75;"> bg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">with_current</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">ex</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">background_color</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">                        ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set_background_color</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">                        ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetCursor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CursorIcon</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> DropData</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">File</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">                        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Dropped File: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                })</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">on_hover</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">ex</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                    if</span><span style="color:#E06C75;"> ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">has_drop_data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E06C75;">                        ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetCursor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CursorIcon</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                        ex</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetCursor</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">CursorIcon</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Default</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                });</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><ul><li>è·Ÿéšç³»ç»Ÿä¸»é¢˜</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    current_theme</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Model</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> event</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> EventContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">ThemeChanged</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">theme</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.current_theme </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> match</span><span style="color:#E06C75;"> theme</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                    ThemeMode</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">DarkMode</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&quot;Dark Mode&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">                    ThemeMode</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">LightMode</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#98C379;">&quot;Light Mode&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">to_owned</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Context</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        AppData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">current_theme</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Light mode&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_owned</span><span style="color:#ABB2BF;">() }.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">EnvironmentEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetThemeMode</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppTheme</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">System</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        VStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;This example follow system theme change&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">            Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Change your theme to light or dark mode to see how it works</span><span style="color:#56B6C2;">\n</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">            Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">current_theme</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">v</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> format!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Current system theme: {v}&quot;</span><span style="color:#ABB2BF;">)));</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Follow system theme&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">inner_size</span><span style="color:#ABB2BF;">((</span><span style="color:#D19A66;">470</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">320</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><ul><li>é”®ç›˜æ˜ å°„</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//! This example showcases how to use a keymap.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//!</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! Key chords:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `A`                     =&gt; `Action::OnA`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `B`                     =&gt; `Action::OnB`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `C`                     =&gt; `Action::OnC`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `CTRL+A`                =&gt; `Action::OnCtrlA`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `ALT+A`                 =&gt; `Action::OnAltA`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `SHIFT+A`               =&gt; `Action::OnShiftA`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `LOGO+A`                =&gt; `Action::OnLogoA`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `ALT+SHIFT+X`           =&gt; `Action::OnAltShiftX`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `CTRL+ALT+SHIFT+Y`      =&gt; `Action::OnCtrlAltShiftY`</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//! `CTRL+ALT+SHIFT+LOGO+Z` =&gt; `Action::OnCtrlAltShiftLogoZ`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // Build the keymap.</span></span>
<span class="line"><span style="color:#E5C07B;">        Keymap</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">vec!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyA</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnA</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action A&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyB</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnB</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action B&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">empty</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyC</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnC</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action C&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">CTRL</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyA</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnCtrlA</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnCtrlA&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">ALT</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyA</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnAltA</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnAltA&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SHIFT</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyA</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnShiftA</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnShiftA&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SUPER</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyA</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnLogoA</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnLogoA&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">ALT</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SHIFT</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyX</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnAltShiftX</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnAltShiftX&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">CTRL</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">ALT</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SHIFT</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyY</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnCtrlAltShiftY</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnCtrlAltShiftY&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (</span></span>
<span class="line"><span style="color:#E5C07B;">                KeyChord</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">                    Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">CTRL</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">ALT</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SHIFT</span><span style="color:#56B6C2;"> |</span><span style="color:#E5C07B;"> Modifiers</span><span style="color:#ABB2BF;">::</span><span style="color:#D19A66;">SUPER</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">                    Code</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">KeyZ</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                ),</span></span>
<span class="line"><span style="color:#E5C07B;">                KeymapEntry</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Action</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">OnCtrlAltShiftLogoZ</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">                    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Action OnCtrlAltShiftLogoZ&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                }),</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">        ])</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Keymap&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// The actions that are associated with the key chords.</span></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">PartialEq</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> Action</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    OnA</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnB</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnC</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnCtrlA</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnAltA</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnShiftA</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnLogoA</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnAltShiftX</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnCtrlAltShiftY</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    OnCtrlAltShiftLogoZ</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><ul><li>æ•°å­—è¾“å…¥</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// TODO: Make this a built-in view</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> STYLE</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> r#&quot;</span></span>
<span class="line"><span style="color:#98C379;">    textbox:invalid {</span></span>
<span class="line"><span style="color:#98C379;">        border-color: #ff0000;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"><span style="color:#98C379;">&quot;#</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    number</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    invalid</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> AppEvent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    SetNumber</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#E5C07B;">    SetInvalid</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Model</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> event</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> EventContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">app_event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> match</span><span style="color:#E06C75;"> app_event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetNumber</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">) =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.number </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> *</span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.invalid </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">SetInvalid</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.invalid </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_stylesheet</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">STYLE</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to add stylesheet&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        AppData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">invalid</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> }.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Textbox</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">validate</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> *</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#D19A66;"> 50</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">on_submit</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">                    cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">SetNumber</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                })</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">child_left</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // Label::new(cx, &quot;Please enter a number less than 50&quot;)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //     .class(&quot;validation_error_label&quot;)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //     .toggle_class(&quot;validation_error&quot;, AppData::invalid);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">32.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">child_top</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">child_bottom</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">child_left</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_top</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_bottom</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">col_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Number Input&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><ul><li>ä»£ç†</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[allow(unused)]</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(target_arch </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;wasm32&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    panic!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;This example is not supported on wasm - threads are experimental&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(feature </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;baseview&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    panic!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;This example is not supported on baseview - proxies are winit only&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(all(not(target_arch </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;wasm32&quot;</span><span style="color:#ABB2BF;">), not(feature </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;baseview&quot;</span><span style="color:#ABB2BF;">)))]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {})</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">on_idle</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">            println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;On Idle: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Instant</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">title</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Proxy&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> proxy</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_proxy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">thread</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">spawn</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">move</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> loop</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        proxy</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(()).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to send proxy event&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">thread</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">sleep</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">time</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Duration</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">from_secs</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>ä¿å­˜å¼¹çª—</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#D19A66;"> STYLE</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> r#&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .modal {</span></span>
<span class="line"><span style="color:#98C379;">        space: 1s;</span></span>
<span class="line"><span style="color:#98C379;">        child-space: 8px;</span></span>
<span class="line"><span style="color:#98C379;">        child-left: 1s;</span></span>
<span class="line"><span style="color:#98C379;">        child-right: 1s;</span></span>
<span class="line"><span style="color:#98C379;">        background-color: white;</span></span>
<span class="line"><span style="color:#98C379;">        border-radius: 3px;</span></span>
<span class="line"><span style="color:#98C379;">        border-width: 1px;</span></span>
<span class="line"><span style="color:#98C379;">        border-color: #999999;</span></span>
<span class="line"><span style="color:#98C379;">        outer-shadow: 0 3 10 #00000055;</span></span>
<span class="line"><span style="color:#98C379;">        overflow: visible;</span></span>
<span class="line"><span style="color:#98C379;">        child-space: 10px;</span></span>
<span class="line"><span style="color:#98C379;">        height: auto;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .modal&gt;vstack&gt;label {</span></span>
<span class="line"><span style="color:#98C379;">        width: auto;</span></span>
<span class="line"><span style="color:#98C379;">        height: auto;</span></span>
<span class="line"><span style="color:#98C379;">        space: 5px;</span></span>
<span class="line"><span style="color:#98C379;">        child-space: 1s;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .modal button {</span></span>
<span class="line"><span style="color:#98C379;">        border-radius: 3px;</span></span>
<span class="line"><span style="color:#98C379;">        child-space: 1s;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#98C379;">    .modal hstack {</span></span>
<span class="line"><span style="color:#98C379;">        col-between: 20px;</span></span>
<span class="line"><span style="color:#98C379;">        size: auto;</span></span>
<span class="line"><span style="color:#98C379;">    }</span></span>
<span class="line"><span style="color:#98C379;">&quot;#</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Lens</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    is_saved</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    show_dialog</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">impl</span><span style="color:#E5C07B;"> Model</span><span style="color:#C678DD;"> for</span><span style="color:#E5C07B;"> AppData</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> event</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> EventContext</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#C678DD;">mut</span><span style="color:#E5C07B;"> Event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">window_event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">meta</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // Intercept WindowClose event to show a dialog if not &#39;saved&#39;.</span></span>
<span class="line"><span style="color:#C678DD;">            if</span><span style="color:#C678DD;"> let</span><span style="color:#E5C07B;"> WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">WindowClose</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> window_event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                if</span><span style="color:#56B6C2;"> !</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.is_saved {</span></span>
<span class="line"><span style="color:#E5C07B;">                    self</span><span style="color:#ABB2BF;">.show_dialog </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">                    meta</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">consume</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">app_event</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_</span><span style="color:#56B6C2;">|</span><span style="color:#C678DD;"> match</span><span style="color:#E06C75;"> app_event</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">HideModal</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.show_dialog </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Save</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.is_saved </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">SaveAndClose</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.is_saved </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">                cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">WindowClose</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">            AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Cancel</span><span style="color:#ABB2BF;"> =&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">                self</span><span style="color:#ABB2BF;">.is_saved </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> AppEvent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    HideModal</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Save</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    SaveAndClose</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E5C07B;">    Cancel</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_stylesheet</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">STYLE</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to add stylesheet&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        AppData</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">is_saved</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">show_dialog</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> }.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Close&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">WindowClose</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">            Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Save&quot;</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Save</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">col_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Dialog</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AppData</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">show_dialog</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            VStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Save before close?&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">child_space</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Stretch</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E5C07B;">                HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">                    Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Save &amp; Close&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">SaveAndClose</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">120.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;accent&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">                    Button</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E5C07B;"> Label</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Cancel&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">on_press</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AppEvent</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">HideModal</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                        .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">120.0</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">                })</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">row_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // .on_blur(|cx| cx.emit(AppEvent::HideModal))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Auto</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">row_between</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;modal&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br></div></div><ul><li>æ ·å¼è¡¨</li></ul><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[allow(unused)]</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> vizia</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(target_arch </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;wasm32&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">    panic!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;This example is not supported on wasm - uses filesystem&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[cfg(not(target_arch </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;wasm32&quot;</span><span style="color:#ABB2BF;">))]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">ApplicationError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#E5C07B;">    Application</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_stylesheet</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">include_style!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;examples/resources/themes/test.css&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to add stylesheet&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        HStack</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">cx</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">            Element</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;foo&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">Pixels</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">200.0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">class</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;bar&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    .</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="reference-2" tabindex="-1">Reference <a class="header-anchor" href="#reference-2" aria-label="Permalink to &quot;Reference&quot;">â€‹</a></h3><p>[1] morphormï¼š<a href="https://github.com/vizia/morphorm" target="_blank" rel="noreferrer">https://github.com/vizia/morphorm</a></p><p>[2] Tabler Iconsï¼š<a href="https://tabler-icons.io" target="_blank" rel="noreferrer">https://tabler-icons.io</a></p><p>[3] accesskitï¼š<a href="https://github.com/accesskit/accesskit" target="_blank" rel="noreferrer">https://github.com/accesskit/accesskit</a></p><p>[4] fluentï¼š<a href="https://github.com/projectfluent/fluent-rs" target="_blank" rel="noreferrer">https://github.com/projectfluent/fluent-rs</a></p><p>[5] femtovgï¼š<a href="https://github.com/femtovg/femtovg" target="_blank" rel="noreferrer">https://github.com/femtovg/femtovg</a></p><p>[6] baseviewï¼š<a href="https://github.com/RustAudio/baseview" target="_blank" rel="noreferrer">https://github.com/RustAudio/baseview</a></p><p>[7] nih-plugï¼š<a href="https://github.com/robbert-vdh/nih-plug" target="_blank" rel="noreferrer">https://github.com/robbert-vdh/nih-plug</a></p><p>[8] è¿™é‡Œï¼š<a href="https://book.vizia.dev" target="_blank" rel="noreferrer">https://book.vizia.dev</a></p><p>[9] è¿™é‡Œï¼š<a href="https://docs.vizia.dev" target="_blank" rel="noreferrer">https://docs.vizia.dev</a></p><p>[10] ç¤ºä¾‹ï¼š<a href="https://github.com/vizia/vizia/tree/main/examples" target="_blank" rel="noreferrer">https://github.com/vizia/vizia/tree/main/examples</a></p><p>[11] winitï¼š<a href="https://github.com/rust-windowing/winit" target="_blank" rel="noreferrer">https://github.com/rust-windowing/winit</a></p><p>[12] baseviewï¼š<a href="https://github.com/RustAudio/baseview" target="_blank" rel="noreferrer">https://github.com/RustAudio/baseview</a></p><h2 id="wgpu-rs-rust-è¯­è¨€çš„å›¾å½¢ç¼–ç¨‹é©å‘½" tabindex="-1">WGPU-RSï¼šRust è¯­è¨€çš„å›¾å½¢ç¼–ç¨‹é©å‘½ <a class="header-anchor" href="#wgpu-rs-rust-è¯­è¨€çš„å›¾å½¢ç¼–ç¨‹é©å‘½" aria-label="Permalink to &quot;WGPU-RSï¼šRust è¯­è¨€çš„å›¾å½¢ç¼–ç¨‹é©å‘½&quot;">â€‹</a></h2><p>åœ¨ Rust ç¼–ç¨‹è¯­è¨€çš„é¢†åŸŸï¼Œ<code>wgpu-rs</code> å·²æˆä¸ºä¸€ä¸ªé‡è¦çš„çªç ´ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ—¢å®‰å…¨åˆé«˜æ•ˆçš„æ–¹å¼æ¥è¿›è¡Œå›¾å½¢ç¼–ç¨‹ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <code>wgpu-rs</code> çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼Œå®ƒå¦‚ä½•è®©å›¾å½¢ç¼–ç¨‹å˜å¾—æ›´åŠ è®¿é—®ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥åˆ›å»ºä»¤äººæƒŠå¹çš„å¯è§†åŒ–æ•ˆæœã€‚</p><h3 id="wgpu-rs-æ¦‚è¿°" tabindex="-1"><code>wgpu-rs</code> æ¦‚è¿° <a class="header-anchor" href="#wgpu-rs-æ¦‚è¿°" aria-label="Permalink to &quot;`wgpu-rs` æ¦‚è¿°&quot;">â€‹</a></h3><p><code>wgpu-rs</code> æ˜¯ä¸€ä¸ª Rust é¡¹ç›®ï¼Œæ—¨åœ¨ä½¿ Rust è¯­è¨€çš„å›¾å½¢ç¼–ç¨‹æ›´åŠ å®¹æ˜“ã€‚å®ƒæ˜¯ä¸€ä¸ªåº“ï¼Œå…è®¸ç”¨æˆ·ä»¥å®‰å…¨å’Œèˆ’é€‚çš„æ–¹å¼è½»æ¾åœ°ä¸ä»–ä»¬ç³»ç»Ÿä¸­çš„å›¾å½¢ç¡¬ä»¶äº¤äº’ã€‚è¯¥åº“åœ¨ <code>wgpu-core</code> ä¸Šæä¾›äº†é«˜çº§ã€æƒ¯ç”¨å’Œæ–¹ä¾¿çš„æŠ½è±¡ï¼ŒåŒæ—¶ä»ç„¶å…è®¸å¯¹åº•å±‚ API çš„ç›´æ¥ä½çº§æ§åˆ¶ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥è®¿é—®å„ç§åç«¯çš„å›¾å½¢å’Œè®¡ç®—åŠŸèƒ½ï¼ŒåŒ…æ‹¬ Vulkanã€Metalã€DirectX ä»¥åŠæµè§ˆå™¨ WebGPUã€‚</p><h3 id="wgpu-rs-çš„æ ¸å¿ƒç‰¹æ€§" tabindex="-1"><code>wgpu-rs</code> çš„æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#wgpu-rs-çš„æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;`wgpu-rs` çš„æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><ol><li><strong>è·¨å¹³å°</strong>ï¼šæ”¯æŒå¤šç§åç«¯ï¼ˆVulkanã€Metalã€DirectXã€WebGPUï¼‰ï¼Œå¯å®ç°çœŸæ­£çš„è·¨å¹³å°å›¾å½¢ç¼–ç¨‹ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šRust çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨æ£€æŸ¥æœºåˆ¶ï¼Œå‡å°‘äº†å†…å­˜æ³„éœ²å’Œå…¶ä»–å®‰å…¨é—®é¢˜çš„é£é™©ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šæä¾›ç›´æ¥ä½çº§æ§åˆ¶çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…å……åˆ†åˆ©ç”¨ç¡¬ä»¶çš„èƒ½åŠ›ã€‚</li><li><strong>æ˜“ç”¨æ€§</strong>ï¼šæä¾›é«˜çº§çš„æŠ½è±¡ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°åˆ›å»ºå›¾å½¢åº”ç”¨ã€‚</li><li><strong>ç°ä»£</strong>ï¼šè´´åˆæœ€æ–°çš„å›¾å½¢APIæ ‡å‡†ï¼Œå¦‚WebGPUï¼Œä¿æŒæŠ€æœ¯çš„å‰æ²¿æ€§ã€‚</li></ol><h3 id="ä½¿ç”¨-wgpu-rs-å¼€å§‹å›¾å½¢ç¼–ç¨‹" tabindex="-1">ä½¿ç”¨ <code>wgpu-rs</code> å¼€å§‹å›¾å½¢ç¼–ç¨‹ <a class="header-anchor" href="#ä½¿ç”¨-wgpu-rs-å¼€å§‹å›¾å½¢ç¼–ç¨‹" aria-label="Permalink to &quot;ä½¿ç”¨ `wgpu-rs` å¼€å§‹å›¾å½¢ç¼–ç¨‹&quot;">â€‹</a></h3><p>ä¸ºäº†æ¢ç´¢ <code>wgpu-rs</code> çš„å¼ºå¤§åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ªç®€å•çš„ä¾‹å­æ¥å±•ç¤ºå¦‚ä½•å¼€å§‹ä½¿ç”¨è¿™ä¸ªåº“è¿›è¡Œå›¾å½¢ç¼–ç¨‹ã€‚</p><p><strong>ç¯å¢ƒé…ç½®</strong>ï¼š</p><p>é¦–å…ˆï¼Œæ‚¨éœ€è¦ç¡®ä¿ Rust ç¯å¢ƒå·²ç»å®‰è£…åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šã€‚ç„¶åï¼Œé€šè¿‡æ·»åŠ ä»¥ä¸‹ä¾èµ–åˆ° <code>Cargo.toml</code> æ¥å¼•å…¥ <code>wgpu-rs</code>ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>[dependencies]</span></span>
<span class="line"><span>wgpu = &quot;0.10&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>ç®€å•çš„ç¤ºä¾‹</strong>ï¼š</p><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„å›¾å½¢æ¸²æŸ“ç¤ºä¾‹æ¥å±•ç¤º <code>wgpu-rs</code> çš„ä½¿ç”¨ã€‚æ­¤ç¤ºä¾‹å°†åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œå¹¶åœ¨çª—å£ä¸­æ¸²æŸ“ä¸€ä¸ªç®€å•çš„ä¸‰è§’å½¢ã€‚</p><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªçª—å£å’Œè®¾å¤‡ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> wgpu</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Instance</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> winit</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"><span style="color:#E5C07B;">    event</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Event</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">WindowEvent</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">    event_loop</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">ControlFlow</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">EventLoop</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E5C07B;">    window</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">WindowBuilder</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event_loop</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">EventLoop</span><span style="color:#ABB2BF;">&lt;()&gt;, </span><span style="color:#E06C75;">window</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Window</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> instance</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Instance</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">wgpu</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Backends</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">all</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> surface</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> unsafe</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">instance</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create_surface</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">window</span><span style="color:#ABB2BF;">) }.</span><span style="color:#61AFEF;">expect</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Failed to create a surface&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ›å»ºè®¾å¤‡å’Œé˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ¥ä¸‹æ¥ï¼ŒåŠ è½½ç®¡é“ã€é¡¶ç‚¹å’Œåƒç´ ç€è‰²å™¨ï¼Œç„¶åå¼€å§‹æ¸²æŸ“å¾ªç¯ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>// æ­¤éƒ¨åˆ†å°†æ·»åŠ ç®¡é“åˆ›å»ºä»£ç ã€é¡¶ç‚¹æ•°æ®å’Œæ¸²æŸ“å¾ªç¯ã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ³¨æ„ï¼Œç”±äºç¯‡å¹…é™åˆ¶ï¼Œå®Œæ•´çš„åº”ç”¨ç¨‹åºä»£ç è¯·å‚é˜… <code>wgpu-rs</code> çš„å®˜æ–¹ç¤ºä¾‹ä»“åº“ã€‚</p><h3 id="è¿›é˜¶åº”ç”¨å’Œæ€§èƒ½ä¼˜åŒ–" tabindex="-1">è¿›é˜¶åº”ç”¨å’Œæ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#è¿›é˜¶åº”ç”¨å’Œæ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;è¿›é˜¶åº”ç”¨å’Œæ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><p>æ·±å…¥åˆ° <code>wgpu-rs</code>ï¼Œæ‚¨å¯ä»¥æ¢ç´¢æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚å¤šçº¿ç¨‹æ¸²æŸ“ã€GPU åŠ é€Ÿè®¡ç®—ä»¥åŠåˆ›å»ºå¤æ‚çš„ 3D åœºæ™¯ã€‚é€šè¿‡åˆç†åˆ©ç”¨ Rust çš„å¹¶å‘ç‰¹æ€§å’Œ <code>wgpu-rs</code> æä¾›çš„æ¥å£ï¼Œå¯ä»¥å¼€å‘å‡ºæ€§èƒ½å“è¶Šã€å“åº”çµæ•çš„åº”ç”¨ç¨‹åºã€‚</p><p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p><ol><li><strong>åˆ©ç”¨å¹¶å‘</strong>ï¼šRust æä¾›çš„å®‰å…¨å¹¶å‘å…è®¸æ‚¨å……åˆ†åˆ©ç”¨å¤šæ ¸ CPUï¼Œè¿›è¡Œé«˜æ•ˆçš„æ•°æ®å¤„ç†å’Œæ¸²æŸ“ã€‚</li><li><strong>ç²¾ç¡®èµ„æºç®¡ç†</strong>ï¼šåˆç†åˆ†é…å’Œå›æ”¶ GPU èµ„æºï¼Œé¿å…èµ„æºæ³„éœ²å’Œå†²çªã€‚</li><li><strong>ç€è‰²å™¨ä¼˜åŒ–</strong>ï¼šä¼˜åŒ–ç€è‰²å™¨ä»£ç ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—å’Œèµ„æºä½¿ç”¨ã€‚</li></ol><h3 id="ç»“è¯­-4" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­-4" aria-label="Permalink to &quot;ç»“è¯­&quot;">â€‹</a></h3><p><code>wgpu-rs</code> ä¸º Rust è¯­è¨€æ‰“å¼€äº†å›¾å½¢ç¼–ç¨‹çš„æ–°çºªå…ƒï¼Œæ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼Œéƒ½å¯ä»¥ä»ä¸­å—ç›Šã€‚é€šè¿‡ <code>wgpu-rs</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºæ€§èƒ½å“è¶Šã€è·¨å¹³å°çš„å›¾å½¢åº”ç”¨ç¨‹åºï¼Œæ‹“å±• Rust ç¨‹åºçš„è¾¹ç•Œã€‚æ¬¢è¿æ›´å¤šçš„å¼€å‘è€…åŠ å…¥ Rust å’Œ <code>wgpu-rs</code> çš„ç¤¾åŒºï¼Œä¸€èµ·æ¨åŠ¨è¿™ä¸ªä»¤äººå…´å¥‹çš„é¡¹ç›®å‘å‰å‘å±•ã€‚</p><h2 id="å¾…å®š" tabindex="-1">å¾…å®š <a class="header-anchor" href="#å¾…å®š" aria-label="Permalink to &quot;å¾…å®š&quot;">â€‹</a></h2><ul><li><p><a href="https://www.zhihu.com/question/312815643?sort=created" target="_blank" rel="noreferrer">Rust è¯­è¨€æœ‰é‚£äº›å¥½çš„ GUI åº“? - çŸ¥ä¹ (zhihu.com)</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/484269271" target="_blank" rel="noreferrer">Rust ç§»åŠ¨å¼€å‘ä¸è·¨å¹³å°æ¨¡å¼æ¢ç©¶ - çŸ¥ä¹ (zhihu.com)</a></p></li><li><p><a href="https://blog.csdn.net/hyklose/article/details/124482491" target="_blank" rel="noreferrer">Flutter + Rust ffi å¼€å‘è·¨å¹³å° UI ç¨‹åºå…¥é—¨<em>flutter rust</em>æ«å®‰ Maplean çš„åšå®¢-CSDN åšå®¢</a></p></li><li><p><a href="https://github.com/search?o=desc&amp;q=Rust+UI&amp;s=stars&amp;type=Repositories" target="_blank" rel="noreferrer">æœç´¢ Â·é“é”ˆç”¨æˆ·ç•Œé¢ (github.com)</a></p></li><li><p>Rust crate å¤§å·¡ç¤¼</p><ul><li><a href="https://www.bilibili.com/video/BV1FL4y1x7MU/?spm_id_from=333.788&amp;vd_source=5f0c99b3deddffe219938763769b15ac" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1FL4y1x7MU/?spm_id_from=333.788&amp;vd_source=5f0c99b3deddffe219938763769b15ac</a></li></ul></li><li><p>lapceï¼š<a href="https://github.com/lapce/lapce" target="_blank" rel="noreferrer">https://github.com/lapce/lapce</a></p></li></ul><h1 id="è‡ªåŠ¨åŒ–åº“" tabindex="-1">è‡ªåŠ¨åŒ–åº“ <a class="header-anchor" href="#è‡ªåŠ¨åŒ–åº“" aria-label="Permalink to &quot;è‡ªåŠ¨åŒ–åº“&quot;">â€‹</a></h1><h2 id="æ¢ç´¢-habitat-åŸºäº-rust-æ„å»ºç°ä»£åŒ–åº”ç”¨çš„è‡ªåŠ¨åŒ–åˆ©å™¨" tabindex="-1">æ¢ç´¢ Habitatï¼šåŸºäº RUST æ„å»ºç°ä»£åŒ–åº”ç”¨çš„è‡ªåŠ¨åŒ–åˆ©å™¨ <a class="header-anchor" href="#æ¢ç´¢-habitat-åŸºäº-rust-æ„å»ºç°ä»£åŒ–åº”ç”¨çš„è‡ªåŠ¨åŒ–åˆ©å™¨" aria-label="Permalink to &quot;æ¢ç´¢ Habitatï¼šåŸºäº RUST æ„å»ºç°ä»£åŒ–åº”ç”¨çš„è‡ªåŠ¨åŒ–åˆ©å™¨&quot;">â€‹</a></h2><blockquote><p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„æŠ€æœ¯é¢†åŸŸï¼Œè‡ªåŠ¨åŒ–å·²æˆä¸ºè½¯ä»¶å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚Habitatï¼Œç”± habitat-sh å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œæ­£æ˜¯ä¸ºäº†åº”å¯¹è¿™ä¸€éœ€æ±‚è€Œç”Ÿã€‚æœ¬æ–‡å°†å¸¦é¢†è¯»è€…æ·±å…¥äº†è§£ Habitat çš„æ ¸å¿ƒåŠŸèƒ½ã€å®‰è£…æ–¹æ³•ä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ„å»ºå’Œç®¡ç†ç°ä»£åŒ–åº”ç”¨ç¨‹åºã€‚</p></blockquote><h3 id="habitat-ç®€ä»‹" tabindex="-1">Habitat ç®€ä»‹ <a class="header-anchor" href="#habitat-ç®€ä»‹" aria-label="Permalink to &quot;Habitat ç®€ä»‹&quot;">â€‹</a></h3><p>Habitat æ—¨åœ¨åˆ›å»ºä¸å¹³å°æ— å…³çš„æ„å»ºå·¥ä»¶ï¼Œå¹¶æä¾›å†…ç½®çš„éƒ¨ç½²å’Œç®¡ç†åŠŸèƒ½ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯å…è®¸å¼€å‘è€…åœ¨åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶è‡ªåŠ¨åŒ–å…¶è¡Œä¸ºï¼Œå¹¶å°†åº”ç”¨ç¨‹åºä¸æ‰€éœ€çš„è‡ªåŠ¨åŒ–æ†ç»‘åœ¨ä¸€èµ·ï¼Œä»¥ç¡®ä¿åœ¨ä»»ä½•éƒ¨ç½²ç¯å¢ƒä¸­éƒ½èƒ½ä»¥æ­£ç¡®çš„è¿è¡Œæ—¶è¡Œä¸ºã€æ›´æ–°ç­–ç•¥ã€æ•…éšœå¤„ç†ç­–ç•¥å’Œæ‰©å±•è¡Œä¸ºè¿è¡Œã€‚</p><h3 id="å®‰è£…-habitat" tabindex="-1">å®‰è£… Habitat <a class="header-anchor" href="#å®‰è£…-habitat" aria-label="Permalink to &quot;å®‰è£… Habitat&quot;">â€‹</a></h3><p>Habitat æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ macOSã€Windows å’Œ Linuxã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å®‰è£…æ–¹æ³•ï¼š</p><ul><li><p>å¯¹äº macOS ç”¨æˆ·ï¼Œå¦‚æœä½¿ç”¨ Homebrewï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… Habitatï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>brew tap habitat-sh/habitat</span></span>
<span class="line"><span>brew install hab</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>Windows ç”¨æˆ·å¦‚æœä½¿ç”¨ Chocolateyï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>choco install habitat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>å¯¹äºä¸ä½¿ç”¨ Homebrew æˆ– Chocolatey çš„ç”¨æˆ·ï¼Œæˆ–è€… Linux ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ Habitat æä¾›çš„<code>install.sh</code>æˆ–<code>install.ps1</code>è„šæœ¬æ¥å®‰è£…ã€‚</p></li></ul><h3 id="habitat-çš„æ ¸å¿ƒç»„ä»¶" tabindex="-1">Habitat çš„æ ¸å¿ƒç»„ä»¶ <a class="header-anchor" href="#habitat-çš„æ ¸å¿ƒç»„ä»¶" aria-label="Permalink to &quot;Habitat çš„æ ¸å¿ƒç»„ä»¶&quot;">â€‹</a></h3><p>Habitat çš„ä»£ç ç»„ç»‡æ¸…æ™°ï¼Œæ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p><ul><li><strong>Core Plans</strong>ï¼šç”± Habitat æ ¸å¿ƒå›¢é˜Ÿæ„å»ºå’Œç»´æŠ¤çš„è®¡åˆ’ï¼Œä½äºå•ç‹¬çš„ä»“åº“ä¸­ã€‚</li><li><strong>Habitat Supervisor å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶</strong>ï¼šHabitat Supervisor å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶çš„ä»£ç ä½äº<code>components</code>ç›®å½•ä¸‹ã€‚</li><li><strong>æ–‡æ¡£</strong>ï¼šHabitat çš„ç½‘ç«™å’Œæ–‡æ¡£æºä»£ç ä½äº Habitat æºä»£ç çš„<code>www</code>ç›®å½•ä¸­ã€‚</li></ul><h3 id="å›¾è¡¨" tabindex="-1">å›¾è¡¨ <a class="header-anchor" href="#å›¾è¡¨" aria-label="Permalink to &quot;å›¾è¡¨&quot;">â€‹</a></h3><p>æœ‰åŠ©äºæ‚¨å’Œå›¢é˜Ÿæ›´å¥½åœ°ç†è§£æ¦‚å¿µä»¥åŠå®ƒä»¬å¦‚ä½•èå…¥æ›´å¹¿æ³›çš„ Habitat ç”Ÿæ€ç³»ç»Ÿçš„å›¾å½¢ã€‚</p><h3 id="habitat-çš„å®šä½" tabindex="-1">Habitat çš„å®šä½ <a class="header-anchor" href="#habitat-çš„å®šä½" aria-label="Permalink to &quot;Habitat çš„å®šä½&quot;">â€‹</a></h3><p><img src="/ProgramLearnNotes/assets/640-9996663333.DwXOcWiF.webp" alt="å›¾ç‰‡">Habitatæµç¨‹ä¿¡æ¯å›¾è¡¨</p><p>å°è¯•åœ¨<strong>å®˜ç½‘</strong>[1]ä¸Šä½“éªŒäº’åŠ¨å¼ä¿¡æ¯å›¾è¡¨ï¼</p><h3 id="habitat-çš„å·¥ä½œåŸç†" tabindex="-1">Habitat çš„å·¥ä½œåŸç† <a class="header-anchor" href="#habitat-çš„å·¥ä½œåŸç†" aria-label="Permalink to &quot;Habitat çš„å·¥ä½œåŸç†&quot;">â€‹</a></h3><ul><li><strong>æ¶æ„æ¦‚è§ˆ</strong>[2]</li><li><strong>åˆå§‹åŒ…æ„å»ºæµç¨‹</strong>[3]</li><li><strong>åº”ç”¨é‡å»ºæµç¨‹</strong>[4]</li><li><strong>ä¾èµ–æ›´æ–°æµç¨‹</strong>[5]</li><li><strong>é€šè¿‡æ¸ é“æ¨å¹¿åŒ…</strong>[6]</li></ul><h3 id="habitat-ä¸docker" tabindex="-1">Habitat ä¸<strong>Docker</strong> <a class="header-anchor" href="#habitat-ä¸docker" aria-label="Permalink to &quot;Habitat ä¸**Docker**&quot;">â€‹</a></h3><ul><li><strong>åˆå§‹ Docker å®¹å™¨å‘å¸ƒæµç¨‹</strong>[7]</li><li><strong>è‡ªåŠ¨åŒ– Docker å®¹å™¨å‘å¸ƒæµç¨‹</strong>[8]</li></ul><p><em>æŸ¥çœ‹<strong>æ–‡æ¡£</strong>[9]ä¸­çš„æ‰€æœ‰å›¾è¡¨</em></p><h3 id="åŸ¹è®­" tabindex="-1">åŸ¹è®­ <a class="header-anchor" href="#åŸ¹è®­" aria-label="Permalink to &quot;åŸ¹è®­&quot;">â€‹</a></h3><p><em>åœ¨<strong>å­¦ä¹ </strong>[10]ä¸­æŸ¥çœ‹æ‰€æœ‰æ¼”ç¤ºå’Œæ•™ç¨‹</em></p><h3 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-label="Permalink to &quot;å®‰è£…&quot;">â€‹</a></h3><p>æ‚¨å¯ä»¥ä»<strong>Habitat ä¸‹è½½é¡µé¢</strong>[11]ä¸‹è½½ Habitatã€‚</p><p>ä¸‹è½½åï¼Œè¯·æŒ‰ç…§é¡µé¢ä¸Šé’ˆå¯¹æ‚¨ç‰¹å®šæ“ä½œç³»ç»Ÿçš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ macOS å¹¶ä¸”ä½¿ç”¨<strong>Homebrew</strong>[12]ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å®˜æ–¹<strong>Homebrew tap</strong>[13]ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>$ brew tap habitat-sh/habitat</span></span>
<span class="line"><span>$ brew install hab</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Windows å¹¶ä¸”ä½¿ç”¨<strong>Chocolatey</strong>[14]ï¼Œæ‚¨å¯ä»¥å®‰è£…æˆ‘ä»¬çš„<strong>chocolatey åŒ…</strong>[15]ã€‚</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>C:\&gt; choco install habitat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¦‚æœæ‚¨ä¸è¿è¡Œ Homebrew æˆ– Chocolateyï¼Œæˆ–è€…å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Linuxï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Habitat çš„<strong>install.sh</strong>[16]æˆ–<strong>install.ps1</strong>[17]è„šæœ¬ã€‚</p><p>Bash:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>$ curl https://raw.githubusercontent.com/habitat-sh/habitat/main/components/hab/install.sh | sudo bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Powershell:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>C:\&gt; Set-ExecutionPolicy Bypass -Scope Process -Force</span></span>
<span class="line"><span>C:\&gt; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://raw.githubusercontent.com/habitat-sh/habitat/main/components/hab/install.ps1&#39;))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="è´¡çŒ®" tabindex="-1">è´¡çŒ® <a class="header-anchor" href="#è´¡çŒ®" aria-label="Permalink to &quot;è´¡çŒ®&quot;">â€‹</a></h3><p>æˆ‘ä»¬ä¸€ç›´åœ¨å¯»æ‰¾æ›´å¤šç¤¾åŒºå‚ä¸çš„æœºä¼šã€‚æœ‰å…´è¶£è´¡çŒ®å—ï¼Ÿè¯·å‚é˜…æˆ‘ä»¬çš„<strong>CONTRIBUTING.md</strong>[18]å¼€å§‹ï¼</p><h3 id="æ–‡æ¡£-1" tabindex="-1">æ–‡æ¡£ <a class="header-anchor" href="#æ–‡æ¡£-1" aria-label="Permalink to &quot;æ–‡æ¡£&quot;">â€‹</a></h3><p>ä»<strong>Habitat æ•™ç¨‹</strong>[19]å¼€å§‹ï¼Œæˆ–æ·±å…¥<strong>å®Œæ•´æ–‡æ¡£</strong>[20]ã€‚</p><h3 id="ä»£ç ç»„ç»‡" tabindex="-1">ä»£ç ç»„ç»‡ <a class="header-anchor" href="#ä»£ç ç»„ç»‡" aria-label="Permalink to &quot;ä»£ç ç»„ç»‡&quot;">â€‹</a></h3><h4 id="æ ¸å¿ƒè®¡åˆ’" tabindex="-1">æ ¸å¿ƒè®¡åˆ’ <a class="header-anchor" href="#æ ¸å¿ƒè®¡åˆ’" aria-label="Permalink to &quot;æ ¸å¿ƒè®¡åˆ’&quot;">â€‹</a></h4><p>ç”± Habitat æ ¸å¿ƒå›¢é˜Ÿæ„å»ºå’Œç»´æŠ¤çš„ Habitat è®¡åˆ’åœ¨<strong>ä»–ä»¬è‡ªå·±çš„ä»“åº“</strong>[21]ä¸­ã€‚</p><h4 id="habitat-supervisor-å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶" tabindex="-1">Habitat Supervisor å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶ <a class="header-anchor" href="#habitat-supervisor-å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶" aria-label="Permalink to &quot;Habitat Supervisor å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶&quot;">â€‹</a></h4><p>Habitat Supervisor å’Œå…¶ä»–æ ¸å¿ƒç»„ä»¶çš„ä»£ç ä½äº<strong>ç»„ä»¶ç›®å½•</strong>[22]ã€‚</p><h4 id="æ–‡æ¡£-2" tabindex="-1">æ–‡æ¡£ <a class="header-anchor" href="#æ–‡æ¡£-2" aria-label="Permalink to &quot;æ–‡æ¡£&quot;">â€‹</a></h4><p>Habitat çš„ç½‘ç«™å’Œæ–‡æ¡£æºä»£ç ä½äº Habitat æºä»£ç çš„<code>www</code>ç›®å½•ä¸­ã€‚æ›´å¤šä¿¡æ¯è¯·å‚é˜…<strong>å…¶ README</strong>[23]ã€‚</p><h3 id="è·¯çº¿å›¾" tabindex="-1">è·¯çº¿å›¾ <a class="header-anchor" href="#è·¯çº¿å›¾" aria-label="Permalink to &quot;è·¯çº¿å›¾&quot;">â€‹</a></h3><p>Habitat é¡¹ç›®çš„è·¯çº¿å›¾æ˜¯å…¬å¼€çš„ï¼Œä½äºæˆ‘ä»¬çš„<strong>ç¤¾åŒºé¡µé¢</strong>[24]ã€‚</p><p>Habitat æ ¸å¿ƒå›¢é˜Ÿçš„é¡¹ç›®è·Ÿè¸ªå™¨ä¹Ÿæ˜¯å…¬å¼€çš„ï¼Œä½äº<strong>Github</strong>[25]ã€‚</p><h3 id="ç¤¾åŒºå’Œæ”¯æŒ" tabindex="-1">ç¤¾åŒºå’Œæ”¯æŒ <a class="header-anchor" href="#ç¤¾åŒºå’Œæ”¯æŒ" aria-label="Permalink to &quot;ç¤¾åŒºå’Œæ”¯æŒ&quot;">â€‹</a></h3><ul><li><strong>Chef ç¤¾åŒº Slack</strong>[26]</li><li><strong>è®ºå›</strong>[27]</li><li>Chef ç¤¾åŒºä¼šè®®æ¯å‘¨å››ä¸Šåˆ 9 ç‚¹ï¼ˆå¤ªå¹³æ´‹æ—¶é—´ï¼‰ã€‚æ›´å¤šä¿¡æ¯å¯åœ¨<strong>Chef ç¤¾åŒº</strong>[28]çš„è¿æ¥éƒ¨åˆ†æ‰¾åˆ°ã€‚</li></ul><h3 id="æ„å»º-1" tabindex="-1">æ„å»º <a class="header-anchor" href="#æ„å»º-1" aria-label="Permalink to &quot;æ„å»º&quot;">â€‹</a></h3><p>è¯·å‚é˜…<strong>BUILDING.md</strong>[29]ï¼Œäº†è§£æœ‰å…³ä»æºä»£ç æ„å»º Habitat çš„ç‰¹å®šå¹³å°ä¿¡æ¯ã€‚</p><h3 id="æœ¬åœ°åŒ…" tabindex="-1">æœ¬åœ°åŒ… <a class="header-anchor" href="#æœ¬åœ°åŒ…" aria-label="Permalink to &quot;æœ¬åœ°åŒ…&quot;">â€‹</a></h3><p>è¯·å‚é˜…<strong>README.md</strong>[30]ï¼Œäº†è§£æœ‰å…³æœ¬åœ°åŒ…çš„ä¿¡æ¯ã€‚</p><h3 id="æ›´å¤šå‚è€ƒèµ„æ–™" tabindex="-1">æ›´å¤šå‚è€ƒèµ„æ–™ <a class="header-anchor" href="#æ›´å¤šå‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;æ›´å¤šå‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><ul><li><strong>Rust ç¼–ç¨‹è¯­è¨€</strong>[31]</li><li><strong>Rust ç¤ºä¾‹</strong>[32]</li><li><strong>Bash ç¼–ç¨‹å…¥é—¨</strong>[33]</li><li><strong>é«˜çº§ Bash è„šæœ¬æŒ‡å—</strong>[34]</li><li><strong>Bash å¤‡å¿˜å•</strong>[35]</li><li><strong>ç¼–å†™å¥å£®çš„ Bash Shell è„šæœ¬</strong>[36]</li><li><strong>Wikibook: Bourne Shell è„šæœ¬</strong>[37]</li><li>[test, [å’Œ[<strong>ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong>[38]</li><li><strong>POSIX Shell å‘½ä»¤è¯­è¨€</strong>[39]</li></ul><h3 id="è¡Œä¸ºå‡†åˆ™" tabindex="-1">è¡Œä¸ºå‡†åˆ™ <a class="header-anchor" href="#è¡Œä¸ºå‡†åˆ™" aria-label="Permalink to &quot;è¡Œä¸ºå‡†åˆ™&quot;">â€‹</a></h3><p>Habitat ç¤¾åŒºçš„å‚ä¸å—<strong>è¡Œä¸ºå‡†åˆ™</strong>[40]çš„çº¦æŸã€‚</p><h3 id="è®¸å¯" tabindex="-1">è®¸å¯ <a class="header-anchor" href="#è®¸å¯" aria-label="Permalink to &quot;è®¸å¯&quot;">â€‹</a></h3><p>ç‰ˆæƒæ‰€æœ‰ (c) 2016 Chef Software Inc.åŠ/æˆ–ç›¸å…³è´¡çŒ®è€…</p><p>æ ¹æ® Apache è®¸å¯è¯ 2.0 ç‰ˆ(â€œè®¸å¯è¯â€)è®¸å¯ï¼›é™¤éç¬¦åˆè®¸å¯è¯è§„å®šï¼Œå¦åˆ™æ‚¨ä¸å¾—ä½¿ç”¨æ­¤æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span> http://www.apache.org/licenses/LICENSE-2.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è·å–è®¸å¯è¯å‰¯æœ¬ã€‚</p><p>é™¤éé€‚ç”¨æ³•å¾‹è¦æ±‚æˆ–ä¹¦é¢åŒæ„ï¼Œå¦åˆ™æ ¹æ®è®¸å¯è¯åˆ†å‘çš„è½¯ä»¶æŒ‰â€œåŸæ ·â€åˆ†å‘ï¼Œ ä¸é™„å¸¦ä»»ä½•æ˜ç¤ºæˆ–æš—ç¤ºçš„ä¿è¯ã€‚è¯·å‚é˜…è®¸å¯è¯ï¼Œäº†è§£è®¸å¯è¯ä¸‹çš„å…·ä½“è¯­è¨€è§„å®šæƒé™å’Œé™åˆ¶ã€‚</p><h3 id="ç»“è¯­-5" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­-5" aria-label="Permalink to &quot;ç»“è¯­&quot;">â€‹</a></h3><p>Habitat ä½œä¸ºä¸€ä¸ªç°ä»£åŒ–çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„æ”¯æŒï¼Œä½¿å¾—åº”ç”¨ç¨‹åºçš„æ„å»ºã€éƒ¨ç½²å’Œç®¡ç†å˜å¾—æ›´åŠ é«˜æ•ˆå’Œå¯é ã€‚æ— è®ºæ˜¯ä¸ªäººå¼€å‘è€…è¿˜æ˜¯ä¼ä¸šå›¢é˜Ÿï¼Œéƒ½å¯ä»¥ä» Habitat ä¸­è·ç›Šï¼ŒåŠ é€Ÿå¼€å‘æµç¨‹ï¼Œæé«˜è½¯ä»¶è´¨é‡ã€‚æ¢ç´¢ Habitatï¼Œè®©ä½ çš„åº”ç”¨ç¨‹åºå¼€å‘ä¹‹æ—…æ›´åŠ é¡ºç•…ã€‚</p><h3 id="å‚è€ƒèµ„æ–™-5" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-5" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h3><p>[1] å®˜ç½‘: <em><a href="http://habitat.sh#reference-diagram" target="_blank" rel="noreferrer">http://habitat.sh#reference-diagram</a></em></p><p>[2] æ¶æ„æ¦‚è§ˆ: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-architecture-overview.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-architecture-overview.png</a></em></p><p>[3] åˆå§‹åŒ…æ„å»ºæµç¨‹: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-initial-package-build-flow.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-initial-package-build-flow.png</a></em></p><p>[4] åº”ç”¨é‡å»ºæµç¨‹: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-application-rebuild-flow.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-application-rebuild-flow.png</a></em></p><p>[5] ä¾èµ–æ›´æ–°æµç¨‹: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-dependency-update-flow.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-dependency-update-flow.png</a></em></p><p>[6] é€šè¿‡æ¸ é“æ¨å¹¿åŒ…: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-promote-packages-through-channels.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-promote-packages-through-channels.png</a></em></p><p>[7] åˆå§‹ Docker å®¹å™¨å‘å¸ƒæµç¨‹: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-initial-docker-container-publishing-flow.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-initial-docker-container-publishing-flow.png</a></em></p><p>[8] è‡ªåŠ¨åŒ– Docker å®¹å™¨å‘å¸ƒæµç¨‹: <em><a href="https://github.com/habitat-sh/habitat/raw/main/images/habitat-automated-docker-container-publishing-flow.png" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/raw/main/images/habitat-automated-docker-container-publishing-flow.png</a></em></p><p>[9] æ–‡æ¡£: <em><a href="https://www.habitat.sh/docs/diagrams/" target="_blank" rel="noreferrer">https://www.habitat.sh/docs/diagrams/</a></em></p><p>[10] å­¦ä¹ : <em><a href="https://www.habitat.sh/learn/" target="_blank" rel="noreferrer">https://www.habitat.sh/learn/</a></em></p><p>[11] Habitat ä¸‹è½½é¡µé¢: <em><a href="https://docs.chef.io/habitat/install_habitat" target="_blank" rel="noreferrer">https://docs.chef.io/habitat/install_habitat</a></em></p><p>[12] Homebrew: <em><a href="https://brew.sh" target="_blank" rel="noreferrer">https://brew.sh</a></em></p><p>[13] Homebrew tap: <em><a href="https://github.com/habitat-sh/homebrew-habitat" target="_blank" rel="noreferrer">https://github.com/habitat-sh/homebrew-habitat</a></em></p><p>[14] Chocolatey: <em><a href="https://chocolatey.org" target="_blank" rel="noreferrer">https://chocolatey.org</a></em></p><p>[15] chocolatey åŒ…: <em><a href="https://chocolatey.org/packages/habitat" target="_blank" rel="noreferrer">https://chocolatey.org/packages/habitat</a></em></p><p>[16] install.sh: <em><a href="https://github.com/habitat-sh/habitat/blob/main/components/hab/install.sh" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/blob/main/components/hab/install.sh</a></em></p><p>[17] install.ps1: <em><a href="https://github.com/habitat-sh/habitat/blob/main/components/hab/install.ps1" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/blob/main/components/hab/install.ps1</a></em></p><p>[18] CONTRIBUTING.md: <em>CONTRIBUTING.md</em></p><p>[19] Habitat æ•™ç¨‹: <em><a href="https://www.habitat.sh/learn/" target="_blank" rel="noreferrer">https://www.habitat.sh/learn/</a></em></p><p>[20] å®Œæ•´æ–‡æ¡£: <em><a href="https://www.habitat.sh/docs/" target="_blank" rel="noreferrer">https://www.habitat.sh/docs/</a></em></p><p>[21] ä»–ä»¬è‡ªå·±çš„ä»“åº“: <em><a href="https://github.com/habitat-sh/core-plans" target="_blank" rel="noreferrer">https://github.com/habitat-sh/core-plans</a></em></p><p>[22] ç»„ä»¶ç›®å½•: <em><a href="https://github.com/habitat-sh/habitat/tree/main/components" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/tree/main/components</a></em></p><p>[23] å…¶ README: <em>www/README.md</em></p><p>[24] ç¤¾åŒºé¡µé¢: <em><a href="https://www.habitat.sh/community/" target="_blank" rel="noreferrer">https://www.habitat.sh/community/</a></em></p><p>[25] Github: <em><a href="https://github.com/habitat-sh/habitat/projects/1" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/projects/1</a></em></p><p>[26] Chef ç¤¾åŒº Slack: <em><a href="https://community-slack.chef.io/" target="_blank" rel="noreferrer">https://community-slack.chef.io/</a></em></p><p>[27] è®ºå›: <em><a href="https://forums.habitat.sh" target="_blank" rel="noreferrer">https://forums.habitat.sh</a></em></p><p>[28] Chef ç¤¾åŒº: <em><a href="https://community.chef.io/" target="_blank" rel="noreferrer">https://community.chef.io/</a></em></p><p>[29] BUILDING.md: <em>BUILDING.md</em></p><p>[30] README.md: <em><a href="https://github.com/habitat-sh/habitat/blob/main/components/hab/src/command/studio/README.md" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/blob/main/components/hab/src/command/studio/README.md</a></em></p><p>[31] Rust ç¼–ç¨‹è¯­è¨€: <em><a href="http://doc.rust-lang.org/book/" target="_blank" rel="noreferrer">http://doc.rust-lang.org/book/</a></em></p><p>[32] Rust ç¤ºä¾‹: <em><a href="http://rustbyexample.com/" target="_blank" rel="noreferrer">http://rustbyexample.com/</a></em></p><p>[33] Bash ç¼–ç¨‹å…¥é—¨: <em><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html" target="_blank" rel="noreferrer">http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html</a></em></p><p>[34] é«˜çº§ Bash è„šæœ¬æŒ‡å—: <em><a href="http://www.tldp.org/LDP/abs/html/" target="_blank" rel="noreferrer">http://www.tldp.org/LDP/abs/html/</a></em></p><p>[35] Bash å¤‡å¿˜å•: <em><a href="http://tldp.org/LDP/abs/html/refcards.html" target="_blank" rel="noreferrer">http://tldp.org/LDP/abs/html/refcards.html</a></em></p><p>[36] ç¼–å†™å¥å£®çš„ Bash Shell è„šæœ¬: <em><a href="http://www.davidpashley.com/articles/writing-robust-shell-scripts/" target="_blank" rel="noreferrer">http://www.davidpashley.com/articles/writing-robust-shell-scripts/</a></em></p><p>[37] Wikibook: Bourne Shell è„šæœ¬: <em><a href="https://en.wikibooks.org/wiki/Bourne_Shell_Scripting" target="_blank" rel="noreferrer">https://en.wikibooks.org/wiki/Bourne_Shell_Scripting</a></em></p><p>[38] test, [å’Œ[[ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ: <em><a href="http://mywiki.wooledge.org/BashFAQ/031" target="_blank" rel="noreferrer">http://mywiki.wooledge.org/BashFAQ/031</a></em></p><p>[39] POSIX Shell å‘½ä»¤è¯­è¨€: <em><a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html" target="_blank" rel="noreferrer">http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html</a></em></p><p>[40] è¡Œä¸ºå‡†åˆ™: <em><a href="https://github.com/habitat-sh/habitat/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noreferrer">https://github.com/habitat-sh/habitat/blob/main/CODE_OF_CONDUCT.md</a></em></p><h2 id="autopy-python-å’Œ-rust-è·¨å¹³å°-gui-è‡ªåŠ¨åŒ–æ“ä½œåº“" tabindex="-1">Autopyï¼šPython å’Œ Rust è·¨å¹³å° GUI è‡ªåŠ¨åŒ–æ“ä½œåº“ <a class="header-anchor" href="#autopy-python-å’Œ-rust-è·¨å¹³å°-gui-è‡ªåŠ¨åŒ–æ“ä½œåº“" aria-label="Permalink to &quot;Autopyï¼šPython å’Œ Rust è·¨å¹³å° GUI è‡ªåŠ¨åŒ–æ“ä½œåº“&quot;">â€‹</a></h2><p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://github.com/autopilot-rs/autopy" target="_blank" rel="noreferrer">https://github.com/autopilot-rs/autopy</a></p><h3 id="ä»€ä¹ˆæ˜¯-autopy" tabindex="-1">ä»€ä¹ˆæ˜¯ autopy <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-autopy" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ autopy&quot;">â€‹</a></h3><p>autopy æ˜¯ä¸€ä¸ªç®€å•çš„ã€è·¨å¹³å°çš„ Python å’Œ Rust GUI è‡ªåŠ¨åŒ–æ¨¡å—ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé¼ æ ‡å’Œé”®ç›˜åŠ¨ä½œï¼Œå®ç°è‡ªåŠ¨åŒ–çš„ç•Œé¢æ“ä½œã€‚autopy å¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ï¼ŒåŒ…æ‹¬ Windowsã€MacOS å’Œ Linuxï¼Œä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥è¿›è¡Œ GUI è‡ªåŠ¨åŒ–æµ‹è¯•å’Œåº”ç”¨ç¨‹åºäº¤äº’ã€‚</p><h3 id="autopy-çš„ä¸»è¦ç‰¹æ€§" tabindex="-1">autopy çš„ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#autopy-çš„ä¸»è¦ç‰¹æ€§" aria-label="Permalink to &quot;autopy çš„ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><ol><li>è·¨å¹³å°æ”¯æŒï¼šautopy å¯ä»¥åœ¨ Windowsã€MacOS å’Œ Linux ç­‰å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¸å—æ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œä¾¿åˆ©æ€§ã€‚</li><li>é¼ æ ‡å’Œé”®ç›˜æ¨¡æ‹Ÿï¼šautopy å¯ä»¥é€šè¿‡ä»£ç æ¨¡æ‹Ÿé¼ æ ‡ç§»åŠ¨ã€ç‚¹å‡»å’Œé”®ç›˜è¾“å…¥ç­‰æ“ä½œï¼Œå®ç°è‡ªåŠ¨åŒ–çš„ç•Œé¢æ“ä½œã€‚è¿™å¯¹äºéœ€è¦è¿›è¡Œå¤§é‡é‡å¤æ€§æ“ä½œçš„ä»»åŠ¡æ¥è¯´éå¸¸æœ‰ç”¨ï¼Œå¦‚ç•Œé¢æµ‹è¯•ã€æ•°æ®å½•å…¥ç­‰ã€‚</li><li>å±å¹•æˆªå›¾å’Œåƒç´ æ“ä½œï¼šautopy å¯ä»¥å¯¹å±å¹•è¿›è¡Œæˆªå›¾ï¼Œå¹¶ä¸”å¯ä»¥å¯¹æˆªå›¾è¿›è¡Œåƒç´ çº§çš„æ“ä½œï¼Œå¦‚åƒç´ ç‚¹çš„è¯»å–ã€é¢œè‰²å€¼è®¾ç½®ç­‰ï¼Œä¸ºç”¨æˆ·æä¾›äº†å¯¹å±å¹•è¿›è¡Œç²¾ç»†æ“ä½œçš„èƒ½åŠ›ã€‚</li><li>çª—å£æ§åˆ¶ï¼šautopy å¯ä»¥æ§åˆ¶çª—å£çš„ä½ç½®ã€å¤§å°å’ŒçŠ¶æ€ï¼Œå®ç°å¯¹çª—å£çš„è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œå¦‚æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€ç½®é¡¶ç­‰æ“ä½œã€‚</li><li>æ”¯æŒ Python å’Œ Rustï¼šautopy æä¾›äº† Python å’Œ Rust ä¸¤ç§è¯­è¨€çš„æ¥å£ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½å’Œéœ€æ±‚é€‰æ‹©ä½¿ç”¨å“ªç§è¯­è¨€è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚</li></ol><h3 id="autopy-çš„å®‰è£…å’Œä½¿ç”¨" tabindex="-1">autopy çš„å®‰è£…å’Œä½¿ç”¨ <a class="header-anchor" href="#autopy-çš„å®‰è£…å’Œä½¿ç”¨" aria-label="Permalink to &quot;autopy çš„å®‰è£…å’Œä½¿ç”¨&quot;">â€‹</a></h3><ol><li><p>å®‰è£… Python å’Œ Rustï¼šåœ¨ä½¿ç”¨ autopy ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£… Python å’Œ Rust çš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Python å’Œ Rustã€‚</p></li><li><p>å®‰è£… autopy æ¨¡å—ï¼šåœ¨å®‰è£…å¥½ Python å’Œ Rust å¼€å‘ç¯å¢ƒåï¼Œå¯ä»¥é€šè¿‡ pip æˆ– Cargo ç­‰åŒ…ç®¡ç†å·¥å…·å®‰è£… autopy æ¨¡å—ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> autopy</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æˆ–</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>cargo install autopybash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>ä½¿ç”¨ autopyï¼šåœ¨å®‰è£…å¥½ autopy æ¨¡å—åï¼Œå¯ä»¥é€šè¿‡ import å‘½ä»¤åœ¨ Python æˆ– Rust ä¸­å¼•å…¥ autopy æ¨¡å—ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹ä½¿ç”¨ autopy è¿›è¡Œé¼ æ ‡å’Œé”®ç›˜çš„æ¨¡æ‹Ÿæ“ä½œäº†ã€‚</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> autopy</span></span>
<span class="line"><span style="color:#ABB2BF;">autopy.mouse.</span><span style="color:#61AFEF;">move</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># å°†é¼ æ ‡ç§»åŠ¨åˆ°å±å¹•åæ ‡(100, 100)çš„ä½ç½®</span></span>
<span class="line"><span style="color:#ABB2BF;">autopy.mouse.</span><span style="color:#61AFEF;">click</span><span style="color:#ABB2BF;">()  </span><span style="color:#7F848E;font-style:italic;"># æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ“ä½œ</span></span>
<span class="line"><span style="color:#ABB2BF;">autopy.key.</span><span style="color:#61AFEF;">type_string</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Hello, autopy!&#39;</span><span style="color:#ABB2BF;">)  </span><span style="color:#7F848E;font-style:italic;"># æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥å­—ç¬¦ä¸²</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><p><img src="/ProgramLearnNotes/assets/640-1714235339031-434.DcckiLS9.webp" alt="å›¾ç‰‡"></p><h3 id="autopy-çš„åº”ç”¨åœºæ™¯" tabindex="-1">autopy çš„åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#autopy-çš„åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;autopy çš„åº”ç”¨åœºæ™¯&quot;">â€‹</a></h3><ol><li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šautopy å¯ä»¥ç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¯¹ç•Œé¢è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œå¹¶è¿›è¡Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™å’Œæ‰§è¡Œï¼ŒèŠ‚çœå¤§é‡çš„æµ‹è¯•æ—¶é—´å’ŒäººåŠ›æˆæœ¬ã€‚</li><li>æ•°æ®å½•å…¥ï¼šautopy å¯ä»¥ç”¨äºæ¨¡æ‹Ÿäººå·¥è¿›è¡Œæ•°æ®å½•å…¥æ“ä½œï¼Œå¯¹äºéœ€è¦å¤§é‡é‡å¤æ€§è¾“å…¥çš„ä»»åŠ¡æ¥è¯´éå¸¸å®ç”¨ã€‚</li><li>å±å¹•æ“ä½œï¼šautopy å¯ä»¥å¯¹å±å¹•è¿›è¡Œæˆªå›¾ã€åƒç´ çº§æ“ä½œç­‰ï¼Œç”¨äºå®ç°ä¸€äº›ç‰¹æ®Šçš„å±å¹•æ“ä½œéœ€æ±‚ã€‚</li><li>ç•Œé¢äº¤äº’ï¼šautopy å¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·è¿›è¡Œç•Œé¢æ“ä½œï¼Œç”¨äºä¸€äº›éœ€è¦è‡ªåŠ¨åŒ–è¿›è¡Œç•Œé¢æ“ä½œçš„åº”ç”¨ç¨‹åºä¸­ã€‚</li></ol><h3 id="autopy-çš„å‘å±•å’Œå±•æœ›" tabindex="-1">autopy çš„å‘å±•å’Œå±•æœ› <a class="header-anchor" href="#autopy-çš„å‘å±•å’Œå±•æœ›" aria-label="Permalink to &quot;autopy çš„å‘å±•å’Œå±•æœ›&quot;">â€‹</a></h3><p>autopy ä½œä¸ºä¸€ä¸ªè·¨å¹³å°çš„ GUI è‡ªåŠ¨åŒ–æ¨¡å—ï¼Œä¸º Python å’Œ Rust å¼€å‘äººå‘˜æä¾›äº†ä¸€ç§æ–¹ä¾¿ã€çµæ´»çš„æ–¹å¼æ¥è¿›è¡Œç•Œé¢è‡ªåŠ¨åŒ–æ“ä½œã€‚éšç€è‡ªåŠ¨åŒ–æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œautopy ä¹Ÿå°†ç»§ç»­å®Œå–„å’Œæ‰©å±•ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ¥å£ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚</p><p>æ€»ä¹‹ï¼Œautopy ä½œä¸ºä¸€ä¸ªç®€å•æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„ GUI è‡ªåŠ¨åŒ–æ¨¡å—ï¼Œå°†ä¼šåœ¨æœªæ¥çš„è½¯ä»¶å¼€å‘å’Œæµ‹è¯•é¢†åŸŸæ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚</p><h1 id="http" tabindex="-1">HTTP <a class="header-anchor" href="#http" aria-label="Permalink to &quot;HTTP&quot;">â€‹</a></h1><h2 id="reqwest-è¯·æ±‚åº“" tabindex="-1">reqwest è¯·æ±‚åº“ <a class="header-anchor" href="#reqwest-è¯·æ±‚åº“" aria-label="Permalink to &quot;reqwest è¯·æ±‚åº“&quot;">â€‹</a></h2><p>å¾…å®šï¼š<a href="https://mp.weixin.qq.com/s/nzmot6nSpR_LGCWtnVuEAQ" target="_blank" rel="noreferrer">Rust çˆ±å¥½è€…çœ‹è¿‡æ¥ï¼Œä¸€æ–‡å¸¦ä½ æŒæ¡ HTTP è¯·æ±‚ç¥å™¨ reqwest (qq.com)</a></p><h3 id="å¼•è¨€-1" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€-1" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>åœ¨ Rust ç”Ÿæ€ä¸­ï¼Œreqwest å¯ä»¥è¯´æ˜¯æœ€æµè¡Œçš„ HTTP å®¢æˆ·ç«¯åº“äº†ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé«˜å±‚çº§çš„ã€äººæ€§åŒ–çš„ APIï¼Œè®©æˆ‘ä»¬å¯ä»¥éå¸¸è½»æ¾åœ°å‘é€å„ç§ HTTP è¯·æ±‚å’Œå¤„ç†å“åº”ã€‚æ— è®ºæ˜¯ quickstartã€è‡ªå®šä¹‰è¯·æ±‚å¤´ã€cookie ç®¡ç†ï¼Œè¿˜æ˜¯æ–‡ä»¶ä¸Šä¼ ï¼Œreqwest éƒ½èƒ½å¸®æˆ‘ä»¬ä¼˜é›…åœ°æå®šã€‚</p><h3 id="å‚è€ƒæ–‡ç« -1" tabindex="-1">å‚è€ƒæ–‡ç«  <a class="header-anchor" href="#å‚è€ƒæ–‡ç« -1" aria-label="Permalink to &quot;å‚è€ƒæ–‡ç« &quot;">â€‹</a></h3><ul><li>reqwest å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.rs/reqwest" target="_blank" rel="noreferrer">https://docs.rs/reqwest</a></li><li>reqwest æºç ï¼š<a href="https://github.com/seanmonstar/reqwest" target="_blank" rel="noreferrer">https://github.com/seanmonstar/reqwest</a></li></ul><h3 id="åˆ›ä½œèƒŒæ™¯-1" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯-1" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>ä¹‹å‰ç»™å¤§å®¶åˆ†äº«è¿‡ Python çš„ requests åº“ï¼Œæ„Ÿè§‰ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚æœ€è¿‘åœ¨ä½¿ç”¨ Rustï¼Œå‘ç°å®ƒçš„ reqwest åº“ä¹ŸåŒæ ·å¼ºå¤§ï¼Œäºæ˜¯å°±æƒ³æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼Œç»™å¤§å®¶åšä¸ªä»‹ç»ã€‚</p><p>reqwest ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ 0.11.27ï¼Œåœ¨ Cargo.toml ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯ä½¿ç”¨ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># reqwest æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Rust HTTP å®¢æˆ·ç«¯åº“</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># é€šè¿‡æŒ‡å®š features æ¥å¯ç”¨ json ç‰¹æ€§</span></span>
<span class="line"><span style="color:#61AFEF;">reqwest</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span><span style="color:#98C379;"> version</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.11&quot;,</span><span style="color:#98C379;"> features</span><span style="color:#98C379;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;json&quot;</span><span style="color:#ABB2BF;">] }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># tokio æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥ Rust è¿è¡Œæ—¶</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># é€šè¿‡æŒ‡å®š features ä¸º full æ¥å¯ç”¨æ‰€æœ‰åŠŸèƒ½</span></span>
<span class="line"><span style="color:#61AFEF;">tokio</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span><span style="color:#98C379;"> version</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;1&quot;,</span><span style="color:#98C379;"> features</span><span style="color:#98C379;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;full&quot;</span><span style="color:#ABB2BF;">] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ä¸»è¦ç‰¹æ€§-1" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-1" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><p>é€šè¿‡æŸ¥é˜… reqwest çš„æ–‡æ¡£å’Œæºç ï¼Œæˆ‘å‘ç°å®ƒä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ol><li>æ”¯æŒå¼‚æ­¥å’Œé˜»å¡ä¸¤ç§å®¢æˆ·ç«¯</li><li>å¯ä»¥å‘é€çº¯æ–‡æœ¬ã€JSONã€è¡¨å•ã€å¤šéƒ¨åˆ†ç­‰å¤šç§ç±»å‹çš„è¯·æ±‚ä½“</li><li>è‡ªå®šä¹‰é‡å®šå‘ç­–ç•¥</li><li>æ”¯æŒ HTTP ä»£ç†</li><li>é»˜è®¤é€šè¿‡ç³»ç»ŸåŸç”Ÿ TLS å®ç° HTTPSï¼ˆä¹Ÿå¯é€‰æ‹© rustlsï¼‰</li><li>å†…ç½® Cookie ç®¡ç†</li><li>æ”¯æŒ WASM</li></ol><p>æ„Ÿè§‰éå¸¸å¼ºå¤§ï¼Œä¸‹é¢æˆ‘ä»¬å°±ç”¨å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¿«é€Ÿä¸Šæ‰‹è¿™ä¸ªåº“ï¼</p><h3 id="å¿«é€Ÿä¸Šæ‰‹-1" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-1" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><h4 id="å‘é€ä¸€ä¸ª-get-è¯·æ±‚" tabindex="-1">å‘é€ä¸€ä¸ª GET è¯·æ±‚ <a class="header-anchor" href="#å‘é€ä¸€ä¸ª-get-è¯·æ±‚" aria-label="Permalink to &quot;å‘é€ä¸€ä¸ª GET è¯·æ±‚&quot;">â€‹</a></h4><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ GET è¯·æ±‚ï¼Œè®¿é—® httpbin.org/ip æ¥å£è·å–æœ¬æœº IPï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">collections</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">dyn</span><span style="color:#E06C75;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt;&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å‘é€ GET è¯·æ±‚</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> resp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> reqwest</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;https://httpbin.org/ip&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è§£æå“åº”çš„ JSON æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> ip</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> resp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;&gt;().</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æˆ‘çš„ IP æ˜¯ï¼š{:#?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ip</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿™æ®µä»£ç ä¸­ï¼š</p><ol><li>é€šè¿‡ reqwest::get å‘é€ä¸€ä¸ª GET è¯·æ±‚</li><li>é€šè¿‡ resp.json() å°†å“åº”è§£æä¸º HashMap</li><li>æ‰“å°å‡ºè§£æåçš„ç»“æœ</li></ol><p>è¿è¡Œåè¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">æˆ‘çš„</span><span style="color:#98C379;"> IP</span><span style="color:#98C379;"> æ˜¯ï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#61AFEF;">    &quot;origin&quot;</span><span style="color:#56B6C2;">:</span><span style="color:#98C379;"> &quot;101.68.212.78&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ˜¯ä¸æ˜¯éå¸¸ç®€å•å‘¢ï¼Ÿ</p><h4 id="å‘é€-post-è¡¨å•è¯·æ±‚" tabindex="-1">å‘é€ POST è¡¨å•è¯·æ±‚ <a class="header-anchor" href="#å‘é€-post-è¡¨å•è¯·æ±‚" aria-label="Permalink to &quot;å‘é€ POST è¡¨å•è¯·æ±‚&quot;">â€‹</a></h4><p>æˆ‘ä»¬å†æ¥è¯•è¯• POST è¯·æ±‚ã€‚æ¯”å¦‚ç”¨ reqwest æäº¤ä¸€ä¸ªç™»å½•è¡¨å•ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// tokio::main å®æ ‡è®° main å‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°çš„å…¥å£ç‚¹</span></span>
<span class="line"><span style="color:#ABB2BF;">#[tokio::main]</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">dyn</span><span style="color:#E06C75;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt;&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è°ƒç”¨å¼‚æ­¥çš„ login å‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·åå’Œå¯†ç </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä½¿ç”¨ ? è¿ç®—ç¬¦å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#61AFEF;">    login</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;albert&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;king&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?;</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•° loginï¼Œç”¨äºæ¨¡æ‹Ÿç™»å½•åŠŸèƒ½</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç ä½œä¸ºå‚æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è¿”å› Resultï¼ŒOk ä¸º ()ï¼ŒErr ä¸º Box&lt;dyn std::error::Error&gt;</span></span>
<span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> fn</span><span style="color:#61AFEF;"> login</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">: &amp;</span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">dyn</span><span style="color:#E06C75;"> std</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Error</span><span style="color:#ABB2BF;">&gt;&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ›å»ºä¸€ä¸ª HTTP å®¢æˆ·ç«¯</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> client</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> reqwest</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Client</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å®šä¹‰è¡¨å•å‚æ•°ï¼Œä¸€ä¸ª tuple æ•°ç»„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ†åˆ«è®¾ç½® name å’Œ password å­—æ®µ</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> params</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">), (</span><span style="color:#98C379;">&quot;password&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">)];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å‘é€ POST ç™»å½•è¯·æ±‚</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> resp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> client</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;https://example.com/login&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// è®¾ç½®è¯·æ±‚ URL</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">form</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// è®¾ç½®è¡¨å•å‚æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">send</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;">?; </span><span style="color:#7F848E;font-style:italic;">// ç­‰å¾…è¯·æ±‚å®Œæˆï¼Œä½¿ç”¨ ? å¤„ç†å¯èƒ½çš„é”™è¯¯</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ‰“å°ç™»å½•è¯·æ±‚çš„å“åº”çŠ¶æ€ç </span></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ç™»å½•å®Œæˆ,çŠ¶æ€ç ï¼š{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">resp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¿”å› Ok</span></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>è¿™æ®µä»£ç ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>#[tokio::main] å®å°† main å‡½æ•°æ ‡è®°ä¸ºå¼‚æ­¥è¿è¡Œæ—¶çš„å…¥å£ç‚¹</li><li>login æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°,ä½¿ç”¨ async fn å®šä¹‰</li><li>reqwest::Client ç”¨äºåˆ›å»ºä¸€ä¸ª HTTP å®¢æˆ·ç«¯</li><li>client.post(url) å‘èµ· POST è¯·æ±‚</li><li>.form(&amp;params) è®¾ç½®è¡¨å•å‚æ•°</li><li>.send().await å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”</li><li>? ç”¨äºå¤„ç† Result ä¸­çš„é”™è¯¯</li><li>resp.status() è·å–å“åº”çš„çŠ¶æ€ç </li></ol><p>è¿è¡Œåè¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">ç™»å½•å®Œæˆï¼ŒçŠ¶æ€ç ï¼š404</span><span style="color:#98C379;"> Not</span><span style="color:#98C379;"> Found</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é€šè¿‡ client.post(&quot;url&quot;).form(&amp;params).send() å°±å¯ä»¥è½»æ¾æäº¤è¡¨å•äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆä¼˜é›…ï¼Ÿ</p><h3 id="æ€»ç»“-6" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-6" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»å’Œæ¡ˆä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»æ„Ÿå—åˆ°äº† reqwest çš„å¼ºå¤§äº†ã€‚å®ƒç®€å•æ˜“ç”¨ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œåœ¨ Rust çš„ HTTP å®¢æˆ·ç«¯ä¸­å¯ä»¥è¯´æ˜¯é¦–é€‰ã€‚å¦‚æœä½ ä¹Ÿåœ¨å­¦ä¹  Rustï¼Œä¸å¦¨è¯•è¯• reqwestï¼Œç›¸ä¿¡ä¸€å®šä¼šç»™ä½ æƒŠå–œã€‚</p><blockquote><p>å»ºè®®é€šè¿‡è¿è¡Œç›¸å…³æ¡ˆä¾‹å­¦ä¹ ã€‚æ¡ˆä¾‹åœ¨ reqwest ä»“åº“ä¸­çš„ examples æ–‡ä»¶å¤¹ä¸‹</p></blockquote><h1 id="æ•°æ®åº“æ“ä½œ" tabindex="-1">æ•°æ®åº“æ“ä½œ <a class="header-anchor" href="#æ•°æ®åº“æ“ä½œ" aria-label="Permalink to &quot;æ•°æ®åº“æ“ä½œ&quot;">â€‹</a></h1><h2 id="sqlite-æ“ä½œåº“-rusqlite" tabindex="-1">SQLite æ“ä½œåº“ Rusqlite <a class="header-anchor" href="#sqlite-æ“ä½œåº“-rusqlite" aria-label="Permalink to &quot;SQLite æ“ä½œåº“ Rusqlite&quot;">â€‹</a></h2><h3 id="æ–‡æ¡£-3" tabindex="-1">æ–‡æ¡£ <a class="header-anchor" href="#æ–‡æ¡£-3" aria-label="Permalink to &quot;æ–‡æ¡£&quot;">â€‹</a></h3><p>Rusqlite Repo: <a href="https://github.com/rusqlite/rusqlite" target="_blank" rel="noreferrer">https://github.com/rusqlite/rusqlite</a></p><p>Rusqlite æ–‡æ¡£: <a href="https://lib.rs/crates/rusqlite" target="_blank" rel="noreferrer">https://lib.rs/crates/rusqlite</a></p><h3 id="å¼•è¨€-2" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€-2" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>ä½ æ˜¯å¦è¿˜åœ¨ä¸º Rust é¡¹ç›®ä¸­ä½¿ç”¨ SQLite æ•°æ®åº“è€Œå‘æ„ï¼Ÿè¿˜åœ¨ä¸ºå…¶ç¹ççš„ API å’Œé…ç½®è€Œå¤´ç–¼ï¼Ÿæœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸ª Rust è¯­è¨€æ“ä½œ SQLite çš„æ–°é€‰æ‹©ï¼šRusqliteã€‚Rusqlite æä¾›äº†ç®€æ´ã€æ˜“ç”¨ä¸”é«˜æ•ˆçš„ APIï¼Œä½¿å¾— Rust å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ SQLite æ•°æ®åº“ã€‚</p><h3 id="åˆ›ä½œèƒŒæ™¯-2" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯-2" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>SQLite æ˜¯ä¸€æ¬¾è½»é‡çº§ã€åµŒå…¥å¼çš„å…³ç³»å‹æ•°æ®åº“å¼•æ“ï¼Œå› å…¶ç®€å•ã€é«˜æ•ˆã€å¯é ç­‰ç‰¹ç‚¹ï¼Œåœ¨å„ç§ç±»å‹çš„è½¯ä»¶å¼€å‘ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚è€Œ Rust ä½œä¸ºè¿‘å¹´æ¥å¤‡å—å…³æ³¨çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œä»¥å…¶ä¼˜ç§€çš„æ€§èƒ½å’Œå†…å­˜å®‰å…¨æ€§ï¼Œåœ¨ç³»ç»Ÿè½¯ä»¶ã€åµŒå…¥å¼å¼€å‘ã€WebAssembly ç­‰é¢†åŸŸæ„ˆå‘å—åˆ°æ¬¢è¿ã€‚</p><p>ç„¶è€Œï¼ŒRust åœ¨ SQLite æ•°æ®åº“æ“ä½œæ–¹é¢ä¸€ç›´ç¼ºä¹ä¸€ä¸ªè¶³å¤Ÿç®€æ´æ˜“ç”¨ã€åŒæ—¶åˆèƒ½ä¿è¯å¯é æ€§å’Œçµæ´»æ€§çš„æˆç†Ÿåº“ã€‚Rusqlite é¡¹ç›®çš„å‡ºç°ï¼Œæ­£å¥½å¡«è¡¥äº†è¿™ä¸€ç©ºç™½ï¼Œä¸º Rust å¼€å‘è€…å¸¦æ¥äº†ä¸€ä¸ªé«˜è´¨é‡çš„ SQLite æ“ä½œæ–¹æ¡ˆã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§-2" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-2" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><ul><li>æä¾›ç¬¦åˆ Rust è¯­è¨€ä¹ æƒ¯çš„ API æ¥å£</li><li>æ”¯æŒåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥å’Œäº‹åŠ¡ç­‰æ•°æ®åº“æ“ä½œ</li><li>æä¾› Rust ç»“æ„ä½“ä¸æ•°æ®åº“è®°å½•æ˜ å°„çš„èƒ½åŠ›</li><li>æ”¯æŒå¯æ‰©å±•çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹</li><li>æ”¯æŒ SQLite æ‰©å±•åŠ è½½ä¸ä½¿ç”¨</li><li>æ”¯æŒè¿æ¥æ± </li><li>æ”¯æŒ Bundled æ¨¡å¼ï¼Œæ— éœ€é¢å¤–é…ç½® SQLite åº“</li></ul><h3 id="å¿«é€Ÿä¸Šæ‰‹-2" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-2" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><p>åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ä¾èµ–:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>[dependencies]</span></span>
<span class="line"><span>rusqlite = &quot;0.28.0&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢ç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> rusqlite</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Connection</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#E5C07B;"> Person</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    age</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;()&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ‰“å¼€ä¸€ä¸ª SQLite å†…å­˜æ•°æ®åº“è¿æ¥</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> conn</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Connection</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">open_in_memory</span><span style="color:#ABB2BF;">()?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆ›å»º person è¡¨</span></span>
<span class="line"><span style="color:#E06C75;">    conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">        &quot;CREATE TABLE person (</span></span>
<span class="line"><span style="color:#98C379;">            id    INTEGER PRIMARY KEY,</span></span>
<span class="line"><span style="color:#98C379;">            name  TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#98C379;">            age   INTEGER</span></span>
<span class="line"><span style="color:#98C379;">        )&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        (), </span><span style="color:#7F848E;font-style:italic;">// å‚æ•°ä¸ºç©º</span></span>
<span class="line"><span style="color:#ABB2BF;">    )?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ’å…¥æ•°æ®</span></span>
<span class="line"><span style="color:#E06C75;">    conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">        &quot;INSERT INTO person (name, age) VALUES (?1, ?2)&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        (</span><span style="color:#98C379;">&quot;Alice&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    )?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æŸ¥è¯¢æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> stmt</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> conn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">prepare</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;SELECT id, name, age FROM person&quot;</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> person_iter</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> stmt</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query_map</span><span style="color:#ABB2BF;">([], </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">row</span><span style="color:#56B6C2;">|</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        Ok</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Person</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">            id</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)?,</span></span>
<span class="line"><span style="color:#E06C75;">            name</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)?,</span></span>
<span class="line"><span style="color:#E06C75;">            age</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)?,</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">    })?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¾“å‡ºæŸ¥è¯¢ç»“æœ</span></span>
<span class="line"><span style="color:#C678DD;">    for</span><span style="color:#E06C75;"> person</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> person_iter</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Found person {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">person</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Found</span><span style="color:#98C379;"> person</span><span style="color:#98C379;"> Person</span><span style="color:#98C379;"> {</span><span style="color:#98C379;"> id:</span><span style="color:#98C379;"> 1,</span><span style="color:#98C379;"> name:</span><span style="color:#98C379;"> &quot;Alice&quot;,</span><span style="color:#98C379;"> age:</span><span style="color:#D19A66;"> 18</span><span style="color:#98C379;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="æ€»ç»“-7" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-7" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>Rusqlite ä¸º Rust å¼€å‘è€…æ“ä½œ SQLite æ•°æ®åº“æä¾›äº†ä¸€ç§ç®€å•é«˜æ•ˆçš„æ–¹å¼ã€‚å…¶å€Ÿé‰´äº†å…¶ä»–æˆç†Ÿæ•°æ®åº“åº“çš„ä¼˜ç‚¹ï¼Œæä¾›äº†ç¬¦åˆ Rust è¯­è¨€ä¹ æƒ¯çš„ API æ¥å£ã€‚ç›®å‰å·²ç»ç›¸å½“æˆç†Ÿå’Œå®Œå–„ï¼Œå¯ä»¥åœ¨å®é™…é¡¹ç›®ä¸­æ”¾å¿ƒä½¿ç”¨ã€‚å¦‚æœä½ çš„ Rust é¡¹ç›®ä¸­æœ‰ SQLite æ•°æ®åº“ç›¸å…³çš„éœ€æ±‚ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ Rusqliteï¼Œç›¸ä¿¡å®ƒå¸¦ç»™ä½ çš„å¼€å‘ä½“éªŒä¼šè®©ä½ æ»¡æ„ã€‚</p><h2 id="readyset-æ–°ä¸€ä»£ç¼“å­˜ç¥å™¨-åŠ å¿«äº†æ•°æ®åº“æŸ¥è¯¢å’Œè¯»å–èƒ½åŠ›" tabindex="-1">ReadySetï¼šæ–°ä¸€ä»£ç¼“å­˜ç¥å™¨ ï¼ŒåŠ å¿«äº†æ•°æ®åº“æŸ¥è¯¢å’Œè¯»å–èƒ½åŠ› <a class="header-anchor" href="#readyset-æ–°ä¸€ä»£ç¼“å­˜ç¥å™¨-åŠ å¿«äº†æ•°æ®åº“æŸ¥è¯¢å’Œè¯»å–èƒ½åŠ›" aria-label="Permalink to &quot;ReadySetï¼šæ–°ä¸€ä»£ç¼“å­˜ç¥å™¨ ï¼ŒåŠ å¿«äº†æ•°æ®åº“æŸ¥è¯¢å’Œè¯»å–èƒ½åŠ›&quot;">â€‹</a></h2><p>åŸºäº Rust å¼€å‘çš„ Readysetï¼Œæ˜¯æ•°æ®åº“ç¼“å­˜å±‚è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦æ˜¯åŠ å¿«æŸ¥è¯¢é€Ÿåº¦åŠå¢å¼ºè¯»å–æ“ä½œçš„æ°´å¹³æ‰©å±•èƒ½åŠ›ã€‚</p><h3 id="readyset-ä»‹ç»" tabindex="-1">Readyset ä»‹ç» <a class="header-anchor" href="#readyset-ä»‹ç»" aria-label="Permalink to &quot;Readyset ä»‹ç»&quot;">â€‹</a></h3><p>ReadySet å®ƒæ˜¯ Postgres å’Œ MySQL çš„é€æ˜æ•°æ®åº“ç¼“å­˜ï¼Œèƒ½å¤Ÿæä¾›å†…å­˜é”®å€¼å­˜å‚¨çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ï¼Œä¸éœ€è¦ä½ é‡å†™åº”ç”¨ç¨‹åºæˆ–æ‰‹åŠ¨å¤„ç†ç¼“å­˜å¤±æ•ˆã€‚</p><p>ReadySet è¿˜å¯ä»¥å°†ä½ çš„æœ€å¤æ‚çš„ SQL è¯»å–è½¬æ¢ä¸ºé—ªç”µèˆ¬çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œä½¿ç”¨æ•°æ®åº“çš„å¤åˆ¶æµè‡ªåŠ¨ä½¿ç¼“å­˜çš„æŸ¥è¯¢ç»“æœä¸æ•°æ®åº“ä¿æŒåŒæ­¥ã€‚</p><h3 id="readyset-ä¸å…¶ä»–ç¼“å­˜åŒºåˆ«" tabindex="-1">Readyset ä¸å…¶ä»–ç¼“å­˜åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#readyset-ä¸å…¶ä»–ç¼“å­˜åŒºåˆ«" aria-label="Permalink to &quot;Readyset ä¸å…¶ä»–ç¼“å­˜åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œå½“å¤§å®¶é¡¹ç›®æŸ¥è¯¢å»¶è¿Ÿæ­£åœ¨é€æ¸å¢åŠ çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šæƒ³åˆ°ä¸ºåº”ç”¨ç¨‹åºçš„æŸ¥è¯¢æ·»åŠ ç¼“å­˜ï¼Œæ¥å‡è½»æ•°æ®åº“å¯¹é¢‘ç¹å‘å‡ºå’Œé‡åº¦æŸ¥è¯¢çš„è´Ÿæ‹…ã€‚è§£å†³æ–¹æ¡ˆï¼Œå¯èƒ½ä½ ä¼šè€ƒè™‘ä½¿ç”¨ Redis æˆ– Memcached ç­‰å†…å­˜é”®å€¼å­˜å‚¨äº†ï¼Œåšå†…å­˜ç¼“å­˜çš„æ ‡å‡†æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ¡ˆä¼šç»™å›¢é˜Ÿå¸¦æ¥è¿™äº›é—®é¢˜ã€‚</p><p><img src="/ProgramLearnNotes/assets/image-20240605135002184.BayZlng4.png" alt="image-20240605135002184"></p><p>é—®é¢˜1ï¼šæ•°æ®æ¨¡å‹ä¸åŒ¹é…</p><p>åœ¨æ„å»ºåº”ç”¨æ—¶ï¼Œä¸€èˆ¬ä¼šç”¨å…³ç³»æ•°æ®åº“å’Œé»˜è®¤çš„ORMï¼Œå¦‚æœè¦å¼•å…¥å†…å­˜é”®å€¼å­˜å‚¨æ¥æé«˜æ€§èƒ½æ—¶ï¼Œè¿™æ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œå¯èƒ½ä¼šå¢åŠ äº†ä»£ç å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚</p><ul><li>æ•°æ®æ¨¡å‹ä¸åŒï¼šå…³ç³»æ•°æ®åº“ç”¨è¡¨å’ŒSQLï¼Œé”®å€¼å­˜å‚¨æ˜¯ç®€å•çš„é”®å€¼å¯¹ã€‚</li><li>éœ€è¦æ‰‹åŠ¨è½¬æ¢ï¼šä¸èƒ½é€šè¿‡ORMä¸ç¼“å­˜é€šä¿¡ï¼Œè¦åœ¨ä»£ç ä¸­æ·»åŠ é€»è¾‘æ¥å¡«å……ç¼“å­˜ã€‚</li><li>å¢åŠ æŠ€æœ¯å€ºåŠ¡ï¼šå¼•å…¥ç¼“å­˜ä½¿ä»£ç å¤æ‚ï¼Œå¸¦æ¥æŠ€æœ¯å€ºåŠ¡ã€‚</li></ul><p>é—®é¢˜ 2ï¼šæ‰‹åŠ¨åŒæ­¥ä¸¤ä¸ªç‹¬ç«‹çš„æ•°æ®å­˜å‚¨çš„æŒ‘æˆ˜</p><p>å…³äºæ‰‹åŠ¨åŒæ­¥æ•°æ®åº“å’Œç¼“å­˜æ¶‰æ—¶ï¼Œä¼šæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§ã€ç¼“å­˜å¤±æ•ˆç­–ç•¥ã€æ€§èƒ½å’Œå®ç°å¤æ‚æ€§ç­‰å¤šé‡æŒ‘æˆ˜ã€‚</p><p><img src="/ProgramLearnNotes/assets/image-20240605135023412.D5Qi_DA9.png" alt="image-20240605135023412"></p><ul><li><strong>æ•°æ®åŒæ­¥é—®é¢˜</strong>ï¼šç”¨æˆ·åœ¨ Web åº”ç”¨ä¸­çš„äº¤äº’ä¼šå¯¼è‡´æ•°æ®åº“æ›´æ–°ï¼Œè€Œç¼“å­˜å¯èƒ½ä»ç„¶åŒ…å«è¿‡æ—¶çš„æ•°æ®ï¼Œå¯¼è‡´ä¸ä¸€è‡´æ€§ã€‚</li><li><strong>ç¼“å­˜å¤±æ•ˆéš¾é¢˜</strong>ï¼šéœ€è¦è§£å†³ç¼“å­˜æ•°æ®å¦‚ä½•éšç€æ•°æ®åº“å˜åŒ–è€Œæ›´æ–°çš„é—®é¢˜ã€‚</li><li><strong>TTLæ–¹æ³•çš„å±€é™</strong>ï¼šè®¾ç½®ç¼“å­˜çš„TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰å¯ä»¥å®šæœŸæ›´æ–°ç¼“å­˜ï¼Œä½†å¯èƒ½å¯¼è‡´ç”¨æˆ·ç­‰å¾…è¾ƒé•¿æ—¶é—´æ‰èƒ½çœ‹åˆ°æ–°æ•°æ®ï¼ŒåŒæ—¶å¢åŠ äº†æ•°æ®åº“æŸ¥è¯¢é‡ï¼Œé™ä½äº†ç¼“å­˜æ•ˆç‡ã€‚</li><li><strong>ç¼“å­˜å‘½ä¸­ç‡å’Œæ€§èƒ½é—®é¢˜</strong>ï¼šé¢‘ç¹æ›´æ–°ç¼“å­˜æ¡ç›®ä»¥ä¿æŒæ•°æ®æ–°é²œåº¦ä¼šé™ä½ç¼“å­˜å‘½ä¸­ç‡ï¼Œå½±å“æ€§èƒ½ã€‚</li><li><strong>å¤æ‚çš„ç¼“å­˜å¤±æ•ˆç­–ç•¥</strong>ï¼šå¯èƒ½éœ€è¦æ‰‹åŠ¨åœ¨åº”ç”¨ä»£ç ä¸­æ·»åŠ é€»è¾‘æ¥å¤„ç†ç¼“å­˜æ¡ç›®çš„åˆ é™¤å’Œé‡æ–°è®¡ç®—ï¼Œè¿™å¢åŠ äº†å®ç°å¤æ‚æ€§ã€‚</li><li><strong>è¿½è¸ªæ•°æ®æ¥æºçš„å›°éš¾</strong>ï¼šå¯¹äºå¤æ‚çš„æŸ¥è¯¢ï¼Œç¡®å®šå“ªäº›ç¼“å­˜æ¡ç›®éœ€è¦æ›´æ–°æ˜¯ä¸€é¡¹å›°éš¾ä¸”å®¹æ˜“å‡ºé”™çš„ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯å½“ä½¿ç”¨ORMæ—¶ï¼Œå…·ä½“çš„æŸ¥è¯¢ç»†èŠ‚å¯èƒ½ä¸å¤Ÿæ˜ç¡®ã€‚</li></ul><h3 id="readyset-çš„äº®ç‚¹" tabindex="-1">Readyset çš„äº®ç‚¹ <a class="header-anchor" href="#readyset-çš„äº®ç‚¹" aria-label="Permalink to &quot;Readyset çš„äº®ç‚¹&quot;">â€‹</a></h3><p>ReadySet æ˜¯ä¸€ç§æ–°å‹æŸ¥è¯¢ç¼“å­˜ï¼Œå®ƒä¸å…³ç³»æ•°æ®åº“å…±äº«æ•°æ®æ¨¡å‹ï¼Œæ— éœ€ä»£ç æ›´æ”¹å³å¯è‡ªåŠ¨åŒæ­¥ï¼Œæä¾›é«˜æ€§èƒ½ä¸”æ— éœ€æ‹…å¿ƒç¼“å­˜å¤±æ•ˆï¼Œå¾ˆå¥½çš„è§£å†³ä¼ ç»Ÿçš„ç¼“å­˜é—®é¢˜ã€‚</p><p><img src="/ProgramLearnNotes/assets/image-20240605135047156.CpFo0cfi.png" alt="image-20240605135047156"></p><ul><li><strong>è‡ªåŠ¨åŒæ­¥æ›´æ–°</strong>ï¼šåˆ©ç”¨æ•°æ®åº“å¤åˆ¶æµè‡ªåŠ¨æ›´æ–°ç¼“å­˜ï¼Œæ— éœ€æ‰‹åŠ¨é©±é€æˆ–æŸ¥è¯¢ã€‚</li><li><strong>ç®€æ˜“ç¼“å­˜é…ç½®</strong>ï¼šä¸å…³ç³»æ•°æ®åº“å…±äº«æ•°æ®æ¨¡å‹ï¼Œé€šè¿‡ SQL å‘½ä»¤æŒ‡å®šç¼“å­˜ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚</li><li><strong>å¢é‡è§†å›¾ç»´æŠ¤</strong>ï¼šä½¿ç”¨è‡ªæœ‰æŸ¥è¯¢å¼•æ“ï¼Œåå°æ›´æ–°è¿‡æ—¶ç»“æœï¼Œä¸å½±å“æ€§èƒ½ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™-6" tabindex="-1">å‚è€ƒèµ„æ–™ï¼š <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-6" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™ï¼š&quot;">â€‹</a></h3><ul><li><a href="https://github.com/readysettech/readyset" target="_blank" rel="noreferrer">https://github.com/readysettech/readyset</a></li><li><a href="https://readyset.io/docs/demo" target="_blank" rel="noreferrer">https://readyset.io/docs/demo</a></li></ul><h1 id="æ•°æ®åˆ†æåº“" tabindex="-1">æ•°æ®åˆ†æåº“ <a class="header-anchor" href="#æ•°æ®åˆ†æåº“" aria-label="Permalink to &quot;æ•°æ®åˆ†æåº“&quot;">â€‹</a></h1><h2 id="polars" tabindex="-1">Polars <a class="header-anchor" href="#polars" aria-label="Permalink to &quot;Polars&quot;">â€‹</a></h2><p>åœ¨æ•°æ®åˆ†æé¢†åŸŸï¼ŒPandas å¯ä»¥è¯´æ˜¯ Python ç”Ÿæ€ä¸­å½“ä¹‹æ— æ„§çš„ç‹è€…ã€‚å®ƒä»¥å…¶å¼ºå¤§çš„åŠŸèƒ½å’Œæ˜“ç”¨çš„ API é£é¡å…¨çƒã€‚ç„¶è€Œï¼ŒPandas çš„æ€§èƒ½ä¸€ç›´é¥±å—è¯Ÿç—…ï¼Œå°¤å…¶åœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ï¼Œé€Ÿåº¦å’Œå†…å­˜å ç”¨éƒ½æˆäº†åˆ¶çº¦å…¶å‘å±•çš„ç“¶é¢ˆã€‚</p><p>è¿™æ—¶å€™ï¼Œç”¨ Rust ç¼–å†™çš„ Polars é—ªäº®ç™»åœºäº†ï¼å®ƒä»å¤´è®¾è®¡ï¼Œå……åˆ†åˆ©ç”¨äº† Rust è¯­è¨€çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œåœ¨ä¿æŒé«˜æ•ˆçš„åŒæ—¶ï¼Œè¿˜æä¾›äº†ä¸ Pandas ç›¸ä¼¼çš„ APIï¼Œè®©ä½ è½»æ¾ä¸Šæ‰‹ã€‚æ¥çœ‹çœ‹ Polars çš„ç‹¬ç‰¹é­…åŠ›å§ï¼</p><h3 id="å‚è€ƒæ–‡ç« -2" tabindex="-1">å‚è€ƒæ–‡ç«  <a class="header-anchor" href="#å‚è€ƒæ–‡ç« -2" aria-label="Permalink to &quot;å‚è€ƒæ–‡ç« &quot;">â€‹</a></h3><ol><li>Polars ç”¨æˆ·æŒ‡å—ï¼š<a href="https://docs.pola.rs/" target="_blank" rel="noreferrer">https://docs.pola.rs/</a></li><li>Polars GitHub ä»“åº“ï¼š<a href="https://github.com/pola-rs/polars" target="_blank" rel="noreferrer">https://github.com/pola-rs/polars</a></li><li>Polars.rs å…¬å¸ä¿¡æ¯ï¼š<a href="https://pola.rs/posts/company-announcement/" target="_blank" rel="noreferrer">https://pola.rs/posts/company-announcement/</a></li></ol><h3 id="å¼€å‘èƒŒæ™¯" tabindex="-1">å¼€å‘èƒŒæ™¯ <a class="header-anchor" href="#å¼€å‘èƒŒæ™¯" aria-label="Permalink to &quot;å¼€å‘èƒŒæ™¯&quot;">â€‹</a></h3><p>Polars æœ€åˆç”± Ritchie Vink å¼€å‘ï¼Œä»–æ˜¯ä¸€åç»éªŒä¸°å¯Œçš„æ•°æ®ç§‘å­¦å®¶å’Œè½¯ä»¶å·¥ç¨‹å¸ˆã€‚åœ¨ä½¿ç”¨ Pandas å¤šå¹´åï¼ŒRitchie æ„è¯†åˆ°äº†å®ƒåœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶çš„æ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å†³å®šç”¨ Rust ä»å¤´å¼€å‘ä¸€ä¸ªæ–°çš„æ•°æ®å¤„ç†åº“ï¼Œå……åˆ†åˆ©ç”¨ Rust çš„é«˜æ€§èƒ½å’Œå†…å­˜å®‰å…¨æ€§ã€‚</p><p>Ritchie åœ¨ 2020 å¹´åˆå¯åŠ¨äº† Polars é¡¹ç›®ï¼Œæœ€åˆæ˜¯ä¸€ä¸ªå…¼èŒé¡¹ç›®ã€‚ä½†éšç€é¡¹ç›®çš„ä¸æ–­æˆç†Ÿå’Œç¤¾åŒºçš„å…³æ³¨ï¼Œä»–åœ¨ 2021 å¹´å¼€å§‹å…¨èŒå¼€å‘ Polarsã€‚ç›®å‰ï¼ŒPolars å·²ç»æˆä¸º Rust ç”Ÿæ€ä¸­æœ€æ´»è·ƒçš„é¡¹ç›®ä¹‹ä¸€ï¼Œå¸å¼•äº†ä¼—å¤šå¼€å‘è€…çš„è´¡çŒ®ã€‚</p><p>Ritchie è¿˜åˆ›ç«‹äº† Pola.rs å…¬å¸ï¼Œè‡´åŠ›äºä¸º Polars æä¾›å•†ä¸šæ”¯æŒå’Œå’¨è¯¢æœåŠ¡ï¼Œå¸®åŠ©ä¼ä¸šå®¢æˆ·è§£å†³å¤§è§„æ¨¡æ•°æ®å¤„ç†çš„éš¾é¢˜ã€‚ç›®å‰å…¶å…¬å¸æ­£åœ¨æ‹›è˜ Rust å·¥ç¨‹å¸ˆï¼š<a href="https://hiring.pola.rs/o/rust-software-engineer" target="_blank" rel="noreferrer">https://hiring.pola.rs/o/rust-software-engineer</a></p><h3 id="ä¸»è¦ç‰¹æ€§-3" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-3" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><ol><li>é«˜æ€§èƒ½ï¼šå®Œå…¨ç”¨ Rust ä»å¤´ç¼–å†™ï¼Œå‘æŒ¥æœºå™¨æ€§èƒ½ï¼Œä¸”æ²¡æœ‰å¤–éƒ¨ä¾èµ–ã€‚</li><li>å¤šç§æ¥å£ï¼šæä¾› Pythonã€NodeJSã€R ç­‰å¤šè¯­è¨€æ¥å£ï¼ŒRust å¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨åŸç”Ÿåº“ã€‚</li><li>ç¬¦åˆç›´è§‰çš„ APIï¼šä»¥ä½ æƒ³è¦çš„æ–¹å¼å†™æŸ¥è¯¢ï¼ŒPolars ä¼šåœ¨å†…éƒ¨é€šè¿‡æŸ¥è¯¢ä¼˜åŒ–å™¨æ‰¾åˆ°æœ€é«˜æ•ˆçš„æ‰§è¡Œæ–¹å¼ã€‚</li><li>è¶…å¤§æ•°æ®æ”¯æŒï¼šæµå¼ API å¯ä»¥è®©ä½ å¤„ç†å¤§äºå†…å­˜çš„æ•°æ®ï¼Œæ— éœ€ä¸€æ¬¡æ€§å…¨éƒ¨åŠ è½½ã€‚</li><li>å¹¶è¡Œï¼šæ— éœ€é¢å¤–é…ç½®ï¼Œè‡ªåŠ¨åˆ©ç”¨å…¨éƒ¨ CPU æ ¸å¿ƒï¼Œå°†å·¥ä½œè´Ÿè½½åˆ†é…åˆ°å¯ç”¨çš„ CPU ä¸Šã€‚</li><li>å‘é‡åŒ–æŸ¥è¯¢å¼•æ“ï¼šä½¿ç”¨ Apache Arrow åˆ—å¼å­˜å‚¨ï¼Œè¿›è¡Œå‘é‡åŒ–æŸ¥è¯¢å¤„ç†ï¼Œå¹¶é€šè¿‡ SIMD ä¼˜åŒ– CPU åˆ©ç”¨ç‡ã€‚</li></ol><h3 id="å¿«é€Ÿä¸Šæ‰‹-3" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-3" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><h4 id="python-ä½¿ç”¨" tabindex="-1">Python ä½¿ç”¨ <a class="header-anchor" href="#python-ä½¿ç”¨" aria-label="Permalink to &quot;Python ä½¿ç”¨&quot;">â€‹</a></h4><p>å®‰è£… Polarsï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> polars</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">import</span><span style="color:#E06C75;"> polars</span><span style="color:#C678DD;"> as</span><span style="color:#E06C75;"> pl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># åˆ›å»ºç¤ºä¾‹ </span><span style="color:#E5C07B;">DataFrame</span></span>
<span class="line"><span style="color:#E06C75;">df</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> pl</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">DataFrame</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#98C379;">    &quot;name&quot;</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;å¼ ä¸‰&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æå››&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç‹äº”&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;èµµå…­&quot;</span><span style="color:#ABB2BF;">],  # å§“ååˆ—</span></span>
<span class="line"><span style="color:#98C379;">    &quot;age&quot;</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">21</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">35</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">40</span><span style="color:#ABB2BF;">],                # å¹´é¾„åˆ—</span></span>
<span class="line"><span style="color:#98C379;">    &quot;income&quot;</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">5000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10000</span><span style="color:#ABB2BF;">]     # æ”¶å…¥åˆ—</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># ä½¿ç”¨æƒ°æ€§æŸ¥è¯¢ç­›é€‰æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;"># ç­›é€‰æ¡ä»¶ï¼š</span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;"> å¤§äº </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;"> ä¸” </span><span style="color:#E06C75;">income</span><span style="color:#ABB2BF;"> å¤§äº </span><span style="color:#D19A66;">6000</span><span style="color:#ABB2BF;"> çš„è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">df</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">lazy</span><span style="color:#ABB2BF;">()                    # åˆ›å»ºæƒ°æ€§æŸ¥è¯¢</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">(                   # ç­›é€‰æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">      (</span><span style="color:#E06C75;">pl</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">col</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">) &gt; </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">)     # å¹´é¾„å¤§äº </span><span style="color:#D19A66;">20</span></span>
<span class="line"><span style="color:#ABB2BF;">      &amp; (</span><span style="color:#E06C75;">pl</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">col</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;income&quot;</span><span style="color:#ABB2BF;">) &gt; </span><span style="color:#D19A66;">6000</span><span style="color:#ABB2BF;">)  # ä¸”æ”¶å…¥å¤§äº </span><span style="color:#D19A66;">6000</span></span>
<span class="line"><span style="color:#ABB2BF;">  )</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">collect</span><span style="color:#ABB2BF;">()                 # æ‰§è¡ŒæŸ¥è¯¢ï¼Œæ”¶é›†ç»“æœ</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">shape:</span><span style="color:#ABB2BF;"> (2, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> name</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> age</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> income</span><span style="color:#98C379;"> â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;">    â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> str</span><span style="color:#98C379;">  â”†</span><span style="color:#98C379;"> i64</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> i64</span><span style="color:#98C379;">    â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•¡</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> ç‹äº”</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> 35</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> 8000</span><span style="color:#98C379;">   â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> èµµå…­</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> 40</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> 10000</span><span style="color:#98C379;">  â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è§£é‡Šï¼š</p><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨åŒ…å«å§“åã€å¹´é¾„ã€æ”¶å…¥ä¸‰åˆ—çš„å­—å…¸åˆ›å»ºäº†ä¸€ä¸ªç¤ºä¾‹ DataFrameã€‚</li><li>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>.lazy()</code> æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºæƒ°æ€§æŸ¥è¯¢ï¼Œæƒ°æ€§æŸ¥è¯¢å…è®¸æˆ‘ä»¬å»ºç«‹å¤æ‚çš„æŸ¥è¯¢ç®¡é“ï¼Œè€Œæ— éœ€ç«‹å³æ‰§è¡Œã€‚</li><li>æ¥ç€ï¼Œ<code>.filter()</code> æ–¹æ³•ç”¨äºç­›é€‰æ•°æ®ï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä½œä¸ºç­›é€‰æ¡ä»¶ã€‚</li><li>å…¶ä¸­ï¼Œ<code>pl.col(&quot;age&quot;) &gt; 20</code> é€‰æ‹© <code>&quot;age&quot;</code> åˆ—å¹¶æ£€æŸ¥å…¶å€¼æ˜¯å¦å¤§äº 20ï¼Œ<code>pl.col(&quot;income&quot;) &gt; 6000</code> é€‰æ‹© <code>&quot;income&quot;</code> åˆ—å¹¶æ£€æŸ¥å…¶å€¼æ˜¯å¦å¤§äº 6000ã€‚</li><li>ä¸¤ä¸ªæ¡ä»¶ç”¨ <code>&amp;</code> è¿ç®—ç¬¦è¿æ¥ï¼Œè¡¨ç¤ºã€Œä¸”ã€çš„å…³ç³»ï¼Œå³å¹´é¾„å¤§äº 20 ä¸”æ”¶å…¥å¤§äº 6000ã€‚</li><li>æœ€åï¼Œ<code>.collect()</code> æ–¹æ³•è§¦å‘å®é™…çš„æŸ¥è¯¢æ‰§è¡Œï¼Œå°†ç»“æœæ”¶é›†ä¸ºä¸€ä¸ªæ–°çš„ DataFrameã€‚</li></ol><h4 id="rust-ä½¿ç”¨" tabindex="-1">Rust ä½¿ç”¨ <a class="header-anchor" href="#rust-ä½¿ç”¨" aria-label="Permalink to &quot;Rust ä½¿ç”¨&quot;">â€‹</a></h4><p>è®¾ç½®å…¶ <code>Cargo.toml</code> æ–‡ä»¶ä¸ºï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">package</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;polars_demo&quot;</span></span>
<span class="line"><span style="color:#E06C75;">version</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.1.0&quot;</span></span>
<span class="line"><span style="color:#E06C75;">edition</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;2024&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">polars</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">version</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.38.2&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">features</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&quot;lazy&quot;</span><span style="color:#ABB2BF;">]}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¯¹åº”çš„ Rust ä»£ç ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> polars</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">PolarsResult</span><span style="color:#ABB2BF;">&lt;()&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç”¨ df! å®åˆ›å»ºç¤ºä¾‹ DataFrame</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> df</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> df!</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#98C379;">        &quot;name&quot;</span><span style="color:#ABB2BF;"> =&gt; [</span><span style="color:#98C379;">&quot;å¼ ä¸‰&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æå››&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç‹äº”&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;èµµå…­&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#98C379;">        &quot;age&quot;</span><span style="color:#ABB2BF;"> =&gt; [</span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">21</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">35</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">40</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#98C379;">        &quot;income&quot;</span><span style="color:#ABB2BF;"> =&gt; [</span><span style="color:#D19A66;">5000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">6000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8000</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10000</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ä½¿ç”¨æƒ°æ€§æŸ¥è¯¢ç­›é€‰æ•°æ®</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ç­›é€‰ age å¤§äº 20 ä¸” income å¤§äº 6000 çš„è¡Œ</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> filtered</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> df</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lazy</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#61AFEF;">            col</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">gt</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">lit</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">))       </span><span style="color:#7F848E;font-style:italic;">// å¹´é¾„å¤§äº 20</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">col</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;income&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">gt</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">lit</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">6000</span><span style="color:#ABB2BF;">)))  </span><span style="color:#7F848E;font-style:italic;">// ä¸”æ”¶å…¥å¤§äº 6000</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">collect</span><span style="color:#ABB2BF;">()?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    dbg!</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">filtered</span><span style="color:#ABB2BF;">);  </span><span style="color:#7F848E;font-style:italic;">// æ‰“å°ç­›é€‰åçš„ DataFrame</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>è¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[src</span><span style="color:#56B6C2;">\m</span><span style="color:#ABB2BF;">ain.rs:20:5] filtered = shape: (</span><span style="color:#61AFEF;">2,</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> name</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> age</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> income</span><span style="color:#98C379;"> â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> ---</span><span style="color:#98C379;">    â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> str</span><span style="color:#98C379;">  â”†</span><span style="color:#98C379;"> i32</span><span style="color:#98C379;"> â”†</span><span style="color:#98C379;"> i32</span><span style="color:#98C379;">    â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•¡</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> ç‹äº”</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> 35</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> 8000</span><span style="color:#98C379;">   â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”‚</span><span style="color:#98C379;"> èµµå…­</span><span style="color:#98C379;"> â”†</span><span style="color:#D19A66;"> 40</span><span style="color:#98C379;">  â”†</span><span style="color:#D19A66;"> 10000</span><span style="color:#98C379;">  â”‚</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è§£é‡Šï¼š</p><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>df!</code> å®æ¥æ–¹ä¾¿åœ°åˆ›å»ºç¤ºä¾‹ DataFrameï¼Œåˆ—åä½œä¸ºé”®ï¼Œåˆ—æ•°æ®ä½œä¸ºå€¼ã€‚</li><li>æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ DataFrame ä¸Šè°ƒç”¨ <code>.lazy()</code> æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæƒ°æ€§æŸ¥è¯¢æ„å»ºå™¨ã€‚</li><li>ç„¶åï¼Œä½¿ç”¨ <code>.filter()</code> æ–¹æ³•ç­›é€‰æ•°æ®ï¼Œä¼ å…¥ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä½œä¸ºç­›é€‰æ¡ä»¶ã€‚</li><li>å…¶ä¸­ï¼Œ<code>col(&quot;age&quot;).gt(lit(20))</code> é€‰æ‹© <code>&quot;age&quot;</code> åˆ—ï¼Œå¹¶ç”¨ <code>gt</code>ï¼ˆgreater thanï¼‰æ–¹æ³•æ£€æŸ¥å…¶å€¼æ˜¯å¦å¤§äº 20ã€‚<code>col(&quot;income&quot;).gt(lit(6000))</code> é€‰æ‹© <code>&quot;income&quot;</code> åˆ—ï¼Œæ£€æŸ¥å…¶å€¼æ˜¯å¦å¤§äº 6000ã€‚</li><li>ä¸¤ä¸ªæ¡ä»¶é€šè¿‡ <code>.and()</code> æ–¹æ³•è¿æ¥ï¼Œè¡¨ç¤ºã€Œä¸”ã€çš„å…³ç³»ã€‚</li><li>æœ€åï¼Œ<code>.collect()</code> æ–¹æ³•æ‰§è¡Œå®é™…çš„æŸ¥è¯¢ï¼Œå°†ç»“æœæ”¶é›†åˆ° <code>filtered</code> å˜é‡ä¸­ã€‚</li><li>æˆ‘ä»¬ä½¿ç”¨ <code>dbg!</code> å®æ‰“å°å‡ºç­›é€‰åçš„ DataFrameã€‚</li></ol><h3 id="æ€»ç»“-8" tabindex="-1"><strong>æ€»ç»“</strong> <a class="header-anchor" href="#æ€»ç»“-8" aria-label="Permalink to &quot;**æ€»ç»“**&quot;">â€‹</a></h3><p>Polars æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®å¤„ç†åº“ï¼Œå®ƒç»§æ‰¿äº† Rust é«˜æ€§èƒ½ã€å†…å­˜å®‰å…¨çš„ä¼˜ç‚¹ï¼Œåˆå¯¹ Python å¼€å‘è€…æä¾›äº†å‹å¥½çš„æ¥å£ï¼Œæ˜¯ä½ ä» Pandas è¿›é˜¶çš„ä¸äºŒä¹‹é€‰ã€‚é¢å¯¹å¤§å‹æ•°æ®é›†æ—¶ï¼ŒPolars æ›´èƒ½ä¸€å±•èº«æ‰‹ï¼Œç”¨å¹¶è¡Œã€å‘é‡åŒ–ã€æµå¼å¤„ç†ä¸ºä½ åŠ é€Ÿã€‚</p><p>èµ¶å¿«æ¥è¯•è¯• Polars å§ï¼Œå¼€å¯é«˜æ€§èƒ½æ•°æ®å¤„ç†ä¹‹æ—…ï¼</p><h1 id="éŸ³è§†é¢‘" tabindex="-1">éŸ³è§†é¢‘ <a class="header-anchor" href="#éŸ³è§†é¢‘" aria-label="Permalink to &quot;éŸ³è§†é¢‘&quot;">â€‹</a></h1><h2 id="xiu-ç®€å•å’Œå®‰å…¨çš„æµåª’ä½“æœåŠ¡å™¨" tabindex="-1">XIUï¼šç®€å•å’Œå®‰å…¨çš„æµåª’ä½“æœåŠ¡å™¨ <a class="header-anchor" href="#xiu-ç®€å•å’Œå®‰å…¨çš„æµåª’ä½“æœåŠ¡å™¨" aria-label="Permalink to &quot;XIUï¼šç®€å•å’Œå®‰å…¨çš„æµåª’ä½“æœåŠ¡å™¨&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/harlanc/xiu" target="_blank" rel="noreferrer">https://github.com/harlanc/xiu</a></p><p>XIUæ˜¯ç”¨çº¯Rustå¼€å‘çš„ä¸€æ¬¾ç®€å•å’Œå®‰å…¨çš„æµåª’ä½“æœåŠ¡å™¨ï¼Œç›®å‰æ”¯æŒçš„æµåª’ä½“åè®®åŒ…æ‹¬RTMP[cluster]/RTSP/WebRTC[Whip/Whep]/HLS/HTTPFLVã€‚</p><ul><li><p>æ”¯æŒå¤šå¹³å°ï¼ˆLinux/Mac/Windowsï¼‰</p></li><li><p>æ”¯æŒRTMP</p></li><li><p>æ”¯æŒå‘å¸ƒå’Œè®¢é˜…H264/AAC ç›´æ’­æµï¼›</p></li><li><p>æ”¯æŒç§’å¼€ï¼ˆGop cacheï¼‰ï¼›</p></li><li><p>æ”¯æŒè½¬æ¢åˆ°HLS/HTTP-FLVåè®®ï¼›</p></li><li><p>æ”¯æŒéƒ¨ç½²é›†ç¾¤ï¼›</p></li><li><p>æ”¯æŒRTSP</p></li><li><p>æ”¯æŒé€šè¿‡TCPï¼ˆInterleavedï¼‰å’ŒUDPå‘å¸ƒæˆ–è®¢é˜…H.265/H.264/AACæµï¼›</p></li><li><p>æ”¯æŒè½¬æ¢åˆ°RTMP/HLS/HTTP-FLVåè®®ï¼›</p></li><li><p>æ”¯æŒWebRTCï¼ˆWhip/Whepï¼‰</p></li><li><p>æ”¯æŒä½¿ç”¨Whipå‘å¸ƒrtcæµï¼›</p></li><li><p>æ”¯æŒä½¿ç”¨Whepè®¢é˜…rtcæµï¼›</p></li><li><p>æ”¯æŒè½¬æ¢åˆ°RTMP/HLS/HTTP-FLVåè®®ï¼›</p></li><li><p>æ”¯æŒè®¢é˜…HLS/HTTPFLVç›´æ’­æµ</p></li><li><p>æ”¯æŒå‘½ä»¤è¡Œæˆ–è€…é…ç½®æ–‡ä»¶é…ç½®æœåŠ¡</p></li><li><p>æ”¯æŒHTTP API/notify</p></li><li><p>æ”¯æŒæŸ¥è¯¢æµä¿¡æ¯ï¼›</p></li><li><p>æ”¯æŒæµäº‹ä»¶é€šçŸ¥ï¼›</p></li><li><p>æ”¯æŒtokené‰´æƒ</p></li><li><p>æ”¯æŒæŠŠç›´æ’­æµå½•åˆ¶æˆHLSåè®®(m3u8+ts)æ–‡ä»¶</p></li></ul><h1 id="æœç´¢å¼•æ“" tabindex="-1">æœç´¢å¼•æ“ <a class="header-anchor" href="#æœç´¢å¼•æ“" aria-label="Permalink to &quot;æœç´¢å¼•æ“&quot;">â€‹</a></h1><h2 id="tantivy-ä½¿ç”¨-rust-ç¼–å†™çš„å¿«é€Ÿå…¨æ–‡æœç´¢å¼•æ“åº“" tabindex="-1">Tantivyï¼šä½¿ç”¨ Rust ç¼–å†™çš„å¿«é€Ÿå…¨æ–‡æœç´¢å¼•æ“åº“ <a class="header-anchor" href="#tantivy-ä½¿ç”¨-rust-ç¼–å†™çš„å¿«é€Ÿå…¨æ–‡æœç´¢å¼•æ“åº“" aria-label="Permalink to &quot;Tantivyï¼šä½¿ç”¨ Rust ç¼–å†™çš„å¿«é€Ÿå…¨æ–‡æœç´¢å¼•æ“åº“&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/quickwit-oss/tantivy" target="_blank" rel="noreferrer">https://github.com/quickwit-oss/tantivy</a></p><p>Tantivy æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„æœç´¢å¼•æ“åº“ï¼Œå…¶çµæ„Ÿæ¥è‡ªäº Luceneã€‚</p><p>å¾—ç›Šäº Rust è¯­è¨€åŠ æŒï¼ŒTantivy æ€§èƒ½æ¯” Lucene è¦å¥½å¾—å¤š</p><p><img src="/ProgramLearnNotes/assets/014321_qdat_12.Dg5PVf-g.png" alt="img"></p><p>ä¸»è¦ç‰¹æ€§ï¼š</p><ul><li>å…¨æ–‡æœç´¢</li><li>å¯é…ç½®çš„åˆ†è¯å™¨ï¼Œæ”¯æŒ 17 ç§è¯­è¨€è¯å¹²ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ©æ–‡</li><li>é€Ÿåº¦éå¸¸å¿« (check out the ğŸ âœ¨ <a href="https://tantivy-search.github.io/bench/" target="_blank" rel="noreferrer">benchmark</a> âœ¨ ğŸ)</li><li>å¯åŠ¨æ—¶é—´æçŸ­ (&lt;10ms), perfect for command-line tools</li><li>BM25 è¯„åˆ† (ä¸ Lucene ç›¸åŒ)</li><li>è‡ªç„¶æŸ¥è¯¢è¯­è¨€ (e.g. <code>(michael AND jackson) OR &quot;king of pop&quot;</code>)</li><li>çŸ­è¯­æŸ¥è¯¢æœç´¢ (e.g. <code>&quot;michael jackson&quot;</code>)</li><li>å¢é‡ç´¢å¼•</li><li>å¤šçº¿ç¨‹ç´¢å¼•</li><li>Mmap ç›®å½•</li><li>SIMD æ•´æ•°å‹ç¼©ï¼Œæ”¯æŒ SSE2 æŒ‡ä»¤é›†</li><li>å¿«é€Ÿçš„å•å€¼å’Œå¤šå€¼ u64, i64, f64 å­—æ®µ (ç­‰åŒäº lucene ä¸­çš„ doc values)</li><li><code>&amp;[u8]</code> fast fields</li><li>Text, i64, u64, f64, dates, and hierarchical facet fields</li><li>LZ4 å‹ç¼©æ–‡æ¡£å­˜å‚¨</li><li>èŒƒå›´æœç´¢</li><li>Faceted æœç´¢</li><li>å¯é…ç½®çš„ç´¢å¼•</li><li>JSON å­—æ®µ</li><li>èšåˆæ”¶é›†å™¨ï¼ŒåŒ…æ‹¬ range buckets, average, and stats metrics</li><li>LogMergePolicy with deletes</li><li>Searcher Warmer API</li><li>Cheesy logo with a horse</li></ul><h3 id="tantivy-vs-apache-lucene" tabindex="-1">Tantivy vs Apache Lucene <a class="header-anchor" href="#tantivy-vs-apache-lucene" aria-label="Permalink to &quot;Tantivy vs Apache Lucene&quot;">â€‹</a></h3><p>Apache Lucene ä¸€ç›´æ˜¯å…¨æ–‡æœç´¢é¢†åŸŸçš„å…ˆé©±è€…ï¼Œä½†éšç€æŠ€æœ¯çš„è¿›æ­¥ï¼Œæ–°å…´çš„æœç´¢å¼•æ“åº“ Tantivy å´­éœ²å¤´è§’ï¼Œå±•ç°å‡ºæ— å¯åŒ¹æ•Œçš„æ€§èƒ½å’Œä¼˜åŠ¿ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸ºä»€ä¹ˆä½ åº”è¯¥è½¬å‘ä½¿ç”¨ Tantivyï¼Œè¿™ä¸ªè¢«èª‰ä¸ºä¸‹ä¸€ä»£æœç´¢å¼•æ“çš„å¼ºå¤§åº“ã€‚</p><p>Tantivyï¼Œè¢«è®¾è®¡ä¸º Apache Lucene çš„ç°ä»£æ›¿ä»£äº§å“ï¼Œå®ƒåœ¨å¤šä¸ªå…³é”®é¢†åŸŸå±•ç°äº†æ¯” Lucene æ›´ä¼˜è¶Šçš„ç‰¹æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¸»è¦å¯¹æ¯”ï¼š</p><ul><li><strong>ç¼–ç¨‹è¯­è¨€</strong>ï¼šTantivy æ˜¯ç”¨ Rust ç¼–å†™çš„ï¼Œè¿™æ˜¯ä¸€ç§é€Ÿåº¦æå¿«ã€å†…å­˜å®‰å…¨çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œç›¸æ¯” Java ç¼–å†™çš„ Luceneï¼Œåœ¨å¤„ç†å¹¶å‘å’Œå†…å­˜ç®¡ç†ä¸Šæœ‰ç€æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚</li><li><strong>æ€§èƒ½</strong>ï¼šTantivy åˆ©ç”¨ Rust çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œæ‹¥æœ‰æ›´å¿«çš„ç´¢å¼•æ„å»ºé€Ÿåº¦å’Œæœç´¢å“åº”æ—¶é—´ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹è¡¨ç°æ›´åŠ å‡ºè‰²ã€‚</li><li><strong>å†…å­˜å ç”¨</strong>ï¼šåœ¨å†…å­˜ç®¡ç†æ–¹é¢ï¼ŒTantivy å±•ç°å‡ºæ›´ä¸ºä¼˜é›…å’Œé«˜æ•ˆçš„æ•°æ®ç»“æ„å¤„ç†ï¼Œé™ä½äº†ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ã€‚</li><li><strong>æ˜“ç”¨æ€§</strong>ï¼šTantivy æ—¨åœ¨ç®€åŒ–æœç´¢å¼•æ“çš„å¤æ‚æ€§ï¼Œæä¾›äº†æ›´ä¸ºç›´æ¥çš„ API å’Œæ›´å°‘çš„é…ç½®éœ€æ±‚ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å¿«é€Ÿåœ°æ•´åˆå’Œä½¿ç”¨ã€‚</li></ul><h3 id="tantivy-çš„å®ç°åŸç†å’Œä¼˜åŠ¿ç‰¹æ€§" tabindex="-1">Tantivy çš„å®ç°åŸç†å’Œä¼˜åŠ¿ç‰¹æ€§ <a class="header-anchor" href="#tantivy-çš„å®ç°åŸç†å’Œä¼˜åŠ¿ç‰¹æ€§" aria-label="Permalink to &quot;Tantivy çš„å®ç°åŸç†å’Œä¼˜åŠ¿ç‰¹æ€§&quot;">â€‹</a></h3><p>Tantivy åœ¨å®ç°ä¸Šé‡‡ç”¨äº†è¯¸å¤šç°ä»£åŒ–çš„æŠ€æœ¯å’Œè®¾è®¡ï¼Œä½¿å¾—å®ƒåœ¨å…¨æ–‡æœç´¢é¢†åŸŸå¤§æ”¾å¼‚å½©ã€‚æ¥ä¸‹æ¥å°†è¯¦ç»†æ¢ç´¢è¿™äº›ç‰¹æ€§å’Œå®ç°æ–¹å¼ã€‚</p><h4 id="ç´¢å¼•ä¸æŸ¥è¯¢å¤„ç†" tabindex="-1">ç´¢å¼•ä¸æŸ¥è¯¢å¤„ç† <a class="header-anchor" href="#ç´¢å¼•ä¸æŸ¥è¯¢å¤„ç†" aria-label="Permalink to &quot;ç´¢å¼•ä¸æŸ¥è¯¢å¤„ç†&quot;">â€‹</a></h4><p>Tantivy å¯¹ç´¢å¼•çš„å¤„ç†éå¸¸é«˜æ•ˆã€‚é‡‡ç”¨äº†å€’æ’ç´¢å¼•ï¼Œè®©æ–‡æ¡£æ£€ç´¢æ›´å¿«ã€‚æ”¯æŒå¢é‡ç´¢å¼•ï¼Œæ— éœ€é‡å»ºæ•´ä¸ªç´¢å¼•å³å¯æ›´æ–°ï¼Œå¤§å¤§èŠ‚çœäº†æ—¶é—´å’Œèµ„æºã€‚</p><h4 id="å¤šè¯­è¨€æ”¯æŒ" tabindex="-1">å¤šè¯­è¨€æ”¯æŒ <a class="header-anchor" href="#å¤šè¯­è¨€æ”¯æŒ" aria-label="Permalink to &quot;å¤šè¯­è¨€æ”¯æŒ&quot;">â€‹</a></h4><p>å€ŸåŠ© Rust å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒTantivy èƒ½å¤Ÿé€šè¿‡ plugins æ”¯æŒå¤šç§è¯­è¨€åˆ†æå™¨ï¼Œæ¯”å¦‚ <code>tantivy-jieba</code> é’ˆå¯¹ä¸­æ–‡æ–‡æœ¬ï¼Œè€Œ Lucene éœ€è¦é¢å¤–çš„æ’ä»¶æˆ–é…ç½®ã€‚</p><h4 id="é«˜æ•ˆçš„å­˜å‚¨ç»“æ„" tabindex="-1">é«˜æ•ˆçš„å­˜å‚¨ç»“æ„ <a class="header-anchor" href="#é«˜æ•ˆçš„å­˜å‚¨ç»“æ„" aria-label="Permalink to &quot;é«˜æ•ˆçš„å­˜å‚¨ç»“æ„&quot;">â€‹</a></h4><p>Tantivy ä½¿ç”¨äº†ä¸€ç³»åˆ—é«˜æ•ˆçš„æ•°æ®å­˜å‚¨ç»“æ„ï¼ŒåŒ…æ‹¬å­˜æ”¾æ–‡æ¡£æ•°æ®çš„ doc store å’Œç”¨äºå¿«é€Ÿæ£€ç´¢é”®å€¼å¯¹çš„ FAST å­—æ®µç´¢å¼•ã€‚</p><h4 id="å¼ºå¤§çš„æœç´¢åŠŸèƒ½" tabindex="-1">å¼ºå¤§çš„æœç´¢åŠŸèƒ½ <a class="header-anchor" href="#å¼ºå¤§çš„æœç´¢åŠŸèƒ½" aria-label="Permalink to &quot;å¼ºå¤§çš„æœç´¢åŠŸèƒ½&quot;">â€‹</a></h4><p>è¯­æ³•é«˜äº®ã€æ‹¼å†™æ£€æŸ¥å’ŒæŸ¥è¯¢è§£æï¼Œè¿™äº›æ˜“ç”¨ä½†å¼ºå¤§çš„åŠŸèƒ½ç»Ÿç»ŸåŒ…å«åœ¨ Tantivy ä¹‹ä¸­ã€‚</p><h3 id="å¦‚ä½•å¼€å§‹ä½¿ç”¨-tantivy" tabindex="-1">å¦‚ä½•å¼€å§‹ä½¿ç”¨ Tantivy <a class="header-anchor" href="#å¦‚ä½•å¼€å§‹ä½¿ç”¨-tantivy" aria-label="Permalink to &quot;å¦‚ä½•å¼€å§‹ä½¿ç”¨ Tantivy&quot;">â€‹</a></h3><p>è¿™é‡Œå°†æä¾›ä¸€ä¸ªå¦‚ä½•å¼€å§‹ä½¿ç”¨ Tantivy çš„å¿«é€ŸæŒ‡å—ï¼š</p><p><strong>1.å®‰è£… Rust</strong></p><p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Rust å¼€å‘ç¯å¢ƒã€‚</p><p><strong>2.åˆ›å»ºé¡¹ç›®</strong></p><p>é€šè¿‡ Cargo æ–°å»ºä¸€ä¸ª Rust é¡¹ç›®ã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> new</span><span style="color:#98C379;"> tantivy_project</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#98C379;"> tantivy_project</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3.æ·»åŠ ä¾èµ–</strong></p><p>åœ¨ Cargo.toml æ–‡ä»¶ä¸­åŠ å…¥ Tantivy ä½œä¸ºä¾èµ–ã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#61AFEF;">tantivy</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.22&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>4.ç¼–å†™ç´¢å¼•å’Œæœç´¢ä»£ç </strong></p><p>ä½¿ç”¨ Tantivy æ„å»ºç´¢å¼•ï¼Œæ‰§è¡Œæœç´¢ï¼Œå¹¶ç®¡ç†ç»“æœã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ä»¥ä¸‹ä»£ç å±•ç¤ºäº†ä¸€ä¸ªæ„å»ºç´¢å¼•å¹¶è¿›è¡Œæœç´¢çš„ç¤ºèŒƒï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è½½å…¥ Tantivy åº“</span></span>
<span class="line"><span style="color:#C678DD;">extern</span><span style="color:#C678DD;"> crate</span><span style="color:#ABB2BF;"> tantivy;</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> tantivy</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">schema</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Schema</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TEXT</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> tantivy</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">Index</span><span style="color:#ABB2BF;">, doc};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() -&gt; </span><span style="color:#E5C07B;">tantivy</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;()&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   // å®šä¹‰ Schema</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> schema_builder</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Schema</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">   schema_builder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_text_field</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">TEXT</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">   schema_builder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_text_field</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;body&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">TEXT</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> schema</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> schema_builder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   // åˆ›å»ºç´¢å¼•</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Index</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">create_in_ram</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">schema</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   // æ·»åŠ æ–‡æ¡£åˆ°ç´¢å¼•ä¸­</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> index_writer</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">writer</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50_000_000</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#E06C75;">   index_writer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add_document</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">doc!</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">       schema</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_field</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#98C379;">&quot;The Old Man and the Sea&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">       schema</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_field</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;body&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#98C379;">&quot;He was an old man who fished alone in a skiff in the Gulf Stream and he had gone...&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">   ));</span></span>
<span class="line"><span style="color:#E06C75;">   index_writer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">()?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   // æœç´¢</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> reader</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> index</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reader</span><span style="color:#ABB2BF;">()?;</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> searcher</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> reader</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">searcher</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> query_parser</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> tantivy</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">query</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">QueryParser</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">for_index</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">vec!</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">schema</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get_field</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">()]);</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> query_parser</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse_query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;old man&quot;</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#C678DD;">   let</span><span style="color:#E06C75;"> top_docs</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> searcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">search</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">, &amp;</span><span style="color:#E5C07B;">tantivy</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">collector</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">TopDocs</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">with_limit</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">))?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   // æ‰“å°æœç´¢ç»“æœ</span></span>
<span class="line"><span style="color:#C678DD;">   for</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">_</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">doc_address</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">in</span><span style="color:#E06C75;"> top_docs</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">       let</span><span style="color:#E06C75;"> retrieved_doc</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> searcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">doc</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">doc_address</span><span style="color:#ABB2BF;">)?;</span></span>
<span class="line"><span style="color:#61AFEF;">       println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">schema</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">to_json</span><span style="color:#ABB2BF;">(&amp;</span><span style="color:#E06C75;">retrieved_doc</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">   Ok</span><span style="color:#ABB2BF;">(())</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p><strong>5.ç¼–è¯‘å¹¶è¿è¡Œé¡¹ç›®</strong></p><p>è¿è¡Œ <code>cargo run</code> ç¼–è¯‘å¹¶å¯åŠ¨ä½ çš„é¡¹ç›®ã€‚</p><h3 id="tantivy-çš„åº”ç”¨åœºæ™¯å’Œå‰æ™¯" tabindex="-1">Tantivy çš„åº”ç”¨åœºæ™¯å’Œå‰æ™¯ <a class="header-anchor" href="#tantivy-çš„åº”ç”¨åœºæ™¯å’Œå‰æ™¯" aria-label="Permalink to &quot;Tantivy çš„åº”ç”¨åœºæ™¯å’Œå‰æ™¯&quot;">â€‹</a></h3><p>Tantivy çš„æ€§èƒ½å’Œæ˜“ç”¨æ€§ä½¿å…¶æˆä¸ºä¸åŒåº”ç”¨åœºæ™¯ä¸‹ç†æƒ³çš„å…¨æ–‡æœç´¢å¼•æ“åº“ã€‚æ— è®ºæ˜¯åœ¨æ—¥ç›Šå¢é•¿çš„æ—¥å¿—åˆ†æé¢†åŸŸã€éœ€è¦å¤„ç†æ–‡æ¡£å’Œæ–‡æœ¬æœç´¢çš„å†…å®¹ç®¡ç†ç³»ç»Ÿã€è¿˜æ˜¯å¯¹æœç´¢æ€§èƒ½è¦æ±‚æé«˜çš„ç”µå­å•†åŠ¡å¹³å°ï¼ŒTantivy éƒ½èƒ½å¤Ÿæä¾›å¼ºå¤§çš„æ”¯æŒã€‚</p><p>Tantivy ä¸ä»…é€‚åˆç”¨äºå°åˆ°ä¸­å‹çš„é¡¹ç›®å¼€å‘ï¼Œå®ƒå¼ºå¤§çš„æ€§èƒ½ä¸ Rust çš„å†…å­˜å®‰å…¨æ€§ä½¿å…¶ä¹Ÿéå¸¸é€‚åˆå¤§å‹ã€é«˜æ€§èƒ½è¦æ±‚çš„å•†ä¸šç¯å¢ƒã€‚éšç€ Rust ç¤¾åŒºçš„å‘å±•å’Œæˆç†Ÿï¼ŒTantivy æœ‰æœ›åœ¨æœªæ¥æˆä¸ºå…¨æ–‡æœç´¢é¢†åŸŸçš„é¢†å†›è€…ã€‚</p><p>è™½ç„¶ Apache Lucene å æœ‰äº†é•¿æœŸçš„å¸‚åœºä¸»å¯¼åœ°ä½ï¼Œä½†æ˜¯ Tantivy ä½œä¸ºä¸‹ä¸€ä»£æœç´¢å¼•æ“çš„æ°å‡ºä»£è¡¨ï¼Œå…¶é«˜æ•ˆçš„æ€§èƒ½ã€ç°ä»£åŒ–çš„è®¾è®¡ä»¥åŠè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ— ç–‘æŒ‡å¼•äº†æœç´¢æŠ€æœ¯çš„æ–°æ–¹å‘ã€‚ç°åœ¨æ˜¯æ—¶å€™æ”¾ä¸‹è€æ—§çš„ Luceneï¼Œæ‹¥æŠ±é€Ÿåº¦å’Œæ•ˆç‡å¹¶å­˜çš„ Tantivy äº†ã€‚</p><h1 id="ai-æœºå™¨å­¦ä¹ -æ·±åº¦å­¦ä¹ " tabindex="-1">AI|æœºå™¨å­¦ä¹ |æ·±åº¦å­¦ä¹  <a class="header-anchor" href="#ai-æœºå™¨å­¦ä¹ -æ·±åº¦å­¦ä¹ " aria-label="Permalink to &quot;AI|æœºå™¨å­¦ä¹ |æ·±åº¦å­¦ä¹ &quot;">â€‹</a></h1><h2 id="ndarray" tabindex="-1">ndarray <a class="header-anchor" href="#ndarray" aria-label="Permalink to &quot;ndarray&quot;">â€‹</a></h2><p>ndarray æ˜¯ NumPy åº“ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºå¤šç»´æ•°ç»„çš„å¯¹è±¡ã€‚ndarray åœ¨å­˜å‚¨å’Œæ“ä½œå¤§å‹å¤šç»´æ•°ç»„æ—¶éå¸¸é«˜æ•ˆï¼Œå¹¿æ³›åº”ç”¨äºç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸã€‚</p><p>åœ¨ Rust å¼€å‘ä¸­ï¼Œndarray åº“å¯ä»¥ä½œä¸ºæ›¿ä»£ NumPy åº“ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/rust-ndarray/ndarray" target="_blank" rel="noreferrer">https://github.com/rust-ndarray/ndarray</a></p><h2 id="polars-1" tabindex="-1">Polars <a class="header-anchor" href="#polars-1" aria-label="Permalink to &quot;Polars&quot;">â€‹</a></h2><p>å¯ä»¥ä½œä¸ºæ›¿ä»£ Python ä¸­ pandas åº“ï¼ŒPolars æ˜¯ä¸ªå¼€æºçš„æ•°æ®å¤„ç†åº“ï¼Œæä¾›å¿«é€Ÿå’Œçµæ´»çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œå°¤å…¶å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ã€‚Polars çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ç±»ä¼¼äº Pandas çš„ APIï¼Œä½†åˆ©ç”¨ Rust çš„æ€§èƒ½ä¼˜åŠ¿æ¥æé«˜æ•°æ®å¤„ç†çš„é€Ÿåº¦ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/pola-rs/polars" target="_blank" rel="noreferrer">https://github.com/pola-rs/polars</a></p><h2 id="tch-rs" tabindex="-1">tch-rs <a class="header-anchor" href="#tch-rs" aria-label="Permalink to &quot;tch-rs&quot;">â€‹</a></h2><p>tch-rs æ˜¯ä¸€ä¸ªä½¿å¾— Rust èƒ½å¤Ÿä¸ PyTorch æ¡†æ¶ç»“åˆçš„å·¥å…·ï¼Œæ‰©å±•äº† Rust åœ¨æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ é¢†åŸŸçš„åº”ç”¨èƒ½åŠ›ã€‚å¹¿æ³›ç”¨äºè®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ç­‰ç ”ç©¶å’Œåº”ç”¨é¢†åŸŸï¼Œtch-rs å…è®¸ Rust å¼€å‘è€…åˆ©ç”¨ PyTorch çš„åŠŸèƒ½ï¼Œè¿›è¡Œæ·±åº¦å­¦ä¹ æ¨¡å‹çš„å¼€å‘å’Œéƒ¨ç½²ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/LaurentMazare/tch-rs" target="_blank" rel="noreferrer">https://github.com/LaurentMazare/tch-rs</a></p><h2 id="burn" tabindex="-1">Burn <a class="header-anchor" href="#burn" aria-label="Permalink to &quot;Burn&quot;">â€‹</a></h2><p>Burn æ˜¯ä¸€ä¸ªæ–°çš„ç»¼åˆåŠ¨æ€æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä½¿ç”¨ Rust æ„å»ºï¼Œä»¥æé«˜çš„çµæ´»æ€§ã€è®¡ç®—æ•ˆç‡å’Œå¯ç§»æ¤æ€§ä½œä¸ºå…¶ä¸»è¦ç›®æ ‡ã€‚è¿™ä¸ªåº“ä¹‹å‰ä¹Ÿæ¨èè¿‡ï¼Œéå¸¸å€¼å¾—å»å…³æ³¨ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/tracel-ai/burn" target="_blank" rel="noreferrer">https://github.com/tracel-ai/burn</a></p><h2 id="candle" tabindex="-1">Candle <a class="header-anchor" href="#candle" aria-label="Permalink to &quot;Candle&quot;">â€‹</a></h2><p>Candle æ˜¯ç”± Hugging Face å¼€å‘çš„ Rust è¯­è¨€æœºå™¨å­¦ä¹ æ¡†æ¶ã€‚ä¸»è¦æ˜¯ä¸º Rust å¼€å‘è€…åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸæä¾›äº†æ–°çš„å·¥å…·ï¼Œä½¿å¾—æ„å»ºå’Œéƒ¨ç½²æœºå™¨å­¦ä¹ åº”ç”¨å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><ul><li><strong>æç®€è®¾è®¡</strong>ï¼šæä¾›ç®€æ´çš„ APIï¼Œæ˜“äºä½¿ç”¨ã€‚</li><li><strong>é«˜æ€§èƒ½</strong>ï¼šåˆ©ç”¨ Rust è¯­è¨€çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</li><li><strong>æ˜“ç”¨æ€§</strong>ï¼šAPI è®¾è®¡å€Ÿé‰´äº† PyTorchï¼Œé™ä½å­¦ä¹ æˆæœ¬ã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒå¤šç§åç«¯ï¼Œæ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒä¸­éƒ¨ç½²ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šRust è¯­è¨€ä¿è¯äº†å†…å­˜å®‰å…¨å’Œçº¿ç¨‹å®‰å…¨ã€‚</li></ul><p>GIthub åœ°å€ï¼š<a href="https://github.com/huggingface/candle" target="_blank" rel="noreferrer">https://github.com/huggingface/candle</a></p><h2 id="linfa" tabindex="-1">Linfa <a class="header-anchor" href="#linfa" aria-label="Permalink to &quot;Linfa&quot;">â€‹</a></h2><p>linfa æä¾›ä¸€ä¸ªå…¨é¢çš„å·¥å…·åŒ…æ¥ä½¿ç”¨ Rust æ„å»ºæœºå™¨å­¦ä¹ åº”ç”¨ç¨‹åºã€‚ç±»ä¼¼ Python çš„scikit-learn åº“ï¼Œä¸“æ³¨äºæ—¥å¸¸ ML ä»»åŠ¡çš„å¸¸è§é¢„å¤„ç†ä»»åŠ¡å’Œç»å…¸ ML ç®—æ³•ã€‚</p><p>GIthub åœ°å€ï¼š<a href="https://github.com/rust-ml/linfa" target="_blank" rel="noreferrer">https://github.com/rust-ml/linfa</a></p><h2 id="plotters" tabindex="-1">plotters <a class="header-anchor" href="#plotters" aria-label="Permalink to &quot;plotters&quot;">â€‹</a></h2><p>Plotters æ˜¯ä¸€ä¸ªç»˜å›¾åº“ï¼Œè®¾è®¡ç”¨äºç”¨çº¯ Rust æ¸²æŸ“å›¾å½¢ã€ç»˜å›¾å’Œå›¾è¡¨ï¼Œæ”¯æŒå„ç§ç±»å‹çš„åç«¯ï¼ŒåŒ…æ‹¬ä½å›¾ã€çŸ¢é‡å›¾ã€æ´»å¡çª—å£ã€GTK/Cairo å’Œ WebAssemblyã€‚ç±»ä¼¼ Python çš„ matplotlib åº“ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/plotters-rs/plotters" target="_blank" rel="noreferrer">https://github.com/plotters-rs/plotters</a></p><h2 id="petgraph" tabindex="-1">petgraph <a class="header-anchor" href="#petgraph" aria-label="Permalink to &quot;petgraph&quot;">â€‹</a></h2><p>petgraph æ˜¯ä¸€ä¸ªå›¾æ•°æ®ç»“æ„åº“ï¼Œå›¾æ˜¯èŠ‚ç‚¹ä»¥åŠèŠ‚ç‚¹ä¹‹é—´çš„è¾¹çš„é›†åˆã€‚petgraph æä¾›äº†å¤šç§å›¾å½¢ç±»å‹ã€è¿™äº›å›¾å½¢çš„ç®—æ³•ä»¥åŠä»¥æ ¼å¼è¾“å‡ºå›¾å½¢ graphviz çš„åŠŸèƒ½ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/petgraph/petgraph" target="_blank" rel="noreferrer">https://github.com/petgraph/petgraph</a></p><h2 id="tensorflow-rust" tabindex="-1">tensorflow-rust <a class="header-anchor" href="#tensorflow-rust" aria-label="Permalink to &quot;tensorflow-rust&quot;">â€‹</a></h2><p>TensorFlow çš„ Rust è¯­è¨€ç»‘å®šï¼Œå…è®¸ Rust å¼€å‘è€…ä½¿ç”¨ TensorFlow çš„æœºå™¨å­¦ä¹ æ¡†æ¶ã€‚</p><p>Github åœ°å€ï¼š<a href="https://github.com/tensorflow/rust" target="_blank" rel="noreferrer">https://github.com/tensorflow/rust</a></p><h2 id="mistral-rs-ä½¿ç”¨-rust-è¯­è¨€èµ‹èƒ½çš„-llm-åŠ é€Ÿå¹³å°" tabindex="-1">Mistral.rsï¼šä½¿ç”¨ Rust è¯­è¨€èµ‹èƒ½çš„ LLM åŠ é€Ÿå¹³å° <a class="header-anchor" href="#mistral-rs-ä½¿ç”¨-rust-è¯­è¨€èµ‹èƒ½çš„-llm-åŠ é€Ÿå¹³å°" aria-label="Permalink to &quot;Mistral.rsï¼šä½¿ç”¨ Rust è¯­è¨€èµ‹èƒ½çš„ LLM åŠ é€Ÿå¹³å°&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/EricLBuehler/mistral.rs" target="_blank" rel="noreferrer">https://github.com/EricLBuehler/mistral.rs</a></p><p>åœ¨ä»Šæ—¥å……æ»¡æŒ‘æˆ˜çš„äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œè®©å¤§æ¨¡å‹ï¼ˆLarge Language Models, LLMsï¼‰å¦‚é£é©°ç”µæ£èˆ¬å¿«é€Ÿæ¨ç†ï¼Œå·²æˆä¸ºä¸€ä¸ªè¶Šæ¥è¶Šè¢«é‡è§†çš„è®®é¢˜ã€‚</p><p>EricLBuehler çš„å¼€æºé¡¹ç›®â€”â€”Mistral.rsï¼Œæ­£æ˜¯åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹åº”è¿è€Œç”Ÿçš„ã€‚Mistral.rs ä¸ä»…ä»…æ˜¯åˆä¸€ä¸ª LLM æ¨ç†å¹³å°ï¼Œå®ƒæ˜¯åŸºäºçº¯ Rust å®ç°ï¼Œå®‰å…¨ã€å¿«é€Ÿå’Œé«˜æ•ˆã€‚æœ¬æ–‡å°†ä¸ºä½ æ·±å…¥è§£è¯» Mistral.rsï¼Œä»å®ƒçš„è®¾è®¡ç†å¿µã€æ ¸å¿ƒåŠŸèƒ½ã€åˆ°å®é™…çš„ä½¿ç”¨æŒ‡å—ã€‚</p><h3 id="mistral-rs-çš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒåŠŸèƒ½" tabindex="-1">Mistral.rs çš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#mistral-rs-çš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒåŠŸèƒ½" aria-label="Permalink to &quot;Mistral.rs çš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><p>Mistral.rs ç§‰æ‰¿ç€é«˜é€Ÿæ¨ç†çš„ç›®æ ‡ï¼Œé‡‡ç”¨çº¯ Rust è¯­è¨€ç¼–å†™ï¼Œç¡®ä¿äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡å’Œå®‰å…¨æ€§ã€‚å®ƒå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p><ul><li>**é«˜æ•ˆçš„æ€§èƒ½ï¼š**é‡‡ç”¨äº†æ¯ä¸ªåºåˆ—çš„ KV ç¼“å­˜ç®¡ç†æŠ€æœ¯ï¼Œä»¥åŠè¿½èµ¶ï¼ˆcatch-upï¼‰æŠ€æœ¯ï¼Œä½¿å¾—æ¨ç†è¿‡ç¨‹æå…¶å¿«é€Ÿã€‚</li><li>**å¤šç§é‡åŒ–æ”¯æŒï¼š**æä¾›äº† 2-bit åˆ° 8-bit çš„é‡åŒ–é€‰é¡¹ï¼Œä¼˜åŒ–äº†å†…å­˜ä½¿ç”¨ï¼ŒåŒæ—¶ä¿è¯äº†æ¨ç†é€Ÿåº¦ã€‚</li><li>**ç¬¬ä¸€ä¸ªæ”¯æŒ X-LoRA çš„å¹³å°ï¼š**Mistral.rs æ˜¯é¦–ä¸ªä¸º X-LoRA æä¾›ä¸€æµæ”¯æŒçš„æ¨ç†å¹³å°ï¼Œé€šè¿‡ç»†èŠ‚ä¼˜åŒ–å’Œç®—æ³•å‡çº§ï¼Œè®© X-LoRA çš„è¿è¡Œæ›´é«˜æ•ˆã€‚</li><li>**å…¼å®¹ OpenAI çš„ HTTP æœåŠ¡å™¨ï¼š**æä¾›äº†è½»é‡çº§ä¸”ä¸ OpenAI API å…¼å®¹çš„ HTTP æœåŠ¡å™¨ï¼Œä½¿å¾—ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆå˜å¾—å®¹æ˜“ã€‚</li><li>**è·¨å¹³å°å’Œè·¨è¯­è¨€æ”¯æŒï¼š**ä¸ä»…æ”¯æŒ Apple silicon çš„ Metal æ¡†æ¶ï¼Œè¿˜æä¾›äº†æ–¹ä¾¿çš„ Python APIï¼Œä½¿å¾—åœ¨ä¸åŒå¹³å°å’Œè¯­è¨€é—´ä½¿ç”¨å˜å¾—æ— ç¼ã€‚</li></ul><h3 id="å®è·µæŒ‡å—-æ­å»ºä¸è¿è¡Œ-mistral-rs-æœåŠ¡" tabindex="-1">å®è·µæŒ‡å—ï¼šæ­å»ºä¸è¿è¡Œ Mistral.rs æœåŠ¡ <a class="header-anchor" href="#å®è·µæŒ‡å—-æ­å»ºä¸è¿è¡Œ-mistral-rs-æœåŠ¡" aria-label="Permalink to &quot;å®è·µæŒ‡å—ï¼šæ­å»ºä¸è¿è¡Œ Mistral.rs æœåŠ¡&quot;">â€‹</a></h3><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•æ­å»ºå¹¶è¿è¡Œ Mistral.rs æœåŠ¡ã€‚é¦–å…ˆï¼Œä½ éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº† Rust ç¯å¢ƒã€‚Mistral.rs çš„å®‰è£…è¿‡ç¨‹ç®€å•ç›´æ¥â€”â€”å…‹éš†é¡¹ç›®ã€æ„å»ºï¼Œå¹¶è¿è¡Œã€‚</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> apt</span><span style="color:#98C379;"> update</span><span style="color:#D19A66;"> -y</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> apt</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> libssl-dev</span><span style="color:#D19A66;"> -y</span></span>
<span class="line"><span style="color:#61AFEF;">sudo</span><span style="color:#98C379;"> apt</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> pkg-config</span><span style="color:#D19A66;"> -y</span></span>
<span class="line"><span style="color:#61AFEF;">curl</span><span style="color:#D19A66;"> --proto</span><span style="color:#98C379;"> &#39;=https&#39;</span><span style="color:#D19A66;"> --tlsv1.2</span><span style="color:#D19A66;"> -sSf</span><span style="color:#98C379;"> https://sh.rustup.rs</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">sh</span></span>
<span class="line"><span style="color:#56B6C2;">source</span><span style="color:#E06C75;"> $HOME</span><span style="color:#98C379;">/.cargo/env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">git</span><span style="color:#98C379;"> clone</span><span style="color:#98C379;"> https://github.com/EricLBuehler/mistral.rs.git</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#98C379;"> mistral.rs</span></span>
<span class="line"><span style="color:#61AFEF;">mkdir</span><span style="color:#98C379;"> ~/.cache/huggingface</span></span>
<span class="line"><span style="color:#61AFEF;">touch</span><span style="color:#98C379;"> ~/.cache/huggingface/token</span></span>
<span class="line"><span style="color:#56B6C2;">echo</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">HF_TOKEN_HER</span><span style="color:#ABB2BF;">E&gt; &gt; </span><span style="color:#98C379;">~/.cache/huggingface/token</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> build</span><span style="color:#D19A66;"> --release</span><span style="color:#D19A66;"> --features</span><span style="color:#98C379;"> cuda</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ„å»ºå®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨æœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">./mistralrs-server</span><span style="color:#D19A66;"> --port</span><span style="color:#D19A66;"> 1234</span><span style="color:#D19A66;"> --log</span><span style="color:#98C379;"> output.log</span><span style="color:#98C379;"> mistral</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ­¤å¤–ï¼ŒMistral.rs æ”¯æŒå¾ˆå¤šé«˜çº§åŠŸèƒ½ï¼Œå¦‚ä¸º X-LoRA æ¨¡å‹å‡†å¤‡æ’åºæ–‡ä»¶ã€è¿è¡Œé‡åŒ– X-LoRA æ¨¡å‹ç­‰ã€‚è¯¦ç»†ä¿¡æ¯å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><h3 id="æ€§èƒ½åŸºå‡†ä¸å®ç”¨ç¤ºä¾‹" tabindex="-1">æ€§èƒ½åŸºå‡†ä¸å®ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#æ€§èƒ½åŸºå‡†ä¸å®ç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;æ€§èƒ½åŸºå‡†ä¸å®ç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><p>Mistral.rs çš„æ€§èƒ½åŸºå‡†æ•°æ®ååˆ†ä»¤äººå°è±¡æ·±åˆ»ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ A6000 GPUï¼Œ8-bit é‡åŒ–ï¼Œä»¥ prompt tokens ä¸º 27ï¼Œcompletion tokens ä¸º 64 çš„è®¾ç½®ä¸‹ï¼Œå…¶é€Ÿåº¦è¾¾åˆ°äº† 3.13 tok/sï¼›è€Œåœ¨ A10 GPU ä¸Šçš„æ€§èƒ½æ›´æ˜¯è¾¾åˆ°äº† 32.16 tok/sã€‚</p><p>ä¸ºäº†å±•ç¤º Mistral.rs çš„ä½¿ç”¨æ•ˆæœï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ç”¨ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">./mistralrs-server</span><span style="color:#D19A66;"> --port</span><span style="color:#D19A66;"> 1234</span><span style="color:#98C379;"> x-lora-mistral</span><span style="color:#D19A66;"> -o</span><span style="color:#98C379;"> x-lora-orderings/default-ordering.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é€šè¿‡è¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œè¿è¡Œé»˜è®¤æƒé‡å’Œæ’åºçš„ X-LoRA æ¨¡å‹ã€‚</p><h3 id="ç»“è®º-2" tabindex="-1">ç»“è®º <a class="header-anchor" href="#ç»“è®º-2" aria-label="Permalink to &quot;ç»“è®º&quot;">â€‹</a></h3><p>Mistral.rs ä»¥å…¶å“è¶Šçš„è®¾è®¡ã€å¼ºå¤§çš„åŠŸèƒ½å’ŒæƒŠäººçš„æ€§èƒ½ï¼Œä¸º LLM æ¨ç†å¹³å°è®¾ç½®äº†æ–°çš„æ ‡å‡†ã€‚æ— è®ºæ˜¯å¯¹äºç ”ç©¶äººå‘˜è¿˜æ˜¯å·¥ç¨‹å¸ˆï¼ŒMistral.rs éƒ½æä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€ä¾¿æ·çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æœŸåœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„äººå·¥æ™ºèƒ½é¢†åŸŸè„±é¢–è€Œå‡ºã€‚éšç€æ›´å¤šå³å°†æ¨å‡ºçš„åŠŸèƒ½ï¼Œå¦‚ Falcon æ¨¡å‹å’Œè½¯ä»¶å†…æ ¸èåˆï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼ŒMistral.rs å°†ç»§ç»­å¼•é¢† LLM æ¨ç†æŠ€æœ¯çš„æœªæ¥å‘å±•ã€‚</p><h3 id="æ€§èƒ½" tabindex="-1">æ€§èƒ½ <a class="header-anchor" href="#æ€§èƒ½" aria-label="Permalink to &quot;æ€§èƒ½&quot;">â€‹</a></h3><p><a href="https://mp.weixin.qq.com/s/tLjETnaLWrrvimUPDcS2yA" target="_blank" rel="noreferrer">1 å…ƒ=1700000tokensï¼æ¸…åç³»å‘å¸ƒå›½äº§ Mistral ä»… 2Bï¼Œè€æ‰‹æœºéƒ½å¸¦å¾—åŠ¨ï¼ŒGitHub ä¸€å¤©æ–©è· 300+æ˜Ÿ (qq.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/689043863" target="_blank" rel="noreferrer">Mistral 7B v0.2 åŸºç¡€æ¨¡å‹å¼€æºï¼Œé­”æ­ç¤¾åŒºå¾®è°ƒæ•™ç¨‹å’Œè¯„æµ‹æ¥å•¦ï¼ - çŸ¥ä¹ (zhihu.com)</a></p><h2 id="luminal-åŸºäºrustè¯­è¨€ç¼–å†™çš„æ·±åº¦å­¦ä¹ åº“" tabindex="-1">Luminalï¼šåŸºäºRustè¯­è¨€ç¼–å†™çš„æ·±åº¦å­¦ä¹ åº“ <a class="header-anchor" href="#luminal-åŸºäºrustè¯­è¨€ç¼–å†™çš„æ·±åº¦å­¦ä¹ åº“" aria-label="Permalink to &quot;Luminalï¼šåŸºäºRustè¯­è¨€ç¼–å†™çš„æ·±åº¦å­¦ä¹ åº“&quot;">â€‹</a></h2><p><strong>GitHub åœ°å€</strong>ï¼š<a href="https://github.com/jafioti/luminal" target="_blank" rel="noreferrer">https://github.com/jafioti/luminal</a></p><p>Luminal æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ åº“ï¼Œå®ƒä½¿ç”¨å¯ç»„åˆç¼–è¯‘å™¨æ¥å®ç°é«˜æ€§èƒ½ã€‚</p><h3 id="åŠŸèƒ½ç‰¹æ€§" tabindex="-1">åŠŸèƒ½ç‰¹æ€§ï¼š <a class="header-anchor" href="#åŠŸèƒ½ç‰¹æ€§" aria-label="Permalink to &quot;åŠŸèƒ½ç‰¹æ€§ï¼š&quot;">â€‹</a></h3><h4 id="é€Ÿåº¦" tabindex="-1">é€Ÿåº¦ <a class="header-anchor" href="#é€Ÿåº¦" aria-label="Permalink to &quot;é€Ÿåº¦&quot;">â€‹</a></h4><p>Luminal å¯ä»¥åœ¨ m ç³»åˆ— macbook ä¸Šä»¥æ¯ç§’ 15-25 ä¸ª token çš„é€Ÿåº¦è¿è¡Œ Q8 Llama 38bã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æˆä¸ºä»»ä½•è®¾å¤‡ä¸Šä»»ä½•æ¨¡å‹æœ€å¿«çš„ ML æ¡†æ¶ã€‚</p><h4 id="ç®€å•" tabindex="-1">ç®€å• <a class="header-anchor" href="#ç®€å•" aria-label="Permalink to &quot;ç®€å•&quot;">â€‹</a></h4><p>luminal çš„æ ¸å¿ƒå§‹ç»ˆæ˜¯æœ€å°çš„ã€‚åº”è¯¥æœ‰å¯èƒ½åœ¨ä¸€ä¸ªä¸‹åˆäº†è§£æ•´ä¸ªæ ¸å¿ƒåº“ã€‚</p><h4 id="risc-style-æ¶æ„" tabindex="-1">RISC-style æ¶æ„ <a class="header-anchor" href="#risc-style-æ¶æ„" aria-label="Permalink to &quot;RISC-style æ¶æ„&quot;">â€‹</a></h4><p>luminal ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥å½’ç»“ä¸º 11 ä¸ªåŸºæœ¬æ“ä½œï¼š</p><ul><li>Unary - Log2, Exp2, Sin, Sqrt, Recip</li><li>Binary - Add, Mul, Mod, LessThan</li><li>Other - SumReduce, MaxReduce, Contiguous</li></ul><p>è¿™äº›æ“ä½œè¶³ä»¥æ”¯æŒ transformersï¼Œå·ç§¯ç¥ç»ç½‘ç»œç­‰ã€‚</p><h4 id="åŸç”Ÿ" tabindex="-1">åŸç”Ÿ <a class="header-anchor" href="#åŸç”Ÿ" aria-label="Permalink to &quot;åŸç”Ÿ&quot;">â€‹</a></h4><p>å½“å‰çš„æœºå™¨å­¦ä¹ ç”Ÿæ€ç³»ç»Ÿè¿‡äºåˆ†æ•£ï¼Œè§£å†³æ–¹æ¡ˆä¸æ˜¯å¦ä¸€ä¸ªæŠ½è±¡å±‚ã€‚Luminal æ˜¯ç”¨ rust ç¼–å†™çš„ï¼Œå¹¶ç›´æ¥ä¸ CUDA / Metal api äº¤äº’ã€‚æ²¡æœ‰é—´æ¥æˆ–æŠ½è±¡ã€docker å®¹å™¨æˆ–è™šæ‹Ÿç¯å¢ƒã€‚åªæ˜¯ä¸€ä¸ªé™æ€è¿æ¥çš„ rust crateã€‚</p><h3 id="luminalç®€ä»‹" tabindex="-1">Luminalç®€ä»‹ <a class="header-anchor" href="#luminalç®€ä»‹" aria-label="Permalink to &quot;Luminalç®€ä»‹&quot;">â€‹</a></h3><p>Luminalæ˜¯ä¸€ä¸ªä»¥Rustè¯­è¨€ç¼–å†™çš„æ·±åº¦å­¦ä¹ åº“ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ‰§è¡Œé™æ€è®¡ç®—å’Œè¿ç®—ç¬¦èåˆï¼Œä»¥å®ç°é«˜æ€§èƒ½ã€‚ä¸åŒäºå…¶ä»–å¤§å¤šæ•°ä»¥åŠ¨æ€æ‰§è¡Œï¼ˆeager executionï¼‰ä¸ºä¸»çš„æ·±åº¦å­¦ä¹ åº“ï¼ŒLuminalé‡‡ç”¨çš„æ˜¯é™æ€è®¡ç®—å›¾ï¼ˆcomputation graphï¼‰ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½ä¼šè®°å½•åˆ°ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ä¸­ï¼Œåœ¨ä¼˜åŒ–å’Œæ‰§è¡Œè¿™ä¸ªå›¾ä¹‹å‰ï¼Œå¹¶ä¸ä¼šè¿›è¡Œä»»ä½•å®é™…çš„è®¡ç®—ã€‚</p><h3 id="luminalçš„å·¥ä½œæ–¹å¼" tabindex="-1">Luminalçš„å·¥ä½œæ–¹å¼ <a class="header-anchor" href="#luminalçš„å·¥ä½œæ–¹å¼" aria-label="Permalink to &quot;Luminalçš„å·¥ä½œæ–¹å¼&quot;">â€‹</a></h3><p>åœ¨Luminalä¸­ï¼Œå½“ä½ ç¼–å†™ä¸€ä¸ªè¡¨è¾¾å¼å¦‚ <code>x + y</code> æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³è¿›è¡Œè®¡ç®—ã€‚è¿™ä¸ªæ“ä½œä»…ä»…æ˜¯è®°å½•ä¸‹æ¥ï¼Œç­‰å¾…åç»­çš„æ‰§è¡Œã€‚æ­£å› ä¸ºæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯é™æ€å®šä¹‰çš„ï¼Œè¿™è®©æˆ‘ä»¬åœ¨æ„å»ºæ•´ä¸ªç¥ç»ç½‘ç»œæ—¶å¯ä»¥æœ‰å…¨å±€çš„ä¼˜åŒ–è§†è§’ï¼Œå…è®¸æˆ‘ä»¬è¿›è¡Œæ›´åŠ æ¿€è¿›çš„ä¼˜åŒ–ï¼Œè€Œä¸éœ€è¦ä»»ä½•åŒæ­¥ç‚¹ã€‚</p><h3 id="å¼€å§‹ä½¿ç”¨luminal" tabindex="-1">å¼€å§‹ä½¿ç”¨Luminal <a class="header-anchor" href="#å¼€å§‹ä½¿ç”¨luminal" aria-label="Permalink to &quot;å¼€å§‹ä½¿ç”¨Luminal&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…Rustè¯­è¨€ç¯å¢ƒï¼Œç„¶åé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Luminalåº“ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --example</span><span style="color:#98C379;"> simple</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æˆ–è€…å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å¼€å§‹ç”Ÿæˆæ–‡æœ¬ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">bash</span><span style="color:#98C379;"> examples/llama/setup/setup.sh</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --release</span><span style="color:#D19A66;"> --example</span><span style="color:#98C379;"> llama</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ä½¿ç”¨luminalæ„å»ºç¥ç»ç½‘ç»œ" tabindex="-1">ä½¿ç”¨Luminalæ„å»ºç¥ç»ç½‘ç»œ <a class="header-anchor" href="#ä½¿ç”¨luminalæ„å»ºç¥ç»ç½‘ç»œ" aria-label="Permalink to &quot;ä½¿ç”¨Luminalæ„å»ºç¥ç»ç½‘ç»œ&quot;">â€‹</a></h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªLuminalç¨‹åºçš„ç¤ºä¾‹ï¼Œå®ƒå±•ç¤ºäº†å¦‚ä½•è®¾ç½®è®¡ç®—å›¾å’Œå¼ é‡ï¼Œä»¥åŠå¦‚ä½•æ‰§è¡ŒåŸºæœ¬çš„çŸ©é˜µä¹˜æ³•æ“ä½œã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> luminal</span><span style="color:#ABB2BF;">::</span><span style="color:#E5C07B;">prelude</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¾ç½®å›¾å’Œå¼ é‡</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> cx</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Graph</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">new_tensor</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">R2</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">1</span><span style="color:#ABB2BF;">&gt;&gt;(</span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">new_tensor</span><span style="color:#ABB2BF;">::&lt;</span><span style="color:#E5C07B;">R2</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">4</span><span style="color:#ABB2BF;">&gt;&gt;(</span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ‰§è¡Œæ“ä½œ...</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">matmul</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®¾ç½®è¾“å…¥å¹¶æ ‡è®°è¾“å‡º</span></span>
<span class="line"><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">vec!</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3.0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">vec!</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3.0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4.0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mark</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¼˜åŒ–å¹¶è¿è¡Œå›¾</span></span>
<span class="line"><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">optimize</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">GenericOptimizer</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">default</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">cx</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–ç»“æœ</span></span>
<span class="line"><span style="color:#61AFEF;">println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Result: {:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">retrieve</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">().data);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è¿™ä¸ªä¾‹å­éå¸¸ç®€å•ï¼Œä½†å´èƒ½å¤Ÿè®©æˆ‘ä»¬çœ‹åˆ°Luminalçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼šé¦–å…ˆæ˜¯åˆ›å»ºè®¡ç®—å›¾å’Œç›¸å…³çš„å¼ é‡ï¼Œç„¶åæ‰§è¡Œè®¡ç®—ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–å’Œæ‰§è¡Œè®¡ç®—å›¾æ¥å¾—åˆ°ç»“æœã€‚</p><h3 id="luminalçš„æœªæ¥" tabindex="-1">Luminalçš„æœªæ¥ <a class="header-anchor" href="#luminalçš„æœªæ¥" aria-label="Permalink to &quot;Luminalçš„æœªæ¥&quot;">â€‹</a></h3><p>å°½ç®¡ç›®å‰Luminalè¿˜å¤„åœ¨éå¸¸åˆçº§çš„é˜¶æ®µï¼Œå®ƒçš„è®¾è®¡ç†å¿µå’Œé©æ–°æ€§çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•å·²ç»æ˜¾ç¤ºäº†å…¶å·¨å¤§çš„æ½œåŠ›ã€‚å¼€å‘å›¢é˜Ÿç›®å‰æ­£åœ¨è‡´åŠ›äºå®ç°åŒ…æ‹¬å…¬å…±CUDAæ“ä½œå’Œè‡ªåŠ¨å›¾å½¢å¾®åˆ†åœ¨å†…çš„å¤šé¡¹ä¼˜åŒ–å’ŒåŠŸèƒ½æ‰©å±•ã€‚</p><h1 id="aiè°ƒç”¨åº“" tabindex="-1">AIè°ƒç”¨åº“ <a class="header-anchor" href="#aiè°ƒç”¨åº“" aria-label="Permalink to &quot;AIè°ƒç”¨åº“&quot;">â€‹</a></h1><h2 id="llm-utils-rust-ä¸­è°ƒç”¨å¤§æ¨¡å‹" tabindex="-1">llm_utils - Rust ä¸­è°ƒç”¨å¤§æ¨¡å‹ <a class="header-anchor" href="#llm-utils-rust-ä¸­è°ƒç”¨å¤§æ¨¡å‹" aria-label="Permalink to &quot;llm_utils - Rust ä¸­è°ƒç”¨å¤§æ¨¡å‹&quot;">â€‹</a></h2><p>å¯é›†æˆè°ƒç”¨Llama.cpp, Openai, Anthropic, Mistral-rsï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½HuggingFaceä¸Šçš„GGUFé‡åŒ–æ¨¡å‹å¹¶è¿›è¡Œæ¨ç†ã€‚</p><p>GitHubï¼š<a href="https://github.com/shelbyJenkins/llm_utils" target="_blank" rel="noreferrer">https://github.com/shelbyJenkins/llm_utils</a></p><h2 id="fireside-chat" tabindex="-1">Fireside Chat <a class="header-anchor" href="#fireside-chat" aria-label="Permalink to &quot;Fireside Chat&quot;">â€‹</a></h2><p>githubé“¾æ¥ï¼š<a href="https://github.com/danielclough/fireside-chat" target="_blank" rel="noreferrer">https://github.com/danielclough/fireside-chat</a></p><p>ä¸€ä¸ªç”¨çº¯Rustå®ç°çš„LLMæ¥å£ï¼Œåœ¨Axum Websocketsä¸Šä½¿ç”¨HuggingFace/Candleï¼Œä½¿ç”¨SQLiteæ•°æ®åº“å’Œä¸€ä¸ªç”¨Tauriå°è£…çš„Leptos (Wasm)å‰ç«¯ï¼</p><p>è¿™ä¸ªé¡¹ç›®æ˜¯ä¸ºå•ç”¨æˆ·å’Œå¤šç”¨æˆ·èŠå¤©è€Œè®¾è®¡çš„ï¼Œä½¿ç”¨è®¸å¤šå¤§å‹è¯­è¨€æ¨¡å‹(LLMs)ã€‚å…·æœ‰æœ¬åœ°æˆ–è¿œç¨‹æ¨ç†åç«¯ï¼Œä½¿ç”¨æœ¬åœ°SQLiteæ•°æ®åº“ã€‚</p><h1 id="ä¸šåŠ¡å¼€å‘åº“" tabindex="-1">ä¸šåŠ¡å¼€å‘åº“ <a class="header-anchor" href="#ä¸šåŠ¡å¼€å‘åº“" aria-label="Permalink to &quot;ä¸šåŠ¡å¼€å‘åº“&quot;">â€‹</a></h1><h2 id="miette-å¼ºå¤§ä¸”çµæ´»çš„è¯Šæ–­åº“" tabindex="-1">mietteï¼šå¼ºå¤§ä¸”çµæ´»çš„è¯Šæ–­åº“ <a class="header-anchor" href="#miette-å¼ºå¤§ä¸”çµæ´»çš„è¯Šæ–­åº“" aria-label="Permalink to &quot;mietteï¼šå¼ºå¤§ä¸”çµæ´»çš„è¯Šæ–­åº“&quot;">â€‹</a></h2><p>mietteæ˜¯ä¸€ä¸ªåŸºäºRustçš„å¼ºå¤§ä¸”çµæ´»çš„è¯Šæ–­åº“ï¼Œå®ƒè®©ä½ çš„é”™è¯¯æŠ¥å‘Šæ—¢ç¾è§‚åˆå®ç”¨ã€‚é€šè¿‡å®ƒçš„ç‰¹æ€§ï¼Œä½ å¯ä»¥è½»æ¾åœ°åˆ›å»ºç»“æ„åŒ–ã€å¯Œå«ä¸Šä¸‹æ–‡ä¿¡æ¯çš„é”™è¯¯ç±»å‹ï¼Œå¹¶ä»¥ä¸€ç§å‹å¥½çš„æ–¹å¼å‘ˆç°ç»™å¼€å‘è€…ã€‚</p><p>mietteçš„æ ¸å¿ƒæ˜¯Diagnosticï¼Œä¸std::error::Errorå…¼å®¹ï¼Œä¸thiserrorå…¼å®¹ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/zkat/miette" target="_blank" rel="noreferrer">https://github.com/zkat/miette</a></p><p>ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>REPLäº¤äº’æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰“å°å‡ºå‹å¥½çš„é”™è¯¯æç¤º</li><li>SQLè§£æé˜¶æ®µï¼Œå‹å¥½åœ°æ ‡è®°å‡ºSQLä¸­æ½œåœ¨çš„é”™è¯¯</li><li>ç¼–è¯‘è¯­è¨€æ—¶ç»™å‡ºé”™è¯¯è¯Šæ–­ä¿¡æ¯</li></ul><p>ä¸‹é¢æ˜¯ä½¿ç”¨mietteè¯Šæ–­çš„è¾“å‡ºæ•ˆæœï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135546106.1YK7898A.png" alt="image-20240605135546106"></p><h2 id="tabled" tabindex="-1">tabled <a class="header-anchor" href="#tabled" aria-label="Permalink to &quot;tabled&quot;">â€‹</a></h2><p>tabledæ˜¯ä¸€ä¸ªä»¥è¡¨æ ¼æ–¹å¼æ‰“å°structå’Œenumçš„åº“ï¼Œè®©æ•°æ®å±•ç¤ºå˜å¾—ç®€å•è€Œç¾è§‚ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>åªéœ€å°‘é‡ä»£ç å³å¯å°†structæ•°æ®ç»“æ„è½¬æ¢ä¸ºæ¼‚äº®çš„è¡¨æ ¼</li><li>é™¤äº†æ–‡æœ¬æ ¼å¼ï¼Œè¿˜æ”¯æŒJSONã€CSVã€HTMLç­‰ï¼Œä¾¿äºå’Œå…¶å®ƒç³»ç»Ÿé›†æˆ</li><li>èƒ½è¿›è¡Œæ·±åº¦å®šåˆ¶ï¼ŒåŒ…æ‹¬è¾¹æ¡†æ ·å¼ã€å¡«å……è‰²ã€å¯¹é½æ–¹å¼ç­‰</li></ul><p>åº”ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>æ—¥å¿—è®°å½•</li><li>æ•°æ®åˆ†æ</li><li>CLIäº¤äº’å·¥å…·</li></ul><p>é¡¹ç›®åœ°å€ï¼š<a href="https://gitcode.com/zhiburt/tabled" target="_blank" rel="noreferrer">https://gitcode.com/zhiburt/tabled</a></p><p>ä¸‹é¢æ˜¯ä½¿ç”¨tabledçš„æ•ˆæœï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135613486.Bp1IxXfm.png" alt="image-20240605135613486"></p><p><strong>rustyline</strong></p><p>rustylineæ˜¯ä¸€ä¸ªä½¿ç”¨rustç¼–å†™çš„å‘½ä»¤è¡Œå·¥å…·åº“ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºäº¤äº’å¼CLIåº”ç”¨ç¨‹åºã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>é€šè¿‡æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œrustylineå¯ä»¥æ ¹æ®ç”¨æˆ·è¾“å…¥æä¾›å®æ—¶çš„å»ºè®®æˆ–è¡¥å…¨æç¤ºã€‚</li><li>ä¿å­˜ç”¨æˆ·çš„è¾“å…¥å†å²ï¼Œå¹¶æ”¯æŒæµè§ˆå†å²è®°å½•</li><li>é«˜åº¦å¯å®šåˆ¶ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰è¾“å…¥è¡Œä¸º</li><li>æ˜“äºé›†æˆï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„åº“ï¼Œå¯ä»¥æ·»åŠ åˆ°ä»»ä½•çš„Rusté¡¹ç›®ä¸­</li></ul><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/kkawakam/rustyline" target="_blank" rel="noreferrer">https://github.com/kkawakam/rustyline</a></p><p>ä¸‹é¢æ˜¯ä½¿ç”¨rustylineåˆ›å»ºçš„ç®€å•çš„äº¤äº’å·¥å…·çš„æ•ˆæœï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135631827.BCdnVcRG.png" alt="image-20240605135631827"></p><h2 id="serde" tabindex="-1">serde <a class="header-anchor" href="#serde" aria-label="Permalink to &quot;serde&quot;">â€‹</a></h2><p>serdeæ˜¯rustå®ç°çš„ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–åº“ã€‚rustæ•°æ®ç»“æ„é€šè¿‡å®ç°serdeçš„Serializeå’ŒDeserializeæ¥å£æ¥å®ç°åºåˆ—åŒ–åŠŸèƒ½ã€‚æ”¯æŒçš„æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š</p><ul><li>json</li><li>bincode</li><li>yaml</li><li>toml</li><li>pickle</li><li>bson</li><li>avro</li><li>url</li><li>è¿˜æœ‰å¥½å¤šå…¶å®ƒçš„æ ¼å¼</li></ul><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/serde-rs/serde" target="_blank" rel="noreferrer">https://github.com/serde-rs/serde</a></p><p>ä¸‹é¢ä½¿ç”¨serdeå°†ç»“æ„ä½“åºåˆ—åŒ–ä¸ºjsonï¼Œå¹¶å°†jsonååºåˆ—åŒ–ä¸ºç»“æ„ä½“ï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135659498.yYx3cnck.png" alt="image-20240605135659498"></p><h2 id="bigdecimal" tabindex="-1">bigdecimal <a class="header-anchor" href="#bigdecimal" aria-label="Permalink to &quot;bigdecimal&quot;">â€‹</a></h2><p>rustå®ç°çš„ç”¨äºè®¡ç®—ä»»æ„åè¿›åˆ¶ç²¾åº¦çš„åº“ï¼Œé»˜è®¤æ”¯æŒ100ä½çš„ç²¾åº¦ï¼Œå¯ä»¥é€šè¿‡RUST_BIGDECIMAL_DEFAULT_PRECISIONä¿®æ”¹ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/akubera/bigdecimal-rs" target="_blank" rel="noreferrer">https://github.com/akubera/bigdecimal-rs</a></p><p>ä¸‹é¢æ˜¯ä½¿ç”¨bigdecimalè®¡ç®—å¼€æ ¹å·çš„ä¾‹å­ï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135719424.BcmS4VFG.png" alt="image-20240605135719424"></p><h2 id="derive-more" tabindex="-1">derive_more <a class="header-anchor" href="#derive-more" aria-label="Permalink to &quot;derive_more&quot;">â€‹</a></h2><p>derive_moreå¯ä»¥è½»æ¾æ´¾ç”Ÿæ›´å¤šçš„traitï¼Œè€Œä¸ç”¨å»å†™ä¸€å¤§å †é‡å¤çš„ä»£ç ï¼Œå®ƒæ˜¯å¯¹æ ‡å‡†åº“deriveçš„æ‰©å±•ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/JelteF/derive_more" target="_blank" rel="noreferrer">https://github.com/JelteF/derive_more</a></p><p>ä¸‹é¢æ˜¯ä½¿ç”¨æ¡ˆä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> derive_more</span><span style="color:#ABB2BF;">::{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Add</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AddAssign</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Constructor</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Deref</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">DerefMut</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Display</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">From</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">FromStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Index</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IndexMut</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Into</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    IsVariant</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Mul</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MulAssign</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Not</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TryInto</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Add</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">AddAssign</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Constructor</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Display</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">From</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">FromStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Into</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Mul</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MulAssign</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Not</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> MyInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Deref</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">DerefMut</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> MyBoxedInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Box</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">&gt;);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Index</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IndexMut</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">pub</span><span style="color:#C678DD;"> struct</span><span style="color:#E5C07B;"> MyVec</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Vec</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">&gt;);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[derive(</span><span style="color:#E5C07B;">Clone</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Copy</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TryInto</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IsVariant</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">enum</span><span style="color:#E5C07B;"> MixedInts</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    SmallInt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    NamedBigInt</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i64</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> a</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> MyInt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> b</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> MyInt</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;"> + </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{a} + {b} = {c}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>è¾“å‡ºï¼š</p><p><img src="/ProgramLearnNotes/assets/image-20240605135807007.DXN_bGjW.png" alt="image-20240605135807007"></p><h2 id="thiserror" tabindex="-1">thiserror <a class="header-anchor" href="#thiserror" aria-label="Permalink to &quot;thiserror&quot;">â€‹</a></h2><p>åœ¨rustä¸­ï¼Œç»å¸¸ä½¿ç”¨Resultå’ŒOptionæ¥å¤„ç†é”™è¯¯ï¼Œæœ‰äº›åœºæ™¯ä¸‹å¯èƒ½éœ€è¦è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œè¿™ç§åœºæ™¯å°±æ˜¯thiserroråº“å‘æŒ¥ä½œç”¨çš„åœ°æ–¹äº†ï¼Œä½¿ç”¨å®ƒå¯ä»¥æå¤§åœ°ç®€åŒ–ä»£ç ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/dtolnay/thiserror" target="_blank" rel="noreferrer">https://github.com/dtolnay/thiserror</a></p><p>ä½¿ç”¨ç¤ºä¾‹:</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// åŠ¨æ€é”™è¯¯ç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> self_error_type2</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„å®šä¹‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[derive(</span><span style="color:#E5C07B;">ThisError</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Debug</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#C678DD;"> enum</span><span style="color:#E5C07B;"> MyError</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // FailedWithCode çš„é”™è¯¯æè¿°ï¼Œå…¶ä¸­ {0} ä¼šè¢«åŠ¨æ€åœ°æ›¿æ¢ä¸ºå…·ä½“çš„ä»£ç å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        #[error(</span><span style="color:#98C379;">&quot;failed with code: {0}&quot;</span><span style="color:#ABB2BF;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">        FailedWithCode</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> process_data</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error_code</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">i32</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">MyError</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ä½¿ç”¨åŠ¨æ€çš„ error_code åˆ›å»º FailedWithCode é”™è¯¯</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Err</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MyError</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">FailedWithCode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">error_code</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> process_data</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;result:{:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Result</span><span style="color:#ABB2BF;">&lt;(), </span><span style="color:#E5C07B;">MyError</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> process_data</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">500</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;result:{:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> process_data</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">403</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;result:{:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> process_data</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">503</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;result:{:?}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="untwine-å£°æ˜å¼è§£æåº“" tabindex="-1">Untwineï¼šå£°æ˜å¼è§£æåº“ <a class="header-anchor" href="#untwine-å£°æ˜å¼è§£æåº“" aria-label="Permalink to &quot;Untwineï¼šå£°æ˜å¼è§£æåº“&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/boxbeam/untwine" target="_blank" rel="noreferrer">https://github.com/boxbeam/untwine</a></p><p>Untwineæ˜¯ä¸€ä¸ªå£°æ˜æ€§è§£æåº“ï¼Œå®ƒå…è®¸ä¸€ç§ç±»ä¼¼äºä½¿ç”¨è‡ªå®šä¹‰å®è¯­æ³•è¿›è¡Œç›´æ¥æ¨¡å¼åŒ¹é…çš„è§£æé£æ ¼ã€‚è¿™å…è®¸åˆ›å»ºå…·æœ‰è‰¯å¥½æ€§èƒ½ç‰¹å¾å’Œé«˜è´¨é‡é”™è¯¯æ¶ˆæ¯çš„æå…¶ç´§å‡‘çš„è§£æå™¨ã€‚è¿™äº›è§£æå™¨å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œæœ‰å‡ ä¸ªç²¾å¿ƒæŒ‘é€‰çš„ä¾‹å­ï¼š</p><ul><li>ä¸€ä¸ªå‡ ä¹å®Œæ•´çš„JSONè§£æå™¨ï¼ŒåŒ…å«12è¡Œè§£æé€»è¾‘</li><li>æ”¯æŒé™¤ç‰¹æ®Šè½¬ä¹‰åºåˆ—ä¹‹å¤–çš„æ‰€æœ‰åŸºæœ¬JSONåŠŸèƒ½ï¼ˆé™¤â€œï¼‰</li><li>ä¸€ä¸ªåœ¨6è¡Œè§£æé€»è¾‘ä¸­å…·æœ‰å››è¿ç®—è¡¨è¾¾å¼è§£æå™¨çš„pmdas</li><li>ä¸€ä¸ªè¾…åŠ©å‡½æ•°å¯¹ä¸¤ä¸ªæ•°å­—è¿›è¡Œè¿ç®—</li></ul><p>ä½¿ç”¨untwineåˆ¶ä½œçš„è§£æå™¨ä¹Ÿæœ‰é«˜è´¨é‡çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¯ä»¥ç›´è§‚åœ°æ˜¾ç¤ºé”™è¯¯å’Œç›¸å…³è¯­æ³•ã€‚</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> operate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">op</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">char</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    match</span><span style="color:#E06C75;"> op</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#98C379;">        &#39;+&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;"> + </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;-&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;"> - </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;/&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;"> / </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &#39;*&#39;</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;"> * </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        _</span><span style="color:#ABB2BF;"> =&gt; </span><span style="color:#61AFEF;">unreachable!</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">parser!</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    sep</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> #{</span><span style="color:#E5C07B;">char</span><span style="color:#ABB2BF;">::</span><span style="color:#E06C75;">is_ascii_whitespace</span><span style="color:#ABB2BF;">}*;</span></span>
<span class="line"><span style="color:#E06C75;">    num</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">num</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#98C379;">&quot;-&quot;</span><span style="color:#ABB2BF;">? </span><span style="color:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;">-</span><span style="color:#98C379;">&#39;9&#39;</span><span style="color:#ABB2BF;">+ (</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#98C379;"> &#39;0&#39;</span><span style="color:#ABB2BF;">-</span><span style="color:#98C379;">&#39;9&#39;</span><span style="color:#ABB2BF;">+)?&gt; -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">num</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">unwrap</span><span style="color:#ABB2BF;">() }</span></span>
<span class="line"><span style="color:#E06C75;">    term</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">num</span><span style="color:#56B6C2;"> |</span><span style="color:#98C379;"> &quot;(&quot;</span><span style="color:#E06C75;"> sep</span><span style="color:#E06C75;"> expr</span><span style="color:#E06C75;"> sep</span><span style="color:#98C379;"> &quot;)&quot;</span><span style="color:#ABB2BF;">) -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    add</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">first</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">mul</span><span style="color:#E06C75;"> sep</span><span style="color:#E06C75;"> ops</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;+-&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">sep</span><span style="color:#E06C75;"> mul</span><span style="color:#ABB2BF;">)* -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ops</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_iter</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">fold</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">first</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">op</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">)</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> operate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">op</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">)) }</span></span>
<span class="line"><span style="color:#E06C75;">    mul</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">first</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">term</span><span style="color:#E06C75;"> sep</span><span style="color:#E06C75;"> ops</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;*/&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">sep</span><span style="color:#E06C75;"> term</span><span style="color:#ABB2BF;">)* -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ops</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">into_iter</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">fold</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">first</span><span style="color:#ABB2BF;">, </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">op</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">)</span><span style="color:#56B6C2;">|</span><span style="color:#61AFEF;"> operate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">left</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">op</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">)) }</span></span>
<span class="line"><span style="color:#C678DD;">    pub</span><span style="color:#E06C75;"> expr</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> add</span><span style="color:#ABB2BF;"> -&gt; </span><span style="color:#E5C07B;">f64</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h1 id="åŒºå—é“¾" tabindex="-1">åŒºå—é“¾ <a class="header-anchor" href="#åŒºå—é“¾" aria-label="Permalink to &quot;åŒºå—é“¾&quot;">â€‹</a></h1><p><a href="https://github.com/rust-in-blockchain/awesome-blockchain-rust" target="_blank" rel="noreferrer">rust-in-blockchain/awesome-blockchain-rustï¼šåœ¨ Rust ä¸­æ”¶é›†æœ‰å…³åŒºå—é“¾/å¯†ç å­¦çš„åº“å’ŒåŒ… (github.com)</a></p><h1 id="åµŒå…¥å¼" tabindex="-1">åµŒå…¥å¼ <a class="header-anchor" href="#åµŒå…¥å¼" aria-label="Permalink to &quot;åµŒå…¥å¼&quot;">â€‹</a></h1><h2 id="embassy-åµŒå…¥å¼å¼‚æ­¥å¼€å‘æ¡†æ¶" tabindex="-1">embassyï¼šåµŒå…¥å¼å¼‚æ­¥å¼€å‘æ¡†æ¶ <a class="header-anchor" href="#embassy-åµŒå…¥å¼å¼‚æ­¥å¼€å‘æ¡†æ¶" aria-label="Permalink to &quot;embassyï¼šåµŒå…¥å¼å¼‚æ­¥å¼€å‘æ¡†æ¶&quot;">â€‹</a></h2><h3 id="embassy-ä»€ä¹ˆ" tabindex="-1">Embassy ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#embassy-ä»€ä¹ˆ" aria-label="Permalink to &quot;Embassy ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h3><p>Embassy å®ƒæ˜¯ä¸€ä¸ªç”¨ Rust è¯­è¨€å®ç°çš„ç°ä»£åµŒå…¥å¼å¼‚æ­¥å¼€å‘æ¡†æ¶ï¼Œå®ƒè‡´åŠ›äºè®© async/await æ¨¡å¼æˆä¸ºåµŒå…¥å¼ç¼–ç¨‹çš„é¦–é€‰ã€‚è¯¥æ¡†æ¶å¯ä»¥çœ‹ä½œæ˜¯åµŒå…¥å¼ç‰ˆæœ¬çš„ Tokioï¼Œåè€…æ˜¯ Rust åœ¨æœåŠ¡å™¨ç«¯å¼‚æ­¥ç¼–ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p><p>Embassy ä¹Ÿæ˜¯æœªæ¥åµŒå…¥å¼åº”ç”¨ç¨‹åºçš„ä¸‹ä¸€ä»£æ¡†æ¶ï¼Œé‡‡é›†äº† Rust ç¼–å†™ã€å…¶å¼‚æ­¥åŠŸèƒ½å’Œ Embassy åº“ï¼Œä»è€Œæ›´å¿«åœ°ç¼–å†™å®‰å…¨ã€æ­£ç¡®ä¸”èŠ‚èƒ½çš„åµŒå…¥å¼ä»£ç ã€‚</p><h3 id="rust-async-â¤ï¸-åµŒå…¥å¼" tabindex="-1">Rust + async â¤ï¸ åµŒå…¥å¼ <a class="header-anchor" href="#rust-async-â¤ï¸-åµŒå…¥å¼" aria-label="Permalink to &quot;Rust + async â¤ï¸ åµŒå…¥å¼&quot;">â€‹</a></h3><p>å¤§å®¶éƒ½çŸ¥é“ï¼ŒRust æ˜¯ä¸€ç§é€Ÿåº¦æå¿«ã€å†…å­˜æ•ˆç‡æé«˜çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¸éœ€è¦è¿è¡Œæ—¶ã€åƒåœ¾æ”¶é›†å™¨æˆ–æ“ä½œç³»ç»Ÿçš„ä»‹å…¥ã€‚Rust çš„å†…å­˜å®‰å…¨ä¿è¯å’Œå¼ºå¤§çš„ç±»å‹ç³»ç»Ÿèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶æœŸæ•æ‰å„ç§æ½œåœ¨é”™è¯¯ï¼Œä»è€Œå‡å°‘è¿è¡Œæ—¶çš„é—®é¢˜ã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒRust çš„ async/await ç‰¹æ€§ä½¿å¾—å¤šä»»åŠ¡å¤„ç†å˜å¾—å¼‚å¸¸ç®€å•å’Œé«˜æ•ˆï¼Œå¼‚æ­¥ä»»åŠ¡åœ¨ç¼–è¯‘æ—¶è¢«è½¬æ¢æˆçŠ¶æ€æœºï¼Œé¿å…äº†åŠ¨æ€å†…å­˜åˆ†é…çš„éœ€æ±‚ï¼Œå¹¶ä¸”æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨å•ä¸ªå †æ ˆä¸Šè¿è¡Œï¼Œæ— éœ€æ‹…å¿ƒå †æ ˆå¤§å°è°ƒæ•´çš„é—®é¢˜ã€‚è¿™ç§è®¾è®¡æ¶ˆé™¤äº†ä¼ ç»Ÿå®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰æ‰€éœ€çš„å†…æ ¸ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä½¿å¾—ç³»ç»Ÿè¿è¡Œæ›´å¿«ã€å ç”¨ç©ºé—´æ›´å°ã€‚</p><h3 id="embassy-æ¡†æ¶ç‰¹ç‚¹" tabindex="-1">Embassy æ¡†æ¶ç‰¹ç‚¹ <a class="header-anchor" href="#embassy-æ¡†æ¶ç‰¹ç‚¹" aria-label="Permalink to &quot;Embassy æ¡†æ¶ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li><strong>ä¸“ç”¨ç¡¬ä»¶æŠ½è±¡å±‚ï¼ˆHALï¼‰</strong>ï¼šEmbassy æ‹¥æœ‰ä¸ºåµŒå…¥å¼è®¾å¤‡å®šåˆ¶çš„ç¡¬ä»¶æŠ½è±¡å±‚ï¼Œè¿™æœ‰åŠ©äºç®€åŒ–ç¡¬ä»¶äº¤äº’ï¼Œå¹¶ä¸ºå¼€å‘è€…æä¾›ä¸€è‡´çš„æ¥å£ã€‚</li><li><strong>ç»Ÿä¸€çš„ STM32 æ”¯æŒ</strong>ï¼šç»™æ‰€æœ‰å—æ”¯æŒçš„ STM32 è®¾å¤‡æä¾›ç»Ÿä¸€çš„ API å’Œå•ä¸€åº“ï¼Œä½¿å¾—ä¸ STM32 ç³»åˆ—å¾®æ§åˆ¶å™¨çš„æ¥å£å’Œæ“ä½œæ›´åŠ ç›´æ¥å’Œé«˜æ•ˆäº†ã€‚</li><li><strong>ç»Ÿä¸€ API</strong>ï¼šEmbassy æ—¨åœ¨ä¸ºæ‰€æœ‰æ”¯æŒçš„ STM32 è®¾å¤‡æä¾›ç»Ÿä¸€çš„åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ã€‚è¿™ç§æ–¹æ³•ç®€åŒ–äº†è·¨ä¸åŒ STM32 è®¾å¤‡çš„ä»£ç ç§»æ¤å’Œé€‚é…ï¼Œå› ä¸ºå¼€å‘è€…å¯ä»¥ä¾èµ–ä¸€è‡´çš„ç¼–ç¨‹æ¨¡å‹ã€‚</li><li><strong>ç‹¬ç«‹ä½¿ç”¨</strong>ï¼šé€šè¿‡ä½¿ç”¨ç‹¬ç«‹çš„ metapac crate ä½œä¸ºå•ç‹¬çš„åº“ä½¿ç”¨ï¼Œå¥½å¤„å°±æ˜¯ä¸ç”¨ Embassy çš„å¼‚æ­¥æ¡†æ¶æˆ– HALï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚åˆ©ç”¨ metapac è¿›è¡Œç¡¬ä»¶æŠ½è±¡ã€‚</li><li><strong>ä½åŠŸè€—å°±ç»ª</strong>ï¼šè®©ä½ è½»æ¾æ„å»ºå…·æœ‰å¤šå¹´ç”µæ± å¯¿å‘½çš„è®¾å¤‡ï¼Œå½“æ²¡æœ‰å·¥ä½œè¦åšæ—¶ï¼Œå¼‚æ­¥æ‰§è¡Œå™¨è‡ªåŠ¨å°†æ ¸å¿ƒç½®äºç¡çœ çŠ¶æ€ã€‚ä»»åŠ¡ç”±ä¸­æ–­å”¤é†’ï¼Œç­‰å¾…æ—¶æ²¡æœ‰å¿™ç¢Œå¾ªç¯è½®è¯¢ã€‚</li><li><strong>è“ç‰™</strong>ï¼šnrf-softdevice crate ä¸º nRF52 å¾®æ§åˆ¶å™¨æä¾›äº†è“ç‰™ä½åŠŸè€— 4.x å’Œ 5.x æ”¯æŒã€‚embassy-stm32-wpan crate ä¸º stm32wb å¾®æ§åˆ¶å™¨æä¾›äº†è“ç‰™ä½åŠŸè€— 5.x æ”¯æŒã€‚</li><li><strong>ç½‘ç»œ</strong>ï¼šembassy-net ç½‘ç»œæ ˆå®ç°äº†å¹¿æ³›çš„ç½‘ç»œåŠŸèƒ½ï¼ŒåŒ…æ‹¬å¦‚ä»¥å¤ªç½‘ã€IPã€TCPã€UDPã€ICMP å’Œ DHCPã€‚</li></ul><p>æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥åˆ°GIthubæˆ–å®˜ç½‘è¿›è¡Œå­¦ä¹ å’Œå®è·µï¼Œä½ ä¼šè·å–æ›´å¤šæå‡ã€‚</p><h3 id="å‚è€ƒèµ„æ–™-7" tabindex="-1">å‚è€ƒèµ„æ–™ï¼š <a class="header-anchor" href="#å‚è€ƒèµ„æ–™-7" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™ï¼š&quot;">â€‹</a></h3><ul><li>GIthubåœ°å€ï¼š<a href="https://github.com/embassy-rs/embassy" target="_blank" rel="noreferrer">https://github.com/embassy-rs/embassy</a></li><li>å®˜ç½‘åœ°å€ï¼š<a href="https://embassy.dev/" target="_blank" rel="noreferrer">https://embassy.dev/</a></li></ul><h1 id="æµ‹è¯•-1" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•-1" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h1><h2 id="nextest-ä¸‹ä¸€ä»£-rust-æµ‹è¯•åŠ é€Ÿç¥å™¨" tabindex="-1">Nextestï¼šä¸‹ä¸€ä»£ Rust æµ‹è¯•åŠ é€Ÿç¥å™¨ <a class="header-anchor" href="#nextest-ä¸‹ä¸€ä»£-rust-æµ‹è¯•åŠ é€Ÿç¥å™¨" aria-label="Permalink to &quot;Nextestï¼šä¸‹ä¸€ä»£ Rust æµ‹è¯•åŠ é€Ÿç¥å™¨&quot;">â€‹</a></h2><ul><li>Nextest å®˜ç½‘æ–‡æ¡£ï¼š<a href="https://nexte.st/" target="_blank" rel="noreferrer">https://nexte.st/</a></li><li>Nextest GitHub ä»“åº“ï¼š<a href="https://github.com/nextest-rs/nextest" target="_blank" rel="noreferrer">https://github.com/nextest-rs/nextest</a></li></ul><h3 id="å¼•è¨€-3" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€-3" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>å¦‚æœä½ æ˜¯ä¸€å Rust å¼€å‘è€…ï¼Œé‚£ä¹ˆä¸€å®šç»å¸¸åœ¨é¡¹ç›®ä¸­ç¼–å†™å’Œè¿è¡Œæµ‹è¯•ã€‚Rust è‡ªå¸¦çš„ <code>cargo test</code> å‘½ä»¤è™½ç„¶å¥½ç”¨ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­è¿è¡Œæ•ˆç‡ä¸å¤Ÿç†æƒ³ã€‚ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªè¶…çº§å¼ºå¤§çš„ Rust æµ‹è¯•è¿è¡Œå·¥å…·ï¼šNextestã€‚ç”¨ä¸Šå®ƒï¼Œè®©ä½ çš„ Rust é¡¹ç›®æµ‹è¯•é€Ÿåº¦å—–å—–çš„~</p><h3 id="åˆ›ä½œèƒŒæ™¯-3" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯-3" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>æœ€è¿‘ï¼Œæˆ‘åœ¨ GitHub ä¸Šå‘ç°äº†ä¸€ä¸ªä¼˜ç§€çš„å¼€æºæµ‹è¯•å·¥å…· cargo-nextestï¼Œå®ƒæ˜¯ Rust ç”Ÿæ€ä¸­ <code>cargo test</code> çš„å‡çº§ç‰ˆæœ¬ã€‚ç›¸æ¯”åŸç”Ÿçš„ <code>cargo test</code>ï¼ŒNextest æœ‰è®¸å¤šä¼˜åŠ¿ï¼š</p><ul><li>ç¾è§‚æ˜“è¯»çš„æµ‹è¯•ç»“æœè¾“å‡º</li><li>è¿è¡Œé€Ÿåº¦æ¯” <code>cargo test</code> å¿« 2-3 å€</li><li>æ”¯æŒæ£€æµ‹æ…¢æµ‹è¯•ã€æ³„æ¼æµ‹è¯•ï¼Œå¹¶èƒ½è‡ªåŠ¨ç»ˆæ­¢è¶…æ—¶çš„æµ‹è¯•ç”¨ä¾‹</li><li>å…è®¸ä½¿ç”¨çµæ´»çš„è¿‡æ»¤è¡¨è¾¾å¼æ¥ç­›é€‰æµ‹è¯•é›†</li><li>èƒ½é…ç½®å•ç‹¬æµ‹è¯•çš„é‡è¯•ã€æƒé‡ã€ä¸²è¡Œè¿è¡Œç­‰</li><li>ä¸“ä¸º CI æµç¨‹ä¼˜åŒ–ï¼Œæ”¯æŒç¼“å­˜æ„å»ºã€å¹¶è¡Œæµ‹è¯•ç­‰</li><li>è·¨å¹³å°ï¼ŒLinuxã€macOSã€Windows å…¨éƒ½æ”¯æŒ</li><li>â€¦â€¦</li></ul><p>çœ‹å®Œè¿™äº›ç‰¹æ€§ï¼Œæ˜¯ä¸æ˜¯å·²ç»è·ƒè·ƒæ¬²è¯•äº†å‘¢ï¼Ÿä¸‹é¢å°±ç»™å¤§å®¶åˆ†äº«å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ Nextest æ¥åŠ é€Ÿ Rust é¡¹ç›®çš„æµ‹è¯•ã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§-4" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-4" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><h4 id="ç¾è§‚æ˜“è¯»çš„æµ‹è¯•ç»“æœ" tabindex="-1">ç¾è§‚æ˜“è¯»çš„æµ‹è¯•ç»“æœ <a class="header-anchor" href="#ç¾è§‚æ˜“è¯»çš„æµ‹è¯•ç»“æœ" aria-label="Permalink to &quot;ç¾è§‚æ˜“è¯»çš„æµ‹è¯•ç»“æœ&quot;">â€‹</a></h4><p>Nextest æä¾›äº†ç®€æ´ç¾è§‚çš„æµ‹è¯•ç»“æœè¾“å‡ºï¼Œä½ å¯ä»¥ä¸€ç›®äº†ç„¶åœ°çœ‹åˆ°å“ªäº›æµ‹è¯•é€šè¿‡äº†ï¼Œå“ªäº›å¤±è´¥äº†ã€‚ä¾‹å¦‚ï¼š</p><p><img src="/ProgramLearnNotes/assets/640-1714650959113-58.CfxyVh86.webp" alt="å›¾ç‰‡">nextest-output</p><h4 id="æ£€æµ‹æ…¢æµ‹è¯•å’Œæ³„æ¼æµ‹è¯•" tabindex="-1">æ£€æµ‹æ…¢æµ‹è¯•å’Œæ³„æ¼æµ‹è¯• <a class="header-anchor" href="#æ£€æµ‹æ…¢æµ‹è¯•å’Œæ³„æ¼æµ‹è¯•" aria-label="Permalink to &quot;æ£€æµ‹æ…¢æµ‹è¯•å’Œæ³„æ¼æµ‹è¯•&quot;">â€‹</a></h4><p>ä½¿ç”¨ Nextestï¼Œä½ å¯ä»¥è½»æ¾æ‰¾å‡ºé¡¹ç›®ä¸­çš„æ…¢æµ‹è¯•ã€æ³„æ¼æµ‹è¯•ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸€æ—¦è¶…æ—¶å°±è‡ªåŠ¨ç»ˆæ­¢ï¼Œé¿å…æµªè´¹ CI èµ„æºã€‚åªéœ€ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --slow-timeout</span><span style="color:#D19A66;"> 60</span><span style="color:#D19A66;"> --leak-timeout</span><span style="color:#D19A66;"> 1024</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="çµæ´»ç­›é€‰æµ‹è¯•é›†" tabindex="-1">çµæ´»ç­›é€‰æµ‹è¯•é›† <a class="header-anchor" href="#çµæ´»ç­›é€‰æµ‹è¯•é›†" aria-label="Permalink to &quot;çµæ´»ç­›é€‰æµ‹è¯•é›†&quot;">â€‹</a></h4><p>Nextest æ”¯æŒä½¿ç”¨ç±»ä¼¼ SQL çš„è¿‡æ»¤è¡¨è¾¾å¼æ¥çµæ´»æŒ‡å®šè¦è¿è¡Œçš„æµ‹è¯•å­é›†ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># è¿è¡ŒæŒ‡å®šåç§°çš„æµ‹è¯•</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#98C379;"> test_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># è¿è¡ŒæŒ‡å®šæ¨¡å—çš„æµ‹è¯•</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#98C379;"> module::</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># è¿è¡Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --</span><span style="color:#D19A66;"> --failed</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æµ‹è¯•" tabindex="-1">è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æµ‹è¯• <a class="header-anchor" href="#è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æµ‹è¯•" aria-label="Permalink to &quot;è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æµ‹è¯•&quot;">â€‹</a></h4><p>ä½ è¿˜å¯ä»¥è®© Nextest è‡ªåŠ¨é‡è¯•å¤±è´¥çš„æµ‹è¯•ï¼Œå¯¹äºå¶å‘çš„ flaky æµ‹è¯•å¾ˆæœ‰å¸®åŠ©ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">## </span><span style="color:#E06C75;">nextest</span><span style="color:#ABB2BF;">.toml</span></span>
<span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">profile</span><span style="color:#ABB2BF;">.ci.retry]</span></span>
<span class="line"><span style="color:#E06C75;">all_targets</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">    { </span><span style="color:#E06C75;">filter</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;test_flaky&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">max_retries</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è®¾ç½®å¥½é‡è¯•é…ç½®åï¼ŒNextest ä¼šè‡ªåŠ¨é‡è¯• <code>test_flaky</code> ç›¸å…³çš„å¤±è´¥ç”¨ä¾‹ï¼Œç›´åˆ°é€šè¿‡æˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚</p><h4 id="ä¸“ä¸º-ci-æ‰“é€ " tabindex="-1">ä¸“ä¸º CI æ‰“é€  <a class="header-anchor" href="#ä¸“ä¸º-ci-æ‰“é€ " aria-label="Permalink to &quot;ä¸“ä¸º CI æ‰“é€ &quot;">â€‹</a></h4><p>Nextest åœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘äº† CI åœºæ™¯ï¼Œå®ƒæ”¯æŒï¼š</p><ul><li>å¿«é€Ÿå®‰è£…ï¼Œæä¾›å„ç§ç³»ç»Ÿçš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶åŒ…</li><li>åŸºäºé…ç½®æ–‡ä»¶çš„ CI é…ç½®ç®¡ç†</li><li>é€šè¿‡ç¼“å­˜å’Œå¤ç”¨å†å²æ„å»ºç»“æœæ¥åŠ é€Ÿæµ‹è¯•</li><li>å°†å¤§å‹æµ‹è¯•ä»»åŠ¡åˆ†ç‰‡åˆ°å¤šä¸ª CI ä»»åŠ¡å¹¶è¡Œè¿è¡Œ</li><li>é›†æˆ JUnit æ ¼å¼æµ‹è¯•æŠ¥å‘Šè¾“å‡º</li><li>â€¦â€¦</li></ul><p>åœ¨ CI æµæ°´çº¿ä¸­é›†æˆ Nextestï¼Œå‡ è¡Œé…ç½®å°±èƒ½è®© Rust é¡¹ç›®çš„æµ‹è¯•é€Ÿåº¦å¤§å¹…æå‡ã€‚</p><h3 id="å¿«é€Ÿä¸Šæ‰‹-4" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-4" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><p>ä½¿ç”¨ Nextest éå¸¸ç®€å•ï¼Œè·Ÿ <code>cargo test</code> ç±»ä¼¼ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># è¿è¡Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æµ‹è¯•</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># å¹¶å‘è¿è¡Œï¼Œé»˜è®¤çº¿ç¨‹æ•°ä¸º CPU æ ¸å¿ƒæ•°</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --release</span><span style="color:#D19A66;"> --</span><span style="color:#D19A66;"> --jobs</span><span style="color:#D19A66;"> 4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># è¿è¡ŒæŒ‡å®šçš„æµ‹è¯•å­é›†</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#98C379;"> test_foo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># é‡è¯•å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹</span></span>
<span class="line"><span style="color:#61AFEF;">cargo</span><span style="color:#98C379;"> nextest</span><span style="color:#98C379;"> run</span><span style="color:#D19A66;"> --retries</span><span style="color:#D19A66;"> 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å‡è®¾æœ‰ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[test]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> test_foo</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æµ‹è¯•ä»£ç  A</span></span>
<span class="line"><span style="color:#61AFEF;">    assert_eq!</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> + </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#[test]</span></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> test_bar</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æµ‹è¯•ä»£ç  B</span></span>
<span class="line"><span style="color:#61AFEF;">    assert_eq!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">len</span><span style="color:#ABB2BF;">(), </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿è¡Œ <code>cargo nextest run</code> åè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">running</span><span style="color:#D19A66;"> 2</span><span style="color:#98C379;"> tests</span></span>
<span class="line"><span style="color:#56B6C2;">test</span><span style="color:#98C379;"> test_bar</span><span style="color:#98C379;"> ...</span><span style="color:#98C379;"> ok</span></span>
<span class="line"><span style="color:#56B6C2;">test</span><span style="color:#98C379;"> test_foo</span><span style="color:#98C379;"> ...</span><span style="color:#98C379;"> ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2;">test</span><span style="color:#98C379;"> result:</span><span style="color:#98C379;"> ok.</span><span style="color:#D19A66;"> 2</span><span style="color:#98C379;"> passed</span><span style="color:#ABB2BF;">; </span><span style="color:#61AFEF;">0</span><span style="color:#98C379;"> failed</span><span style="color:#ABB2BF;">; </span><span style="color:#61AFEF;">0</span><span style="color:#98C379;"> ignored</span><span style="color:#ABB2BF;">; </span><span style="color:#61AFEF;">0</span><span style="color:#98C379;"> measured</span><span style="color:#ABB2BF;">; </span><span style="color:#61AFEF;">0</span><span style="color:#98C379;"> filtered</span><span style="color:#98C379;"> out</span><span style="color:#ABB2BF;">; </span><span style="color:#61AFEF;">finished</span><span style="color:#98C379;"> in</span><span style="color:#98C379;"> 0.02s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¯è§ Nextest ä¸ <code>cargo test</code> çš„ç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼Œåªéœ€å°† <code>cargo test</code> æ›¿æ¢ä¸º <code>cargo nextest run</code> å³å¯ã€‚ä½†åœ¨åº•å±‚ï¼ŒNextest é€šè¿‡å¹¶è¡Œæ‰§è¡Œã€æµ‹è¯•ç»“æœç¼“å­˜ç­‰ä¼˜åŒ–æªæ–½æ¥è¾¾åˆ°æ›´å¿«çš„é€Ÿåº¦ã€‚</p><h3 id="æ€»ç»“-9" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-9" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>æœ¬æ–‡å‘å¤§å®¶ä»‹ç»äº† Rust æµ‹è¯•å·¥å…·å±Šçš„åèµ·ä¹‹ç§€ â€”â€” Nextestã€‚å®ƒæä¾›äº†å¤šé¡¹å¢å¼ºåŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œè®© Rust é¡¹ç›®çš„æµ‹è¯•æ‰§è¡Œæ›´åŠ é«˜æ•ˆã€æ™ºèƒ½ã€‚å»ºè®®å¯¹æµ‹è¯•é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„ Rustacean æœ‹å‹ä¸€è¯•ã€‚</p><p>å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œèƒ½è®©æ›´å¤šäººæ„Ÿå—åˆ° Nextest çš„å¼ºå¤§ï¼å¤§å¹…æå‡ä½ çš„ Rust æµ‹è¯•æ•ˆç‡æŒ‡æ—¥å¯å¾…ï¼</p><h1 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-label="Permalink to &quot;å…¶ä»–&quot;">â€‹</a></h1><h2 id="rust-è·å–ç³»ç»Ÿä¿¡æ¯çš„å¼€æºé¡¹ç›®-sysinfo" tabindex="-1">Rust è·å–ç³»ç»Ÿä¿¡æ¯çš„å¼€æºé¡¹ç›®ï¼šsysinfo <a class="header-anchor" href="#rust-è·å–ç³»ç»Ÿä¿¡æ¯çš„å¼€æºé¡¹ç›®-sysinfo" aria-label="Permalink to &quot;Rust è·å–ç³»ç»Ÿä¿¡æ¯çš„å¼€æºé¡¹ç›®ï¼šsysinfo&quot;">â€‹</a></h2><h3 id="å‚è€ƒæ–‡ç« -3" tabindex="-1">å‚è€ƒæ–‡ç«  <a class="header-anchor" href="#å‚è€ƒæ–‡ç« -3" aria-label="Permalink to &quot;å‚è€ƒæ–‡ç« &quot;">â€‹</a></h3><ul><li>sysinfo Github Repoï¼š<a href="https://github.com/GuillaumeGomez/sysinfo" target="_blank" rel="noreferrer">https://github.com/GuillaumeGomez/sysinfo</a></li><li>sysinfo å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://lib.rs/crates/sysinfo" target="_blank" rel="noreferrer">https://lib.rs/crates/sysinfo</a></li></ul><h3 id="å¼•è¨€-4" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€-4" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè·å–ç³»ç»Ÿä¿¡æ¯æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚æ¯”å¦‚æˆ‘ä»¬å¯èƒ½éœ€è¦çŸ¥é“å½“å‰ç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æƒ…å†µã€CPU ä½¿ç”¨ç‡ã€ç£ç›˜ä¿¡æ¯ç­‰ã€‚åœ¨ Rust è¯­è¨€ä¸­ï¼Œæœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å¼€æºé¡¹ç›®å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè·å–è¿™äº›ç³»ç»Ÿä¿¡æ¯ï¼Œé‚£å°±æ˜¯ sysinfoã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç» sysinfo çš„ä¸»è¦ç‰¹æ€§ä»¥åŠåŸºæœ¬ç”¨æ³•ã€‚</p><h3 id="åˆ›ä½œèƒŒæ™¯-4" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯-4" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>ç¬”è€…æœ€è¿‘åœ¨ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªæ€§èƒ½ç›‘æ§å·¥å…·ï¼Œéœ€è¦è·å–ç³»ç»Ÿçš„å„ç§ä¿¡æ¯ã€‚åœ¨å¯»æ‰¾ç›¸å…³çš„åº“æ—¶å‘ç°äº† sysinfo è¿™ä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚ç»è¿‡ä¸€ç•ªä½¿ç”¨ï¼Œå‘ç° sysinfo ä¸ä»…åŠŸèƒ½å¼ºå¤§ï¼Œæ¥å£ä¹Ÿéå¸¸æ˜“ç”¨ï¼Œå› æ­¤æƒ³åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹æœ‰ç±»ä¼¼éœ€æ±‚çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§-5" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-5" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><p>sysinfo ç›®å‰æ”¯æŒä»¥ä¸‹æ“ä½œç³»ç»Ÿï¼š</p><ul><li>Android</li><li>FreeBSD</li><li>iOS</li><li>Linux</li><li>macOS</li><li>Raspberry Pi</li><li>Windows</li></ul><p>åœ¨è¿™äº›ç³»ç»Ÿä¸Šï¼Œsysinfo å¯ä»¥æä¾›å¦‚ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ç³»ç»Ÿä¿¡æ¯ï¼šç³»ç»Ÿåç§°ã€å†…æ ¸ç‰ˆæœ¬ã€ä¸»æœºåç­‰</li><li>å†…å­˜å’Œäº¤æ¢ç©ºé—´ä¿¡æ¯</li><li>CPU ä¿¡æ¯ï¼šCPU æ•°é‡ã€ä½¿ç”¨ç‡ç­‰</li><li>è¿›ç¨‹ä¿¡æ¯ï¼šè¿›ç¨‹ IDã€è¿›ç¨‹åã€ç£ç›˜ä½¿ç”¨ç­‰</li><li>ç£ç›˜ä¿¡æ¯</li><li>ç½‘ç»œæ¥å£ä¿¡æ¯</li><li>ç¡¬ä»¶ç»„ä»¶ä¿¡æ¯ï¼šæ¸©åº¦ä¼ æ„Ÿå™¨ç­‰</li></ul><p>é™¤äº†åŸºæœ¬çš„ç³»ç»Ÿä¿¡æ¯è·å–ï¼Œsysinfo è¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯ä»¥è®¾ç½®ä¿æŒæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡ä»¥æé«˜æ€§èƒ½ç­‰ã€‚åŒæ—¶ sysinfo è¿˜æä¾›äº†ä¸€ä¸ª C è¯­è¨€æ¥å£ï¼Œæ–¹ä¾¿åœ¨ C è¯­è¨€é¡¹ç›®ä¸­è°ƒç”¨ã€‚</p><h3 id="å¿«é€Ÿä¸Šæ‰‹-5" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-5" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><p>ä½¿ç”¨ sysinfo éå¸¸ç®€å•ï¼Œé¦–å…ˆåœ¨ Cargo.toml ä¸­æ·»åŠ ä¾èµ–ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[dependencies]</span></span>
<span class="line"><span style="color:#61AFEF;">sysinfo</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> &quot;0.30&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç„¶åå°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> sysinfo</span><span style="color:#ABB2BF;">::{</span><span style="color:#E5C07B;">System</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">SystemExt</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#C678DD;"> mut</span><span style="color:#E06C75;"> sys</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> System</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">new_all</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ›´æ–°ç³»ç»Ÿä¿¡æ¯</span></span>
<span class="line"><span style="color:#E06C75;">sys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">refresh_all</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ‰“å°å†…å­˜ä¿¡æ¯</span></span>
<span class="line"><span style="color:#61AFEF;">println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ€»å†…å­˜ï¼š{} KB&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">total_memory</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#61AFEF;">println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½¿ç”¨å†…å­˜ï¼š{} KB&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">used_memory</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ‰“å° CPU æ•°é‡</span></span>
<span class="line"><span style="color:#61AFEF;">println!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;CPU æ ¸å¿ƒæ•°ï¼š{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cpus</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">len</span><span style="color:#ABB2BF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª System å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ refresh_all() æ–¹æ³•æ›´æ–°ç³»ç»Ÿä¿¡æ¯ï¼Œæœ€åæ‰“å°äº†å†…å­˜å’Œ CPU ä¿¡æ¯ã€‚</p><p>ç¼–è¯‘è¿è¡Œåè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">æ€»å†…å­˜ï¼š16384000</span><span style="color:#98C379;"> KB</span></span>
<span class="line"><span style="color:#61AFEF;">ä½¿ç”¨å†…å­˜ï¼š8025360</span><span style="color:#98C379;"> KB</span></span>
<span class="line"><span style="color:#61AFEF;">CPU</span><span style="color:#98C379;"> æ ¸å¿ƒæ•°ï¼š8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æ€»ç»“-10" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-10" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>sysinfo æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“ç”¨çš„ç³»ç»Ÿä¿¡æ¯åº“ã€‚å®ƒæ”¯æŒå¤šä¸ªä¸»æµæ“ä½œç³»ç»Ÿï¼Œå¯ä»¥è·å–ç³»ç»Ÿã€å†…å­˜ã€CPUã€è¿›ç¨‹ã€ç£ç›˜ã€ç½‘ç»œç­‰å„ç§ä¿¡æ¯ã€‚å¦‚æœä½ çš„ Rust é¡¹ç›®ä¸­æœ‰è·å–ç³»ç»Ÿä¿¡æ¯çš„éœ€æ±‚ï¼Œsysinfo ç»å¯¹æ˜¯ä¸€ä¸ªä¸äºŒä¹‹é€‰ã€‚</p><h2 id="env-logger-rust-æ—¥å¿—åˆ©å™¨" tabindex="-1">env_loggerï¼šRust æ—¥å¿—åˆ©å™¨ <a class="header-anchor" href="#env-logger-rust-æ—¥å¿—åˆ©å™¨" aria-label="Permalink to &quot;env_loggerï¼šRust æ—¥å¿—åˆ©å™¨&quot;">â€‹</a></h2><h3 id="åœ°å€æ–‡æ¡£" tabindex="-1">åœ°å€æ–‡æ¡£ <a class="header-anchor" href="#åœ°å€æ–‡æ¡£" aria-label="Permalink to &quot;åœ°å€æ–‡æ¡£&quot;">â€‹</a></h3><ul><li>env_logger æ–‡æ¡£ï¼š<a href="https://docs.rs/env_logger" target="_blank" rel="noreferrer">https://docs.rs/env_logger</a></li><li>env_logger repoï¼š<a href="https://github.com/rust-cli/env_logger" target="_blank" rel="noreferrer">https://github.com/rust-cli/env_logger</a></li></ul><h3 id="å¼•è¨€-5" tabindex="-1">å¼•è¨€ <a class="header-anchor" href="#å¼•è¨€-5" aria-label="Permalink to &quot;å¼•è¨€&quot;">â€‹</a></h3><p>åœ¨ Rust ç¼–ç¨‹ä¸­ï¼Œæ—¥å¿—æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç»ä¸€æ¬¾ä¼˜ç§€çš„ Rust æ—¥å¿—åº“â€”â€” <code>env_logger</code>ï¼Œå¹¶é€šè¿‡å®ä¾‹è®²è§£å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨å®ƒã€‚</p><h3 id="åˆ›ä½œèƒŒæ™¯-5" tabindex="-1">åˆ›ä½œèƒŒæ™¯ <a class="header-anchor" href="#åˆ›ä½œèƒŒæ™¯-5" aria-label="Permalink to &quot;åˆ›ä½œèƒŒæ™¯&quot;">â€‹</a></h3><p>ç¬”è€…åœ¨å­¦ä¹  Rust è¿‡ç¨‹ä¸­ï¼Œå‘ç°æ—¥å¿—åœ¨è°ƒè¯•ç¨‹åºã€è®°å½•å…³é”®ä¿¡æ¯ç­‰æ–¹é¢æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚åœ¨ä¼—å¤š Rust æ—¥å¿—åº“ä¸­ï¼Œ<code>env_logger</code> å› å…¶ç®€å•æ˜“ç”¨å’Œå¼ºå¤§çš„åŠŸèƒ½è„±é¢–è€Œå‡ºï¼Œæ·±å¾—å¹¿å¤§ Rust å¼€å‘è€…çš„å–œçˆ±ã€‚å› æ­¤ï¼Œå°† <code>env_logger</code> ä»‹ç»ç»™æ›´å¤š Rust åˆå­¦è€…ï¼Œæ˜¯ç¬”è€…åˆ›ä½œæœ¬æ–‡çš„åˆè¡·ã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§-6" tabindex="-1">ä¸»è¦ç‰¹æ€§ <a class="header-anchor" href="#ä¸»è¦ç‰¹æ€§-6" aria-label="Permalink to &quot;ä¸»è¦ç‰¹æ€§&quot;">â€‹</a></h3><p><code>env_logger</code> æ˜¯ä¸€ä¸ªé€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®çš„æ—¥å¿—åº“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ol><li>å¯é€šè¿‡ç¯å¢ƒå˜é‡ <code>RUST_LOG</code> è½»æ¾é…ç½®æ—¥å¿—çº§åˆ«ï¼›</li><li>æ”¯æŒäº”ä¸ªæ—¥å¿—çº§åˆ«ï¼š<code>error</code>ã€<code>warn</code>ã€<code>info</code>ã€<code>debug</code> å’Œ <code>trace</code>ï¼›</li><li>æ”¯æŒé’ˆå¯¹ä¸åŒæ¨¡å—è®¾ç½®ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼›</li><li>å¯è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼›</li><li>ä¸ <code>log</code> crate æ— ç¼é›†æˆã€‚</li></ol><h3 id="å¿«é€Ÿä¸Šæ‰‹-6" tabindex="-1">å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹-6" aria-label="Permalink to &quot;å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h3><p>ä»¥ä¸‹æ˜¯ <code>env_logger</code> çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p><h4 id="_1-æ·»åŠ ä¾èµ–" tabindex="-1">1. æ·»åŠ ä¾èµ– <a class="header-anchor" href="#_1-æ·»åŠ ä¾èµ–" aria-label="Permalink to &quot;1. æ·»åŠ ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨ <code>Cargo.toml</code> æ–‡ä»¶çš„ <code>[dependencies]</code> ä¸‹æ·»åŠ ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E06C75;">log</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.4&quot;</span></span>
<span class="line"><span style="color:#E06C75;">env_logger</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;0.11&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-åˆå§‹åŒ–-logger" tabindex="-1">2. åˆå§‹åŒ– logger <a class="header-anchor" href="#_2-åˆå§‹åŒ–-logger" aria-label="Permalink to &quot;2. åˆå§‹åŒ– logger&quot;">â€‹</a></h4><p>åœ¨ç¨‹åºå…¥å£å¤„åˆå§‹åŒ– <code>env_logger</code>ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">use</span><span style="color:#E5C07B;"> log</span><span style="color:#ABB2BF;">::info;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">fn</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // åˆå§‹åŒ– logger</span></span>
<span class="line"><span style="color:#E5C07B;">    env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">    info!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å¯åŠ¨ç¨‹åº&quot;</span><span style="color:#ABB2BF;">);  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å½“è¿è¡Œç¨‹åºæ—¶ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ <code>RUST_LOG</code> è®¾ç½®æ—¥å¿—çº§åˆ«ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#98C379;"> RUST_LOG=info</span><span style="color:#98C379;"> cargo</span><span style="color:#98C379;"> run</span></span>
<span class="line"><span style="color:#ABB2BF;">[2023-05-20T15:30:00Z INFO  main] å¯åŠ¨ç¨‹åº</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä»¥ä¸Šå°†å…¨å±€æ—¥å¿—çº§åˆ«è®¾ä¸º <code>info</code>ã€‚è¿™é‡Œæ—¥å¿—çº§åˆ«ä¸åŒºåˆ†å¤§å°å†™ã€‚</p><h4 id="_3-è®¾ç½®æ¨¡å—çº§åˆ«" tabindex="-1">3. è®¾ç½®æ¨¡å—çº§åˆ« <a class="header-anchor" href="#_3-è®¾ç½®æ¨¡å—çº§åˆ«" aria-label="Permalink to &quot;3. è®¾ç½®æ¨¡å—çº§åˆ«&quot;">â€‹</a></h4><p>è¿˜å¯ä»¥é’ˆå¯¹ä¸åŒæ¨¡å—ï¼Œè®¾ç½®ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#98C379;"> RUST_LOG=my_module=debug,info</span><span style="color:#98C379;"> cargo</span><span style="color:#98C379;"> run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä»¥ä¸Šå°† <code>my_module</code> çš„æ—¥å¿—çº§åˆ«è®¾ä¸º <code>debug</code>ï¼Œå…¨å±€çš„è®¾ä¸º <code>info</code>ã€‚</p><h4 id="_4-åœ¨æµ‹è¯•ä¸­ä½¿ç”¨" tabindex="-1">4. åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ <a class="header-anchor" href="#_4-åœ¨æµ‹è¯•ä¸­ä½¿ç”¨" aria-label="Permalink to &quot;4. åœ¨æµ‹è¯•ä¸­ä½¿ç”¨&quot;">â€‹</a></h4><p>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œä¹Ÿå¯æ–¹ä¾¿åœ°ä½¿ç”¨ <code>env_logger</code>ï¼š</p><div class="language-rust line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#[cfg(test)]</span></span>
<span class="line"><span style="color:#C678DD;">mod</span><span style="color:#ABB2BF;"> tests {</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;font-style:italic;"> super</span><span style="color:#ABB2BF;">::*;</span></span>
<span class="line"><span style="color:#C678DD;">    use</span><span style="color:#E5C07B;"> log</span><span style="color:#ABB2BF;">::info;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> init</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        let</span><span style="color:#E06C75;"> _</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> env_logger</span><span style="color:#ABB2BF;">::</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">is_test</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">try_init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #[test]</span></span>
<span class="line"><span style="color:#C678DD;">    fn</span><span style="color:#61AFEF;"> it_works</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">        init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#61AFEF;">        info!</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æµ‹è¯•æ—¥å¿—&quot;</span><span style="color:#ABB2BF;">); </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ç¼–å†™æµ‹è¯•ä»£ç </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ...</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>æ³¨æ„ <code>init()</code> å‡½æ•°è¦åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­è°ƒç”¨ï¼Œæ¥åˆå§‹åŒ– loggerã€‚</p><p>è¿è¡Œæµ‹è¯•æ—¶ï¼Œå¯é€šè¿‡ <code>RUST_LOG</code> è¿‡æ»¤æ—¥å¿—ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$</span><span style="color:#98C379;"> RUST_LOG=my_module=info</span><span style="color:#98C379;"> cargo</span><span style="color:#98C379;"> test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="æ€»ç»“-11" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-11" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>æœ¬æ–‡ä»‹ç»äº† Rust æ—¥å¿—åº“ <code>env_logger</code> çš„ä¸»è¦ç‰¹æ€§å’ŒåŸºæœ¬ç”¨æ³•ï¼Œå±•ç¤ºäº†å®ƒç®€å•æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„ä¸€é¢ã€‚å»ºè®®å¤§å®¶åœ¨å®æˆ˜é¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-54e61e03 data-v-98758174><!--[--><!--]--><div class="edit-info" data-v-98758174><div class="edit-link" data-v-98758174><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://gitee.com/muyaCode/program-learn-notes/edit/main/docs/Document/Rust/Rustæ¡†æ¶å’Œåº“.md" target="_blank" rel="noreferrer" data-v-98758174><!--[--><span class="vpi-square-pen edit-link-icon" data-v-98758174></span> åœ¨ Giteeä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-98758174><p class="VPLastUpdated" data-v-98758174 data-v-82823703>ä¸Šæ¬¡æ›´æ–°ï¼š: <time datetime="2024-06-07T11:24:57.000Z" data-v-82823703></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-98758174><span class="visually-hidden" id="doc-footer-aria-label" data-v-98758174>Pager</span><div class="pager" data-v-98758174><a class="VPLink link pager-link prev" href="/ProgramLearnNotes/Document/Rust/11.Rust%E9%9D%A2%E8%AF%95%E9%A2%98" data-v-98758174><!--[--><span class="desc" data-v-98758174>ä¸Šä¸€ç¯‡</span><span class="title" data-v-98758174>11.Rusté¢è¯•é¢˜</span><!--]--></a></div><div class="pager" data-v-98758174><a class="VPLink link pager-link next" href="/ProgramLearnNotes/Document/Rust/Rust%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE" data-v-98758174><!--[--><span class="desc" data-v-98758174>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-98758174>Rustå¼€æºé¡¹ç›®</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-41e8be72 data-v-5a830141><div class="container" data-v-5a830141><p class="message" data-v-5a830141>Released under the MIT License.</p><p class="copyright" data-v-5a830141>Copyright Â© 2024  heyu</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"document_c-sharp_dotnet_dotnetç›¸å…³ç½‘å€.md\":\"BSvM5So1\",\"document_c-c___c__æ¡†æ¶.md\":\"BEBuEm5P\",\"document_c-sharp_dotnet_dotnetç›¸å…³å¼€æºé¡¹ç›®.md\":\"CWlsfQR2\",\"document_c-sharp_c-sharpå­¦ä¹ èµ„æº.md\":\"BtlH1OU0\",\"document_c-c___c-c__è¯­è¨€ç›¸å…³å·¥å…·.md\":\"Cde_Z-pT\",\"document_aiå¤§è¯­è¨€æ¨¡å‹_aiå¤§è¯­è¨€æ¨¡å‹å­¦ä¹ èµ„æº.md\":\"Bsw6DQYx\",\"document_c-sharp_dotnet_dotnetå…¥é—¨.md\":\"uTh0EcIo\",\"document_c-c___å¼€æºçš„c-c_åŒ…ç®¡ç†å·¥å…·.md\":\"CJ1aW9QJ\",\"document_aiå¤§è¯­è¨€æ¨¡å‹_aiæ¨¡å‹.md\":\"CSHZ703C\",\"document_docker_dockeråº”ç”¨_å¦‚ä½•ä½¿ç”¨ github actions æ„å»º docker é•œåƒ.md\":\"su3jfSPP\",\"document_docker_dockeråº”ç”¨_docker-desktopå¼€å¯å†…ç½®çš„k8så¹¶å®‰è£…kuboardè¿›è¡Œå¾®æœåŠ¡ç®¡ç†.md\":\"8kXLJvdA\",\"document_docker_dockeråº”ç”¨_å¼€æºlinuxæœåŠ¡å™¨è¿ç»´é¢æ¿1panelæ„å»ºphpå®¹å™¨è¿è¡Œwebmanæ¡†æ¶.md\":\"DbIFJs2g\",\"document_docker_dockeråº”ç”¨_dockerå¿«é€Ÿå…¥é—¨å’Œéƒ¨ç½²ä½¿ç”¨æ•™ç¨‹.md\":\"BLWqlY0H\",\"document_c-c___c-c__å­¦ä¹ èµ„æº.md\":\"CTsgIpHe\",\"document_docker_nas_ç¡¬ä»¶è®¾å¤‡æ”¹é€ æˆnas.md\":\"BWVOKvIF\",\"document_docker_dockeråº”ç”¨_ä½¿ç”¨watchtowerè‡ªåŠ¨æ›´æ–°dockeré•œåƒä¸å®¹å™¨.md\":\"ekiDNP26\",\"document_java_javaæ¡†æ¶.md\":\"CquDxMX5\",\"document_docker_dockeråº”ç”¨_å¦‚ä½•ä¼˜é›…çš„å˜æ›´docker-desktopçš„é•œåƒå­˜å‚¨è·¯å¾„.md\":\"5kp_g3fh\",\"document_docker_dockeråº”ç”¨_è‘«èŠ¦å¨ƒå¹³å°è‡ªåŠ¨é¢„çº¦èŒ…å°.md\":\"Df_IbysC\",\"document_python_pythonå­¦ä¹ çº¿è·¯.md\":\"DrIP9Tel\",\"document_python_pythonä¸å…¶ä»–è¯­è¨€ç»“åˆ.md\":\"BARxrt9A\",\"document_lua_luaåŸºç¡€å…¥é—¨_1.å¼€å§‹.md\":\"BcqiQAsU\",\"document_docker_dockeråº”ç”¨_å‘Šåˆ«dockerfile_æ‹¥æŠ± docker init æ„å»ºdockeré•œåƒ.md\":\"D4BbPw0x\",\"document_lua_luaåŸºç¡€å…¥é—¨.md\":\"BeQuB_20\",\"document_mojo_mojoå¼€å‘ç¯å¢ƒæ­å»º.md\":\"BlKLzKO5\",\"document_java_javaé¢è¯•ç›¸å…³.md\":\"NwBi9kPB\",\"document_docker_dockeråº”ç”¨_docker åŠ æŒçš„å®‰å“æ‰‹æœºï¼šéšèº«æºå¸¦çš„çŸ¥è¯†åº“.md\":\"BjId_fTc\",\"document_harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘_harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘ç®€ä»‹.md\":\"CgtDGDgi\",\"document_go_goå¼€æºåº”ç”¨.md\":\"BJ17crP1\",\"document_php_phpå­¦ä¹ èµ„æº.md\":\"BXe0LVUI\",\"document_go_goè¯­è¨€ç›¸å…³ç½‘ç«™èµ„æº.md\":\"CWrRQst0\",\"document_docker_dockeråº”ç”¨_å°†dockeré•œåƒç¼–è¯‘æˆç‹¬ç«‹å¯ç§»æ¤äºŒè¿›åˆ¶æ–‡ä»¶.md\":\"CYddzX-Z\",\"document_linux_linuxå†…æ ¸.md\":\"DhvJeelK\",\"document_rust_7.rustè®¾è®¡æ¨¡å¼.md\":\"CdmYC4yM\",\"document_docker_dockerå…¥é—¨.md\":\"BKg19L6T\",\"document_python_pythonå…¥é—¨.md\":\"DnFYENvn\",\"document_zig_zigå…¥é—¨.md\":\"ikLB4n1j\",\"document_python_ã€pythonå¾…å®šã€‘_åˆ©ç”¨aardioå’Œpython playwrightå®ç°é«˜æ•ˆçš„ç½‘é¡µè‡ªåŠ¨åŒ–æ“ä½œ.md\":\"CSTRssGr\",\"document_docker_dockeråº”ç”¨_dockerç©ºé—´ä¼˜åŒ–æŒ‡å—ï¼šé«˜æ•ˆå›æ”¶ç£ç›˜ç©ºé—´çš„å®ç”¨æŠ€å·§.md\":\"BAICFiex\",\"document_æ•°æ®åº“_mysql_mysqlå­¦ä¹ èµ„æº.md\":\"DF4VWqeV\",\"document_lua_luaè¯­è¨€å­¦ä¹ èµ„æº.md\":\"B3bdVNue\",\"document_rust_6.rustä¸webassembly.md\":\"j82ppQIZ\",\"document_docker_dockeråº”ç”¨_webmanå®æˆ˜æ•™ç¨‹_è½»æ¾ä½¿ç”¨dockeréƒ¨ç½²webmané¡¹ç›®â€”æ‰“é€ ä¸“å±ä½ çš„webåº”ç”¨.md\":\"CG0VE80R\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_æµè§ˆå™¨æ’ä»¶â€”modheader_åŠ©ä½ ç»•è¿‡å¾®ä¿¡æˆæƒç™»å½•é™åˆ¶.md\":\"CfTI8uV7\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_ç½‘ç»œæ°´å†›.md\":\"CDiyv3-X\",\"document_rust_10.rustæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å®æˆ˜.md\":\"DKRA-ZR5\",\"document_java_javaå­¦ä¹ èµ„æº.md\":\"je_zKCIL\",\"document_ç½‘ç»œå®‰å…¨_ã€æŠ“åŒ…é…ç½®ã€‘_å®‰å“é«˜ç‰ˆæœ¬httpsæŠ“åŒ…ç»ˆæè§£å†³æ–¹æ¡ˆ.md\":\"MbV0gzlY\",\"document_docker_dockeråº”ç”¨_dockerè‡ªå»ºäº‘æ‰‹æœº.md\":\"BLK70IOc\",\"document_ç¼–è¯‘å™¨åŸç†å’Œå®ç°.md\":\"C2W95Ifc\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_ä¸€ç§åˆ©ç”¨åˆæ³•å·¥å…·æ¸—é€çš„æ–°å‹æ–¹æ³•.md\":\"CKKPyPSy\",\"document_ç½‘ç»œå®‰å…¨_ç½‘ç»œå®‰å…¨ç›¸å…³ç¯å¢ƒ.md\":\"CJTLwqQK\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_è¿½è¸ªæ”»å‡»æºå¤´ ä»ipåœ°å€åˆ°æ”»å‡»è€…èº«ä»½çš„æº¯æºä¹‹æ—….md\":\"BqtT40Za\",\"document_lua_luaåŸºç¡€å…¥é—¨_2.ç±»å‹å’Œå€¼.md\":\"CflMvJTO\",\"document_python_pythonçš„condaç®¡ç†è½¯ä»¶å‘½ä»¤.md\":\"Ds7sH-tE\",\"document_ç½‘ç»œå®‰å…¨_ã€æ¸—é€æµ‹è¯•å·¥å…·ã€‘_æ¸—é€æµ‹è¯•å·¥å…·.md\":\"C8MYOqhz\",\"document_æ•°æ®åº“_å¸¸ç”¨æ•°æ®åº“.md\":\"lrnVsJrZ\",\"document_ç½‘ç»œå®‰å…¨_å®‰å…¨ç›¸å…³çš„å¼€æºé¡¹ç›®.md\":\"FXwSnkIC\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_electronåº”ç”¨éªŒè¯ç ´è§£.md\":\"CzNNKm1Z\",\"document_linux_linuxè„šæœ¬.md\":\"C_Ag59It\",\"order_æ–‡æ¡£æŒ‡å—.md\":\"BJJca_59\",\"document_ç½‘ç»œå®‰å…¨_ã€é»‘å®¢æŠ€æœ¯ã€‘_æ•°æ®ç»“æ„ç®—æ³•çš„åº”ç”¨.md\":\"CP54ZK1I\",\"document_ç½‘ç»œå®‰å…¨_ç½‘ç»œå®‰å…¨æ•™ç¨‹.md\":\"Dnh_7N4q\",\"document_ç½‘ç»œå®‰å…¨_ã€é»‘å®¢æŠ€æœ¯ã€‘_åœ¨windowsç³»ç»Ÿä¸‹ææƒçš„8ç§ä¸»è¦å§¿åŠ¿.md\":\"DSf_h2jY\",\"document_ç½‘ç»œå®‰å…¨_é»‘å®¢å¼€æºé¡¹ç›®.md\":\"BB5Jm8nG\",\"document_ç½‘ç»œå®‰å…¨_ã€kalilinuxã€‘_kalilinuxå·¥å…·è„‘å›¾_å®‰å…¨ä¸“å®¶çš„å†›æ¢°åº“.md\":\"DbGJm9Hb\",\"document_rust_1.rustå¼€å‘ç¯å¢ƒæ­å»º.md\":\"Cz2pdZ8S\",\"document_mojo_mojoè¯­è¨€ç®€ä»‹å’Œèµ„æº.md\":\"CGlFhMDb\",\"document_lua_luaå¼€å‘å®‰å“åº”ç”¨.md\":\"CbWXQ1ZD\",\"document_ç½‘ç»œå®‰å…¨_ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘_venom-crawlerè½¬ä¸ºæ¡æ´è€Œç”Ÿçš„çˆ¬è™«ç¥å™¨.md\":\"BIrN0scJ\",\"document_ç½‘ç»œå®‰å…¨_ã€kalilinuxã€‘_å®ä½“æœºå®‰è£…kaliæ•™ç¨‹.md\":\"BPhttNKw\",\"document_ç½‘ç»œå®‰å…¨_ç½‘ç»œå®‰å…¨ç¤¾åŒºè®ºå›.md\":\"W9mVkszg\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_fridaå…¥é—¨ä½¿ç”¨ä»‹ç».md\":\"DoG1YvYo\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_jsé€†å‘å·¥å…·æ¸…å•.md\":\"DWMO0Uyp\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_ç½‘ç»œå—…æ¢çš„åŸç†å’Œå¸¸ç”¨å·¥å…·.md\":\"B7DbP5CJ\",\"document_rust_11.rusté¢è¯•é¢˜.md\":\"C4uhQh6q\",\"document_ç½‘ç»œå®‰å…¨_ã€é»‘å®¢æŠ€æœ¯ã€‘_åé—¨æŠ€æœ¯.md\":\"Cu92qR53\",\"document_lua_luaåŸºç¡€å…¥é—¨_4.è¯­å¥.md\":\"D39wchjn\",\"document_ç½‘ç»œå®‰å…¨_ã€é»‘å®¢æŠ€æœ¯ã€‘_ä¸åˆ·å›ºä»¶æ­¦è£…å®¶ç”¨è·¯ç”±å™¨.md\":\"bbjjJmF2\",\"order_markdownå›¾æ ‡.md\":\"BKl8cnuY\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_apké€†å‘å·¥å…·.md\":\"nmMBKS6O\",\"document_docker_nas_nasç¡¬ä»¶æ¨è.md\":\"BOM5HSWH\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_ã€å®‰å“é€†å‘ã€‘æŸéŸ³æµ·å¤–ç‰ˆtiktokæŠ“åŒ….md\":\"CloINZ85\",\"document_ç½‘ç»œå®‰å…¨_ã€kalilinuxã€‘_kali linuxå®‰å…¨å·¥å…·é›†åˆ.md\":\"5lk-BZOh\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_appé€†å‘ç ´è§£æ•™ç¨‹.md\":\"BcPqIH8G\",\"document_åŒ…ç®¡ç†å™¨é…ç½®ä»£ç†.md\":\"DhzSggrV\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_ä½ æ˜¯å¦åœ¨æ­£ç¡®çš„ä½¿ç”¨vpn.md\":\"y95kKYCX\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_å¼€æºé€†å‘å·¥å…·.md\":\"CrW01pnc\",\"document_rust_rustå­¦ä¹ è·¯çº¿.md\":\"BCI5cy2n\",\"document_æ•°æ®åº“_æ•°æ®åº“å†…æ ¸å®ç°.md\":\"Cghl0RVM\",\"document_python_pythoné¢è¯•é¢˜.md\":\"GQNRSwlb\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_æ£€æµ‹è‡ªå®¶æ‘„åƒå¤´æ˜¯å¦å­˜åœ¨æ¼æ´.md\":\"BfhpjZAG\",\"document_rust_4.rustæ¡†æ¶ç¯‡.md\":\"fnPnWDRt\",\"document_å¼€æºç›¸å…³_æ‰“é€ ä¸€ä¸ªèŠ±é‡Œèƒ¡å“¨çš„githubä¸ªäººä¸»é¡µ.md\":\"dETP_-Xm\",\"document_ç½‘ç»œå®‰å…¨_ã€kalilinuxã€‘_æ‰‹æœºå®‰è£…kali linux.md\":\"DD9qYBaQ\",\"document_rust_rustå’Œå…¶ä»–è¯­è¨€ç»“åˆ.md\":\"BT36cLDu\",\"document_æ±‡ç¼–_æ±‡ç¼–ç®€ä»‹å’Œèµ„æº.md\":\"C6InYfY-\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_hfish_æ°¸ä¹…å…è´¹â€”å·§è®¾èœœç½è¿·å±€.md\":\"Dg1v1foz\",\"document_ç½‘ç»œå®‰å…¨_ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘_aomanå»æŒ‡çº¹æµè§ˆå™¨â€”ä¼ªé€ ä¸€ä¸ªå®‰å…¨çš„æ¸—é€ç¯å¢ƒ.md\":\"DEXKe8Dk\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_å¯ç›‘å¬vpnçš„é»‘å®¢æŠ€æœ¯.md\":\"DJ2t05zo\",\"index.md\":\"Dpxq6Kxn\",\"document_æ•°æ®åº“_mysql_mysqlå­¦ä¹ è·¯çº¿.md\":\"C-X54Qc0\",\"document_rust_5.rusté¡¹ç›®å®æˆ˜ç¯‡.md\":\"B1Djsy8R\",\"document_zig_zigç›¸å…³å­¦ä¹ èµ„æº.md\":\"RZAS9ly5\",\"document_æ±‡ç¼–_æ±‡ç¼–å¼€æºé¡¹ç›®.md\":\"BH9e6RGb\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_ã€å®‰å“é€†å‘ã€‘æ·˜ç³»æŠ“åŒ…æ±‡æ€»(é±¼ éº¦ çŒ« é¥¿ å®).md\":\"CYFi93fH\",\"document_ç½‘ç»œå®‰å…¨_ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘_å¯†æ¢å·¥å…·é›†guiæ¸—é€ç‰ˆ.md\":\"CrQ7HgS7\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_clash_yaktæŠ“åŒ…å¾®ä¿¡å°ç¨‹åº.md\":\"Dvphlqms\",\"document_ç½‘ç»œå®‰å…¨_ã€kalilinuxã€‘_kalilinuxä¸‹ç¼–å†™å®‰å“æœ¨é©¬.md\":\"BI5d7n1x\",\"document_docker_æ€ä¹ˆæŠŠç½‘ç«™å’ŒæœåŠ¡ç«¯åº”ç”¨æ¥å…¥docker.md\":\"BQ088jWm\",\"document_python_pythonå¼€æºé¡¹ç›®.md\":\"wQBOfM9c\",\"document_rust_8.rustæ¸¸æˆå¼€å‘.md\":\"tyJ4yt7z\",\"document_swift_swiftå­¦ä¹ èµ„æº.md\":\"B_mmVx-y\",\"document_rust_3.rustè¿›é˜¶ç¯‡.md\":\"BIsQb_v4\",\"document_docker_nas_é­”äº‘è…¾zeusc1â€”â€”äº‘æ‰‹æœºå½“12ä¸ªæ‰‹æœºç”¨.md\":\"h3CRHLsL\",\"document_æ•°æ®åº“_sqlite.md\":\"BcfBNukt\",\"document_æ•°æ®åº“_mysql_mysqlå…¥é—¨.md\":\"BCqBhkQ5\",\"document_go_goæ¡†æ¶.md\":\"6bDUUeN0\",\"document_harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘_harmonyå¼€æºé¡¹ç›®.md\":\"Cj-9UoTh\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_å¦‚ä½•ä½¿ç”¨å¼€æºæƒ…æŠ¥è·Ÿè¸ªä¸€ä¸ªäºº.md\":\"Dgf0u39l\",\"document_rust_0.rustä»‹ç»å’Œåº”ç”¨.md\":\"BiR5aVOq\",\"document_lua_luaåŸºç¡€å…¥é—¨_3.è¡¨è¾¾å¼.md\":\"CePWU62e\",\"document_æ±‡ç¼–_æ±‡ç¼–å…¥é—¨.md\":\"xiAQJNcl\",\"document_rust_rustå­¦ä¹ èµ„æº.md\":\"B2wKNKeM\",\"document_rust_2.ruståŸºç¡€ç¯‡.md\":\"WhFVch5N\",\"document_python_pythonç‰ˆæœ¬å’Œç¯å¢ƒç®¡ç†.md\":\"C2uKjhnR\",\"document_rust_9.rustç¨‹åºè°ƒè¯•.md\":\"tFnn80Sv\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_ã€è½¦è”ç½‘ã€‘è½¦è½½ android åº”ç”¨æ”»å‡»-é€†å‘å·¥å…·.md\":\"CzM2G4aB\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_åŸºäºlinuxå†…æ ¸çš„vpnå·¥å…·.md\":\"BlTxud8e\",\"document_å¦‚ä½•å†™å‡ºåˆ«äººæ— æ³•ç»´æŠ¤çš„ä»£ç .md\":\"H1lenv_I\",\"document_python_pythonå­¦ä¹ èµ„æº.md\":\"DmY7DXCZ\",\"document_å‘½ä»¤è¡Œå·¥å…·.md\":\"Qhf0H6_r\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_magisk-lsposed è§£å†³æŸéŸ³appæŠ“åŒ…é—®é¢˜.md\":\"BzeZKSKO\",\"document_go_goè¯­è¨€å­¦ä¹ è·¯çº¿.md\":\"CP8ZQ7fs\",\"document_ç½‘ç»œå®‰å…¨_é»‘å®¢å·¥å…·ç³»åˆ—.md\":\"C7ynfGg2\",\"document_linux_linuxå‘½ä»¤.md\":\"3WON4lZX\",\"document_æ‰‹æ“cpu.md\":\"BClB3mgc\",\"document_python_pythonåº“.md\":\"B1THy3qr\",\"document_å¼€æºå°æŠ„.md\":\"CI20ntVW\",\"document_æ•°æ®åº“_æ•°æ®åº“å·¥å…·.md\":\"DyiKWT70\",\"document_lua_luaå®æˆ˜.md\":\"oe6cAVC7\",\"document_python_pythonçˆ¬è™«.md\":\"BrMtrr-5\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_åœ¨å®¶æ‰“å¡çš„æ–¹æ³•.md\":\"BCkRLzAt\",\"document_docker_nas_nasç³»ç»Ÿæ¨è.md\":\"ChNxKytK\",\"document_zig_zigä»‹ç».md\":\"BnzGPCkZ\",\"document_rust_rustå¼€æºé¡¹ç›®.md\":\"zdTaBdin\",\"document_ç½‘ç»œå®‰å…¨_é»‘å®¢è¾…åŠ©å·¥å…·.md\":\"BI7w0BJc\",\"document_æ ‡å‡†åŒ–apiè®¾è®¡æµç¨‹.md\":\"BZXLP5zU\",\"document_docker_dockeråº”ç”¨_nasè‡ªæ‰˜ç®¡åº”ç”¨æœåŠ¡appç«¯.md\":\"CBXa-XWB\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_ç½‘ç»œå®‰å…¨é˜²èº«ç§˜ç±.md\":\"PNVOT8w5\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_jsé€†å‘.md\":\"mvOsxl5f\",\"document_ç½‘ç»œå®‰å…¨_ã€é€†å‘ç ´è§£ã€‘_æŠ–éŸ³abogusé€†å‘åˆ†æ.md\":\"3hL2G-9c\",\"document_ç½‘ç»œå®‰å…¨_ã€æ€è·¯ã€‘_appæ¸—é€_äººè„¸è¯†åˆ«ç™»å½•ç»•è¿‡.md\":\"B4awwDoy\",\"document_docker_nas_naså¥½å·¥å…·æ¨è.md\":\"Dyq5lsSv\",\"document_æœåŠ¡å™¨ç›¸å…³_nginxé…ç½®.md\":\"BMRhjhx-\",\"document_ç¼–ç¨‹è¯­è¨€.md\":\"CcOIwc6q\",\"document_python_pythonå®æˆ˜å¼€å‘.md\":\"CKnJIqb0\",\"document_docker_dockeråº”ç”¨_dockeråº”ç”¨æ”¶é›†.md\":\"D1wLka2A\",\"document_rust_rustç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ.md\":\"B978UFTP\",\"document_python_pythonæ¡†æ¶.md\":\"CTLm56EC\",\"document_rust_rustæ¡†æ¶å’Œåº“.md\":\"BDGeRjzb\",\"document_python_pythonè„šæœ¬å¼€å‘.md\":\"CPJx4h5x\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh\",\"dir\":\"ltr\",\"title\":\"é¹¤å±¿ç¼–ç¨‹å­¦ä¹ ç¬”è®°\",\"description\":\"è½¯ä»¶å¼€å‘è®¡ï¼šå¼€å‘æ–‡æ¡£å’Œå¼€å‘è®¡åˆ’ï¼Œå®ŒæˆåŠŸèƒ½å·¥å…·ï¼Œå’Œå¾…å¼€å‘çš„åŠŸèƒ½å’Œå·¥å…·\",\"base\":\"/ProgramLearnNotes/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/buding.svg\",\"siteTitle\":\"é¹¤å±¿ç¼–ç¨‹å­¦ä¹ ç¬”è®°\",\"outlineTitle\":\"âš¡ï¸æ–‡æ¡£å†…å®¹å¤§çº²\",\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"displayDetails\":\"æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"backButtonTitle\":\"è¿”å›æœç´¢ç»“æœ\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"selectKeyAriaLabel\":\"enter\",\"navigateText\":\"åˆ‡æ¢\",\"navigateUpKeyAriaLabel\":\"up arrow\",\"navigateDownKeyAriaLabel\":\"down arrow\",\"closeText\":\"å…³é—­\",\"closeKeyAriaLabel\":\"escape\"}}}}},\"miniSearch\":{\"options\":{},\"searchOptions\":{}}}},\"nav\":[{\"text\":\"ğŸŒæˆ‘çš„ä¸ªäººç½‘ç«™\",\"link\":\"\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/muyaCode/ProgramLearnNotes\"},{\"icon\":{\"svg\":\"<svg t=\\\"1690871772610\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"987\\\" width=\\\"256\\\" height=\\\"256\\\">\\n        <path d=\\\"M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z\\\" fill=\\\"#C71D23\\\" p-id=\\\"988\\\"></path>\\n      </svg>\"},\"link\":\"https://gitee.com/muyaCode/program-learn-notes\"}],\"sidebar\":{\"/\":[{\"text\":\"ğŸŒŸæ–‡æ¡£æŒ‡å—\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ–‡æ¡£æŒ‡å—\",\"link\":\"/order/æ–‡æ¡£æŒ‡å—\"},{\"text\":\"markdownå›¾æ ‡\",\"link\":\"/order/markdownå›¾æ ‡\"}]},{\"text\":\"ç¼–ç¨‹è¯­è¨€\",\"link\":\"/Document/ç¼–ç¨‹è¯­è¨€\"},{\"text\":\"ç¼–è¯‘å™¨åŸç†å’Œå®ç°\",\"link\":\"/Document/ç¼–è¯‘å™¨åŸç†å’Œå®ç°\"},{\"text\":\"æ‰‹æ“CPU\",\"link\":\"/Document/æ‰‹æ“CPU\"},{\"text\":\"æ ‡å‡†åŒ–APIè®¾è®¡æµç¨‹\",\"link\":\"/Document/æ ‡å‡†åŒ–APIè®¾è®¡æµç¨‹\"},{\"text\":\"å¼€æºå°æŠ„\",\"link\":\"/Document/å¼€æºå°æŠ„\"},{\"text\":\"å‘½ä»¤è¡Œå·¥å…·\",\"link\":\"/Document/å‘½ä»¤è¡Œå·¥å…·\"},{\"text\":\"åŒ…ç®¡ç†å™¨é…ç½®ä»£ç†\",\"link\":\"/Document/åŒ…ç®¡ç†å™¨é…ç½®ä»£ç†\"},{\"text\":\"å¦‚ä½•å†™å‡ºåˆ«äººæ— æ³•ç»´æŠ¤çš„ä»£ç \",\"link\":\"/Document/å¦‚ä½•å†™å‡ºåˆ«äººæ— æ³•ç»´æŠ¤çš„ä»£ç \"},{\"text\":\"ğŸŒŸæœåŠ¡å™¨ç›¸å…³\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Nginxé…ç½®\",\"link\":\"/Document/æœåŠ¡å™¨ç›¸å…³/Nginxé…ç½®\"},{\"text\":\"\",\"link\":\"/Document/æœåŠ¡å™¨ç›¸å…³/\"},{\"text\":\"\",\"link\":\"/Document/æœåŠ¡å™¨ç›¸å…³/\"}]},{\"text\":\"ğŸŒŸJava\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Javaå­¦ä¹ èµ„æº\",\"link\":\"/Document/Java/Javaå­¦ä¹ èµ„æº\"},{\"text\":\"Javaæ¡†æ¶\",\"link\":\"/Document/Java/Javaæ¡†æ¶\"},{\"text\":\"\",\"link\":\"/Document/Java/\"},{\"text\":\"Javaé¢è¯•ç›¸å…³\",\"link\":\"/Document/Java/Javaé¢è¯•ç›¸å…³\"}]},{\"text\":\"ğŸŒŸC#\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"C-Sharpå­¦ä¹ èµ„æº\",\"link\":\"/Document/C-Sharp/C-Sharpå­¦ä¹ èµ„æº\"},{\"text\":\"\",\"link\":\"/Document/C-Sharp/\"},{\"text\":\"\",\"link\":\"/Document/C-Sharp/\"},{\"text\":\"ğŸŒŸdotnet\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"dotnetå…¥é—¨\",\"link\":\"/Document/C-Sharp/dotnet/dotnetå…¥é—¨\"},{\"text\":\"dotnetç›¸å…³ç½‘å€\",\"link\":\"/Document/C-Sharp/dotnet/dotnetç›¸å…³ç½‘å€\"},{\"text\":\"dotnetç›¸å…³å¼€æºé¡¹ç›®\",\"link\":\"/Document/C-Sharp/dotnet/dotnetç›¸å…³å¼€æºé¡¹ç›®\"}]}]},{\"text\":\"ğŸŒŸGo\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Goè¯­è¨€ç›¸å…³ç½‘ç«™èµ„æº\",\"link\":\"/Document/Go/Goè¯­è¨€ç›¸å…³ç½‘ç«™èµ„æº\"},{\"text\":\"Goå¼€æºåº”ç”¨\",\"link\":\"/Document/Go/Goå¼€æºåº”ç”¨\"},{\"text\":\"Goè¯­è¨€å­¦ä¹ è·¯çº¿\",\"link\":\"/Document/Go/Goè¯­è¨€å­¦ä¹ è·¯çº¿\"},{\"text\":\"Goæ¡†æ¶\",\"link\":\"/Document/Go/Goæ¡†æ¶\"},{\"text\":\"\",\"link\":\"/Document/Go/\"}]},{\"text\":\"ğŸŒŸPython\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Pythonå­¦ä¹ èµ„æº\",\"link\":\"/Document/Python/Pythonå­¦ä¹ èµ„æº\"},{\"text\":\"Pythonå­¦ä¹ çº¿è·¯\",\"link\":\"/Document/Python/Pythonå­¦ä¹ çº¿è·¯\"},{\"text\":\"Pythonç‰ˆæœ¬å’Œç¯å¢ƒç®¡ç†\",\"link\":\"/Document/Python/Pythonç‰ˆæœ¬å’Œç¯å¢ƒç®¡ç†\"},{\"text\":\"Pythonçš„Condaç®¡ç†è½¯ä»¶å‘½ä»¤\",\"link\":\"/Document/Python/Pythonçš„Condaç®¡ç†è½¯ä»¶å‘½ä»¤\"},{\"text\":\"Pythonå…¥é—¨\",\"link\":\"/Document/Python/Pythonå…¥é—¨\"},{\"text\":\"Pythonæ¡†æ¶\",\"link\":\"/Document/Python/Pythonæ¡†æ¶\"},{\"text\":\"Pythonåº“\",\"link\":\"/Document/Python/Pythonåº“\"},{\"text\":\"Pythonè„šæœ¬å¼€å‘\",\"link\":\"/Document/Python/Pythonè„šæœ¬å¼€å‘\"},{\"text\":\"Pythonå®æˆ˜å¼€å‘\",\"link\":\"/Document/Python/Pythonå®æˆ˜å¼€å‘\"},{\"text\":\"Pythonçˆ¬è™«\",\"link\":\"/Document/Python/Pythonçˆ¬è™«\"},{\"text\":\"Pythonå¼€æºé¡¹ç›®\",\"link\":\"/Document/Python/Pythonå¼€æºé¡¹ç›®\"},{\"text\":\"Pythonä¸å…¶ä»–è¯­è¨€ç»“åˆ\",\"link\":\"/Document/Python/Pythonä¸å…¶ä»–è¯­è¨€ç»“åˆ\"},{\"text\":\"Pythoné¢è¯•é¢˜\",\"link\":\"/Document/Python/Pythoné¢è¯•é¢˜\"},{\"text\":\"\",\"link\":\"/Document/Python/\"}]},{\"text\":\"ğŸŒŸMojo\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Mojoè¯­è¨€ç®€ä»‹å’Œèµ„æº\",\"link\":\"/Document/Mojo/Mojoè¯­è¨€ç®€ä»‹å’Œèµ„æº\"},{\"text\":\"Mojoå¼€å‘ç¯å¢ƒæ­å»º\",\"link\":\"/Document/Mojo/Mojoå¼€å‘ç¯å¢ƒæ­å»º\"},{\"text\":\"\",\"link\":\"/Document/Mojo/\"},{\"text\":\"\",\"link\":\"/Document/Mojo/\"}]},{\"text\":\"ğŸŒŸPHP\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"PHPå­¦ä¹ èµ„æº\",\"link\":\"/Document/PHP/PHPå­¦ä¹ èµ„æº\"},{\"text\":\"\",\"link\":\"/Document/PHP/\"}]},{\"text\":\"ğŸŒŸSwift\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Swiftå­¦ä¹ èµ„æº\",\"link\":\"/Document/Swift/Swiftå­¦ä¹ èµ„æº\"},{\"text\":\"\",\"link\":\"/Document/Swift/\"},{\"text\":\"\",\"link\":\"/Document/Swift/\"}]},{\"text\":\"ğŸŒŸC/C++\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"C-C++å­¦ä¹ èµ„æº\",\"link\":\"/Document/C-C++/C-C++å­¦ä¹ èµ„æº\"},{\"text\":\"å¼€æºçš„C-C+åŒ…ç®¡ç†å·¥å…·\",\"link\":\"/Document/C-C++/å¼€æºçš„C-C+åŒ…ç®¡ç†å·¥å…·\"},{\"text\":\"C-C++è¯­è¨€ç›¸å…³å·¥å…·\",\"link\":\"/Document/C-C++/C-C++è¯­è¨€ç›¸å…³å·¥å…·\"},{\"text\":\"\",\"link\":\"/Document/C-C++/\"},{\"text\":\"\",\"link\":\"/Document/C-C++/\"}]},{\"text\":\"ğŸŒŸRust\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Rustå­¦ä¹ èµ„æº\",\"link\":\"/Document/Rust/Rustå­¦ä¹ èµ„æº\"},{\"text\":\"Rustå­¦ä¹ è·¯çº¿\",\"link\":\"/Document/Rust/Rustå­¦ä¹ è·¯çº¿\"},{\"text\":\"0.Rustä»‹ç»å’Œåº”ç”¨\",\"link\":\"/Document/Rust/0.Rustä»‹ç»å’Œåº”ç”¨\"},{\"text\":\"1.Rustå¼€å‘ç¯å¢ƒæ­å»º\",\"link\":\"/Document/Rust/1.Rustå¼€å‘ç¯å¢ƒæ­å»º\"},{\"text\":\"2.RuståŸºç¡€ç¯‡\",\"link\":\"/Document/Rust/2.RuståŸºç¡€ç¯‡\"},{\"text\":\"3.Rustè¿›é˜¶ç¯‡\",\"link\":\"/Document/Rust/3.Rustè¿›é˜¶ç¯‡\"},{\"text\":\"4.Rustæ¡†æ¶ç¯‡\",\"link\":\"/Document/Rust/4.Rustæ¡†æ¶ç¯‡\"},{\"text\":\"5.Rusté¡¹ç›®å®æˆ˜ç¯‡\",\"link\":\"/Document/Rust/5.Rusté¡¹ç›®å®æˆ˜ç¯‡\"},{\"text\":\"6.Rustä¸WebAssembly\",\"link\":\"/Document/Rust/6.Rustä¸WebAssembly\"},{\"text\":\"7.Rustè®¾è®¡æ¨¡å¼\",\"link\":\"/Document/Rust/7.Rustè®¾è®¡æ¨¡å¼\"},{\"text\":\"8.Rustæ¸¸æˆå¼€å‘\",\"link\":\"/Document/Rust/8.Rustæ¸¸æˆå¼€å‘\"},{\"text\":\"9.Rustç¨‹åºè°ƒè¯•\",\"link\":\"/Document/Rust/9.Rustç¨‹åºè°ƒè¯•\"},{\"text\":\"10.Rustæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å®æˆ˜\",\"link\":\"/Document/Rust/10.Rustæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å®æˆ˜\"},{\"text\":\"11.Rusté¢è¯•é¢˜\",\"link\":\"/Document/Rust/11.Rusté¢è¯•é¢˜\"},{\"text\":\"Rustæ¡†æ¶å’Œåº“\",\"link\":\"/Document/Rust/Rustæ¡†æ¶å’Œåº“\"},{\"text\":\"Rustå¼€æºé¡¹ç›®\",\"link\":\"/Document/Rust/Rustå¼€æºé¡¹ç›®\"},{\"text\":\"Rustç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ\",\"link\":\"/Document/Rust/Rustç§»åŠ¨ç«¯å¼€å‘ä½“éªŒ\"},{\"text\":\"Rustå’Œå…¶ä»–è¯­è¨€ç»“åˆ\",\"link\":\"/Document/Rust/Rustå’Œå…¶ä»–è¯­è¨€ç»“åˆ\"}]},{\"text\":\"ğŸŒŸLua\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Luaè¯­è¨€å­¦ä¹ èµ„æº\",\"link\":\"/Document/Lua/Luaè¯­è¨€å­¦ä¹ èµ„æº\"},{\"text\":\"LuaåŸºç¡€å…¥é—¨\",\"link\":\"/Document/Lua/LuaåŸºç¡€å…¥é—¨\"},{\"text\":\"LuaåŸºç¡€è¯­æ³•å…¥é—¨\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"1.å¼€å§‹\",\"link\":\"/Document/Lua/LuaåŸºç¡€å…¥é—¨/1.å¼€å§‹\"},{\"text\":\"2.ç±»å‹å’Œå€¼\",\"link\":\"/Document/Lua/LuaåŸºç¡€å…¥é—¨/2.ç±»å‹å’Œå€¼\"},{\"text\":\"3.è¡¨è¾¾å¼\",\"link\":\"/Document/Lua/LuaåŸºç¡€å…¥é—¨/3.è¡¨è¾¾å¼\"},{\"text\":\"4.è¯­å¥\",\"link\":\"/Document/Lua/LuaåŸºç¡€å…¥é—¨/4.è¯­å¥\"}]},{\"text\":\"Luaå®æˆ˜\",\"link\":\"/Document/Lua/Luaå®æˆ˜\"},{\"text\":\"Luaå¼€å‘å®‰å“åº”ç”¨\",\"link\":\"/Document/Lua/Luaå¼€å‘å®‰å“åº”ç”¨\"},{\"text\":\"\",\"link\":\"/Document/Lua/\"}]},{\"text\":\"ğŸŒŸZig\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Zigä»‹ç»\",\"link\":\"/Document/Zig/Zigä»‹ç»\"},{\"text\":\"Zigç›¸å…³å­¦ä¹ èµ„æº\",\"link\":\"/Document/Zig/Zigç›¸å…³å­¦ä¹ èµ„æº\"},{\"text\":\"Zigå…¥é—¨\",\"link\":\"/Document/Zig/Zigå…¥é—¨\"},{\"text\":\"\",\"link\":\"/Document/Zig/\"}]},{\"text\":\"ğŸŒŸæ±‡ç¼–\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ±‡ç¼–ç®€ä»‹å’Œèµ„æº\",\"link\":\"/Document/æ±‡ç¼–/æ±‡ç¼–ç®€ä»‹å’Œèµ„æº\"},{\"text\":\"æ±‡ç¼–å…¥é—¨\",\"link\":\"/Document/æ±‡ç¼–/æ±‡ç¼–å…¥é—¨\"},{\"text\":\"\",\"link\":\"/Document/æ±‡ç¼–/\"},{\"text\":\"æ±‡ç¼–å¼€æºé¡¹ç›®\",\"link\":\"/Document/æ±‡ç¼–/æ±‡ç¼–å¼€æºé¡¹ç›®\"},{\"text\":\"\",\"link\":\"/Document/æ±‡ç¼–/\"}]},{\"text\":\"Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘ç®€ä»‹\",\"link\":\"/Document/Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘/Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘ç®€ä»‹\"},{\"text\":\"Harmonyå¼€æºé¡¹ç›®\",\"link\":\"/Document/Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘/Harmonyå¼€æºé¡¹ç›®\"},{\"text\":\"\",\"link\":\"/Document/Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘/\"},{\"text\":\"\",\"link\":\"/Document/Harmonyé¸¿è’™ç³»ç»Ÿåº”ç”¨å¼€å‘/\"}]},{\"text\":\"AIå¤§è¯­è¨€æ¨¡å‹\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"AIå¤§è¯­è¨€æ¨¡å‹å­¦ä¹ èµ„æº\",\"link\":\"/Document/AIå¤§è¯­è¨€æ¨¡å‹/AIå¤§è¯­è¨€æ¨¡å‹å­¦ä¹ èµ„æº\"},{\"text\":\"AIæ¨¡å‹\",\"link\":\"/Document/AIå¤§è¯­è¨€æ¨¡å‹/AIæ¨¡å‹\"},{\"text\":\"\",\"link\":\"/Document/AIå¤§è¯­è¨€æ¨¡å‹/\"},{\"text\":\"\",\"link\":\"/Document/AIå¤§è¯­è¨€æ¨¡å‹/\"}]},{\"text\":\"æ•°æ®åº“\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"å¸¸ç”¨æ•°æ®åº“\",\"link\":\"/Document/æ•°æ®åº“/å¸¸ç”¨æ•°æ®åº“\"},{\"text\":\"æ•°æ®åº“å·¥å…·\",\"link\":\"/Document/æ•°æ®åº“/æ•°æ®åº“å·¥å…·\"},{\"text\":\"æ•°æ®åº“å·¥å…·\",\"link\":\"/Document/æ•°æ®åº“/æ•°æ®åº“å·¥å…·\"},{\"text\":\"æ•°æ®åº“å†…æ ¸å®ç°\",\"link\":\"/Document/æ•°æ®åº“/æ•°æ®åº“å†…æ ¸å®ç°\"},{\"text\":\"MySQL\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"MySQLå­¦ä¹ èµ„æº\",\"link\":\"/Document/æ•°æ®åº“/MySQL/MySQLå­¦ä¹ èµ„æº\"},{\"text\":\"MySQLå­¦ä¹ è·¯çº¿\",\"link\":\"/Document/æ•°æ®åº“/MySQL/MySQLå­¦ä¹ è·¯çº¿\"},{\"text\":\"MySQLå…¥é—¨\",\"link\":\"/Document/æ•°æ®åº“/MySQL/MySQLå…¥é—¨\"}]},{\"text\":\"SQLite\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"SQLite\",\"link\":\"/Document/æ•°æ®åº“/SQLite\"},{\"text\":\"\",\"link\":\"/Document/æ•°æ®åº“/SQLite/\"},{\"text\":\"\",\"link\":\"/Document/æ•°æ®åº“/SQLite/\"}]},{\"text\":\"\",\"link\":\"/Document/æ•°æ®åº“/\"},{\"text\":\"\",\"link\":\"/Document/æ•°æ®åº“/\"},{\"text\":\"\",\"link\":\"/Document/æ•°æ®åº“/\"}]},{\"text\":\"ğŸŒŸLinux\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Linuxå‘½ä»¤\",\"link\":\"/Document/Linux/Linuxå‘½ä»¤\"},{\"text\":\"Linuxå†…æ ¸\",\"link\":\"/Document/Linux/Linuxå†…æ ¸\"},{\"text\":\"Linuxè„šæœ¬\",\"link\":\"/Document/Linux/Linuxè„šæœ¬\"},{\"text\":\"\",\"link\":\"/Document/Linux/\"}]},{\"text\":\"ğŸŒŸDocker\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Dockerå…¥é—¨\",\"link\":\"/Document/Docker/Dockerå…¥é—¨\"},{\"text\":\"æ€ä¹ˆæŠŠç½‘ç«™å’ŒæœåŠ¡ç«¯åº”ç”¨æ¥å…¥Docker\",\"link\":\"/Document/Docker/æ€ä¹ˆæŠŠç½‘ç«™å’ŒæœåŠ¡ç«¯åº”ç”¨æ¥å…¥Docker\"},{\"text\":\"ğŸŒŸDockeråº”ç”¨\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Dockeråº”ç”¨æ”¶é›†\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Dockeråº”ç”¨æ”¶é›†\"},{\"text\":\"Dockerè‡ªå»ºäº‘æ‰‹æœº\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Dockerè‡ªå»ºäº‘æ‰‹æœº\"},{\"text\":\"Docker åŠ æŒçš„å®‰å“æ‰‹æœºï¼šéšèº«æºå¸¦çš„çŸ¥è¯†åº“\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Docker åŠ æŒçš„å®‰å“æ‰‹æœºï¼šéšèº«æºå¸¦çš„çŸ¥è¯†åº“\"},{\"text\":\"NASè‡ªæ‰˜ç®¡åº”ç”¨æœåŠ¡APPç«¯\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/NASè‡ªæ‰˜ç®¡åº”ç”¨æœåŠ¡APPç«¯\"},{\"text\":\"Webmanå®æˆ˜æ•™ç¨‹_è½»æ¾ä½¿ç”¨Dockeréƒ¨ç½²Webmané¡¹ç›®â€”æ‰“é€ ä¸“å±ä½ çš„Webåº”ç”¨\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Webmanå®æˆ˜æ•™ç¨‹_è½»æ¾ä½¿ç”¨Dockeréƒ¨ç½²Webmané¡¹ç›®â€”æ‰“é€ ä¸“å±ä½ çš„Webåº”ç”¨\"},{\"text\":\"Dockerå¿«é€Ÿå…¥é—¨å’Œéƒ¨ç½²ä½¿ç”¨æ•™ç¨‹\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Dockerå¿«é€Ÿå…¥é—¨å’Œéƒ¨ç½²ä½¿ç”¨æ•™ç¨‹\"},{\"text\":\"Docker-Desktopå¼€å¯å†…ç½®çš„K8Så¹¶å®‰è£…kuboardè¿›è¡Œå¾®æœåŠ¡ç®¡ç†\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/Docker-Desktopå¼€å¯å†…ç½®çš„K8Så¹¶å®‰è£…kuboardè¿›è¡Œå¾®æœåŠ¡ç®¡ç†\"},{\"text\":\"ä½¿ç”¨Watchtowerè‡ªåŠ¨æ›´æ–°Dockeré•œåƒä¸å®¹å™¨\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/ä½¿ç”¨Watchtowerè‡ªåŠ¨æ›´æ–°Dockeré•œåƒä¸å®¹å™¨\"},{\"text\":\"å¦‚ä½•ä¼˜é›…çš„å˜æ›´Docker-Desktopçš„é•œåƒå­˜å‚¨è·¯å¾„\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/å¦‚ä½•ä¼˜é›…çš„å˜æ›´Docker-Desktopçš„é•œåƒå­˜å‚¨è·¯å¾„\"},{\"text\":\"å¦‚ä½•ä½¿ç”¨ GitHub Actions æ„å»º Docker é•œåƒ\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/å¦‚ä½•ä½¿ç”¨ GitHub Actions æ„å»º Docker é•œåƒ\"},{\"text\":\"å¼€æºLinuxæœåŠ¡å™¨è¿ç»´é¢æ¿1Panelæ„å»ºPHPå®¹å™¨è¿è¡Œwebmanæ¡†æ¶\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/å¼€æºLinuxæœåŠ¡å™¨è¿ç»´é¢æ¿1Panelæ„å»ºPHPå®¹å™¨è¿è¡Œwebmanæ¡†æ¶\"},{\"text\":\"å°†Dockeré•œåƒç¼–è¯‘æˆç‹¬ç«‹å¯ç§»æ¤äºŒè¿›åˆ¶æ–‡ä»¶\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/å°†Dockeré•œåƒç¼–è¯‘æˆç‹¬ç«‹å¯ç§»æ¤äºŒè¿›åˆ¶æ–‡ä»¶\"},{\"text\":\"å‘Šåˆ«Dockerfile,æ‹¥æŠ± docker init æ„å»ºDockeré•œåƒ\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/å‘Šåˆ«Dockerfile,æ‹¥æŠ± docker init æ„å»ºDockeré•œåƒ\"},{\"text\":\"\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/\"},{\"text\":\"è‘«èŠ¦å¨ƒå¹³å°è‡ªåŠ¨é¢„çº¦èŒ…å°\",\"link\":\"/Document/Docker/Dockeråº”ç”¨/è‘«èŠ¦å¨ƒå¹³å°è‡ªåŠ¨é¢„çº¦èŒ…å°\"}]},{\"text\":\"ğŸŒŸNAS\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"NASç¡¬ä»¶æ¨è\",\"link\":\"/Document/Docker/NAS/NASç¡¬ä»¶æ¨è\"},{\"text\":\"NASç³»ç»Ÿæ¨è\",\"link\":\"/Document/Docker/NAS/NASç³»ç»Ÿæ¨è\"},{\"text\":\"NASå¥½å·¥å…·æ¨è\",\"link\":\"/Document/Docker/NAS/NASå¥½å·¥å…·æ¨è\"},{\"text\":\"ç¡¬ä»¶è®¾å¤‡æ”¹é€ æˆNAS\",\"link\":\"/Document/Docker/NAS/ç¡¬ä»¶è®¾å¤‡æ”¹é€ æˆNAS\"},{\"text\":\"é­”äº‘è…¾ZeusC1â€”â€”äº‘æ‰‹æœºå½“12ä¸ªæ‰‹æœºç”¨\",\"link\":\"/Document/Docker/NAS/é­”äº‘è…¾ZeusC1â€”â€”äº‘æ‰‹æœºå½“12ä¸ªæ‰‹æœºç”¨\"},{\"text\":\"\",\"link\":\"/Document/Docker/NAS/\"}]},{\"text\":\"\",\"link\":\"/Document/Docker/\"},{\"text\":\"\",\"link\":\"/Document/Docker/\"}]},{\"text\":\"ğŸŒŸç½‘ç»œå®‰å…¨\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"é»‘å®¢å·¥å…·ç³»åˆ—\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/é»‘å®¢å·¥å…·ç³»åˆ—\"},{\"text\":\"ç½‘ç»œå®‰å…¨ç¤¾åŒºè®ºå›\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ç½‘ç»œå®‰å…¨ç¤¾åŒºè®ºå›\"},{\"text\":\"é»‘å®¢è¾…åŠ©å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/é»‘å®¢è¾…åŠ©å·¥å…·\"},{\"text\":\"ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Venom-Crawlerè½¬ä¸ºæ¡æ´è€Œç”Ÿçš„çˆ¬è™«ç¥å™¨\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘/Venom-Crawlerè½¬ä¸ºæ¡æ´è€Œç”Ÿçš„çˆ¬è™«ç¥å™¨\"},{\"text\":\"å¯†æ¢å·¥å…·é›†GUIæ¸—é€ç‰ˆ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘/å¯†æ¢å·¥å…·é›†GUIæ¸—é€ç‰ˆ\"},{\"text\":\"Aomanå»æŒ‡çº¹æµè§ˆå™¨â€”ä¼ªé€ ä¸€ä¸ªå®‰å…¨çš„æ¸—é€ç¯å¢ƒ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘/Aomanå»æŒ‡çº¹æµè§ˆå™¨â€”ä¼ªé€ ä¸€ä¸ªå®‰å…¨çš„æ¸—é€ç¯å¢ƒ\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€ç½‘ç»œå®‰å…¨å·¥å…·å’Œä½¿ç”¨ã€‘/\"}]},{\"text\":\"æ€è·¯\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"ç½‘ç»œå®‰å…¨é˜²èº«ç§˜ç±\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/ç½‘ç»œå®‰å…¨é˜²èº«ç§˜ç±\"},{\"text\":\"ä¸€ç§åˆ©ç”¨åˆæ³•å·¥å…·æ¸—é€çš„æ–°å‹æ–¹æ³•\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/ä¸€ç§åˆ©ç”¨åˆæ³•å·¥å…·æ¸—é€çš„æ–°å‹æ–¹æ³•\"},{\"text\":\"HFish_æ°¸ä¹…å…è´¹â€”å·§è®¾èœœç½è¿·å±€\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/HFish_æ°¸ä¹…å…è´¹â€”å·§è®¾èœœç½è¿·å±€\"},{\"text\":\"Appæ¸—é€_äººè„¸è¯†åˆ«ç™»å½•ç»•è¿‡\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/Appæ¸—é€_äººè„¸è¯†åˆ«ç™»å½•ç»•è¿‡\"},{\"text\":\"è¿½è¸ªæ”»å‡»æºå¤´ ä»IPåœ°å€åˆ°æ”»å‡»è€…èº«ä»½çš„æº¯æºä¹‹æ—…\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/è¿½è¸ªæ”»å‡»æºå¤´ ä»IPåœ°å€åˆ°æ”»å‡»è€…èº«ä»½çš„æº¯æºä¹‹æ—…\"},{\"text\":\"åœ¨å®¶æ‰“å¡çš„æ–¹æ³•\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/åœ¨å®¶æ‰“å¡çš„æ–¹æ³•\"},{\"text\":\"ç½‘ç»œæ°´å†›\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/ç½‘ç»œæ°´å†›\"},{\"text\":\"å¦‚ä½•ä½¿ç”¨å¼€æºæƒ…æŠ¥è·Ÿè¸ªä¸€ä¸ªäºº\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/å¦‚ä½•ä½¿ç”¨å¼€æºæƒ…æŠ¥è·Ÿè¸ªä¸€ä¸ªäºº\"},{\"text\":\"ä½ æ˜¯å¦åœ¨æ­£ç¡®çš„ä½¿ç”¨vpn\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/ä½ æ˜¯å¦åœ¨æ­£ç¡®çš„ä½¿ç”¨vpn\"},{\"text\":\"å¯ç›‘å¬VPNçš„é»‘å®¢æŠ€æœ¯\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/å¯ç›‘å¬VPNçš„é»‘å®¢æŠ€æœ¯\"},{\"text\":\"åŸºäºLinuxå†…æ ¸çš„VPNå·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/åŸºäºLinuxå†…æ ¸çš„VPNå·¥å…·\"},{\"text\":\"æµè§ˆå™¨æ’ä»¶â€”ModHeader_åŠ©ä½ ç»•è¿‡å¾®ä¿¡æˆæƒç™»å½•é™åˆ¶\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/æµè§ˆå™¨æ’ä»¶â€”ModHeader_åŠ©ä½ ç»•è¿‡å¾®ä¿¡æˆæƒç™»å½•é™åˆ¶\"},{\"text\":\"æ£€æµ‹è‡ªå®¶æ‘„åƒå¤´æ˜¯å¦å­˜åœ¨æ¼æ´\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/æ£€æµ‹è‡ªå®¶æ‘„åƒå¤´æ˜¯å¦å­˜åœ¨æ¼æ´\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ€è·¯ã€‘/\"}]},{\"text\":\"KaliLinux\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"å®ä½“æœºå®‰è£…kaliæ•™ç¨‹\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/å®ä½“æœºå®‰è£…kaliæ•™ç¨‹\"},{\"text\":\"æ‰‹æœºå®‰è£…Kali Linux\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/æ‰‹æœºå®‰è£…Kali Linux\"},{\"text\":\"KaliLinuxå·¥å…·è„‘å›¾_å®‰å…¨ä¸“å®¶çš„å†›æ¢°åº“\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/KaliLinuxå·¥å…·è„‘å›¾_å®‰å…¨ä¸“å®¶çš„å†›æ¢°åº“\"},{\"text\":\"kali Linuxå®‰å…¨å·¥å…·é›†åˆ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/kali Linuxå®‰å…¨å·¥å…·é›†åˆ\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/\"},{\"text\":\"KaliLinuxä¸‹ç¼–å†™å®‰å“æœ¨é©¬\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/KaliLinuxä¸‹ç¼–å†™å®‰å“æœ¨é©¬\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€KaliLinuxã€‘/\"}]},{\"text\":\"æŠ“åŒ…é…ç½®\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"å®‰å“é«˜ç‰ˆæœ¬HTTPSæŠ“åŒ…ç»ˆæè§£å†³æ–¹æ¡ˆ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æŠ“åŒ…é…ç½®ã€‘/å®‰å“é«˜ç‰ˆæœ¬HTTPSæŠ“åŒ…ç»ˆæè§£å†³æ–¹æ¡ˆ\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æŠ“åŒ…é…ç½®ã€‘/\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æŠ“åŒ…é…ç½®ã€‘/\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æŠ“åŒ…é…ç½®ã€‘/\"}]},{\"text\":\"æ¸—é€æµ‹è¯•å·¥å…·\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ¸—é€æµ‹è¯•å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€æ¸—é€æµ‹è¯•å·¥å…·ã€‘/æ¸—é€æµ‹è¯•å·¥å…·\"}]},{\"text\":\"é€†å‘ç ´è§£\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"Magisk-Lsposed è§£å†³æŸéŸ³APPæŠ“åŒ…é—®é¢˜\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/Magisk-Lsposed è§£å†³æŸéŸ³APPæŠ“åŒ…é—®é¢˜\"},{\"text\":\"æŠ–éŸ³abogusé€†å‘åˆ†æ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/æŠ–éŸ³abogusé€†å‘åˆ†æ\"},{\"text\":\"JSé€†å‘å·¥å…·æ¸…å•\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/JSé€†å‘å·¥å…·æ¸…å•\"},{\"text\":\"jsé€†å‘\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/jsé€†å‘\"},{\"text\":\"fridaå…¥é—¨ä½¿ç”¨ä»‹ç»\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/fridaå…¥é—¨ä½¿ç”¨ä»‹ç»\"},{\"text\":\"Electronåº”ç”¨éªŒè¯ç ´è§£\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/Electronåº”ç”¨éªŒè¯ç ´è§£\"},{\"text\":\"clash+yaktæŠ“åŒ…å¾®ä¿¡å°ç¨‹åº\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/clash+yaktæŠ“åŒ…å¾®ä¿¡å°ç¨‹åº\"},{\"text\":\"APPé€†å‘ç ´è§£æ•™ç¨‹\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/APPé€†å‘ç ´è§£æ•™ç¨‹\"},{\"text\":\"APKé€†å‘å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/APKé€†å‘å·¥å…·\"},{\"text\":\"ç½‘ç»œå—…æ¢çš„åŸç†å’Œå¸¸ç”¨å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/ç½‘ç»œå—…æ¢çš„åŸç†å’Œå¸¸ç”¨å·¥å…·\"},{\"text\":\"å¼€æºé€†å‘å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/å¼€æºé€†å‘å·¥å…·\"},{\"text\":\"ã€è½¦è”ç½‘ã€‘è½¦è½½ Android åº”ç”¨æ”»å‡»-é€†å‘å·¥å…·\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/ã€è½¦è”ç½‘ã€‘è½¦è½½ Android åº”ç”¨æ”»å‡»-é€†å‘å·¥å…·\"},{\"text\":\"ã€å®‰å“é€†å‘ã€‘æ·˜ç³»æŠ“åŒ…æ±‡æ€»(é±¼ éº¦ çŒ« é¥¿ å®)\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/ã€å®‰å“é€†å‘ã€‘æ·˜ç³»æŠ“åŒ…æ±‡æ€»(é±¼ éº¦ çŒ« é¥¿ å®)\"},{\"text\":\"ã€å®‰å“é€†å‘ã€‘æŸéŸ³æµ·å¤–ç‰ˆtiktokæŠ“åŒ…\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/ã€å®‰å“é€†å‘ã€‘æŸéŸ³æµ·å¤–ç‰ˆtiktokæŠ“åŒ…\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é€†å‘ç ´è§£ã€‘/\"}]},{\"text\":\"é»‘å®¢æŠ€æœ¯\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ•°æ®ç»“æ„ç®—æ³•çš„åº”ç”¨\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é»‘å®¢æŠ€æœ¯ã€‘/æ•°æ®ç»“æ„ç®—æ³•çš„åº”ç”¨\"},{\"text\":\"ä¸åˆ·å›ºä»¶æ­¦è£…å®¶ç”¨è·¯ç”±å™¨\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é»‘å®¢æŠ€æœ¯ã€‘/ä¸åˆ·å›ºä»¶æ­¦è£…å®¶ç”¨è·¯ç”±å™¨\"},{\"text\":\"åé—¨æŠ€æœ¯\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é»‘å®¢æŠ€æœ¯ã€‘/åé—¨æŠ€æœ¯\"},{\"text\":\"åœ¨Windowsç³»ç»Ÿä¸‹ææƒçš„8ç§ä¸»è¦å§¿åŠ¿\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é»‘å®¢æŠ€æœ¯ã€‘/åœ¨Windowsç³»ç»Ÿä¸‹ææƒçš„8ç§ä¸»è¦å§¿åŠ¿\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ã€é»‘å®¢æŠ€æœ¯ã€‘/\"}]},{\"text\":\"ç½‘ç»œå®‰å…¨æ•™ç¨‹\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ç½‘ç»œå®‰å…¨æ•™ç¨‹\"},{\"text\":\"ç½‘ç»œå®‰å…¨ç›¸å…³ç¯å¢ƒ\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/ç½‘ç»œå®‰å…¨ç›¸å…³ç¯å¢ƒ\"},{\"text\":\"é»‘å®¢å¼€æºé¡¹ç›®\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/é»‘å®¢å¼€æºé¡¹ç›®\"},{\"text\":\"å®‰å…¨ç›¸å…³çš„å¼€æºé¡¹ç›®\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/å®‰å…¨ç›¸å…³çš„å¼€æºé¡¹ç›®\"},{\"text\":\"\",\"link\":\"/Document/ç½‘ç»œå®‰å…¨/\"}]},{\"text\":\"å¼€æºç›¸å…³\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"æ‰“é€ ä¸€ä¸ªèŠ±é‡Œèƒ¡å“¨çš„Githubä¸ªäººä¸»é¡µ\",\"link\":\"/Document/å¼€æºç›¸å…³/æ‰“é€ ä¸€ä¸ªèŠ±é‡Œèƒ¡å“¨çš„Githubä¸ªäººä¸»é¡µ\"},{\"text\":\"\",\"link\":\"/Document/å¼€æºç›¸å…³/\"},{\"text\":\"\",\"link\":\"/Document/å¼€æºç›¸å…³/\"},{\"text\":\"\",\"link\":\"/Document/å¼€æºç›¸å…³/\"},{\"text\":\"\",\"link\":\"/Document/å¼€æºç›¸å…³/\"},{\"text\":\"\",\"link\":\"/Document/å¼€æºç›¸å…³/\"}]}]},\"editLink\":{\"pattern\":\"https://gitee.com/muyaCode/program-learn-notes/edit/main/docs/:path\",\"text\":\"åœ¨ Giteeä¸Šç¼–è¾‘æ­¤é¡µ\"},\"lastUpdated\":{\"text\":\"ä¸Šæ¬¡æ›´æ–°ï¼š\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright Â© 2024  heyu\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>